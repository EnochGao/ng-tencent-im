!function(){function e(e){return r(e)||s(e)||u(e)||i()}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){return r(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(u){a=!0,r=u}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(e,t)||u(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){if(Array.isArray(e))return e}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||s(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return h(e,arguments,_(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),p(i,e)})(e)}function h(e,t,n){return(h=y()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&p(r,n.prototype),r}).apply(null,arguments)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=y();return function(){var n,i=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}(self.webpackChunkngx_tencent_im=self.webpackChunkngx_tencent_im||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3644:function(e,t,n){var i,r,o;!function(s){if("object"==typeof e.exports){var a=s(0,t);void 0!==a&&(e.exports=a)}else r=[n,t],void 0===(o="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=o)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=void 0;t.default=["zh",[["\u4e0a\u5348","\u4e0b\u5348"],n,n],n,[["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"]],n,[["1","2","3","4","5","6","7","8","9","10","11","12"],["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]],n,[["\u516c\u5143\u524d","\u516c\u5143"],n,n],0,[6,0],["y/M/d","y\u5e74M\u6708d\u65e5",n,"y\u5e74M\u6708d\u65e5EEEE"],["ah:mm","ah:mm:ss","z ah:mm:ss","zzzz ah:mm:ss"],["{1} {0}",n,n,n],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"CNY","\xa5","\u4eba\u6c11\u5e01",{AUD:["AU$","$"],CNY:["\xa5"],ILR:["ILS"],JPY:["JP\xa5","\xa5"],KRW:["\uffe6","\u20a9"],TWD:["NT$"],USD:["US$","$"],XXX:[]},"ltr",function(e){return 5}]})},8490:function(e){e.exports=function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},i=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")(),r=function(e){try{return!!e()}catch(t){return!0}},o=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),s={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,u={f:a&&!s.call({1:2},1)?function(e){var t=a(this,e);return!!t&&t.enumerable}:s},c=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},l={}.toString,h=function(e){return l.call(e).slice(8,-1)},f="".split,d=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==h(e)?f.call(e,""):Object(e)}:Object,p=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return d(p(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},m=function(e,t){if(!v(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!v(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!v(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!v(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},y={}.hasOwnProperty,_=function(e,t){return y.call(e,t)},b=i.document,k=v(b)&&v(b.createElement),w=function(e){return k?b.createElement(e):{}},C=!o&&!r(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a}),S=Object.getOwnPropertyDescriptor,E={f:o?S:function(e,t){if(e=g(e),t=m(t,!0),C)try{return S(e,t)}catch(n){}if(_(e,t))return c(!u.f.call(e,t),e[t])}},I=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},T=Object.defineProperty,M={f:o?T:function(e,t,n){if(I(e),t=m(t,!0),I(n),C)try{return T(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},O=o?function(e,t,n){return M.f(e,t,c(1,n))}:function(e,t,n){return e[t]=n,e},D=function(e,t){try{O(i,e,t)}catch(n){i[e]=t}return t},A=i["__core-js_shared__"]||D("__core-js_shared__",{}),x=Function.toString;"function"!=typeof A.inspectSource&&(A.inspectSource=function(e){return x.call(e)});var R,P,z,L=A.inspectSource,N=i.WeakMap,F="function"==typeof N&&/native code/.test(L(N)),U=t(function(e){(e.exports=function(e,t){return A[e]||(A[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})}),G=0,V=Math.random(),j=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++G+V).toString(36)},B=U("keys"),H=function(e){return B[e]||(B[e]=j(e))},q={};if(F){var W=new(0,i.WeakMap),K=W.get,Y=W.has,$=W.set;R=function(e,t){return $.call(W,e,t),t},P=function(e){return K.call(W,e)||{}},z=function(e){return Y.call(W,e)}}else{var Z=H("state");q[Z]=!0,R=function(e,t){return O(e,Z,t),t},P=function(e){return _(e,Z)?e[Z]:{}},z=function(e){return _(e,Z)}}var X,J,Q={set:R,get:P,has:z,enforce:function(e){return z(e)?P(e):R(e,{})},getterFor:function(e){return function(t){var n;if(!v(t)||(n=P(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},ee=t(function(e){var t=Q.get,n=Q.enforce,r=String(String).split("String");(e.exports=function(e,t,o,s){var a=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;"function"==typeof o&&("string"!=typeof t||_(o,"name")||O(o,"name",t),n(o).source=r.join("string"==typeof t?t:"")),e!==i?(a?!c&&e[t]&&(u=!0):delete e[t],u?e[t]=o:O(e,t,o)):u?e[t]=o:D(t,o)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||L(this)})}),te=i,ne=function(e){return"function"==typeof e?e:void 0},ie=function(e,t){return arguments.length<2?ne(te[e])||ne(i[e]):te[e]&&te[e][t]||i[e]&&i[e][t]},re=Math.ceil,oe=Math.floor,se=function(e){return isNaN(e=+e)?0:(e>0?oe:re)(e)},ae=Math.min,ue=function(e){return e>0?ae(se(e),9007199254740991):0},ce=Math.max,le=Math.min,he=function(e,t){var n=se(e);return n<0?ce(n+t,0):le(n,t)},fe=function(e){return function(t,n,i){var r,o=g(t),s=ue(o.length),a=he(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},de={includes:fe(!0),indexOf:fe(!1)},pe=de.indexOf,ge=function(e,t){var n,i=g(e),r=0,o=[];for(n in i)!_(q,n)&&_(i,n)&&o.push(n);for(;t.length>r;)_(i,n=t[r++])&&(~pe(o,n)||o.push(n));return o},ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],me=ve.concat("length","prototype"),ye={f:Object.getOwnPropertyNames||function(e){return ge(e,me)}},_e={f:Object.getOwnPropertySymbols},be=ie("Reflect","ownKeys")||function(e){var t=ye.f(I(e)),n=_e.f;return n?t.concat(n(e)):t},ke=function(e,t){for(var n=be(t),i=M.f,r=E.f,o=0;o<n.length;o++){var s=n[o];_(e,s)||i(e,s,r(t,s))}},we=/#|\.prototype\./,Ce=function(e,t){var n=Ee[Se(e)];return n==Te||n!=Ie&&("function"==typeof t?r(t):!!t)},Se=Ce.normalize=function(e){return String(e).replace(we,".").toLowerCase()},Ee=Ce.data={},Ie=Ce.NATIVE="N",Te=Ce.POLYFILL="P",Me=Ce,Oe=E.f,De=function(e,t){var n,r,o,s,a,u=e.target,c=e.global,l=e.stat;if(n=c?i:l?i[u]||D(u,{}):(i[u]||{}).prototype)for(r in t){if(s=t[r],o=e.noTargetGet?(a=Oe(n,r))&&a.value:n[r],!Me(c?r:u+(l?".":"#")+r,e.forced)&&void 0!==o){if(typeof s==typeof o)continue;ke(s,o)}(e.sham||o&&o.sham)&&O(s,"sham",!0),ee(n,r,s,e)}},Ae=Array.isArray||function(e){return"Array"==h(e)},xe=function(e){return Object(p(e))},Re=function(e,t,n){var i=m(t);i in e?M.f(e,i,c(0,n)):e[i]=n},Pe=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())}),ze=Pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Le=U("wks"),Ne=i.Symbol,Fe=ze?Ne:Ne&&Ne.withoutSetter||j,Ue=function(e){return _(Le,e)||(Le[e]=Pe&&_(Ne,e)?Ne[e]:Fe("Symbol."+e)),Le[e]},Ge=Ue("species"),Ve=function(e,t){var n;return Ae(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Ae(n.prototype)?v(n)&&null===(n=n[Ge])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},je=ie("navigator","userAgent")||"",Be=i.process,He=Be&&Be.versions,qe=He&&He.v8;qe?J=(X=qe.split("."))[0]+X[1]:je&&(!(X=je.match(/Edge\/(\d+)/))||X[1]>=74)&&(X=je.match(/Chrome\/(\d+)/))&&(J=X[1]);var We=J&&+J,Ke=Ue("species"),Ye=function(e){return We>=51||!r(function(){var t=[];return(t.constructor={})[Ke]=function(){return{foo:1}},1!==t[e](Boolean).foo})},$e=Ue("isConcatSpreadable"),Ze=We>=51||!r(function(){var e=[];return e[$e]=!1,e.concat()[0]!==e}),Xe=Ye("concat"),Je=function(e){if(!v(e))return!1;var t=e[$e];return void 0!==t?!!t:Ae(e)};De({target:"Array",proto:!0,forced:!Ze||!Xe},{concat:function(e){var t,n,i,r,o,s=xe(this),a=Ve(s,0),u=0;for(t=-1,i=arguments.length;t<i;t++)if(Je(o=-1===t?s:arguments[t])){if(u+(r=ue(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,u++)n in o&&Re(a,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Re(a,u++,o)}return a.length=u,a}});var Qe=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},et=function(e,t,n){if(Qe(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},nt=[].push,it=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,s=5==e||o;return function(a,u,c,l){for(var h,f,p=xe(a),g=d(p),v=et(u,c,3),m=ue(g.length),y=0,_=l||Ve,b=t?_(a,m):n?_(a,0):void 0;m>y;y++)if((s||y in g)&&(f=v(h=g[y],y,p),e))if(t)b[y]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:nt.call(b,h)}else if(r)return!1;return o?-1:i||r?r:b}},rt={forEach:it(0),map:it(1),filter:it(2),some:it(3),every:it(4),find:it(5),findIndex:it(6)},ot=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})},st=Object.defineProperty,at={},ut=function(e){throw e},ct=function(e,t){if(_(at,e))return at[e];t||(t={});var n=[][e],i=!!_(t,"ACCESSORS")&&t.ACCESSORS,s=_(t,0)?t[0]:ut,a=_(t,1)?t[1]:void 0;return at[e]=!!n&&!r(function(){if(i&&!o)return!0;var e={length:-1};i?st(e,1,{enumerable:!0,get:ut}):e[1]=1,n.call(e,s,a)})},lt=rt.forEach,ht=ot("forEach"),ft=ct("forEach"),dt=ht&&ft?[].forEach:function(e){return lt(this,e,arguments.length>1?arguments[1]:void 0)};De({target:"Array",proto:!0,forced:[].forEach!=dt},{forEach:dt});var pt=function(e,t,n,i){try{return i?t(I(n)[0],n[1]):t(n)}catch(o){var r=e.return;throw void 0!==r&&I(r.call(e)),o}},gt={},vt=Ue("iterator"),mt=Array.prototype,yt=function(e){return void 0!==e&&(gt.Array===e||mt[vt]===e)},_t={};_t[Ue("toStringTag")]="z";var bt="[object z]"===String(_t),kt=Ue("toStringTag"),wt="Arguments"==h(function(){return arguments}()),Ct=bt?h:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),kt))?n:wt?h(t):"Object"==(i=h(t))&&"function"==typeof t.callee?"Arguments":i},St=Ue("iterator"),Et=function(e){if(null!=e)return e[St]||e["@@iterator"]||gt[Ct(e)]},It=function(e){var t,n,i,r,o,s,a=xe(e),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,f=Et(a),d=0;if(h&&(l=et(l,c>2?arguments[2]:void 0,2)),null==f||u==Array&&yt(f))for(n=new u(t=ue(a.length));t>d;d++)s=h?l(a[d],d):a[d],Re(n,d,s);else for(o=(r=f.call(a)).next,n=new u;!(i=o.call(r)).done;d++)s=h?pt(r,l,[i.value,d],!0):i.value,Re(n,d,s);return n.length=d,n},Tt=Ue("iterator"),Mt=!1;try{var Ot=0,Dt={next:function(){return{done:!!Ot++}},return:function(){Mt=!0}};Dt[Tt]=function(){return this},Array.from(Dt,function(){throw 2})}catch(Iv){}var At=function(e,t){if(!t&&!Mt)return!1;var n=!1;try{var i={};i[Tt]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(Iv){}return n},xt=!At(function(e){Array.from(e)});De({target:"Array",stat:!0,forced:xt},{from:It});var Rt,Pt=Object.keys||function(e){return ge(e,ve)},zt=o?Object.defineProperties:function(e,t){I(e);for(var n,i=Pt(t),r=i.length,o=0;r>o;)M.f(e,n=i[o++],t[n]);return e},Lt=ie("document","documentElement"),Nt=H("IE_PROTO"),Ft=function(){},Ut=function(e){return"<script>"+e+"<\/script>"},Gt=function(){try{Rt=document.domain&&new ActiveXObject("htmlfile")}catch(Iv){}var e,t;Gt=Rt?function(e){e.write(Ut("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Rt):((t=w("iframe")).style.display="none",Lt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ut("document.F=Object")),e.close(),e.F);for(var n=ve.length;n--;)delete Gt.prototype[ve[n]];return Gt()};q[Nt]=!0;var Vt=Object.create||function(e,t){var n;return null!==e?(Ft.prototype=I(e),n=new Ft,Ft.prototype=null,n[Nt]=e):n=Gt(),void 0===t?n:zt(n,t)};De({target:"Object",stat:!0,sham:!o},{create:Vt});var jt=r(function(){Pt(1)});De({target:"Object",stat:!0,forced:jt},{keys:function(e){return Pt(xe(e))}});var Bt,Ht,qt,Wt=function(e){return function(t,n){var i,r,o=String(p(t)),s=se(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):i:e?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},Kt={codeAt:Wt(!1),charAt:Wt(!0)},Yt=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),$t=H("IE_PROTO"),Zt=Object.prototype,Xt=Yt?Object.getPrototypeOf:function(e){return e=xe(e),_(e,$t)?e[$t]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Zt:null},Jt=Ue("iterator"),Qt=!1;[].keys&&("next"in(qt=[].keys())?(Ht=Xt(Xt(qt)))!==Object.prototype&&(Bt=Ht):Qt=!0),null==Bt&&(Bt={}),_(Bt,Jt)||O(Bt,Jt,function(){return this});var en={IteratorPrototype:Bt,BUGGY_SAFARI_ITERATORS:Qt},tn=M.f,nn=Ue("toStringTag"),rn=function(e,t,n){e&&!_(e=n?e:e.prototype,nn)&&tn(e,nn,{configurable:!0,value:t})},on=en.IteratorPrototype,sn=function(){return this},an=function(e,t,n){var i=t+" Iterator";return e.prototype=Vt(on,{next:c(1,n)}),rn(e,i,!1),gt[i]=sn,e},un=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(Iv){}return function(n,i){return I(n),function(e){if(!v(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),cn=en.IteratorPrototype,ln=en.BUGGY_SAFARI_ITERATORS,hn=Ue("iterator"),fn=function(){return this},dn=function(e,t,n,i,r,o,s){an(n,t,i);var a,u,c,l=function(e){if(e===r&&g)return g;if(!ln&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,d=e.prototype,p=d[hn]||d["@@iterator"]||r&&d[r],g=!ln&&p||l(r),v="Array"==t&&d.entries||p;if(v&&(a=Xt(v.call(new e)),cn!==Object.prototype&&a.next&&(Xt(a)!==cn&&(un?un(a,cn):"function"!=typeof a[hn]&&O(a,hn,fn)),rn(a,h,!0))),"values"==r&&p&&"values"!==p.name&&(f=!0,g=function(){return p.call(this)}),d[hn]!==g&&O(d,hn,g),gt[t]=g,r)if(u={values:l("values"),keys:o?g:l("keys"),entries:l("entries")},s)for(c in u)(ln||f||!(c in d))&&ee(d,c,u[c]);else De({target:t,proto:!0,forced:ln||f},u);return u},pn=Kt.charAt,gn=Q.set,vn=Q.getterFor("String Iterator");dn(String,"String",function(e){gn(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=vn(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=pn(n,i),t.index+=e.length,{value:e,done:!1})});var mn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var yn in mn){var _n=i[yn],bn=_n&&_n.prototype;if(bn&&bn.forEach!==dt)try{O(bn,"forEach",dt)}catch(Iv){bn.forEach=dt}}var kn={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",PROFILE_UPDATED:"onProfileUpdated",BLACKLIST_UPDATED:"blacklistUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},wn={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__"},Cn=rt.map,Sn=Ye("map"),En=ct("map");De({target:"Array",proto:!0,forced:!Sn||!En},{map:function(e){return Cn(this,e,arguments.length>1?arguments[1]:void 0)}});var In=[].slice,Tn={},Mn=function(e,t,n){if(!(t in Tn)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";Tn[t]=Function("C,a","return new C("+i.join(",")+")")}return Tn[t](e,n)};function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xn(e,t,n){return t&&An(e.prototype,t),n&&An(e,n),e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach(function(t){Rn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ln(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Un(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function Gn(e,t,n){return(Gn=Un()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Fn(r,n.prototype),r}).apply(null,arguments)}function Vn(e){var t="function"==typeof Map?new Map:void 0;return(Vn=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Gn(e,arguments,Nn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Fn(n,e)})(e)}function jn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Bn(e):t}function qn(e){var t=Un();return function(){var n,i=Nn(e);if(t){var r=Nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Hn(this,n)}}function Wn(e,t){return Yn(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(e,t)||Zn(e,t)||Jn()}function Kn(e){return function(e){if(Array.isArray(e))return Xn(e)}(e)||$n(e)||Zn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(e){if(Array.isArray(e))return e}function $n(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Zn(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Zn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}De({target:"Function",proto:!0},{bind:Function.bind||function(e){var t=Qe(this),n=In.call(arguments,1),i=function i(){var r=n.concat(In.call(arguments));return this instanceof i?Mn(t,r.length,r):t.apply(e,r)};return v(t.prototype)&&(i.prototype=t.prototype),i}});var ei=function(){function e(){Dn(this,e),this.cache=[],this.options=null}return xn(e,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map(function(e){return e}),this.options=e,this.next()}}]),e}(),ti=Function.prototype,ni=ti.toString,ii=/^\s*function ([^ (]*)/;o&&!("name"in ti)&&(0,M.f)(ti,"name",{configurable:!0,get:function(){try{return ni.call(this).match(ii)[1]}catch(Iv){return""}}});var ri=t(function(t,n){var i,r,o,s,a,u,c,l,h,f,d,p,g,v,m,y,_,b;t.exports=(i="function"==typeof Promise,r="object"==typeof self?self:e,o="undefined"!=typeof Symbol,s="undefined"!=typeof Map,a="undefined"!=typeof Set,u="undefined"!=typeof WeakMap,c="undefined"!=typeof WeakSet,l="undefined"!=typeof DataView,h=o&&void 0!==Symbol.iterator,f=o&&void 0!==Symbol.toStringTag,d=a&&"function"==typeof Set.prototype.entries,p=s&&"function"==typeof Map.prototype.entries,g=d&&Object.getPrototypeOf((new Set).entries()),v=p&&Object.getPrototypeOf((new Map).entries()),m=h&&"function"==typeof Array.prototype[Symbol.iterator],y=m&&Object.getPrototypeOf([][Symbol.iterator]()),_=h&&"function"==typeof String.prototype[Symbol.iterator],b=_&&Object.getPrototypeOf(""[Symbol.iterator]()),function(e){var t=typeof e;if("object"!==t)return t;if(null===e)return"null";if(e===r)return"global";if(Array.isArray(e)&&(!1===f||!(Symbol.toStringTag in e)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&e===window.location)return"Location";if("object"==typeof window.document&&e===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&e===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if("BLOCKQUOTE"===e.tagName)return"HTMLQuoteElement";if("TD"===e.tagName)return"HTMLTableDataCellElement";if("TH"===e.tagName)return"HTMLTableHeaderCellElement"}}var n=f&&e[Symbol.toStringTag];if("string"==typeof n)return n;var o=Object.getPrototypeOf(e);return o===RegExp.prototype?"RegExp":o===Date.prototype?"Date":i&&o===Promise.prototype?"Promise":a&&o===Set.prototype?"Set":s&&o===Map.prototype?"Map":c&&o===WeakSet.prototype?"WeakSet":u&&o===WeakMap.prototype?"WeakMap":l&&o===DataView.prototype?"DataView":s&&o===v?"Map Iterator":a&&o===g?"Set Iterator":m&&o===y?"Array Iterator":_&&o===b?"String Iterator":null===o?"Object":Object.prototype.toString.call(e).slice(8,-1)})});De({target:"Array",stat:!0},{isArray:Ae});var oi=Ue("unscopables"),si=Array.prototype;null==si[oi]&&M.f(si,oi,{configurable:!0,value:Vt(null)});var ai=function(e){si[oi][e]=!0},ui=rt.find,ci=!0,li=ct("find");"find"in[]&&Array(1).find(function(){ci=!1}),De({target:"Array",proto:!0,forced:ci||!li},{find:function(e){return ui(this,e,arguments.length>1?arguments[1]:void 0)}}),ai("find");var hi=de.includes,fi=ct("indexOf",{ACCESSORS:!0,1:0});De({target:"Array",proto:!0,forced:!fi},{includes:function(e){return hi(this,e,arguments.length>1?arguments[1]:void 0)}}),ai("includes");var di=de.indexOf,pi=[].indexOf,gi=!!pi&&1/[1].indexOf(1,-0)<0,vi=ot("indexOf"),mi=ct("indexOf",{ACCESSORS:!0,1:0});De({target:"Array",proto:!0,forced:gi||!vi||!mi},{indexOf:function(e){return gi?pi.apply(this,arguments)||0:di(this,e,arguments.length>1?arguments[1]:void 0)}});var yi=Q.set,_i=Q.getterFor("Array Iterator"),bi=dn(Array,"Array",function(e,t){yi(this,{type:"Array Iterator",target:g(e),index:0,kind:t})},function(){var e=_i(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values");gt.Arguments=gt.Array,ai("keys"),ai("values"),ai("entries");var ki=[].join,wi=d!=Object,Ci=ot("join",",");De({target:"Array",proto:!0,forced:wi||!Ci},{join:function(e){return ki.call(g(this),void 0===e?",":e)}});var Si=Ye("slice"),Ei=ct("slice",{ACCESSORS:!0,0:0,1:2}),Ii=Ue("species"),Ti=[].slice,Mi=Math.max;De({target:"Array",proto:!0,forced:!Si||!Ei},{slice:function(e,t){var n,i,r,o=g(this),s=ue(o.length),a=he(e,s),u=he(void 0===t?s:t,s);if(Ae(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ae(n.prototype)?v(n)&&null===(n=n[Ii])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ti.call(o,a,u);for(i=new(void 0===n?Array:n)(Mi(u-a,0)),r=0;a<u;a++,r++)a in o&&Re(i,r,o[a]);return i.length=r,i}}),De({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Oi="".repeat||function(e){var t=String(p(this)),n="",i=se(e);if(i<0||1/0==i)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},Di=Math.ceil,Ai=function(e){return function(t,n,i){var r,o,s=String(p(t)),a=s.length,u=void 0===i?" ":String(i),c=ue(n);return c<=a||""==u?s:((o=Oi.call(u,Di((r=c-a)/u.length))).length>r&&(o=o.slice(0,r)),e?s+o:o+s)}},xi=[Ai(!1),Ai(!0)][0],Ri=Math.abs,Pi=Date.prototype,zi=Pi.getTime,Li=Pi.toISOString,Ni=r(function(){return"0385-07-25T07:06:39.999Z"!=Li.call(new Date(-50000000000001))})||!r(function(){Li.call(new Date(NaN))})?function(){if(!isFinite(zi.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+xi(Ri(e),n?6:4,0)+"-"+xi(this.getUTCMonth()+1,2,0)+"-"+xi(this.getUTCDate(),2,0)+"T"+xi(this.getUTCHours(),2,0)+":"+xi(this.getUTCMinutes(),2,0)+":"+xi(this.getUTCSeconds(),2,0)+"."+xi(t,3,0)+"Z"}:Li;De({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Ni},{toISOString:Ni});var Fi=Date.prototype,Ui=Fi.toString,Gi=Fi.getTime;new Date(NaN)+""!="Invalid Date"&&ee(Fi,"toString",function(){var e=Gi.call(this);return e==e?Ui.call(this):"Invalid Date"});var Vi=function(e,t,n){var i,r;return un&&"function"==typeof(i=t.constructor)&&i!==n&&v(r=i.prototype)&&r!==n.prototype&&un(e,r),e},ji="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Bi="["+ji+"]",Hi=RegExp("^"+Bi+Bi+"*"),qi=RegExp(Bi+Bi+"*$"),Wi=function(e){return function(t){var n=String(p(t));return 1&e&&(n=n.replace(Hi,"")),2&e&&(n=n.replace(qi,"")),n}},Ki={start:Wi(1),end:Wi(2),trim:Wi(3)},Yi=ye.f,$i=E.f,Zi=M.f,Xi=Ki.trim,Ji=i.Number,Qi=Ji.prototype,er="Number"==h(Vt(Qi)),tr=function(e){var t,n,i,r,o,s,a,u,c=m(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=Xi(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(s=(o=c.slice(2)).length,a=0;a<s;a++)if((u=o.charCodeAt(a))<48||u>r)return NaN;return parseInt(o,i)}return+c};if(Me("Number",!Ji(" 0o1")||!Ji("0b1")||Ji("+0x1"))){for(var nr,ir=function e(t){var n=arguments.length<1?0:t,i=this;return i instanceof e&&(er?r(function(){Qi.valueOf.call(i)}):"Number"!=h(i))?Vi(new Ji(tr(n)),i,e):tr(n)},rr=o?Yi(Ji):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),or=0;rr.length>or;or++)_(Ji,nr=rr[or])&&!_(ir,nr)&&Zi(ir,nr,$i(Ji,nr));ir.prototype=Qi,Qi.constructor=ir,ee(i,"Number",ir)}var sr=ye.f,ar={}.toString,ur="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],cr={f:function(e){return ur&&"[object Window]"==ar.call(e)?function(e){try{return sr(e)}catch(Iv){return ur.slice()}}(e):sr(g(e))}},lr=cr.f,hr=r(function(){return!Object.getOwnPropertyNames(1)});De({target:"Object",stat:!0,forced:hr},{getOwnPropertyNames:lr});var fr=r(function(){Xt(1)});De({target:"Object",stat:!0,forced:fr,sham:!Yt},{getPrototypeOf:function(e){return Xt(xe(e))}}),bt||ee(Object.prototype,"toString",bt?{}.toString:function(){return"[object "+Ct(this)+"]"},{unsafe:!0});var dr=Ki.trim,pr=i.parseInt,gr=/^[+-]?0[Xx]/,vr=8!==pr(ji+"08")||22!==pr(ji+"0x16")?function(e,t){var n=dr(String(e));return pr(n,t>>>0||(gr.test(n)?16:10))}:pr;De({global:!0,forced:parseInt!=vr},{parseInt:vr});var mr,yr,_r,br=i.Promise,kr=function(e,t,n){for(var i in t)ee(e,i,t[i],n);return e},wr=Ue("species"),Cr=function(e){var t=ie(e);o&&t&&!t[wr]&&(0,M.f)(t,wr,{configurable:!0,get:function(){return this}})},Sr=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Er=t(function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,i,r,o){var s,a,u,c,l,h,f,d=et(n,i,r?2:1);if(o)s=e;else{if("function"!=typeof(a=Et(e)))throw TypeError("Target is not iterable");if(yt(a)){for(u=0,c=ue(e.length);c>u;u++)if((l=r?d(I(f=e[u])[0],f[1]):d(e[u]))&&l instanceof t)return l;return new t(!1)}s=a.call(e)}for(h=s.next;!(f=h.call(s)).done;)if("object"==typeof(l=pt(s,d,f.value,r))&&l&&l instanceof t)return l;return new t(!1)}).stop=function(e){return new t(!0,e)}}),Ir=Ue("species"),Tr=function(e,t){var n,i=I(e).constructor;return void 0===i||null==(n=I(i)[Ir])?t:Qe(n)},Mr=/(iphone|ipod|ipad).*applewebkit/i.test(je),Or=i.location,Dr=i.setImmediate,Ar=i.clearImmediate,xr=i.process,Rr=i.MessageChannel,Pr=i.Dispatch,zr=0,Lr={},Nr=function(e){if(Lr.hasOwnProperty(e)){var t=Lr[e];delete Lr[e],t()}},Fr=function(e){return function(){Nr(e)}},Ur=function(e){Nr(e.data)},Gr=function(e){i.postMessage(e+"",Or.protocol+"//"+Or.host)};Dr&&Ar||(Dr=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Lr[++zr]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},mr(zr),zr},Ar=function(e){delete Lr[e]},"process"==h(xr)?mr=function(e){xr.nextTick(Fr(e))}:Pr&&Pr.now?mr=function(e){Pr.now(Fr(e))}:Rr&&!Mr?(_r=(yr=new Rr).port2,yr.port1.onmessage=Ur,mr=et(_r.postMessage,_r,1)):!i.addEventListener||"function"!=typeof postMessage||i.importScripts||r(Gr)||"file:"===Or.protocol?mr="onreadystatechange"in w("script")?function(e){Lt.appendChild(w("script")).onreadystatechange=function(){Lt.removeChild(this),Nr(e)}}:function(e){setTimeout(Fr(e),0)}:(mr=Gr,i.addEventListener("message",Ur,!1)));var Vr,jr,Br,Hr,qr,Wr,Kr,Yr,$r={set:Dr,clear:Ar},Zr=E.f,Xr=$r.set,Jr=i.MutationObserver||i.WebKitMutationObserver,Qr=i.process,eo=i.Promise,to="process"==h(Qr),no=Zr(i,"queueMicrotask"),io=no&&no.value;io||(Vr=function(){var e,t;for(to&&(e=Qr.domain)&&e.exit();jr;){t=jr.fn,jr=jr.next;try{t()}catch(Iv){throw jr?Hr():Br=void 0,Iv}}Br=void 0,e&&e.enter()},to?Hr=function(){Qr.nextTick(Vr)}:Jr&&!Mr?(qr=!0,Wr=document.createTextNode(""),new Jr(Vr).observe(Wr,{characterData:!0}),Hr=function(){Wr.data=qr=!qr}):eo&&eo.resolve?(Kr=eo.resolve(void 0),Yr=Kr.then,Hr=function(){Yr.call(Kr,Vr)}):Hr=function(){Xr.call(i,Vr)});var ro,oo,so,ao,uo=io||function(e){var t={fn:e,next:void 0};Br&&(Br.next=t),jr||(jr=t,Hr()),Br=t},co=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=Qe(t),this.reject=Qe(n)},lo={f:function(e){return new co(e)}},ho=function(e,t){if(I(e),v(t)&&t.constructor===e)return t;var n=lo.f(e);return(0,n.resolve)(t),n.promise},fo=function(e){try{return{error:!1,value:e()}}catch(Iv){return{error:!0,value:Iv}}},po=$r.set,go=Ue("species"),vo="Promise",mo=Q.get,yo=Q.set,_o=Q.getterFor(vo),bo=br,ko=i.TypeError,wo=i.document,Co=i.process,So=ie("fetch"),Eo=lo.f,Io=Eo,To="process"==h(Co),Mo=!!(wo&&wo.createEvent&&i.dispatchEvent),Oo=Me(vo,function(){if(L(bo)===String(bo)){if(66===We)return!0;if(!To&&"function"!=typeof PromiseRejectionEvent)return!0}if(We>=51&&/native code/.test(bo))return!1;var e=bo.resolve(1),t=function(e){e(function(){},function(){})};return(e.constructor={})[go]=t,!(e.then(function(){})instanceof t)}),Do=Oo||!At(function(e){bo.all(e).catch(function(){})}),Ao=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},xo=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;uo(function(){for(var r=t.value,o=1==t.state,s=0;i.length>s;){var a,u,c,l=i[s++],h=o?l.ok:l.fail,f=l.resolve,d=l.reject,p=l.domain;try{h?(o||(2===t.rejection&&Lo(e,t),t.rejection=1),!0===h?a=r:(p&&p.enter(),a=h(r),p&&(p.exit(),c=!0)),a===l.promise?d(ko("Promise-chain cycle")):(u=Ao(a))?u.call(a,f,d):f(a)):d(r)}catch(Iv){p&&!c&&p.exit(),d(Iv)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Po(e,t)})}},Ro=function(e,t,n){var r,o;Mo?((r=wo.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),i.dispatchEvent(r)):r={promise:t,reason:n},(o=i["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Po=function(e,t){po.call(i,function(){var n,i=t.value;if(zo(t)&&(n=fo(function(){To?Co.emit("unhandledRejection",i,e):Ro("unhandledrejection",e,i)}),t.rejection=To||zo(t)?2:1,n.error))throw n.value})},zo=function(e){return 1!==e.rejection&&!e.parent},Lo=function(e,t){po.call(i,function(){To?Co.emit("rejectionHandled",e):Ro("rejectionhandled",e,t.value)})},No=function(e,t,n,i){return function(r){e(t,n,r,i)}},Fo=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,xo(e,t,!0))},Uo=function e(t,n,i,r){if(!n.done){n.done=!0,r&&(n=r);try{if(t===i)throw ko("Promise can't be resolved itself");var o=Ao(i);o?uo(function(){var r={done:!1};try{o.call(i,No(e,t,r,n),No(Fo,t,r,n))}catch(Iv){Fo(t,r,Iv,n)}}):(n.value=i,n.state=1,xo(t,n,!1))}catch(Iv){Fo(t,{done:!1},Iv,n)}}};Oo&&(bo=function(e){Sr(this,bo,vo),Qe(e),ro.call(this);var t=mo(this);try{e(No(Uo,this,t),No(Fo,this,t))}catch(Iv){Fo(this,t,Iv)}},(ro=function(e){yo(this,{type:vo,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=kr(bo.prototype,{then:function(e,t){var n=_o(this),i=Eo(Tr(this,bo));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=To?Co.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&xo(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),oo=function(){var e=new ro,t=mo(e);this.promise=e,this.resolve=No(Uo,e,t),this.reject=No(Fo,e,t)},lo.f=Eo=function(e){return e===bo||e===so?new oo(e):Io(e)},"function"==typeof br&&(ao=br.prototype.then,ee(br.prototype,"then",function(e,t){var n=this;return new bo(function(e,t){ao.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof So&&De({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return ho(bo,So.apply(i,arguments))}}))),De({global:!0,wrap:!0,forced:Oo},{Promise:bo}),rn(bo,vo,!1),Cr(vo),so=ie(vo),De({target:vo,stat:!0,forced:Oo},{reject:function(e){var t=Eo(this);return t.reject.call(void 0,e),t.promise}}),De({target:vo,stat:!0,forced:Oo},{resolve:function(e){return ho(this,e)}}),De({target:vo,stat:!0,forced:Do},{all:function(e){var t=this,n=Eo(t),i=n.resolve,r=n.reject,o=fo(function(){var n=Qe(t.resolve),o=[],s=0,a=1;Er(e,function(e){var u=s++,c=!1;o.push(void 0),a++,n.call(t,e).then(function(e){c||(c=!0,o[u]=e,--a||i(o))},r)}),--a||i(o)});return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=Eo(t),i=n.reject,r=fo(function(){var r=Qe(t.resolve);Er(e,function(e){r.call(t,e).then(n.resolve,i)})});return r.error&&i(r.value),n.promise}});var Go=function(){var e=I(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Vo(e,t){return RegExp(e,t)}var jo,Bo,Ho={UNSUPPORTED_Y:r(function(){var e=Vo("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:r(function(){var e=Vo("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},qo=RegExp.prototype.exec,Wo=String.prototype.replace,Ko=qo,Yo=(Bo=/b*/g,qo.call(jo=/a/,"a"),qo.call(Bo,"a"),0!==jo.lastIndex||0!==Bo.lastIndex),$o=Ho.UNSUPPORTED_Y||Ho.BROKEN_CARET,Zo=void 0!==/()??/.exec("")[1];(Yo||Zo||$o)&&(Ko=function(e){var t,n,i,r,o=this,s=$o&&o.sticky,a=Go.call(o),u=o.source,c=0,l=e;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),l=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,c++),n=new RegExp("^(?:"+u+")",a)),Zo&&(n=new RegExp("^"+u+"$(?!\\s)",a)),Yo&&(t=o.lastIndex),i=qo.call(s?n:o,l),s?i?(i.input=i.input.slice(c),i[0]=i[0].slice(c),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:Yo&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),Zo&&i&&i.length>1&&Wo.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i});var Xo=Ko;De({target:"RegExp",proto:!0,forced:/./.exec!==Xo},{exec:Xo});var Jo=RegExp.prototype,Qo=Jo.toString;(r(function(){return"/a/b"!=Qo.call({source:"a",flags:"b"})})||"toString"!=Qo.name)&&ee(RegExp.prototype,"toString",function(){var e=I(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Jo)?Go.call(e):n)},{unsafe:!0});var es=Kt.codeAt;De({target:"String",proto:!0},{codePointAt:function(e){return es(this,e)}});var ts=Ue("match"),ns=function(e){var t;return v(e)&&(void 0!==(t=e[ts])?!!t:"RegExp"==h(e))},is=function(e){if(ns(e))throw TypeError("The method doesn't accept regular expressions");return e},rs=Ue("match"),os=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[rs]=!1,"/./"[e](t)}catch(i){}}return!1};De({target:"String",proto:!0,forced:!os("includes")},{includes:function(e){return!!~String(p(this)).indexOf(is(e),arguments.length>1?arguments[1]:void 0)}});var ss=Ue("species"),as=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),us="$0"==="a".replace(/./,"$0"),cs=Ue("replace"),ls=!!/./[cs]&&""===/./[cs]("a","$0"),hs=!r(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),fs=function(e,t,n,i){var o=Ue(e),s=!r(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),a=s&&!r(function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[ss]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t});if(!s||!a||"replace"===e&&(!as||!us||ls)||"split"===e&&!hs){var u=/./[o],c=n(o,""[e],function(e,t,n,i,r){return t.exec===Xo?s&&!r?{done:!0,value:u.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}},{REPLACE_KEEPS_$0:us,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ls}),l=c[1];ee(String.prototype,e,c[0]),ee(RegExp.prototype,o,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}i&&O(RegExp.prototype[o],"sham",!0)},ds=Kt.charAt,ps=function(e,t,n){return t+(n?ds(e,t).length:1)},gs=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==h(e))throw TypeError("RegExp#exec called on incompatible receiver");return Xo.call(e,t)};fs("match",1,function(e,t,n){return[function(t){var n=p(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=I(e),o=String(this);if(!r.global)return gs(r,o);var s=r.unicode;r.lastIndex=0;for(var a,u=[],c=0;null!==(a=gs(r,o));){var l=String(a[0]);u[c]=l,""===l&&(r.lastIndex=ps(o,ue(r.lastIndex),s)),c++}return 0===c?null:u}]});var vs=Math.max,ms=Math.min,ys=Math.floor,_s=/\$([$&'`]|\d\d?|<[^>]*>)/g,bs=/\$([$&'`]|\d\d?)/g;fs("replace",2,function(e,t,n,i){var r=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=i.REPLACE_KEEPS_$0,s=r?"$":"$0";return[function(n,i){var r=p(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,i):t.call(String(r),n,i)},function(e,i){if(!r&&o||"string"==typeof i&&-1===i.indexOf(s)){var u=n(t,e,this,i);if(u.done)return u.value}var c=I(e),l=String(this),h="function"==typeof i;h||(i=String(i));var f=c.global;if(f){var d=c.unicode;c.lastIndex=0}for(var p=[];;){var g=gs(c,l);if(null===g)break;if(p.push(g),!f)break;""===String(g[0])&&(c.lastIndex=ps(l,ue(c.lastIndex),d))}for(var v,m="",y=0,_=0;_<p.length;_++){g=p[_];for(var b=String(g[0]),k=vs(ms(se(g.index),l.length),0),w=[],C=1;C<g.length;C++)w.push(void 0===(v=g[C])?v:String(v));var S=g.groups;if(h){var E=[b].concat(w,k,l);void 0!==S&&E.push(S);var T=String(i.apply(void 0,E))}else T=a(b,l,k,w,S,i);k>=y&&(m+=l.slice(y,k)+T,y=k+b.length)}return m+l.slice(y)}];function a(e,n,i,r,o,s){var a=i+e.length,u=r.length,c=bs;return void 0!==o&&(o=xe(o),c=_s),t.call(s,c,function(t,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(a);case"<":c=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return t;if(l>u){var h=ys(l/10);return 0===h?t:h<=u?void 0===r[h-1]?s.charAt(1):r[h-1]+s.charAt(1):t}c=r[l-1]}return void 0===c?"":c})}});var ks=Ue("iterator"),ws=Ue("toStringTag"),Cs=bi.values;for(var Ss in mn){var Es=i[Ss],Is=Es&&Es.prototype;if(Is){if(Is[ks]!==Cs)try{O(Is,ks,Cs)}catch(Iv){Is[ks]=Cs}if(Is[ws]||O(Is,ws,Ss),mn[Ss])for(var Ts in bi)if(Is[Ts]!==bi[Ts])try{O(Is,Ts,bi[Ts])}catch(Iv){Is[Ts]=bi[Ts]}}}var Ms=Ki.trim,Os=i.parseFloat,Ds=1/Os(ji+"-0")!=-1/0?function(e){var t=Ms(String(e)),n=Os(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Os;De({global:!0,forced:parseFloat!=Ds},{parseFloat:Ds});var As,xs,Rs,Ps="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync,zs="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync,Ls="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync,Ns="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync,Fs="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync,Us=Ps||zs||Ls||Ns||Fs,Gs="undefined"!=typeof window&&!Us,Vs=zs?qq:Ls?tt:Ns?swan:Fs?my:Ps?wx:{},js=(As="web",Qs?As="wechat":zs?As="qqmp":Ls?As="ttmp":Ns?As="baidump":Fs?As="alipaymp":Ps&&(As="wxmp"),As),Bs=Gs&&window.navigator&&window.navigator.userAgent||"",Hs=/AppleWebKit\/([\d.]+)/i.exec(Bs),qs=(Hs&&parseFloat(Hs.pop()),/iPad/i.test(Bs)),Ws=/iPhone/i.test(Bs)&&!qs,Ks=/iPod/i.test(Bs),Ys=Ws||qs||Ks,$s=(Bs.match(/OS (\d+)_/i),/Android/i.test(Bs)),Zs=(function(){var e=Bs.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),$s&&/webkit/i.test(Bs),/Firefox/i.test(Bs),!/Edge/i.test(Bs)&&/Chrome/i.test(Bs),function(){var e=Bs.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(Bs)),Xs=(/MSIE\s8\.0/.test(Bs),function(){var e=/MSIE\s(\d+)\.\d/.exec(Bs),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Bs)&&/rv:11.0/.test(Bs)&&(t=11),t}()),Js=(/Safari/i.test(Bs),/TBS\/\d+/i.test(Bs)),Qs=(Bs.match(/TBS\/(\d+)/i),!Js&&/MQQBrowser\/\d+/i.test(Bs),!Js&&/ QQBrowser\/\d+/i.test(Bs),/(micromessenger|webbrowser)/i.test(Bs)),ea=/Windows/i.test(Bs),ta=/MAC OS X/i.test(Bs),na=(/MicroMessenger/i.test(Bs),!r(function(){return Object.isExtensible(Object.preventExtensions({}))})),ia=t(function(e){var t=M.f,n=j("meta"),i=0,r=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++i,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!_(e,n)){if(!r(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!_(e,n)){if(!r(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return na&&s.REQUIRED&&r(e)&&!_(e,n)&&o(e),e}};q[n]=!0}),ra=M.f,oa=ia.fastKey,sa=Q.set,aa=Q.getterFor,ua=(function(e,t,n){var o=-1!==e.indexOf("Map"),s=-1!==e.indexOf("Weak"),a=o?"set":"add",u=i[e],c=u&&u.prototype,l=u,h={},f=function(e){var t=c[e];ee(c,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(s&&!v(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return s&&!v(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(s&&!v(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Me(e,"function"!=typeof u||!(s||c.forEach&&!r(function(){(new u).entries().next()}))))l=n.getConstructor(t,e,o,a),ia.REQUIRED=!0;else if(Me(e,!0)){var d=new l,p=d[a](s?{}:-0,1)!=d,g=r(function(){d.has(1)}),m=At(function(e){new u(e)}),y=!s&&r(function(){for(var e=new u,t=5;t--;)e[a](t,t);return!e.has(-0)});m||((l=t(function(t,n){Sr(t,l,e);var i=Vi(new u,t,l);return null!=n&&Er(n,i[a],i,o),i})).prototype=c,c.constructor=l),(g||y)&&(f("delete"),f("has"),o&&f("get")),(y||p)&&f(a),s&&c.clear&&delete c.clear}h[e]=l,De({global:!0,forced:l!=u},h),rn(l,e),s||n.setStrong(l,e,o)}("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(e,t,n,i){var r=e(function(e,s){Sr(e,r,t),sa(e,{type:t,index:Vt(null),first:void 0,last:void 0,size:0}),o||(e.size=0),null!=s&&Er(s,e[i],e,n)}),s=aa(t),a=function(e,t,n){var i,r,a=s(e),c=u(e,t);return c?c.value=n:(a.last=c={index:r=oa(t,!0),key:t,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=c),i&&(i.next=c),o?a.size++:e.size++,"F"!==r&&(a.index[r]=c)),e},u=function(e,t){var n,i=s(e),r=oa(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return kr(r.prototype,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,o?e.size=0:this.size=0},delete:function(e){var t=s(this),n=u(this,e);if(n){var i=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),t.first==n&&(t.first=i),t.last==n&&(t.last=r),o?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=s(this),i=et(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),kr(r.prototype,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),o&&ra(r.prototype,"size",{get:function(){return s(this).size}}),r},setStrong:function(e,t,n){var i=t+" Iterator",r=aa(t),o=aa(i);dn(e,t,function(e,t){sa(this,{type:i,target:e,state:r(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),Cr(t)}}),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});xs="undefined"!=typeof console?console:void 0!==ua&&ua.console?ua.console:"undefined"!=typeof window&&window.console?window.console:{};for(var ca=function(){},la=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],ha=la.length;ha--;)Rs=la[ha],console[Rs]||(xs[Rs]=ca);xs.methods=la;var fa=xs,da=0,pa=new Map;function ga(){var e=new Date;return"TIM "+e.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(e.getMilliseconds())+":"}var va={arguments2String:function(e){var t;if(1===e.length)t=ga()+e[0];else{t=ga();for(var n=0,i=e.length;n<i;n++)Sa(e[n])?Ia(e[n])?t+=xa(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" "}return t},debug:function(){if(da<=-1){var e=this.arguments2String(arguments);fa.debug(e)}},log:function(){if(da<=0){var e=this.arguments2String(arguments);fa.log(e)}},info:function(){if(da<=1){var e=this.arguments2String(arguments);fa.info(e)}},warn:function(){if(da<=2){var e=this.arguments2String(arguments);fa.warn(e)}},error:function(){if(da<=3){var e=this.arguments2String(arguments);fa.error(e)}},time:function(e){pa.set(e,Da.now())},timeEnd:function(e){if(pa.has(e)){var t=Da.now()-pa.get(e);return pa.delete(e),t}return fa.warn("\u672a\u627e\u5230\u5bf9\u5e94label: ".concat(e,", \u8bf7\u5728\u8c03\u7528 logger.timeEnd \u524d\uff0c\u8c03\u7528 logger.time")),0},setLevel:function(e){e<4&&fa.log(ga()+"set level from "+da+" to "+e),da=e}},ma=function(e){return"file"===Ta(e)},ya=function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===On(e)&&e.constructor===Number)},_a=function(e){return"string"==typeof e},ba=function(e){return null!==e&&"object"===On(e)},ka=function(e){if("object"!==On(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},wa=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===Ta(e)},Ca=function(e){return void 0===e},Sa=function(e){return wa(e)||ba(e)},Ea=function(e){return"function"==typeof e},Ia=function(e){return e instanceof Error},Ta=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},Ma=function(e){return"string"==typeof e&&!/[^a-zA-Z0-9]/.test(e[0])},Oa=0;Date.now||(Date.now=function(){return(new Date).getTime()});var Da={now:function(){0===Oa&&(Oa=Date.now()-1);var e=Date.now()-Oa;return e>4294967295?(Oa+=4294967295,Date.now()-Oa):e},utc:function(){return Math.round(Date.now()/1e3)}},Aa=function e(t,n,i,r){if(!Sa(t)||!Sa(n))return 0;for(var o,s=0,a=Object.keys(n),u=0,c=a.length;u<c;u++)if(!(Ca(n[o=a[u]])||i&&i.includes(o)))if(Sa(t[o])&&Sa(n[o]))s+=e(t[o],n[o],i,r);else{if(r&&r.includes(n[o]))continue;t[o]!==n[o]&&(t[o]=n[o],s+=1)}return s},xa=function(e){return JSON.stringify(e,["message","code"])},Ra=function(){var e,t=new Date,n=t.toISOString(),i=t.getTimezoneOffset()/60;return e=i<0?i>-10?"+0"+Math.abs(100*i):"+"+Math.abs(100*i):i>=10?"-"+100*i:"-0"+100*i,n.replace("Z",e)},Pa=function(e){if(0===e.length)return 0;for(var t=0,n=0,i="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===i?3:2;return n},za=function(e){var t=e||99999999;return Math.round(Math.random()*t)},La="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",Na=La.length,Fa=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},Ua={},Ga=function(){if(Us)return"https:";var e=window.location.protocol;return["http:","https:"].indexOf(e)<0&&(e="http:"),e},Va=function(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")};function ja(e,t){wa(e)&&wa(t)?t.forEach(function(t){var n=t.key,i=t.value,r=e.find(function(e){return e.key===n});r?r.value=i:e.push({key:n,value:i})}):va.warn("updateCustomField target \u6216 source \u4e0d\u662f\u6570\u7ec4\uff0c\u5ffd\u7565\u6b64\u6b21\u66f4\u65b0\u3002")}var Ba=function(e){return e===wn.GRP_WORK},Ha=function(e){return e===wn.GRP_PUBLIC},qa=function(e){return e===wn.GRP_MEETING},Wa=function(e){return e===wn.GRP_AVCHATROOM},Ka=function(e){return _a(e)&&e===wn.CONV_SYSTEM};function Ya(e,t){var n={};return Object.keys(e).forEach(function(i){n[i]=t(e[i],i)}),n}function $a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Za(){return"".concat($a()+$a()).concat($a()).concat($a()).concat($a()).concat($a()).concat($a()).concat($a())}function Xa(e){var t=e.originUrl,n=void 0===t?void 0:t,i=e.originHeight,r=e.min,o=void 0===r?198:r,s=parseInt(e.originWidth),a=parseInt(i),u={url:void 0,width:0,height:0};return(s<=a?s:a)<=o?(u.url=n,u.width=s,u.height=a):(a<=s?(u.width=Math.ceil(s*o/a),u.height=o):(u.width=o,u.height=Math.ceil(a*o/s)),u.url=n&&n.indexOf("?")>=0?"".concat(n,198===o?"&imageView2/3/w/198/h/198":"&imageView2/3/w/720/h/720"):"".concat(n,198===o?"?imageView2/3/w/198/h/198":"?imageView2/3/w/720/h/720")),Ca(n)?jn(u,["url"]):u}function Ja(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}var Qa=Object.prototype.hasOwnProperty;function eu(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(ka(e)){for(var t in e)if(Qa.call(e,t))return!1;return!0}return!("map"!==Ta(e)&&!function(e){return"set"===Ta(e)}(e)&&!ma(e))&&0===e.size}function tu(e,t,n){if(void 0===t)return!0;var i=!0;if("object"===ri(t).toLowerCase())Object.keys(t).forEach(function(r){i=!!nu(1===e.length?e[0][r]:void 0,t[r],n,r)&&i});else if("array"===ri(t).toLowerCase())for(var r=0;r<t.length;r++)i=!!nu(e[r],t[r],n,t[r].name)&&i;if(i)return i;throw new Error("Params validate failed.")}function nu(e,t,n,i){if(void 0===t)return!0;var r=!0;return t.required&&eu(e)&&(fa.error("TIM [".concat(n,'] Missing required params: "').concat(i,'".')),r=!1),eu(e)||ri(e).toLowerCase()===t.type.toLowerCase()||(fa.error("TIM [".concat(n,'] Invalid params: type check failed for "').concat(i,'".Expected ').concat(t.type,".")),r=!1),t.validator&&!t.validator(e)&&(fa.error("TIM [".concat(n,"] Invalid params: custom validator check failed for params.")),r=!1),r}var iu={f:Ue},ru=M.f,ou=rt.forEach,su=H("hidden"),au=Ue("toPrimitive"),uu=Q.set,cu=Q.getterFor("Symbol"),lu=Object.prototype,hu=i.Symbol,fu=ie("JSON","stringify"),du=E.f,pu=M.f,gu=cr.f,vu=u.f,mu=U("symbols"),yu=U("op-symbols"),_u=U("string-to-symbol-registry"),bu=U("symbol-to-string-registry"),ku=U("wks"),wu=i.QObject,Cu=!wu||!wu.prototype||!wu.prototype.findChild,Su=o&&r(function(){return 7!=Vt(pu({},"a",{get:function(){return pu(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=du(lu,t);i&&delete lu[t],pu(e,t,n),i&&e!==lu&&pu(lu,t,i)}:pu,Eu=function(e,t){var n=mu[e]=Vt(hu.prototype);return uu(n,{type:"Symbol",tag:e,description:t}),o||(n.description=t),n},Iu=ze?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof hu},Tu=function e(t,n,i){t===lu&&e(yu,n,i),I(t);var r=m(n,!0);return I(i),_(mu,r)?(i.enumerable?(_(t,su)&&t[su][r]&&(t[su][r]=!1),i=Vt(i,{enumerable:c(0,!1)})):(_(t,su)||pu(t,su,c(1,{})),t[su][r]=!0),Su(t,r,i)):pu(t,r,i)},Mu=function(e,t){I(e);var n=g(t),i=Pt(n).concat(xu(n));return ou(i,function(t){o&&!Ou.call(n,t)||Tu(e,t,n[t])}),e},Ou=function(e){var t=m(e,!0),n=vu.call(this,t);return!(this===lu&&_(mu,t)&&!_(yu,t))&&(!(n||!_(this,t)||!_(mu,t)||_(this,su)&&this[su][t])||n)},Du=function(e,t){var n=g(e),i=m(t,!0);if(n!==lu||!_(mu,i)||_(yu,i)){var r=du(n,i);return!r||!_(mu,i)||_(n,su)&&n[su][i]||(r.enumerable=!0),r}},Au=function(e){var t=gu(g(e)),n=[];return ou(t,function(e){_(mu,e)||_(q,e)||n.push(e)}),n},xu=function(e){var t=e===lu,n=gu(t?yu:g(e)),i=[];return ou(n,function(e){!_(mu,e)||t&&!_(lu,e)||i.push(mu[e])}),i};if(Pe||(ee((hu=function(){if(this instanceof hu)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=j(e),n=function e(n){this===lu&&e.call(yu,n),_(this,su)&&_(this[su],t)&&(this[su][t]=!1),Su(this,t,c(1,n))};return o&&Cu&&Su(lu,t,{configurable:!0,set:n}),Eu(t,e)}).prototype,"toString",function(){return cu(this).tag}),ee(hu,"withoutSetter",function(e){return Eu(j(e),e)}),u.f=Ou,M.f=Tu,E.f=Du,ye.f=cr.f=Au,_e.f=xu,iu.f=function(e){return Eu(Ue(e),e)},o&&(pu(hu.prototype,"description",{configurable:!0,get:function(){return cu(this).description}}),ee(lu,"propertyIsEnumerable",Ou,{unsafe:!0}))),De({global:!0,wrap:!0,forced:!Pe,sham:!Pe},{Symbol:hu}),ou(Pt(ku),function(e){!function(e){var t=te.Symbol||(te.Symbol={});_(t,e)||ru(t,e,{value:iu.f(e)})}(e)}),De({target:"Symbol",stat:!0,forced:!Pe},{for:function(e){var t=String(e);if(_(_u,t))return _u[t];var n=hu(t);return _u[t]=n,bu[n]=t,n},keyFor:function(e){if(!Iu(e))throw TypeError(e+" is not a symbol");if(_(bu,e))return bu[e]},useSetter:function(){Cu=!0},useSimple:function(){Cu=!1}}),De({target:"Object",stat:!0,forced:!Pe,sham:!o},{create:function(e,t){return void 0===t?Vt(e):Mu(Vt(e),t)},defineProperty:Tu,defineProperties:Mu,getOwnPropertyDescriptor:Du}),De({target:"Object",stat:!0,forced:!Pe},{getOwnPropertyNames:Au,getOwnPropertySymbols:xu}),De({target:"Object",stat:!0,forced:r(function(){_e.f(1)})},{getOwnPropertySymbols:function(e){return _e.f(xe(e))}}),fu){var Ru=!Pe||r(function(){var e=hu();return"[null]"!=fu([e])||"{}"!=fu({a:e})||"{}"!=fu(Object(e))});De({target:"JSON",stat:!0,forced:Ru},{stringify:function(e,t,n){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=t,(v(t)||void 0!==e)&&!Iu(e))return Ae(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Iu(t))return t}),r[1]=t,fu.apply(null,r)}})}hu.prototype[au]||O(hu.prototype,au,hu.prototype.valueOf),rn(hu,"Symbol"),q[su]=!0;var Pu=M.f,zu=i.Symbol;if(o&&"function"==typeof zu&&(!("description"in zu.prototype)||void 0!==zu().description)){var Lu={},Nu=function e(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof e?new zu(t):void 0===t?zu():zu(t);return""===t&&(Lu[n]=!0),n};ke(Nu,zu);var Fu=Nu.prototype=zu.prototype;Fu.constructor=Nu;var Uu=Fu.toString,Gu="Symbol(test)"==String(zu("test")),Vu=/^Symbol\((.*)\)[^)]+$/;Pu(Fu,"description",{configurable:!0,get:function(){var e=v(this)?this.valueOf():this,t=Uu.call(e);if(_(Lu,e))return"";var n=Gu?t.slice(7,-1):t.replace(Vu,"$1");return""===n?void 0:n}}),De({global:!0,forced:!0},{Symbol:Nu})}var ju=u.f,Bu=function(e){return function(t){for(var n,i=g(t),r=Pt(i),s=r.length,a=0,u=[];s>a;)n=r[a++],o&&!ju.call(i,n)||u.push(e?[n,i[n]]:i[n]);return u}},Hu=(Bu(!0),Bu(!1));De({target:"Object",stat:!0},{values:function(e){return Hu(e)}});var qu=function(){function e(t){Dn(this,e),this.type=wn.MSG_TEXT,this.content={text:t.text||""}}return xn(e,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),e}(),Wu=Object.assign,Ku=Object.defineProperty,Yu=!Wu||r(function(){if(o&&1!==Wu({b:1},Wu(Ku({},"a",{enumerable:!0,get:function(){Ku(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=Wu({},e)[n]||"abcdefghijklmnopqrst"!=Pt(Wu({},t)).join("")})?function(e,t){for(var n=xe(e),i=arguments.length,r=1,s=_e.f,a=u.f;i>r;)for(var c,l=d(arguments[r++]),h=s?Pt(l).concat(s(l)):Pt(l),f=h.length,p=0;f>p;)c=h[p++],o&&!a.call(l,c)||(n[c]=l[c]);return n}:Wu;De({target:"Object",stat:!0,forced:Object.assign!==Yu},{assign:Yu});var $u=Ue("iterator"),Zu=!r(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach(function(e,i){t.delete("b"),n+=i+e}),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[$u]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}),Xu=/[^\0-\u007E]/,Ju=/[.\u3002\uFF0E\uFF61]/g,Qu="Overflow: input needs wider integers to process",ec=Math.floor,tc=String.fromCharCode,nc=function(e){return e+22+75*(e<26)},ic=function(e,t,n){var i=0;for(e=n?ec(e/700):e>>1,e+=ec(e/t);e>455;i+=36)e=ec(e/35);return ec(i+36*e/(e+38))},rc=function(e){var t,n,i=[],r=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,o=128,s=0,a=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(tc(n));var u=i.length,c=u;for(u&&i.push("-");c<r;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<l&&(l=n);var h=c+1;if(l-o>ec((2147483647-s)/h))throw RangeError(Qu);for(s+=(l-o)*h,o=l,t=0;t<e.length;t++){if((n=e[t])<o&&++s>2147483647)throw RangeError(Qu);if(n==o){for(var f=s,d=36;;d+=36){var p=d<=a?1:d>=a+26?26:d-a;if(f<p)break;var g=f-p,v=36-p;i.push(tc(nc(p+g%v))),f=ec(g/v)}i.push(tc(nc(f))),a=ic(s,h,c==u),s=0,++c}}++s,++o}return i.join("")},oc=function(e){var t=Et(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return I(t.call(e))},sc=ie("fetch"),ac=ie("Headers"),uc=Ue("iterator"),cc=Q.set,lc=Q.getterFor("URLSearchParams"),hc=Q.getterFor("URLSearchParamsIterator"),fc=/\+/g,dc=Array(4),pc=function(e){return dc[e-1]||(dc[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},gc=function(e){try{return decodeURIComponent(e)}catch(Iv){return e}},vc=function(e){var t=e.replace(fc," "),n=4;try{return decodeURIComponent(t)}catch(Iv){for(;n;)t=t.replace(pc(n--),gc);return t}},mc=/[!'()~]|%20/g,yc={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_c=function(e){return yc[e]},bc=function(e){return encodeURIComponent(e).replace(mc,_c)},kc=function(e,t){if(t)for(var n,i,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),e.push({key:vc(i.shift()),value:vc(i.join("="))}))},wc=function(e){this.entries.length=0,kc(this.entries,e)},Cc=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Sc=an(function(e,t){cc(this,{type:"URLSearchParamsIterator",iterator:oc(lc(e).entries),kind:t})},"Iterator",function(){var e=hc(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),Ec=function e(){Sr(this,e,"URLSearchParams");var t,n,i,r,o,s,a,u,c,l=arguments.length>0?arguments[0]:void 0,h=[];if(cc(this,{type:"URLSearchParams",entries:h,updateURL:function(){},updateSearchParams:wc}),void 0!==l)if(v(l))if("function"==typeof(t=Et(l)))for(i=(n=t.call(l)).next;!(r=i.call(n)).done;){if((a=(s=(o=oc(I(r.value))).next).call(o)).done||(u=s.call(o)).done||!s.call(o).done)throw TypeError("Expected sequence with length 2");h.push({key:a.value+"",value:u.value+""})}else for(c in l)_(l,c)&&h.push({key:c,value:l[c]+""});else kc(h,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},Ic=Ec.prototype;kr(Ic,{append:function(e,t){Cc(arguments.length,2);var n=lc(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Cc(arguments.length,1);for(var t=lc(this),n=t.entries,i=e+"",r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){Cc(arguments.length,1);for(var t=lc(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){Cc(arguments.length,1);for(var t=lc(this).entries,n=e+"",i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){Cc(arguments.length,1);for(var t=lc(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){Cc(arguments.length,1);for(var n,i=lc(this),r=i.entries,o=!1,s=e+"",a=t+"",u=0;u<r.length;u++)(n=r[u]).key===s&&(o?r.splice(u--,1):(o=!0,n.value=a));o||r.push({key:s,value:a}),i.updateURL()},sort:function(){var e,t,n,i=lc(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=lc(this).entries,i=et(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new Sc(this,"keys")},values:function(){return new Sc(this,"values")},entries:function(){return new Sc(this,"entries")}},{enumerable:!0}),ee(Ic,uc,Ic.entries),ee(Ic,"toString",function(){for(var e,t=lc(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(bc(e.key)+"="+bc(e.value));return n.join("&")},{enumerable:!0}),rn(Ec,"URLSearchParams"),De({global:!0,forced:!Zu},{URLSearchParams:Ec}),Zu||"function"!=typeof sc||"function"!=typeof ac||De({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,r=[e];return arguments.length>1&&(v(t=arguments[1])&&"URLSearchParams"===Ct(n=t.body)&&((i=t.headers?new ac(t.headers):new ac).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=Vt(t,{body:c(0,String(n)),headers:c(0,i)})),r.push(t)),sc.apply(this,r)}});var Tc,Mc={URLSearchParams:Ec,getState:lc},Oc=Kt.codeAt,Dc=i.URL,Ac=Mc.URLSearchParams,xc=Mc.getState,Rc=Q.set,Pc=Q.getterFor("URL"),zc=Math.floor,Lc=Math.pow,Nc=/[A-Za-z]/,Fc=/[\d+-.A-Za-z]/,Uc=/\d/,Gc=/^(0x|0X)/,Vc=/^[0-7]+$/,jc=/^\d+$/,Bc=/^[\dA-Fa-f]+$/,Hc=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,qc=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Wc=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Kc=/[\u0009\u000A\u000D]/g,Yc=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=Zc(t.slice(1,-1))))return"Invalid host";e.host=n}else if(rl(e)){if(t=function(e){var t,n,i=[],r=e.toLowerCase().replace(Ju,".").split(".");for(t=0;t<r.length;t++)i.push(Xu.test(n=r[t])?"xn--"+rc(n):n);return i.join(".")}(t),Hc.test(t))return"Invalid host";if(null===(n=$c(t)))return"Invalid host";e.host=n}else{if(qc.test(t))return"Invalid host";for(n="",i=It(t),r=0;r<i.length;r++)n+=nl(i[r],Jc);e.host=n}},$c=function(e){var t,n,i,r,o,s,a,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=u[i]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=Gc.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?jc:8==o?Vc:Bc).test(r))return e;s=parseInt(r,o)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=Lc(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*Lc(256,3-i);return a},Zc=function(e){var t,n,i,r,o,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&Bc.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;h++}if(!Uc.test(f()))return;for(;Uc.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}u[c]=256*u[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a;else if(8!=c)return;return u},Xc=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=zc(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Jc={},Qc=Yu({},Jc,{" ":1,'"':1,"<":1,">":1,"`":1}),el=Yu({},Qc,{"#":1,"?":1,"{":1,"}":1}),tl=Yu({},el,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),nl=function(e,t){var n=Oc(e,0);return n>32&&n<127&&!_(t,e)?e:encodeURIComponent(e)},il={ftp:21,file:null,http:80,https:443,ws:80,wss:443},rl=function(e){return _(il,e.scheme)},ol=function(e){return""!=e.username||""!=e.password},sl=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},al=function(e,t){var n;return 2==e.length&&Nc.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ul=function(e){var t;return e.length>1&&al(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},cl=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&al(t[0],!0)||t.pop()},ll=function(e){return"."===e||"%2e"===e.toLowerCase()},hl={},fl={},dl={},pl={},gl={},vl={},ml={},yl={},_l={},bl={},kl={},wl={},Cl={},Sl={},El={},Il={},Tl={},Ml={},Ol={},Dl={},Al={},xl=function(e,t,n,i){var r,o,s,a,u,c=n||hl,l=0,h="",f=!1,d=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Wc,"")),t=t.replace(Kc,""),r=It(t);l<=r.length;){switch(o=r[l],c){case hl:if(!o||!Nc.test(o)){if(n)return"Invalid scheme";c=dl;continue}h+=o.toLowerCase(),c=fl;break;case fl:if(o&&(Fc.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";h="",c=dl,l=0;continue}if(n&&(rl(e)!=_(il,h)||"file"==h&&(ol(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,n)return void(rl(e)&&il[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?c=Sl:rl(e)&&i&&i.scheme==e.scheme?c=pl:rl(e)?c=yl:"/"==r[l+1]?(c=gl,l++):(e.cannotBeABaseURL=!0,e.path.push(""),c=Ol)}break;case dl:if(!i||i.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,c=Al;break}c="file"==i.scheme?Sl:vl;continue;case pl:if("/"!=o||"/"!=r[l+1]){c=vl;continue}c=_l,l++;break;case gl:if("/"==o){c=bl;break}c=Ml;continue;case vl:if(e.scheme=i.scheme,o==Tc)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&rl(e))c=ml;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",c=Dl;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),c=Ml;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=Al}break;case ml:if(!rl(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,c=Ml;continue}c=bl}else c=_l;break;case yl:if(c=_l,"/"!=o||"/"!=h.charAt(l+1))continue;l++;break;case _l:if("/"!=o&&"\\"!=o){c=bl;continue}break;case bl:if("@"==o){f&&(h="%40"+h),f=!0,s=It(h);for(var g=0;g<s.length;g++){var v=s[g];if(":"!=v||p){var m=nl(v,tl);p?e.password+=m:e.username+=m}else p=!0}h=""}else if(o==Tc||"/"==o||"?"==o||"#"==o||"\\"==o&&rl(e)){if(f&&""==h)return"Invalid authority";l-=It(h).length+1,h="",c=kl}else h+=o;break;case kl:case wl:if(n&&"file"==e.scheme){c=Il;continue}if(":"!=o||d){if(o==Tc||"/"==o||"?"==o||"#"==o||"\\"==o&&rl(e)){if(rl(e)&&""==h)return"Invalid host";if(n&&""==h&&(ol(e)||null!==e.port))return;if(a=Yc(e,h))return a;if(h="",c=Tl,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),h+=o}else{if(""==h)return"Invalid host";if(a=Yc(e,h))return a;if(h="",c=Cl,n==wl)return}break;case Cl:if(!Uc.test(o)){if(o==Tc||"/"==o||"?"==o||"#"==o||"\\"==o&&rl(e)||n){if(""!=h){var y=parseInt(h,10);if(y>65535)return"Invalid port";e.port=rl(e)&&y===il[e.scheme]?null:y,h=""}if(n)return;c=Tl;continue}return"Invalid port"}h+=o;break;case Sl:if(e.scheme="file","/"==o||"\\"==o)c=El;else{if(!i||"file"!=i.scheme){c=Ml;continue}if(o==Tc)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",c=Dl;else{if("#"!=o){ul(r.slice(l).join(""))||(e.host=i.host,e.path=i.path.slice(),cl(e)),c=Ml;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=Al}}break;case El:if("/"==o||"\\"==o){c=Il;break}i&&"file"==i.scheme&&!ul(r.slice(l).join(""))&&(al(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),c=Ml;continue;case Il:if(o==Tc||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&al(h))c=Ml;else if(""==h){if(e.host="",n)return;c=Tl}else{if(a=Yc(e,h))return a;if("localhost"==e.host&&(e.host=""),n)return;h="",c=Tl}continue}h+=o;break;case Tl:if(rl(e)){if(c=Ml,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Tc&&(c=Ml,"/"!=o))continue}else e.fragment="",c=Al;else e.query="",c=Dl;break;case Ml:if(o==Tc||"/"==o||"\\"==o&&rl(e)||!n&&("?"==o||"#"==o)){if(".."===(u=(u=h).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(cl(e),"/"==o||"\\"==o&&rl(e)||e.path.push("")):ll(h)?"/"==o||"\\"==o&&rl(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&al(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(o==Tc||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",c=Dl):"#"==o&&(e.fragment="",c=Al)}else h+=nl(o,el);break;case Ol:"?"==o?(e.query="",c=Dl):"#"==o?(e.fragment="",c=Al):o!=Tc&&(e.path[0]+=nl(o,Jc));break;case Dl:n||"#"!=o?o!=Tc&&("'"==o&&rl(e)?e.query+="%27":e.query+="#"==o?"%23":nl(o,Jc)):(e.fragment="",c=Al);break;case Al:o!=Tc&&(e.fragment+=nl(o,Qc))}l++}},Rl=function e(t){var n,i,r=Sr(this,e,"URL"),s=arguments.length>1?arguments[1]:void 0,a=String(t),u=Rc(r,{type:"URL"});if(void 0!==s)if(s instanceof e)n=Pc(s);else if(i=xl(n={},String(s)))throw TypeError(i);if(i=xl(u,a,null,n))throw TypeError(i);var c=u.searchParams=new Ac,l=xc(c);l.updateSearchParams(u.query),l.updateURL=function(){u.query=String(c)||null},o||(r.href=zl.call(r),r.origin=Ll.call(r),r.protocol=Nl.call(r),r.username=Fl.call(r),r.password=Ul.call(r),r.host=Gl.call(r),r.hostname=Vl.call(r),r.port=jl.call(r),r.pathname=Bl.call(r),r.search=Hl.call(r),r.searchParams=ql.call(r),r.hash=Wl.call(r))},Pl=Rl.prototype,zl=function(){var e=Pc(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,s=e.path,a=e.query,u=e.fragment,c=t+":";return null!==r?(c+="//",ol(e)&&(c+=n+(i?":"+i:"")+"@"),c+=Xc(r),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},Ll=function(){var e=Pc(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(Iv){return"null"}return"file"!=t&&rl(e)?t+"://"+Xc(e.host)+(null!==n?":"+n:""):"null"},Nl=function(){return Pc(this).scheme+":"},Fl=function(){return Pc(this).username},Ul=function(){return Pc(this).password},Gl=function(){var e=Pc(this),t=e.host,n=e.port;return null===t?"":null===n?Xc(t):Xc(t)+":"+n},Vl=function(){var e=Pc(this).host;return null===e?"":Xc(e)},jl=function(){var e=Pc(this).port;return null===e?"":String(e)},Bl=function(){var e=Pc(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Hl=function(){var e=Pc(this).query;return e?"?"+e:""},ql=function(){return Pc(this).searchParams},Wl=function(){var e=Pc(this).fragment;return e?"#"+e:""},Kl=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&zt(Pl,{href:Kl(zl,function(e){var t=Pc(this),n=String(e),i=xl(t,n);if(i)throw TypeError(i);xc(t.searchParams).updateSearchParams(t.query)}),origin:Kl(Ll),protocol:Kl(Nl,function(e){var t=Pc(this);xl(t,String(e)+":",hl)}),username:Kl(Fl,function(e){var t=Pc(this),n=It(String(e));if(!sl(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=nl(n[i],tl)}}),password:Kl(Ul,function(e){var t=Pc(this),n=It(String(e));if(!sl(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=nl(n[i],tl)}}),host:Kl(Gl,function(e){var t=Pc(this);t.cannotBeABaseURL||xl(t,String(e),kl)}),hostname:Kl(Vl,function(e){var t=Pc(this);t.cannotBeABaseURL||xl(t,String(e),wl)}),port:Kl(jl,function(e){var t=Pc(this);sl(t)||(""==(e=String(e))?t.port=null:xl(t,e,Cl))}),pathname:Kl(Bl,function(e){var t=Pc(this);t.cannotBeABaseURL||(t.path=[],xl(t,e+"",Tl))}),search:Kl(Hl,function(e){var t=Pc(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",xl(t,e,Dl)),xc(t.searchParams).updateSearchParams(t.query)}),searchParams:Kl(ql),hash:Kl(Wl,function(e){var t=Pc(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",xl(t,e,Al)):t.fragment=null})}),ee(Pl,"toJSON",function(){return zl.call(this)},{enumerable:!0}),ee(Pl,"toString",function(){return zl.call(this)},{enumerable:!0}),Dc){var Yl=Dc.createObjectURL,$l=Dc.revokeObjectURL;Yl&&ee(Rl,"createObjectURL",function(e){return Yl.apply(Dc,arguments)}),$l&&ee(Rl,"revokeObjectURL",function(e){return $l.apply(Dc,arguments)})}rn(Rl,"URL"),De({global:!0,forced:!Zu,sham:!o},{URL:Rl});var Zl={JSON:{TYPE:{C2C:{NOTICE:1,COMMON:9,EVENT:10},GROUP:{COMMON:3,TIP:4,SYSTEM:5,TIP2:6},FRIEND:{NOTICE:7},PROFILE:{NOTICE:8}},SUBTYPE:{C2C:{COMMON:0,READED:92,KICKEDOUT:96},GROUP:{COMMON:0,LOVEMESSAGE:1,TIP:2,REDPACKET:3}},OPTIONS:{GROUP:{JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7}}},PROTOBUF:{},IMAGE_TYPES:{ORIGIN:1,LARGE:2,SMALL:3},IMAGE_FORMAT:{JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255}},Xl={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},Jl={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},Ql={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},eh={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},th=function(){function e(t){Dn(this,e),this._imageMemoryURL="",this._file=t.file,Us?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=wn.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Zl.IMAGE_FORMAT.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage="http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg",this._autoFixUrl()}return xn(e,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=za(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||"",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t=0,n=null,i=null;t<=2;)i=Ca(e)||Ca(e[t])?{type:0,size:0,width:0,height:0,url:""}:e[t],(n=new this._ImageInfoModel(i)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,n=this.content.imageInfoArray.length,i=0;i<n;i++)t=this.content.imageInfoArray[i],e[i].size&&(t.size=e[i].size),e[i].url&&t.setImageUrl(e[i].url),e[i].width&&(t.width=e[i].width),e[i].height&&(t.height=e[i].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",n="",i=["http","https"],r=null,o=0;o<e;o++)this.content.imageInfoArray[o].url&&""!==(r=this.content.imageInfoArray[o]).imageUrl&&(n=r.imageUrl.slice(0,r.imageUrl.indexOf("://")+1),t=r.imageUrl.slice(r.imageUrl.indexOf("://")+1),i.indexOf(n)<0&&(n="https:"),this.content.imageInfoArray[o].setImageUrl([n,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=Zl.IMAGE_FORMAT[e.toUpperCase()]||Zl.IMAGE_FORMAT.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,i=void 0===n?0:n,r=t.height,o=void 0===r?0:r;0!==i&&0!==o&&(Ja(e),Object.assign(e[2],Xa({originWidth:i,originHeight:o,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]),e}(),nh=function(){function e(t){Dn(this,e),this.type=wn.MSG_FACE,this.content=t||null}return xn(e,[{key:"sendable",value:function(){return null!==this.content}}]),e}(),ih=function(){function e(t){Dn(this,e),this.type=wn.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||"",uuid:t.uuid}}return xn(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),e}();De({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:M.f});var rh={from:!0,groupID:!0,groupName:!0,to:!0},oh=function(){function e(t){Dn(this,e),this.type=wn.MSG_GRP_TIP,this.content={},this._initContent(t)}return xn(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case"remarkInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case"operatorInfo":case"memberInfoList":break;case"msgMemberInfo":t.content.memberList=e[n],Object.defineProperty(t.content,"msgMemberInfo",{get:function(){return va.warn("!!! \u7981\u8a00\u7684\u7fa4\u63d0\u793a\u6d88\u606f\u4e2d\u7684 payload.msgMemberInfo \u5c5e\u6027\u5373\u5c06\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 payload.memberList \u5c5e\u6027\u66ff\u4ee3\u3002 \n","msgMemberInfo \u4e2d\u7684 shutupTime \u5c5e\u6027\u5bf9\u5e94\u66f4\u6539\u4e3a memberList \u4e2d\u7684 muteTime \u5c5e\u6027\uff0c\u8868\u793a\u7981\u8a00\u65f6\u957f\u3002 \n","\u53c2\u8003\uff1a\u7fa4\u63d0\u793a\u6d88\u606f https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/Message.html#.GroupTipPayload"),t.content.memberList.map(function(e){return{userID:e.userID,shutupTime:e.muteTime}})}});break;case"onlineMemberInfo":break;case"memberNum":t.content[n]=e[n],t.content.memberCount=e[n];break;default:t.content[n]=e[n]}}),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var i=t[n];rh[i]&&(this.content.groupProfile[i]=e[i])}}}]),e}(),sh={from:!0,groupID:!0,name:!0,to:!0},ah=function(){function e(t){Dn(this,e),this.type=wn.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return xn(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[n];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}})}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var i=t[n];sh[i]&&(this.content.groupProfile[i]=e[i])}}}]),e}(),uh=Math.min,ch=[].lastIndexOf,lh=!!ch&&1/[1].lastIndexOf(1,-0)<0,hh=ot("lastIndexOf"),fh=ct("indexOf",{ACCESSORS:!0,1:0}),dh=!lh&&hh&&fh?ch:function(e){if(lh)return ch.apply(this,arguments)||0;var t=g(this),n=ue(t.length),i=n-1;for(arguments.length>1&&(i=uh(i,se(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1};De({target:"Array",proto:!0,forced:dh!==[].lastIndexOf},{lastIndexOf:dh});var ph,gh="https://cloud.tencent.com/document/product/",vh="\u60a8\u53ef\u4ee5\u5728\u5373\u65f6\u901a\u4fe1 IM \u63a7\u5236\u53f0\u7684\u3010\u5f00\u53d1\u8f85\u52a9\u5de5\u5177(https://console.cloud.tencent.com/im-detail/tool-usersig)\u3011\u9875\u9762\u6821\u9a8c UserSig\u3002",mh="UserSig \u975e\u6cd5\uff0c\u8bf7\u4f7f\u7528\u5b98\u7f51\u63d0\u4f9b\u7684 API \u91cd\u65b0\u751f\u6210 UserSig(".concat(gh,"269/32688)\u3002"),yh={70001:"UserSig \u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u751f\u6210\u3002\u5efa\u8bae UserSig \u6709\u6548\u671f\u8bbe\u7f6e\u4e0d\u5c0f\u4e8e24\u5c0f\u65f6\u3002",70002:"UserSig \u957f\u5ea6\u4e3a0\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u7684 UserSig \u662f\u5426\u6b63\u786e\u3002",70003:mh,70005:mh,70009:"UserSig \u9a8c\u8bc1\u5931\u8d25\uff0c\u53ef\u80fd\u56e0\u4e3a\u751f\u6210 UserSig \u65f6\u6df7\u7528\u4e86\u5176\u4ed6 SDKAppID \u7684\u79c1\u94a5\u6216\u5bc6\u94a5\u5bfc\u81f4\uff0c\u8bf7\u4f7f\u7528\u5bf9\u5e94 SDKAppID \u4e0b\u7684\u79c1\u94a5\u6216\u5bc6\u94a5\u91cd\u65b0\u751f\u6210 UserSig(".concat(gh,"269/32688)\u3002"),70013:"\u8bf7\u6c42\u4e2d\u7684 UserID \u4e0e\u751f\u6210 UserSig \u65f6\u4f7f\u7528\u7684 UserID \u4e0d\u5339\u914d\u3002".concat(vh),70014:"\u8bf7\u6c42\u4e2d\u7684 SDKAppID \u4e0e\u751f\u6210 UserSig \u65f6\u4f7f\u7528\u7684 SDKAppID \u4e0d\u5339\u914d\u3002".concat(vh),70016:"\u5bc6\u94a5\u4e0d\u5b58\u5728\uff0cUserSig \u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u5728\u5373\u65f6\u901a\u4fe1 IM \u63a7\u5236\u53f0\u83b7\u53d6\u5bc6\u94a5(".concat(gh,"269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)\u3002"),70020:"SDKAppID \u672a\u627e\u5230\uff0c\u8bf7\u5728\u5373\u65f6\u901a\u4fe1 IM \u63a7\u5236\u53f0\u786e\u8ba4\u5e94\u7528\u4fe1\u606f\u3002",70050:"UserSig \u9a8c\u8bc1\u6b21\u6570\u8fc7\u4e8e\u9891\u7e41\u3002\u8bf7\u68c0\u67e5 UserSig \u662f\u5426\u6b63\u786e\uff0c\u5e76\u4e8e1\u5206\u949f\u540e\u91cd\u65b0\u9a8c\u8bc1\u3002".concat(vh),70051:"\u5e10\u53f7\u88ab\u62c9\u5165\u9ed1\u540d\u5355\u3002",70052:"UserSig \u5df2\u7ecf\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u751f\u6210\uff0c\u518d\u6b21\u5c1d\u8bd5\u3002",70107:"\u56e0\u5b89\u5168\u539f\u56e0\u88ab\u9650\u5236\u767b\u5f55\uff0c\u8bf7\u4e0d\u8981\u9891\u7e41\u767b\u5f55\u3002",70169:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728\u3002",70114:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002"),70202:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002"),70206:"\u8bf7\u6c42\u4e2d\u6279\u91cf\u6570\u91cf\u4e0d\u5408\u6cd5\u3002",70402:"\u53c2\u6570\u975e\u6cd5\uff0c\u8bf7\u68c0\u67e5\u5fc5\u586b\u5b57\u6bb5\u662f\u5426\u586b\u5145\uff0c\u6216\u8005\u5b57\u6bb5\u7684\u586b\u5145\u662f\u5426\u6ee1\u8db3\u534f\u8bae\u8981\u6c42\u3002",70403:"\u8bf7\u6c42\u5931\u8d25\uff0c\u9700\u8981 App \u7ba1\u7406\u5458\u6743\u9650\u3002",70398:"\u5e10\u53f7\u6570\u8d85\u9650\u3002\u5982\u9700\u521b\u5efa\u591a\u4e8e100\u4e2a\u5e10\u53f7\uff0c\u8bf7\u5c06\u5e94\u7528\u5347\u7ea7\u4e3a\u4e13\u4e1a\u7248\uff0c\u5177\u4f53\u64cd\u4f5c\u6307\u5f15\u8bf7\u53c2\u89c1\u8d2d\u4e70\u6307\u5f15(".concat(gh,"269/32458)\u3002"),70500:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),71e3:"\u5220\u9664\u5e10\u53f7\u5931\u8d25\u3002\u4ec5\u652f\u6301\u5220\u9664\u4f53\u9a8c\u7248\u5e10\u53f7\uff0c\u60a8\u5f53\u524d\u5e94\u7528\u4e3a\u4e13\u4e1a\u7248\uff0c\u6682\u4e0d\u652f\u6301\u5e10\u53f7\u5220\u9664\u3002",20001:"\u8bf7\u6c42\u5305\u975e\u6cd5\u3002",20002:"UserSig \u6216 A2 \u5931\u6548\u3002",20003:"\u6d88\u606f\u53d1\u9001\u65b9\u6216\u63a5\u6536\u65b9 UserID \u65e0\u6548\u6216\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5 UserID \u662f\u5426\u5df2\u5bfc\u5165\u5373\u65f6\u901a\u4fe1 IM\u3002",20004:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5\u3002",20005:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),20006:"\u89e6\u53d1\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\u4e4b\u524d\u56de\u8c03\uff0cApp \u540e\u53f0\u8fd4\u56de\u7981\u6b62\u4e0b\u53d1\u8be5\u6d88\u606f\u3002"),20007:"\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\uff0c\u88ab\u5bf9\u65b9\u62c9\u9ed1\uff0c\u7981\u6b62\u53d1\u9001\u3002\u6d88\u606f\u53d1\u9001\u72b6\u6001\u9ed8\u8ba4\u5c55\u793a\u4e3a\u5931\u8d25\uff0c\u60a8\u53ef\u4ee5\u767b\u5f55\u63a7\u5236\u53f0\u4fee\u6539\u8be5\u573a\u666f\u4e0b\u7684\u6d88\u606f\u53d1\u9001\u72b6\u6001\u5c55\u793a\u7ed3\u679c\uff0c\u5177\u4f53\u64cd\u4f5c\u8bf7\u53c2\u89c1\u6d88\u606f\u4fdd\u7559\u8bbe\u7f6e(").concat(gh,"269/38656)\u3002"),20009:"\u6d88\u606f\u53d1\u9001\u53cc\u65b9\u4e92\u76f8\u4e0d\u662f\u597d\u53cb\uff0c\u7981\u6b62\u53d1\u9001\uff08\u914d\u7f6e".concat("\u5355\u804a\u6d88\u606f","\u6821\u9a8c\u597d\u53cb\u5173\u7cfb\u624d\u4f1a\u51fa\u73b0\uff09\u3002"),20010:"\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\uff0c\u81ea\u5df1\u4e0d\u662f\u5bf9\u65b9\u7684\u597d\u53cb\uff08\u5355\u5411\u5173\u7cfb\uff09\uff0c\u7981\u6b62\u53d1\u9001\u3002"),20011:"\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\uff0c\u5bf9\u65b9\u4e0d\u662f\u81ea\u5df1\u7684\u597d\u53cb\uff08\u5355\u5411\u5173\u7cfb\uff09\uff0c\u7981\u6b62\u53d1\u9001\u3002"),20012:"\u53d1\u9001\u65b9\u88ab\u7981\u8a00\uff0c\u8be5\u6761\u6d88\u606f\u88ab\u7981\u6b62\u53d1\u9001\u3002",20016:"\u6d88\u606f\u64a4\u56de\u8d85\u8fc7\u4e86\u65f6\u95f4\u9650\u5236\uff08\u9ed8\u8ba42\u5206\u949f\uff09\u3002",20018:"\u5220\u9664\u6f2b\u6e38\u5185\u90e8\u9519\u8bef\u3002",90001:"JSON \u683c\u5f0f\u89e3\u6790\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8bf7\u6c42\u5305\u662f\u5426\u7b26\u5408 JSON \u89c4\u8303\u3002",90002:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d MsgBody \u4e0d\u7b26\u5408\u6d88\u606f\u683c\u5f0f\u63cf\u8ff0\uff0c\u6216\u8005 MsgBody \u4e0d\u662f Array \u7c7b\u578b\uff0c\u8bf7\u53c2\u8003 TIMMsgElement \u5bf9\u8c61\u7684\u5b9a\u4e49(").concat(gh,"269/2720#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement)\u3002"),90003:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 To_Account \u5b57\u6bb5\u6216\u8005 To_Account \u5e10\u53f7\u4e0d\u5b58\u5728\u3002"),90005:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 MsgRandom \u5b57\u6bb5\u6216\u8005 MsgRandom \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90006:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 MsgTimeStamp \u5b57\u6bb5\u6216\u8005 MsgTimeStamp \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90007:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d MsgBody \u7c7b\u578b\u4e0d\u662f Array \u7c7b\u578b\uff0c\u8bf7\u5c06\u5176\u4fee\u6539\u4e3a Array \u7c7b\u578b\u3002"),90008:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 From_Account \u5b57\u6bb5\u6216\u8005 From_Account \u5e10\u53f7\u4e0d\u5b58\u5728\u3002"),90009:"\u8bf7\u6c42\u9700\u8981 App \u7ba1\u7406\u5458\u6743\u9650\u3002",90010:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e0d\u7b26\u5408\u6d88\u606f\u683c\u5f0f\u63cf\u8ff0\uff0c\u8bf7\u53c2\u8003 TIMMsgElement \u5bf9\u8c61\u7684\u5b9a\u4e49(").concat(gh,"269/2720#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement)\u3002"),90011:"\u6279\u91cf\u53d1\u6d88\u606f\u76ee\u6807\u5e10\u53f7\u8d85\u8fc7500\uff0c\u8bf7\u51cf\u5c11 To_Account \u4e2d\u76ee\u6807\u5e10\u53f7\u6570\u91cf\u3002",90012:"To_Account \u6ca1\u6709\u6ce8\u518c\u6216\u4e0d\u5b58\u5728\uff0c\u8bf7\u786e\u8ba4 To_Account \u662f\u5426\u5bfc\u5165\u5373\u65f6\u901a\u4fe1 IM \u6216\u8005\u662f\u5426\u62fc\u5199\u9519\u8bef\u3002",90026:"\u6d88\u606f\u79bb\u7ebf\u5b58\u50a8\u65f6\u95f4\u9519\u8bef\uff08\u6700\u591a\u4e0d\u80fd\u8d85\u8fc77\u5929\uff09\u3002",90031:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d SyncOtherMachine \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90044:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d MsgLifeTime \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90048:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728\u3002",90054:"\u64a4\u56de\u8bf7\u6c42\u4e2d\u7684 MsgKey \u4e0d\u5408\u6cd5\u3002",90994:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),90995:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),91e3:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),90992:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","\u5982\u679c\u6240\u6709\u8bf7\u6c42\u90fd\u8fd4\u56de\u8be5\u9519\u8bef\u7801\uff0c\u4e14 App \u914d\u7f6e\u4e86\u7b2c\u4e09\u65b9\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5 App \u670d\u52a1\u7aef\u662f\u5426\u6b63\u5e38\u5411\u5373\u65f6\u901a\u4fe1 IM \u540e\u53f0\u670d\u52a1\u7aef\u8fd4\u56de\u56de\u8c03\u7ed3\u679c\u3002"),93e3:"JSON \u6570\u636e\u5305\u8d85\u957f\uff0c\u6d88\u606f\u5305\u4f53\u8bf7\u4e0d\u8981\u8d85\u8fc78k\u3002",91101:"Web \u7aef\u957f\u8f6e\u8be2\u88ab\u8e22\uff08Web \u7aef\u540c\u65f6\u5728\u7ebf\u5b9e\u4f8b\u4e2a\u6570\u8d85\u51fa\u9650\u5236\uff09\u3002",10002:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),10003:"\u8bf7\u6c42\u4e2d\u7684\u63a5\u53e3\u540d\u79f0\u9519\u8bef\uff0c\u8bf7\u6838\u5bf9\u63a5\u53e3\u540d\u79f0\u5e76\u91cd\u8bd5\u3002",10004:"\u53c2\u6570\u975e\u6cd5\uff0c\u8bf7\u6839\u636e\u9519\u8bef\u63cf\u8ff0\u68c0\u67e5\u8bf7\u6c42\u662f\u5426\u6b63\u786e\u3002",10005:"\u8bf7\u6c42\u5305\u4f53\u4e2d\u643a\u5e26\u7684\u5e10\u53f7\u6570\u91cf\u8fc7\u591a\u3002",10006:"\u64cd\u4f5c\u9891\u7387\u9650\u5236\uff0c\u8bf7\u5c1d\u8bd5\u964d\u4f4e\u8c03\u7528\u7684\u9891\u7387\u3002",10007:"\u64cd\u4f5c\u6743\u9650\u4e0d\u8db3\uff0c\u4f8b\u5982 Work ".concat("\u7fa4\u7ec4","\u4e2d\u666e\u901a\u6210\u5458\u5c1d\u8bd5\u6267\u884c\u8e22\u4eba\u64cd\u4f5c\uff0c\u4f46\u53ea\u6709 App \u7ba1\u7406\u5458\u624d\u6709\u6743\u9650\u3002"),10008:"\u8bf7\u6c42\u975e\u6cd5\uff0c\u53ef\u80fd\u662f\u8bf7\u6c42\u4e2d\u643a\u5e26\u7684\u7b7e\u540d\u4fe1\u606f\u9a8c\u8bc1\u4e0d\u6b63\u786e\uff0c\u8bf7\u518d\u6b21\u5c1d\u8bd5\u3002",10009:"\u8be5\u7fa4\u4e0d\u5141\u8bb8\u7fa4\u4e3b\u4e3b\u52a8\u9000\u51fa\u3002",10010:"".concat("\u7fa4\u7ec4","\u4e0d\u5b58\u5728\uff0c\u6216\u8005\u66fe\u7ecf\u5b58\u5728\u8fc7\uff0c\u4f46\u662f\u76ee\u524d\u5df2\u7ecf\u88ab\u89e3\u6563\u3002"),10011:"\u89e3\u6790 JSON \u5305\u4f53\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u5305\u4f53\u7684\u683c\u5f0f\u662f\u5426\u7b26\u5408 JSON \u683c\u5f0f\u3002",10012:"\u53d1\u8d77\u64cd\u4f5c\u7684 UserID \u975e\u6cd5\uff0c\u8bf7\u68c0\u67e5\u53d1\u8d77\u64cd\u4f5c\u7684\u7528\u6237 UserID \u662f\u5426\u586b\u5199\u6b63\u786e\u3002",10013:"\u88ab\u9080\u8bf7\u52a0\u5165\u7684\u7528\u6237\u5df2\u7ecf\u662f\u7fa4\u6210\u5458\u3002",10014:"\u7fa4\u5df2\u6ee1\u5458\uff0c\u65e0\u6cd5\u5c06\u8bf7\u6c42\u4e2d\u7684\u7528\u6237\u52a0\u5165".concat("\u7fa4\u7ec4","\uff0c\u5982\u679c\u662f\u6279\u91cf\u52a0\u4eba\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u51cf\u5c11\u52a0\u5165\u7528\u6237\u7684\u6570\u91cf\u3002"),10015:"\u627e\u4e0d\u5230\u6307\u5b9a ID \u7684".concat("\u7fa4\u7ec4","\u3002"),10016:"App \u540e\u53f0\u901a\u8fc7\u7b2c\u4e09\u65b9\u56de\u8c03\u62d2\u7edd\u672c\u6b21\u64cd\u4f5c\u3002",10017:"\u56e0\u88ab\u7981\u8a00\u800c\u4e0d\u80fd\u53d1\u9001\u6d88\u606f\uff0c\u8bf7\u68c0\u67e5\u53d1\u9001\u8005\u662f\u5426\u88ab\u8bbe\u7f6e\u7981\u8a00\u3002",10018:"\u5e94\u7b54\u5305\u957f\u5ea6\u8d85\u8fc7\u6700\u5927\u5305\u957f\uff081MB\uff09\uff0c\u8bf7\u6c42\u7684\u5185\u5bb9\u8fc7\u591a\uff0c\u8bf7\u5c1d\u8bd5\u51cf\u5c11\u5355\u6b21\u8bf7\u6c42\u7684\u6570\u636e\u91cf\u3002",10019:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728\u3002",10021:"".concat("\u7fa4\u7ec4"," ID \u5df2\u88ab\u4f7f\u7528\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u7684").concat("\u7fa4\u7ec4"," ID\u3002"),10023:"\u53d1\u6d88\u606f\u7684\u9891\u7387\u8d85\u9650\uff0c\u8bf7\u5ef6\u957f\u4e24\u6b21\u53d1\u6d88\u606f\u65f6\u95f4\u7684\u95f4\u9694\u3002",10024:"\u6b64\u9080\u8bf7\u6216\u8005\u7533\u8bf7\u8bf7\u6c42\u5df2\u7ecf\u88ab\u5904\u7406\u3002",10025:"".concat("\u7fa4\u7ec4"," ID \u5df2\u88ab\u4f7f\u7528\uff0c\u5e76\u4e14\u64cd\u4f5c\u8005\u4e3a\u7fa4\u4e3b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002"),10026:"\u8be5 SDKAppID \u8bf7\u6c42\u7684\u547d\u4ee4\u5b57\u5df2\u88ab\u7981\u7528\u3002",10030:"\u8bf7\u6c42\u64a4\u56de\u7684\u6d88\u606f\u4e0d\u5b58\u5728\u3002",10031:"\u6d88\u606f\u64a4\u56de\u8d85\u8fc7\u4e86\u65f6\u95f4\u9650\u5236\uff08\u9ed8\u8ba42\u5206\u949f\uff09\u3002",10032:"\u8bf7\u6c42\u64a4\u56de\u7684\u6d88\u606f\u4e0d\u652f\u6301\u64a4\u56de\u64cd\u4f5c\u3002",10033:"".concat("\u7fa4\u7ec4","\u7c7b\u578b\u4e0d\u652f\u6301\u6d88\u606f\u64a4\u56de\u64cd\u4f5c\u3002"),10034:"\u8be5\u6d88\u606f\u7c7b\u578b\u4e0d\u652f\u6301\u5220\u9664\u64cd\u4f5c\u3002",10035:"\u76f4\u64ad\u7fa4\u548c\u5728\u7ebf\u6210\u5458\u5e7f\u64ad\u5927\u7fa4\u4e0d\u652f\u6301\u5220\u9664\u6d88\u606f\u3002",10036:"\u76f4\u64ad\u7fa4\u521b\u5efa\u6570\u91cf\u8d85\u8fc7\u4e86\u9650\u5236\uff0c\u8bf7\u53c2\u8003\u4ef7\u683c\u8bf4\u660e(".concat(gh,"269/11673)\u8d2d\u4e70\u9884\u4ed8\u8d39\u5957\u9910\u201cIM\u76f4\u64ad\u7fa4\u201d\u3002"),10037:"\u5355\u4e2a\u7528\u6237\u53ef\u521b\u5efa\u548c\u52a0\u5165\u7684".concat("\u7fa4\u7ec4","\u6570\u91cf\u8d85\u8fc7\u4e86\u9650\u5236\uff0c\u8bf7\u53c2\u8003\u4ef7\u683c\u8bf4\u660e(").concat(gh,"269/11673)\u8d2d\u4e70\u6216\u5347\u7ea7\u9884\u4ed8\u8d39\u5957\u9910\u201c\u5355\u4eba\u53ef\u521b\u5efa\u4e0e\u52a0\u5165").concat("\u7fa4\u7ec4","\u6570\u201d\u3002"),10038:"\u7fa4\u6210\u5458\u6570\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u8bf7\u53c2\u8003\u4ef7\u683c\u8bf4\u660e(".concat(gh,"269/11673)\u8d2d\u4e70\u6216\u5347\u7ea7\u9884\u4ed8\u8d39\u5957\u9910\u201c\u6269\u5c55\u7fa4\u4eba\u6570\u4e0a\u9650\u201d\u3002"),10041:"\u8be5\u5e94\u7528\uff08SDKAppID\uff09\u5df2\u914d\u7f6e\u4e0d\u652f\u6301\u7fa4\u6d88\u606f\u64a4\u56de\u3002"},_h=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this)).code=e.code,i.message=yh[e.code]||e.message,i.data=e.data||{},i}return n}(Vn(Error)),bh={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_Work:2622,MEMBER_NOT_IN_GROUP:2623,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,DEL_FRIEND_INVALID_PARAM:2700,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,NO_NETWORK:2805,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,GET_LONGPOLL_ID_FAILED:2904,INVALID_OPERATION:2905,SDK_IS_NOT_READY:2999,LONG_POLL_KICK_OUT:91101,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,LONG_POLL_API_PARAM_ERROR:90001},kh="\u6d88\u606f\u53d1\u9001\u5931\u8d25",wh="MessageController.constructor() \u9700\u8981\u53c2\u6570 options",Ch="\u65e0\u6cd5\u53d1\u9001\u7a7a\u6587\u4ef6",Sh="\u56de\u8c03\u51fd\u6570\u8fd0\u884c\u65f6\u9047\u5230\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u63a5\u5165\u4fa7\u4ee3\u7801",Eh="\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25",Ih="\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7100M\uff0c\u65e0\u6cd5\u53d1\u9001 ",Th="AVChatRoom \u7c7b\u578b\u7684\u7fa4\u4e0d\u652f\u6301\u9080\u8bf7\u7fa4\u6210\u5458",Mh="updateMyProfile \u65e0\u6807\u914d\u8d44\u6599\u5b57\u6bb5\u6216\u81ea\u5b9a\u4e49\u8d44\u6599\u5b57\u6bb5",Oh="_syncOffset \u4e22\u5931",Dh="\u63a5\u53e3\u9700\u8981 SDK \u5904\u4e8e ready \u72b6\u6001\u540e\u624d\u80fd\u8c03\u7528",Ah=["jpg","jpeg","gif","png","bmp"],xh=["mp4"],Rh=function(){function e(t){Dn(this,e);var n=this._check(t);if(n instanceof _h)throw n;this.type=wn.MSG_FILE,this._percent=0;var i=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||"",uuid:t.uuid,fileName:i.name||"",fileSize:i.size||0}}return xn(e,[{key:"_getFileInfo",value:function(e){if(e.fileName&&e.fileSize)return{size:e.fileSize,name:e.fileName};if(Us)return{};var t=e.file.files[0];return{size:t.size,name:t.name,type:t.type.slice(t.type.lastIndexOf("/")+1).toLowerCase()}}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"_check",value:function(e){if(e.size>104857600)return new _h({code:bh.MESSAGE_FILE_SIZE_LIMIT,message:"".concat(Ih,": ").concat(104857600," bytes")})}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),e}(),Ph=function(){function e(t){Dn(this,e),this.type=wn.MSG_CUSTOM,this.content={data:t.data||"",description:t.description||"",extension:t.extension||""}}return xn(e,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),zh=function(){function e(t){Dn(this,e),this.type=wn.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||"",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,thumbHeight:t.thumbHeight,thumbSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl}}return xn(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),e}(),Lh=function e(t){Dn(this,e),this.type=wn.MSG_GEO,this.content=t},Nh=E.f,Fh="".startsWith,Uh=Math.min,Gh=os("startsWith"),Vh=!(Gh||(ph=Nh(String.prototype,"startsWith"),!ph||ph.writable));De({target:"String",proto:!0,forced:!Vh&&!Gh},{startsWith:function(e){var t=String(p(this));is(e);var n=ue(Uh(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return Fh?Fh.call(t,i,n):t.slice(n,n+i.length)===i}});var jh=function(){function e(t){if(Dn(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||"",t.ID)this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(wn.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(wn.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[];var n=t.elements[0].type,i=t.elements[0].content;this._patchRichMediaPayload(n,i),this.messageBody.push(n===wn.MSG_MERGER?{type:n,payload:new Bh(i).content}:{type:n,payload:i}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to)}}return xn(e,[{key:"_patchRichMediaPayload",value:function(e,t){e===wn.MSG_IMAGE?t.imageInfoArray.forEach(function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))}):e===wn.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===wn.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===wn.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),Bh=function(){function e(t){if(Dn(this,e),this.type=wn.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},t.downloadKey){var n=t.pbDownloadKey,i=t.title,r=t.abstractList,o=t.compatibleText,s=t.version;this.content.downloadKey=t.downloadKey,this.content.pbDownloadKey=n,this.content.title=i,this.content.abstractList=r,this.content.compatibleText=o,this.content.version=s||0}else if(eu(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var a=t.title,u=t.abstractList,c=t.compatibleText,l=t.version,h=[];t.messageList.forEach(function(e){if(!eu(e)){var t=new jh(e);h.push(t)}}),this.content.messageList=h,this.content.title=a,this.content.abstractList=u,this.content.compatibleText=c,this.content.version=l||0}va.debug("MergerElement.content:",this.content)}return xn(e,[{key:"sendable",value:function(){return!eu(this.content.messageList)||!eu(this.content.downloadKey)}}]),e}(),Hh={1:wn.MSG_PRIORITY_HIGH,2:wn.MSG_PRIORITY_NORMAL,3:wn.MSG_PRIORITY_LOW,4:wn.MSG_PRIORITY_LOWEST},qh=function(){function e(t){Dn(this,e),this.ID="",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||wn.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||za(),this.priority=this._computePriority(t.priority),this.nick=t.nick||"",this.avatar=t.avatar||"",this.isPeerRead=!1,this.nameCard="",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.geo={},this.from=t.from||null,this.to=t.to||null,this.flow="",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=t.status||"success",this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||"",this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t)}return xn(e,[{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){if(null!==e){_a(e.nick)&&(this.nick=e.nick),_a(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;ka(t)&&_a(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach(function(e){e!==wn.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(wn.MSG_AT_ALL))}),wa(e.groupAtInfo)&&e.groupAtInfo.forEach(function(e){1===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):2===e.groupAtAllFlag&&t.atUserList.push(wn.MSG_AT_ALL)})}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this.payload=this._elements[0].content,this.type=this._elements[0].type}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?"success":"unSend",!this.from&&(this.from=e)),this._initFlow(e),this._initielizeSequence(e),this._concactConversationID(e),this.generateMessageID(e)}},{key:"isSendable",value:function(){return 0!==this._elements.length&&("function"!=typeof this._elements[0].sendable?(va.warn("".concat(this._elements[0].type,' need "boolean : sendable()" method')),!1):this._elements[0].sendable())}},{key:"_initTo",value:function(e){this.conversationType===wn.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initielizeSequence",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return va.error("autoincrementIndex(string: key) need key parameter"),!1;if(void 0===Ua[e]){var t=new Date,n="3".concat(t.getHours()).slice(-2),i="0".concat(t.getMinutes()).slice(-2),r="0".concat(t.getSeconds()).slice(-2);Ua[e]=parseInt([n,i,r,"0001"].join("")),n=null,i=null,r=null,va.warn("utils.autoincrementIndex() create new sequence : ".concat(e," = ").concat(Ua[e]))}return Ua[e]++}(e)),0===this.sequence&&this.conversationType===wn.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(e){var t=e===this.from?1:0,n=this.sequence>0?this.sequence:this.clientSequence;this.ID="".concat(this.conversationID,"-").concat(n,"-").concat(this.random,"-").concat(t)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concactConversationID",value:function(e){var t="",n=this.conversationType;n!==wn.CONV_SYSTEM?(t=n===wn.CONV_C2C?e===this.from?this.to:this.from:this.to,this.conversationID="".concat(n).concat(t)):this.conversationID=wn.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof qu||e instanceof th||e instanceof nh||e instanceof ih||e instanceof Rh||e instanceof zh||e instanceof oh||e instanceof ah||e instanceof Ph||e instanceof Lh||e instanceof Bh}},{key:"setElement",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case wn.MSG_TEXT:t.setTextElement(e.content);break;case wn.MSG_IMAGE:t.setImageElement(e.content);break;case wn.MSG_AUDIO:t.setAudioElement(e.content);break;case wn.MSG_FILE:t.setFileElement(e.content);break;case wn.MSG_VIDEO:t.setVideoElement(e.content);break;case wn.MSG_CUSTOM:t.setCustomElement(e.content);break;case wn.MSG_GEO:t.setGEOElement(e.content);break;case wn.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case wn.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case wn.MSG_FACE:t.setFaceElement(e.content);break;case wn.MSG_MERGER:t.setMergerElement(e.content);break;default:va.warn(e.type,e.content,"no operation......")}};if(wa(e))for(var i=0;i<e.length;i++)n(e[i]);else n(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){var t=new qu({text:"string"==typeof e?e:e.text});this._elements.push(t)}},{key:"setImageElement",value:function(e){var t=new th(e);this._elements.push(t)}},{key:"setAudioElement",value:function(e){var t=new ih(e);this._elements.push(t)}},{key:"setFileElement",value:function(e){var t=new Rh(e);this._elements.push(t)}},{key:"setVideoElement",value:function(e){var t=new zh(e);this._elements.push(t)}},{key:"setGEOElement",value:function(e){var t=new Lh(e);this._elements.push(t)}},{key:"setCustomElement",value:function(e){var t=new Ph(e);this._elements.push(t)}},{key:"setGroupTipElement",value:function(e){var t={},n=e.operationType;eu(e.memberInfoList)||n!==wn.GRP_TIP_MBR_JOIN&&n!==wn.GRP_TIP_MBR_KICKED_OUT?e.operatorInfo&&(t=e.operatorInfo):t=e.memberInfoList[0];var i=t.nick,r=t.avatar;_a(i)&&(this.nick=i),_a(r)&&(this.avatar=r);var o=new oh(e);this._elements.push(o)}},{key:"setGroupSystemNoticeElement",value:function(e){var t=new ah(e);this._elements.push(t)}},{key:"setFaceElement",value:function(e){var t=new nh(e);this._elements.push(t)}},{key:"setMergerElement",value:function(e){var t=new Bh(e);this._elements.push(t)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"getRelayFlag",value:function(){return this._relayFlag}},{key:"setOnlineOnlyFlag",value:function(e){this._onlineOnlyFlag=e}},{key:"getOnlineOnlyFlag",value:function(){return this._onlineOnlyFlag}},{key:"_computePriority",value:function(e){if(Ca(e))return wn.MSG_PRIORITY_NORMAL;if(_a(e)&&-1!==Object.values(Hh).indexOf(e))return e;if(ya(e)){var t=""+e;if(-1!==Object.keys(Hh).indexOf(t))return Hh[t]}return wn.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick,n=e.avatar;_a(t)&&(this.nick=t),_a(n)&&(this.avatar=n)}},{key:"elements",get:function(){return va.warn("\uff01\uff01\uff01Message \u5b9e\u4f8b\u7684 elements \u5c5e\u6027\u5373\u5c06\u5e9f\u5f03\uff0c\u8bf7\u5c3d\u5feb\u4fee\u6539\u3002\u4f7f\u7528 type \u548c payload \u5c5e\u6027\u5904\u7406\u5355\u6761\u6d88\u606f\uff0c\u517c\u5bb9\u7ec4\u5408\u6d88\u606f\u4f7f\u7528 _elements \u5c5e\u6027\uff01\uff01\uff01"),this._elements}}]),e}(),Wh=function(e){return!(!e||!(function(e){return _a(e)&&e.slice(0,3)===wn.CONV_C2C}(e)||function(e){return _a(e)&&e.slice(0,5)===wn.CONV_GROUP}(e)||Ka(e))&&(console.warn("\u975e\u6cd5\u7684\u4f1a\u8bdd ID:".concat(e,"\u3002\u4f1a\u8bdd ID \u7ec4\u6210\u65b9\u5f0f\uff1aC2C + userID\uff08\u5355\u804a\uff09GROUP + groupID\uff08\u7fa4\u804a\uff09@TIM#SYSTEM\uff08\u7cfb\u7edf\u901a\u77e5\u4f1a\u8bdd\uff09")),1))},Kh="\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#",Yh=function(e){return e.param?"".concat(e.api," ").concat(e.param," ").concat(e.desc,"\u3002").concat(Kh).concat(e.api):"".concat(e.api," ").concat(e.desc,"\u3002").concat(Kh).concat(e.api)},$h={type:"String",required:!0},Zh={type:"Array",required:!0},Xh={type:"Object",required:!0},Jh={login:{userID:$h,userSig:$h},addToBlacklist:{userIDList:Zh},on:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(console.warn(Yh({api:"on",param:"eventName",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(console.warn(Yh({api:"on",param:"handler",desc:"\u53c2\u6570\u5fc5\u987b\u4e3a Function"})),!1):(""===e.name&&console.warn("on \u63a5\u53e3\u7684 handler \u53c2\u6570\u63a8\u8350\u4f7f\u7528\u5177\u540d\u51fd\u6570\u3002\u5177\u540d\u51fd\u6570\u53ef\u4ee5\u4f7f\u7528 off \u63a5\u53e3\u53d6\u6d88\u8ba2\u9605\uff0c\u533f\u540d\u51fd\u6570\u65e0\u6cd5\u53d6\u6d88\u8ba2\u9605\u3002"),!0)}}],once:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(console.warn(Yh({api:"once",param:"eventName",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(console.warn(Yh({api:"once",param:"handler",desc:"\u53c2\u6570\u5fc5\u987b\u4e3a Function"})),!1):(""===e.name&&console.warn("once \u63a5\u53e3\u7684 handler \u53c2\u6570\u63a8\u8350\u4f7f\u7528\u5177\u540d\u51fd\u6570\u3002"),!0)}}],off:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(console.warn(Yh({api:"off",param:"eventName",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(console.warn(Yh({api:"off",param:"handler",desc:"\u53c2\u6570\u5fc5\u987b\u4e3a Function"})),!1):(""===e.name&&console.warn("off \u63a5\u53e3\u65e0\u6cd5\u4e3a\u533f\u540d\u51fd\u6570\u53d6\u6d88\u76d1\u542c\u4e8b\u4ef6\u3002"),!0)}}],sendMessage:[zn({name:"message"},Xh)],getMessageList:{conversationID:zn(zn({},$h),{},{validator:function(e){return Wh(e)}}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e){return!(!Ca(e)&&!/^[1-9][0-9]*$/.test(e)&&(console.warn(Yh({api:"getMessageList",param:"count",desc:"\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"})),1))}}},setMessageRead:{conversationID:zn(zn({},$h),{},{validator:function(e){return Wh(e)}})},getConversationProfile:[zn(zn({name:"conversationID"},$h),{},{validator:function(e){return Wh(e)}})],deleteConversation:[zn(zn({name:"conversationID"},$h),{},{validator:function(e){return Wh(e)}})],getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:$h,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:Zh},createGroup:{name:$h},joinGroup:{groupID:$h,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[zn({name:"groupID"},$h)],handleApplication:{message:Xh,handleAction:$h,handleMessage:{type:"String"}},changeGroupOwner:{groupID:$h,newOwnerID:$h},updateGroupProfile:{groupID:$h,muteAllMembers:{type:"Boolean"}},dismissGroup:[zn({name:"groupID"},$h)],searchGroupByID:[zn({name:"groupID"},$h)],getGroupMemberList:{groupID:$h,offset:{type:"Number"},count:{type:"Number"}},getGroupMemberProfile:{groupID:$h,userIDList:Zh,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:$h,userIDList:Zh},setGroupMemberRole:{groupID:$h,userID:$h,role:$h},setGroupMemberMuteTime:{groupID:$h,userID:$h,muteTime:{type:"Number",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:$h,userID:{type:"String"},nameCard:zn(zn({},$h),{},{validator:function(e){return!0!==/^\s+$/.test(e)}})},setMessageRemindType:{groupID:$h,messageRemindType:$h},setGroupMemberCustomField:{groupID:$h,userID:{type:"String"},memberCustomField:Zh},deleteGroupMember:{groupID:$h},createTextMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){return ka(e)?_a(e.text)?0!==e.text.length||(console.warn(Yh({api:"createTextMessage",desc:"\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"})),!1):(console.warn(Yh({api:"createTextMessage",param:"payload.text",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})),!1):(console.warn(Yh({api:"createTextMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1)}})},createTextAtMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){return ka(e)?_a(e.text)?0===e.text.length?(console.warn(Yh({api:"createTextAtMessage",desc:"\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"})),!1):!(e.atUserList&&!wa(e.atUserList)&&(console.warn(Yh({api:"createTextAtMessage",desc:"payload.atUserList \u7c7b\u578b\u5fc5\u987b\u4e3a\u6570\u7ec4"})),1)):(console.warn(Yh({api:"createTextAtMessage",param:"payload.text",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})),!1):(console.warn(Yh({api:"createTextAtMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1)}})},createCustomMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){return ka(e)?e.data&&!_a(e.data)?(console.warn(Yh({api:"createCustomMessage",param:"payload.data",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})),!1):e.description&&!_a(e.description)?(console.warn(Yh({api:"createCustomMessage",param:"payload.description",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})),!1):!(e.extension&&!_a(e.extension)&&(console.warn(Yh({api:"createCustomMessage",param:"payload.extension",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})),1)):(console.warn(Yh({api:"createCustomMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1)}})},createImageMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){if(!ka(e))return console.warn(Yh({api:"createImageMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1;if(Ca(e.file))return console.warn(Yh({api:"createImageMessage",param:"payload.file",desc:"\u4e0d\u80fd\u4e3a undefined"})),!1;if(Gs){if(!(e.file instanceof HTMLInputElement||ma(e.file)))return console.warn(Yh({api:"createImageMessage",param:"payload.file",desc:"\u7c7b\u578b\u5fc5\u987b\u662f HTMLInputElement \u6216 File"})),!1;if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Yh({api:"createImageMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e){return Ca(e)&&console.warn(Yh({api:"createImageMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})),!0}}})},createAudioMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){return!!ka(e)||(console.warn(Yh({api:"createAudioMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e){return Ca(e)&&console.warn(Yh({api:"createAudioMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})),!0}}},createVideoMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){if(!ka(e))return console.warn(Yh({api:"createVideoMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1;if(Ca(e.file))return console.warn(Yh({api:"createVideoMessage",param:"payload.file",desc:"\u4e0d\u80fd\u4e3a undefined"})),!1;if(Gs){if(!(e.file instanceof HTMLInputElement||ma(e.file)))return console.warn(Yh({api:"createVideoMessage",param:"payload.file",desc:"\u7c7b\u578b\u5fc5\u987b\u662f HTMLInputElement \u6216 File"})),!1;if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Yh({api:"createVideoMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return Ca(e)&&console.warn(Yh({api:"createVideoMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})),!0}}},createFaceMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){return ka(e)?ya(e.index)?!!_a(e.data)||(console.warn(Yh({api:"createFaceMessage",param:"payload.data",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})),!1):(console.warn(Yh({api:"createFaceMessage",param:"payload.index",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a Number"})),!1):(console.warn(Yh({api:"createFaceMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1)}})},createFileMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){if(!ka(e))return console.warn(Yh({api:"createFileMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})),!1;if(Ca(e.file))return console.warn(Yh({api:"createFileMessage",param:"payload.file",desc:"\u4e0d\u80fd\u4e3a undefined"})),!1;if(Gs){if(!(e.file instanceof HTMLInputElement||ma(e.file)))return console.warn(Yh({api:"createFileMessage",param:"payload.file",desc:"\u7c7b\u578b\u5fc5\u987b\u662f HTMLInputElement \u6216 File"})),!1;if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Yh({api:"createFileMessage",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return Ca(e)&&console.warn(Yh({api:"createFileMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})),!0}}},createMergerMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){if(eu(e.messageList))return console.warn(Yh({api:"createMergerMessage",desc:"\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4"})),!1;if(eu(e.compatibleText))return console.warn(Yh({api:"createMergerMessage",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})),!1;var t=!1;return e.messageList.forEach(function(e){"fail"===e.status&&(t=!0)}),!t||(console.warn(Yh({api:"createMergerMessage",desc:"\u4e0d\u652f\u6301\u5408\u5e76\u5df2\u53d1\u9001\u5931\u8d25\u7684\u6d88\u606f"})),!1)}})},forwardMessage:{to:$h,conversationType:$h,payload:zn(zn({},Xh),{},{validator:function(e){return e instanceof qh?e.conversationType===wn.CONV_SYSTEM?(console.warn("forwardMessage \u4e0d\u80fd\u8f6c\u53d1\u7cfb\u7edf\u4f1a\u8bdd\u6d88\u606f\uff0c\u53ea\u80fd\u8f6c\u53d1\u5355\u804a\u6d88\u606f\u6216\u7fa4\u6d88\u606f"),!1):!0!==e.isRevoked||(console.warn("forwardMessage \u4e0d\u80fd\u8f6c\u53d1\u5df2\u88ab\u64a4\u56de\u7684\u6d88\u606f"),!1):(console.warn("forwardMessage \u53c2\u6570 message \u5fc5\u987b\u4e3a Message(".concat(Kh,"Message.html) \u5b9e\u4f8b\u3002")),!1)}})},revokeMessage:[zn(zn({name:"message"},Xh),{},{validator:function(e){return e instanceof qh?e.conversationType===wn.CONV_SYSTEM?(console.warn("revokeMessage \u4e0d\u80fd\u64a4\u56de\u7cfb\u7edf\u4f1a\u8bdd\u6d88\u606f\uff0c\u53ea\u80fd\u64a4\u56de\u5355\u804a\u6d88\u606f\u6216\u7fa4\u6d88\u606f"),!1):!0!==e.isRevoked||(console.warn("revokeMessage \u6d88\u606f\u5df2\u7ecf\u88ab\u64a4\u56de\uff0c\u8bf7\u52ff\u91cd\u590d\u64cd\u4f5c"),!1):(console.warn("revokeMessage \u53c2\u6570 message \u5fc5\u987b\u4e3a Message(".concat(Kh,"Message.html) \u5b9e\u4f8b\u3002")),!1)}})],getUserProfile:{userIDList:{type:"Array",validator:function(e){return wa(e)?(0===e.length&&console.warn(Yh({api:"getUserProfile",param:"userIDList",desc:"\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4"})),!0):(console.warn(Yh({api:"getUserProfile",param:"userIDList",desc:"\u5fc5\u987b\u4e3a\u6570\u7ec4"})),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e){return!!Ca(e)||!!wa(e)||(console.warn(Yh({api:"updateMyProfile",param:"profileCustomField",desc:"\u5fc5\u987b\u4e3a\u6570\u7ec4"})),!1)}}}},Qh={login:"login",logout:"logout",on:"on",once:"once",off:"off",setLogLevel:"setLogLevel",registerPlugin:"registerPlugin",destroy:"destroy",createTextMessage:"createTextMessage",createTextAtMessage:"createTextAtMessage",createImageMessage:"createImageMessage",createAudioMessage:"createAudioMessage",createVideoMessage:"createVideoMessage",createCustomMessage:"createCustomMessage",createFaceMessage:"createFaceMessage",createFileMessage:"createFileMessage",createMergerMessage:"createMergerMessage",downloadMergerMessage:"downloadMergerMessage",createForwardMessage:"createForwardMessage",sendMessage:"sendMessage",resendMessage:"resendMessage",getMessageList:"getMessageList",setMessageRead:"setMessageRead",revokeMessage:"revokeMessage",getConversationList:"getConversationList",getConversationProfile:"getConversationProfile",deleteConversation:"deleteConversation",getGroupList:"getGroupList",getGroupProfile:"getGroupProfile",createGroup:"createGroup",joinGroup:"joinGroup",updateGroupProfile:"updateGroupProfile",quitGroup:"quitGroup",dismissGroup:"dismissGroup",changeGroupOwner:"changeGroupOwner",searchGroupByID:"searchGroupByID",setMessageRemindType:"setMessageRemindType",handleGroupApplication:"handleGroupApplication",getGroupMemberProfile:"getGroupMemberProfile",getGroupMemberList:"getGroupMemberList",addGroupMember:"addGroupMember",deleteGroupMember:"deleteGroupMember",setGroupMemberNameCard:"setGroupMemberNameCard",setGroupMemberMuteTime:"setGroupMemberMuteTime",setGroupMemberRole:"setGroupMemberRole",setGroupMemberCustomField:"setGroupMemberCustomField",getGroupOnlineMemberCount:"getGroupOnlineMemberCount",getMyProfile:"getMyProfile",getUserProfile:"getUserProfile",updateMyProfile:"updateMyProfile",getBlacklist:"getBlacklist",addToBlacklist:"addToBlacklist",removeFromBlacklist:"removeFromBlacklist",getFriendList:"getFriendList",callExperimentalAPI:"callExperimentalAPI"},ef=!!br&&r(function(){br.prototype.finally.call({then:function(){}},function(){})});De({target:"Promise",proto:!0,real:!0,forced:ef},{finally:function(e){var t=Tr(this,ie("Promise")),n="function"==typeof e;return this.then(n?function(n){return ho(t,e()).then(function(){return n})}:e,n?function(n){return ho(t,e()).then(function(){throw n})}:e)}}),"function"!=typeof br||br.prototype.finally||ee(br.prototype,"finally",ie("Promise").prototype.finally);var tf="protobuf",nf="json",rf={HOST:{CURRENT:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},PRODUCTION:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},OVERSEA_PRODUCTION:{COMMON:"https://api.im.qcloud.com",PIC:"https://api.im.qcloud.com",COS:"https://api.im.qcloud.com"},SANDBOX:{COMMON:"https://events.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://test.tim.qq.com"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;1===e?this.CURRENT=this.SANDBOX:2===e?this.CURRENT=this.TEST:3===e?this.CURRENT=this.PRODUCTION:4===e&&(this.CURRENT=this.OVERSEA_PRODUCTION)}},NAME:{OPEN_IM:"openim",GROUP:"group_open_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",IM_LONG_MESSAGE:"im_long_msg",IM_COS_MESSAGE:"im_cos_msg"},CMD:{ACCESS_LAYER:"accesslayer",LOGIN:"login",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT_ALL:"logout",PORTRAIT_GET:"portrait_get_all",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",FRIEND_ADD:"friend_add",FRIEND_GET_ALL:"friend_get_all",FRIEND_DELETE:"friend_delete",RESPONSE_PENDENCY:"friend_response",GET_PENDENCY:"pendency_get",DELETE_PENDENCY:"pendency_delete",GET_GROUP_PENDENCY:"get_pendency",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SEND_MESSAGE:"sendmsg",REVOKE_C2C_MESSAGE:"msgwithdraw",SEND_GROUP_MESSAGE:"send_group_msg",REVOKE_GROUP_MESSAGE:"group_msg_recall",GET_GROUP_INFO:"get_group_info",GET_GROUP_MEMBER_INFO:"get_specified_group_member_info",GET_GROUP_MEMBER_LIST:"get_group_member_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",DELETE_GROUP_AT_TIPS:"deletemsg",GET_CONVERSATION_LIST:"get",PAGING_GET_CONVERSATION_LIST:"page_get",DELETE_CONVERSATION:"delete",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",GET_GROUP_ROAM_MESSAGES:"group_msg_get",SET_C2C_MESSAGE_READ:"msgreaded",GET_PEER_READ_TIME:"get_peer_read_time",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",TIM_WEB_REPORT:"tim_web_report",BIG_DATA_HALLWAY_AUTH_KEY:"authkey",GET_ONLINE_MEMBER_NUM:"get_online_member_num",DOWNLOAD_MERGER_MESSAGE:"get_relay_json_msg",UPLOAD_MERGER_MESSAGE:"save_relay_json_msg"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v4",group_open_long_polling_http_svc:"v4",group_open_long_polling_http_noauth_svc:"v4",imopenstat:"v4",im_cos_sign_svr:"v4",im_cos_msg:"v4",webim:"v4",im_long_msg:"v4"}};rf.HOST.setCurrent(3);var of={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey"},response:{GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupName:"name",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey"},ignoreKeyWord:["C2C","ID","USP"]},sf="_contextWasUpdated",af="_contextWasReset",uf="_a2KeyAndTinyIDUpdated",cf="_specifiedConfigUpdated",lf="_noticeIsSynchronizing",hf="_noticeIsSynchronized",ff="_messageSent",df="_syncMessageProcessing",pf="_syncMessageFinished",gf="_receiveInstantMessage",vf="_receiveGroupInstantMessage",mf="_receveGroupSystemNotice",yf="_messageRevoked",_f="_longPollGetIDFailed",bf="_longPollRequestFailed",kf="_longPollResponseOK",wf="_longPollKickedOut",Cf="_longPollMitipuleDeviceKickedOut",Sf="_longPollGetNewC2CNotice",Ef="_longPollGetNewGroupMessages",If="_longPollGetNewGroupTips",Tf="_longPollGetNewGroupAtTips",Mf="_longPollGetNewGroupNotice",Of="_longPollGetNewFriendMessages",Df="_longPollProfileModified",Af=" _longpollGroupMessageRevoked",xf=" _longpollGroupMessageReadNotice",Rf="_longpollC2CMessageRevoked",Pf="_longpollC2CMessageReadReceipt",zf="_longpollC2CMessageReadNotice",Lf="_avlongPollRequestFailed",Nf="_avlongPollResponseOK",Ff="_onGroupListUpdated",Uf="_loginSuccess",Gf="_signLogoutExcuting",Vf="_logoutSuccess",jf="_a2keyExpired",Bf="_errorHasBeenDetected",Hf="_onConversationListUpdated",qf="_onConversationListProfileUpdated",Wf="_conversationDeleted",Kf="onProfileUpdated",Yf="joinAVChatRoomSuccess",$f="_sdkStateReady",Zf="_sdkReload",Xf=rt.filter,Jf=Ye("filter"),Qf=ct("filter");De({target:"Array",proto:!0,forced:!Jf||!Qf},{filter:function(e){return Xf(this,e,arguments.length>1?arguments[1]:void 0)}});var ed=Ki.trim;function td(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");var n;return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map(function(e){return e.trim()}).filter(function(e){return e.length}).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=nd(e)),n=e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}).replace(/\d+(\w|$)/g,function(e){return e.toUpperCase()}),t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}De({target:"String",proto:!0,forced:function(e){return r(function(){return!!ji[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||ji[e].name!==e})}("trim")},{trim:function(){return ed(this)}});var nd=function(e){for(var t=!1,n=!1,i=!1,r=0;r<e.length;r++){var o=e[r];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.slice(0,r)+"-"+e.slice(r),t=!1,i=n,n=!0,r++):n&&i&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.slice(0,r-1)+"-"+e.slice(r-1),i=n,n=!1,t=!0):(t=o.toLowerCase()===o&&o.toUpperCase()!==o,i=n,n=o.toUpperCase()===o&&o.toLowerCase()!==o)}return e};function id(e,t,n){var i=[],r=0,o=function e(t,n){if(++r>100)return r--,t;if(wa(t)){var o=t.map(function(t){return ba(t)?e(t,n):t});return r--,o}if(ba(t)){var s=(a=t,u=function(e,t){if(!Ma(t))return!1;if((s=t)!==td(s)){for(var r=!0,o=0;o<of.ignoreKeyWord.length;o++)if(t.includes(of.ignoreKeyWord[o])){r=!1;break}r&&i.push(t)}var s;return Ca(n[t])?function(e){return"OPPOChannelID"===e?e:e[0].toUpperCase()+td(e).slice(1)}(t):n[t]},c=Object.create(null),Object.keys(a).forEach(function(e){var t=u(0,e);t&&(c[t]=a[e])}),c);return s=Ya(s,function(t,i){return wa(t)||ba(t)?e(t,n):t}),r--,s}var a,u,c}(e,t=zn(zn({},of.request),t));return i.length>0&&n.innerEmitter.emit(Bf,{code:bh.CONVERTOR_IRREGULAR_PARAMS,message:"\u4e0d\u89c4\u8303\u7684\u53c2\u6570\u540d\u79f0"}),o}function rd(e,t){return t=zn(zn({},of.response),t),wa(e)?e.map(function(e){return ba(e)?rd(e,t):e}):ba(e)?Ya((n=e,i=function(e,n){return Ca(t[n])?td(n):t[n]},r={},Object.keys(n).forEach(function(e){r[i(0,e)]=n[e]}),r),function(e){return wa(e)||ba(e)?rd(e,t):e}):void 0;var n,i,r}var od=function(){function e(t){var n=this;Dn(this,e),this.url="",this.requestData=null,this.method=t.method||"POST",this.callback=function(e){return rd(e=t.decode(e),n._getResponseMap(t))},this._initializeServerMap(),this._initializeURL(t),this._initializeRequestData(t)}return xn(e,[{key:"_initializeServerMap",value:function(){this._serverMap=Object.create(null);var e="";for(var t in rf.NAME)if(Object.prototype.hasOwnProperty.call(rf.NAME,t))switch(e=rf.NAME[t]){case rf.NAME.PIC:this._serverMap[e]=rf.HOST.CURRENT.PIC;break;case rf.NAME.IM_COS_SIGN:this._serverMap[e]=rf.HOST.CURRENT.COS;break;default:this._serverMap[e]=rf.HOST.CURRENT.COMMON}}},{key:"_getHost",value:function(e){if(void 0!==this._serverMap[e])return this._serverMap[e];throw new _h({code:bh.NETWORK_UNDEFINED_SERVER_NAME,message:"\u6253\u5305\u9519\u8bef\uff0c\u672a\u5b9a\u4e49\u7684 serverName"})}},{key:"_initializeURL",value:function(e){var t=e.serverName,n=e.cmd,i=this._getHost(t),r="".concat(i,"/").concat(rf.NAME_VERSION[t],"/").concat(t,"/").concat(n);r+="?".concat(this._getQueryString(e.queryString)),this.url=r}},{key:"getUrl",value:function(){return this.url.replace(/&reqtime=(\d+)/,"&reqtime=".concat(Math.ceil(+new Date/1e3)))}},{key:"_initializeRequestData",value:function(e){var t;t=this._requestDataCleaner(e.requestData),this.requestData=e.encode(t)}},{key:"_requestDataCleaner",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Ma(n)&&null!==e[n]&&(t[n]="object"!==On(e[n])?e[n]:this._requestDataCleaner.bind(this)(e[n]));return t}},{key:"_getQueryString",value:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push("function"!=typeof e[n]?"".concat(n,"=").concat(e[n]):"".concat(n,"=").concat(e[n]()));return t.join("&")}},{key:"_getResponseMap",value:function(e){if(e.keyMaps&&e.keyMaps.response&&Object.keys(e.keyMaps.response).length>0)return e.keyMaps.response}}]),e}(),sd=[].slice,ad=/MSIE .\./.test(je),ud=function(e){return function(t,n){var i=arguments.length>2,r=i?sd.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};function cd(e){this.mixin(e)}De({global:!0,bind:!0,forced:ad},{setTimeout:ud(i.setTimeout),setInterval:ud(i.setInterval)}),cd.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){if(e)return this._isReady?void(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout(function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach(function(e){e.call(this)},e)},1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var ld=function(){function e(t){Dn(this,e),cd.mixin(this),this.tim=t}return xn(e,[{key:"isLoggedIn",value:function(){return 1===this.tim.context.login||!!this.tim.context.a2Key}},{key:"createTransportCapsule",value:function(e){var t=this.tim.packageConfig.get(e);return t?new od(t):null}},{key:"request",value:function(e){var t=this.createTransportCapsule(e);return t||va.error("unknown transport capsule, please check!",e),this.tim.connectionController.request(t)}},{key:"emitInnerEvent",value:function(e,t){this.tim.innerEmitter.emit(e,t)}},{key:"emitOuterEvent",value:function(e,t){this.tim.outerEmitter.emit(e,t)}},{key:"reset",value:function(){va.warn(["method: IMController.reset() method must be implemented"].join())}},{key:"probeNetwork",value:function(){return this.tim.netMonitor.probe()}},{key:"getNetworkType",value:function(){return this.tim.netMonitor.getNetworkType()}},{key:"getPlatform",value:function(){return js}}]),e}(),hd=function(){function e(t,n){Dn(this,e),this.data=t,this._innerEmitter=n,this.defaultData={},Object.assign(this.defaultData,t),this.initGetterAndSetter()}return xn(e,[{key:"initGetterAndSetter",value:function(){var e=this,t=function(t){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return e.data[t]},set:function(n){e.data[t]!==n&&(e.data[t]=n,e.onChange.bind(e)(t,n))}})};for(var n in e.data)Object.prototype.hasOwnProperty.call(e.data,n)&&t(n)}},{key:"onChange",value:function(e,t){this._innerEmitter.emit(sf,{key:e,value:t})}},{key:"reset",value:function(){for(var e in va.log("Context.reset"),this.data)Object.prototype.hasOwnProperty.call(this.data,e)&&(this.data[e]=this.defaultData.hasOwnProperty(e)?this.defaultData[e]:null)}}]),e}(),fd=function(e){Ln(n,e);var t=qn(n);function n(e){var i;Dn(this,n);var r=(i=t.call(this,e)).tim.loginInfo;return i._context=new hd({login:0,SDKAppID:r.SDKAppID,appIDAt3rd:null,accountType:r.accountType,identifier:r.identifier,tinyID:null,identifierNick:r.identifierNick,userSig:r.userSig,a2Key:null,contentType:"json",apn:1,unlimitedAVChatRoom:r.unlimitedAVChatRoom,scene:r.scene,oversea:r.oversea,instanceID:r.instanceID},i.tim.innerEmitter),i._initListener(),i}return xn(n,[{key:"reset",value:function(){this._context.reset(),this.emitInnerEvent(af)}},{key:"_initListener",value:function(){this.tim.innerEmitter.on(sf,this._onContextMemberChange,this),this.tim.innerEmitter.on(Uf,this._updateA2KeyAndTinyID,this)}},{key:"_updateA2KeyAndTinyID",value:function(e){var t=e.data,n=t.tinyID;this._context.a2Key=t.a2Key,this._context.tinyID=n,this.emitInnerEvent(uf),this.triggerReady()}},{key:"getContext",value:function(){return this._context}},{key:"_onContextMemberChange",value:function(e){var t=e.data,n=t.key;("tinyID"===n||"a2Key"===n)&&(this._context.login=t.value.length<=0?0:null!==this._context.a2Key?1:0)}}]),n}(ld),dd=function e(t){Dn(this,e),this.code=0,this.data=t||{}},pd=null,gd=function(e){return e instanceof dd?(va.warn("IMPromise.resolve \u6b64\u51fd\u6570\u4f1a\u81ea\u52a8\u7528options\u521b\u5efaIMResponse\u5b9e\u4f8b\uff0c\u8c03\u7528\u4fa7\u4e0d\u9700\u521b\u5efa\uff0c\u5efa\u8bae\u4fee\u6539\uff01"),Promise.resolve(e)):Promise.resolve(new dd(e))},vd=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof _h)return t&&null!==pd&&pd.emit(kn.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new _h({code:bh.UNCAUGHT_ERROR,message:e.message});return t&&null!==pd&&pd.emit(kn.ERROR,n),Promise.reject(n)}if(Ca(e)||Ca(e.code)||Ca(e.message))va.error("IMPromise.reject \u5fc5\u987b\u6307\u5b9acode(\u9519\u8bef\u7801)\u548cmessage(\u9519\u8bef\u4fe1\u606f)!!!");else{if(ya(e.code)&&_a(e.message)){var i=new _h(e);return t&&null!==pd&&pd.emit(kn.ERROR,i),Promise.reject(i)}va.error("IMPromise.reject code(\u9519\u8bef\u7801)\u5fc5\u987b\u4e3a\u6570\u5b57\uff0cmessage(\u9519\u8bef\u4fe1\u606f)\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32!!!")}},md="sdkReady",yd="longpolling",_d="longpollingAV",bd="sendMessage",kd="sendMessageC2C",wd="sendMessageGroupWork",Cd="sendMessageGroupPublic",Sd="sendMessageGroupMeeting",Ed="sendMessageGroupAV",Id="messageReceived",Td="messageReceivedAV",Md="initGroupList",Od="upload",Dd=function(){function e(t){Dn(this,e),this.SDKAppID="",this.version="",this.tinyID="",this.userID="",this.platform="",this.method=t,this.time="",this.startts=Date.now(),this.endts=0,this.timespan=0,this.codeint=0,this.message="",this.text="",this.msgType="",this.networkType="",this.platform="",this.scene="",this._sentFlag=!1,this.instanceID="",this.host=function(){var e="unknown";if(ta&&(e="mac"),ea&&(e="windows"),Ys&&(e="ios"),$s&&(e="android"),Us)try{var t=Vs.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(Iv){}return e}(),this.mpLibVersion=function(){if(Us)try{var e;return void 0===(e=Fs?my.getSystemInfoSync().version:Vs.getSystemInfoSync().SDKVersion)?"-":e}catch(Iv){return"-"}return"-"}()}return xn(e,[{key:"setCommonInfo",value:function(e){var t=e.version,n=e.tinyID,i=e.userID,r=e.platform,o=e.scene,s=e.instanceID;this.SDKAppID="".concat(e.SDKAppID),this.version="".concat(t),this.tinyID=n,this.userID=i,this.platform=r,this.scene=o,this.time=Ra(),this.instanceID=s,this.startts&&this.endts&&!this.timespan&&(this.timespan=Math.abs(this.endts-this.startts))}},{key:"setEnd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._sentFlag||(this.endts=Date.now(),t?(this._sentFlag=!0,this._eventStatController.pushIn(this)):setTimeout(function(){e._sentFlag=!0,e._eventStatController.pushIn(e)},0))}},{key:"setError",value:function(e,t,n){return e instanceof Error?(this._sentFlag||(this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMessage(e.message)):(this.setCode(bh.NO_NETWORK),this.setMessage("\u672a\u8fde\u63a5\u5230\u7f51\u7edc"))),this):(va.warn("SSOLogData.setError value not instanceof Error, please check!"),this)}},{key:"setCode",value:function(e){return Ca(e)||this._sentFlag||("ECONNABORTED"===e&&(this.codeint=103),ya(e)?this.codeint=e:va.warn("SSOLogData.setCode value not a number, please check!",e,On(e))),this}},{key:"setMessage",value:function(e){return Ca(e)||this._sentFlag?this:_a(e)?(this.message=e,this):this}},{key:"setText",value:function(e){return ya(e)?this.text=e.toString():_a(e)&&(this.text=e),this}},{key:"setMessageType",value:function(e){return this.msgType=e,this}},{key:"setNetworkType",value:function(e){return Ca(e)?va.warn("SSOLogData.setNetworkType value is undefined, please check!"):this.networkType=e,this}}],[{key:"bindController",value:function(t){e.prototype._eventStatController=t}}]),e}(),Ad="kickedOut",xd="emptyMessageBody",Rd="applyJoinGroup",Pd="longPollingError",zd="callbackFunctionError",Ld=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),!0===(i=t.call(this,e)).tim.context.oversea&&rf.HOST.setCurrent(4),i._initializeListener(),i}return xn(n,[{key:"login",value:function(e){if(this.isLoggedIn()){var t="\u60a8\u5df2\u7ecf\u767b\u5f55\u8d26\u53f7".concat(e.identifier,"\uff01\u5982\u9700\u5207\u6362\u8d26\u53f7\u767b\u5f55\uff0c\u8bf7\u5148\u8c03\u7528 logout \u63a5\u53e3\u767b\u51fa\uff0c\u518d\u8c03\u7528 login \u63a5\u53e3\u767b\u5f55\u3002");return va.warn(t),gd({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0})}va.log("SignController.login userID=".concat(e.identifier)),va.time("login");var n=this._checkLoginInfo(e);return eu(n)?(this.tim.context.identifier=e.identifier,this.tim.context.userSig=e.userSig,this.tim.context.identifier&&this.tim.context.userSig?this._accessLayer():void 0):vd(n)}},{key:"_isLoginCurrentUser",value:function(e){return this.tim.context.identifier===e}},{key:"_initializeListener",value:function(){var e=this.tim.innerEmitter;e.on(wf,this._onMultipleAccountKickedOut,this),e.on(Cf,this._onMultipleDeviceKickedOut,this),e.on(jf,this._onUserSigExpired,this)}},{key:"_accessLayer",value:function(){var e=this,t=new Dd("accessLayer");return va.log("SignController._accessLayer."),this.request({name:"accessLayer",action:"query"}).then(function(n){return t.setNetworkType(e.getNetworkType()).setText(n.data.webImAccessLayer).setEnd(),va.log("SignController._accessLayer ok. webImAccessLayer=".concat(n.data.webImAccessLayer)),e.tim.context.oversea||1!==n.data.webImAccessLayer||rf.HOST.setCurrent(n.data.webImAccessLayer),e._login()}).catch(function(n){return e.probeNetwork().then(function(i){var r=Wn(i,2);t.setError(n,r[0],r[1]).setEnd(!0),e.tim.eventStatController.reportAtOnce()}),va.error("SignController._accessLayer failed. error:",n),vd(n)})}},{key:"_login",value:function(){var e=this,t=new Dd("login");return this.request({name:"login",action:"query"}).then(function(n){var i=null;if(!n.data.tinyID)throw i=new _h({code:bh.NO_TINYID,message:"\u65e0 tinyID"}),t.setError(i,!0,e.getNetworkType()).setEnd(),i;if(!n.data.a2Key)throw i=new _h({code:bh.NO_A2KEY,message:"\u65e0 a2key"}),t.setError(i,!0,e.getNetworkType()).setEnd(),i;return t.setNetworkType(e.getNetworkType()).setText("".concat(e.tim.loginInfo.identifier)).setEnd(),va.log("SignController.login ok. userID=".concat(e.tim.loginInfo.identifier," loginCost=").concat(va.timeEnd("login"),"ms")),e.emitInnerEvent(Uf,{a2Key:n.data.a2Key,tinyID:n.data.tinyID}),gd(n.data)}).catch(function(n){return e.probeNetwork().then(function(e){var i=Wn(e,2);t.setError(n,i[0],i[1]).setEnd(!0)}),va.error("SignController.login failed. error:",n),vd(n)})}},{key:"logout",value:function(){return this.isLoggedIn()?(new Dd("logout").setNetworkType(this.getNetworkType()).setText("userID=".concat(this.tim.loginInfo.identifier," type=").concat("longPollLogout")).setEnd(!0),va.info("SignController.logout"),this.emitInnerEvent(Gf),this._logout(1).then(this._emitLogoutSuccess.bind(this)).catch(this._emitLogoutSuccess.bind(this))):vd({code:bh.USER_NOT_LOGGED_IN,message:"\u7528\u6237\u672a\u767b\u5f55"})}},{key:"_logout",value:function(e){var t=0===e?"logout":"longPollLogout",n=0===e?{name:t,action:"query"}:{name:t,action:"query",param:{longPollID:this.tim.notificationController.getLongPollID()}};return this.request(n).catch(function(e){return va.error("SignController._logout error:",e),vd(e)})}},{key:"_checkLoginInfo",value:function(e){var t=0,n="";return null===e.SDKAppID?(t=bh.NO_SDKAPPID,n="\u65e0 SDKAppID"):null===e.accountType?(t=bh.NO_ACCOUNT_TYPE,n="\u65e0 accountType"):null===e.identifier?(t=bh.NO_IDENTIFIER,n="\u65e0 userID"):null===e.userSig&&(t=bh.NO_USERSIG,n="\u65e0 userSig"),eu(t)||eu(n)?{}:{code:t,message:n}}},{key:"_emitLogoutSuccess",value:function(){return this.emitInnerEvent(Vf),gd({})}},{key:"_onMultipleAccountKickedOut",value:function(){var e=this;new Dd(Ad).setNetworkType(this.getNetworkType()).setText(wn.KICKED_OUT_MULT_ACCOUNT).setEnd(!0),va.warn("SignController._onMultipleAccountKickedOut kicked out. userID=".concat(this.tim.loginInfo.identifier)),this.tim.logout().then(function(){e.emitOuterEvent(kn.KICKED_OUT,{type:wn.KICKED_OUT_MULT_ACCOUNT})})}},{key:"_onMultipleDeviceKickedOut",value:function(){var e=this;new Dd(Ad).setNetworkType(this.getNetworkType()).setText(wn.KICKED_OUT_MULT_DEVICE).setEnd(!0),va.warn("SignController._onMultipleDeviceKickedOut kicked out. userID=".concat(this.tim.loginInfo.identifier)),this.tim.logout().then(function(){e.emitOuterEvent(kn.KICKED_OUT,{type:wn.KICKED_OUT_MULT_DEVICE})})}},{key:"_onUserSigExpired",value:function(){new Dd(Ad).setNetworkType(this.getNetworkType()).setText(wn.KICKED_OUT_USERSIG_EXPIRED).setEnd(!0),va.warn("SignController._onUserSigExpired: userSig \u7b7e\u540d\u8fc7\u671f\u88ab\u8e22\u4e0b\u7ebf"),this.emitOuterEvent(kn.KICKED_OUT,{type:wn.KICKED_OUT_USERSIG_EXPIRED}),this.tim.resetSDK()}},{key:"reset",value:function(){va.info("SignController.reset")}}]),n}(ld),Nd=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},Fd=Object.prototype.toString;function Ud(e){return"[object Array]"===Fd.call(e)}function Gd(e){return void 0===e}function Vd(e){return null!==e&&"object"==typeof e}function jd(e){return"[object Function]"===Fd.call(e)}function Bd(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Ud(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var Hd={isArray:Ud,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Fd.call(e)},isBuffer:function(e){return null!==e&&!Gd(e)&&null!==e.constructor&&!Gd(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Vd,isUndefined:Gd,isDate:function(e){return"[object Date]"===Fd.call(e)},isFile:function(e){return"[object File]"===Fd.call(e)},isBlob:function(e){return"[object Blob]"===Fd.call(e)},isFunction:jd,isStream:function(e){return Vd(e)&&jd(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Bd,merge:function e(){var t={};function n(n,i){t[i]="object"==typeof t[i]&&"object"==typeof n?e(t[i],n):n}for(var i=0,r=arguments.length;i<r;i++)Bd(arguments[i],n);return t},deepMerge:function e(){var t={};function n(n,i){t[i]="object"==typeof t[i]&&"object"==typeof n?e(t[i],n):"object"==typeof n?e({},n):n}for(var i=0,r=arguments.length;i<r;i++)Bd(arguments[i],n);return t},extend:function(e,t,n){return Bd(t,function(t,i){e[i]=n&&"function"==typeof t?Nd(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function qd(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Wd=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Hd.isURLSearchParams(t))i=t.toString();else{var r=[];Hd.forEach(t,function(e,t){null!=e&&(Hd.isArray(e)?t+="[]":e=[e],Hd.forEach(e,function(e){Hd.isDate(e)?e=e.toISOString():Hd.isObject(e)&&(e=JSON.stringify(e)),r.push(qd(t)+"="+qd(e))}))}),i=r.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e};function Kd(){this.handlers=[]}Kd.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Kd.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Kd.prototype.forEach=function(e){Hd.forEach(this.handlers,function(t){null!==t&&e(t)})};var Yd=Kd,$d=function(e,t,n){return Hd.forEach(n,function(n){e=n(e,t)}),e},Zd=function(e){return!(!e||!e.__CANCEL__)};function Xd(){throw new Error("setTimeout has not been defined")}function Jd(){throw new Error("clearTimeout has not been defined")}var Qd=Xd,ep=Jd;function tp(e){if(Qd===setTimeout)return setTimeout(e,0);if((Qd===Xd||!Qd)&&setTimeout)return Qd=setTimeout,setTimeout(e,0);try{return Qd(e,0)}catch(t){try{return Qd.call(null,e,0)}catch(t){return Qd.call(this,e,0)}}}"function"==typeof ua.setTimeout&&(Qd=setTimeout),"function"==typeof ua.clearTimeout&&(ep=clearTimeout);var np,ip=[],rp=!1,op=-1;function sp(){rp&&np&&(rp=!1,np.length?ip=np.concat(ip):op=-1,ip.length&&ap())}function ap(){if(!rp){var e=tp(sp);rp=!0;for(var t=ip.length;t;){for(np=ip,ip=[];++op<t;)np&&np[op].run();op=-1,t=ip.length}np=null,rp=!1,function(e){if(ep===clearTimeout)return clearTimeout(e);if((ep===Jd||!ep)&&clearTimeout)return ep=clearTimeout,clearTimeout(e);try{ep(e)}catch(t){try{return ep.call(null,e)}catch(t){return ep.call(this,e)}}}(e)}}function up(e,t){this.fun=e,this.array=t}function cp(){}up.prototype.run=function(){this.fun.apply(null,this.array)};var lp=cp,hp=cp,fp=cp,dp=cp,pp=cp,gp=cp,vp=cp,mp=ua.performance||{},yp=mp.now||mp.mozNow||mp.msNow||mp.oNow||mp.webkitNow||function(){return(new Date).getTime()},_p=new Date,bp={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ip.push(new up(e,t)),1!==ip.length||rp||tp(ap)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:lp,addListener:hp,once:fp,off:dp,removeListener:pp,removeAllListeners:gp,emit:vp,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*yp.call(mp),n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-_p)/1e3}},kp=function(e,t){Hd.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})},wp=function(e,t,n,i,r){return function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,i,r)},Cp=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Sp=Hd.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=Hd.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Ep=Hd.isStandardBrowserEnv()?{write:function(e,t,n,i,r,o){var s=[];s.push(e+"="+encodeURIComponent(t)),Hd.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Hd.isString(i)&&s.push("path="+i),Hd.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Ip={"Content-Type":"application/x-www-form-urlencoded"};function Tp(e,t){!Hd.isUndefined(e)&&Hd.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Mp,Op={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==bp&&"[object process]"===Object.prototype.toString.call(bp))&&(Mp=function(e){return new Promise(function(t,n){var i=e.data,r=e.headers;Hd.isFormData(i)&&delete r["Content-Type"];var o=new XMLHttpRequest;e.auth&&(r.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||"")));var s,a,u=(a=e.url,(s=e.baseURL)&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(s,a):a);if(o.open(e.method.toUpperCase(),Wd(u,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in o?function(e){var t,n,i,r={};return e?(Hd.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=Hd.trim(e.substr(0,i)).toLowerCase(),n=Hd.trim(e.substr(i+1)),t){if(r[t]&&Cp.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([n]):r[t]?r[t]+", "+n:n}}),r):r}(o.getAllResponseHeaders()):null;!function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(wp("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,{data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:i,config:e,request:o}),o=null}},o.onabort=function(){o&&(n(wp("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(wp("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(wp(t,e,"ECONNABORTED",o)),o=null},Hd.isStandardBrowserEnv()){var c=Ep,l=(e.withCredentials||Sp(u))&&e.xsrfCookieName?c.read(e.xsrfCookieName):void 0;l&&(r[e.xsrfHeaderName]=l)}if("setRequestHeader"in o&&Hd.forEach(r,function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete r[t]:o.setRequestHeader(t,e)}),Hd.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(d){if("json"!==e.responseType)throw d}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){o&&(o.abort(),n(e),o=null)}),void 0===i&&(i=null),o.send(i)})}),Mp),transformRequest:[function(e,t){return kp(t,"Accept"),kp(t,"Content-Type"),Hd.isFormData(e)||Hd.isArrayBuffer(e)||Hd.isBuffer(e)||Hd.isStream(e)||Hd.isFile(e)||Hd.isBlob(e)?e:Hd.isArrayBufferView(e)?e.buffer:Hd.isURLSearchParams(e)?(Tp(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Hd.isObject(e)?(Tp(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Hd.forEach(["delete","get","head"],function(e){Op.headers[e]={}}),Hd.forEach(["post","put","patch"],function(e){Op.headers[e]=Hd.merge(Ip)});var Dp=Op;function Ap(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var xp=function(e){return Ap(e),e.headers=e.headers||{},e.data=$d(e.data,e.headers,e.transformRequest),e.headers=Hd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Hd.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||Dp.adapter)(e).then(function(t){return Ap(e),t.data=$d(t.data,t.headers,e.transformResponse),t},function(t){return Zd(t)||(Ap(e),t&&t.response&&(t.response.data=$d(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},Rp=function(e,t){t=t||{};var n={},i=["url","method","params","data"],r=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];Hd.forEach(i,function(e){void 0!==t[e]&&(n[e]=t[e])}),Hd.forEach(r,function(i){Hd.isObject(t[i])?n[i]=Hd.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:Hd.isObject(e[i])?n[i]=Hd.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])}),Hd.forEach(o,function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])});var s=i.concat(r).concat(o),a=Object.keys(t).filter(function(e){return-1===s.indexOf(e)});return Hd.forEach(a,function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])}),n};function Pp(e){this.defaults=e,this.interceptors={request:new Yd,response:new Yd}}Pp.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},e.method=(e=Rp(this.defaults,e)).method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=[xp,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},Pp.prototype.getUri=function(e){return e=Rp(this.defaults,e),Wd(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Hd.forEach(["delete","get","head","options"],function(e){Pp.prototype[e]=function(t,n){return this.request(Hd.merge(n||{},{method:e,url:t}))}}),Hd.forEach(["post","put","patch"],function(e){Pp.prototype[e]=function(t,n,i){return this.request(Hd.merge(i||{},{method:e,url:t,data:n}))}});var zp=Pp;function Lp(e){this.message=e}Lp.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Lp.prototype.__CANCEL__=!0;var Np=Lp;function Fp(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new Np(e),t(n.reason))})}Fp.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Fp.source=function(){var e;return{token:new Fp(function(t){e=t}),cancel:e}};var Up=Fp;function Gp(e){var t=new zp(e),n=Nd(zp.prototype.request,t);return Hd.extend(n,zp.prototype,t),Hd.extend(n,t),n}var Vp=Gp(Dp);Vp.Axios=zp,Vp.create=function(e){return Gp(Rp(Vp.defaults,e))},Vp.Cancel=Np,Vp.CancelToken=Up,Vp.isCancel=Zd,Vp.all=function(e){return Promise.all(e)},Vp.spread=function(e){return function(t){return e.apply(null,t)}};var jp=Vp;jp.default=Vp;var Bp=jp,Hp=Bp.create({timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}});Hp.interceptors.response.use(function(e){var t=e.data,n=t.error_code,i=t.ErrorCode;return ya(n)&&(i=n),0!==i&&(e.data.ErrorCode=Number(i)),e},function(e){return"Network Error"===e.message&&(!0===Hp.defaults.withCredentials&&va.warn("Network Error, try to close `IMAxios.defaults.withCredentials` to false. (IMAxios.js)"),Hp.defaults.withCredentials=!1),Promise.reject(e)});var qp=function(){function e(){Dn(this,e)}return xn(e,[{key:"request",value:function(e){console.warn("\u8bf7\u6ce8\u610f\uff1a ConnectionBase.request() \u65b9\u6cd5\u5fc5\u987b\u88ab\u6d3e\u751f\u7c7b\u91cd\u5199:")}},{key:"_checkOptions",value:function(e){if(0==!!e.url)throw new _h({code:bh.NETWORK_BASE_OPTIONS_NO_URL,message:"\u7f51\u7edc\u5c42\u521d\u59cb\u5316\u9519\u8bef\uff0c\u7f3a\u5c11 URL \u53c2\u6570"})}},{key:"_initOptions",value:function(e){e.method=["POST","GET","PUT","DELETE","OPTION"].indexOf(e.method)>=0?e.method:"POST",e.dataType=e.dataType||"json",e.responseType=e.responseType||"json"}}]),e}(),Wp=function(e){Ln(n,e);var t=qn(n);function n(){var e;return Dn(this,n),(e=t.call(this)).retry=2,e}return xn(n,[{key:"request",value:function(e){return this._checkOptions(e),this._initOptions(e),this._requestWithRetry({url:e.url,data:e.data,method:e.method})}},{key:"_requestWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Hp(e).catch(function(i){return t.retry&&n<t.retry?t._requestWithRetry(e,++n):vd(new _h({code:i.code||"",message:i.message||""}))})}}]),n}(qp),Kp=function(e){Ln(n,e);var t=qn(n);function n(){var e;return Dn(this,n),(e=t.call(this)).retry=2,e._request=e.promisify(Vs.request),e}return xn(n,[{key:"request",value:function(e){return this._checkOptions(e),this._initOptions(e),e=zn(zn({},e),{},{responseType:"text"}),this._requestWithRetry(e)}},{key:"_requestWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._request(e).then(this._handleResolve).catch(function(i){if(_a(i.errMsg)){if(i.errMsg.includes("abort"))return gd({});if(i.errMsg.includes("timeout"))return t.retry>0&&n<t.retry?t._requestWithRetry(e,++n):vd(new _h({code:bh.NETWORK_TIMEOUT,message:i.errMsg}));if(i.errMsg.includes("fail"))return t.retry>0&&n<t.retry?t._requestWithRetry(e,++n):vd(new _h({code:bh.NETWORK_ERROR,message:i.errMsg}))}return vd(new _h(zn({code:bh.UNCAUGHT_ERROR,message:i.message},i)))})}},{key:"_handleResolve",value:function(e){var t=e.data,n=t.error_code,i=t.ErrorCode;return ya(n)&&(i=n),0!==i&&(e.data.ErrorCode=Number("".concat(i))),e}},{key:"promisify",value:function(e){return function(t){return new Promise(function(n,i){var r=e(Object.assign({},t,{success:n,fail:i}));t.updateAbort&&t.updateAbort(function(){r&&Ea(r.abort)&&r.abort()})})}}}]),n}(qp),Yp=function(){function e(){Dn(this,e),this.request=0,this.success=0,this.fail=0,this.reportRate=10,this.requestTimeCost=[]}return xn(e,[{key:"report",value:function(){if(1!==this.request){if(this.request%this.reportRate!=0)return null;var e=this.avgRequestTime(),t="runLoop reports: success=".concat(this.success,",fail=").concat(this.fail,",total=").concat(this.request,",avg=").concat(e,",cur=").concat(this.requestTimeCost[this.requestTimeCost.length-1],",max=").concat(Math.max.apply(null,this.requestTimeCost),",min=").concat(Math.min.apply(null,this.requestTimeCost));va.log(t)}}},{key:"setRequestTime",value:function(e,t){var n=Math.abs(t-e);100===this.requestTimeCost.length&&this.requestTimeCost.shift(),this.requestTimeCost.push(n)}},{key:"avgRequestTime",value:function(){for(var e=this.requestTimeCost.length,t=0,n=0;n<e;n++)t+=this.requestTimeCost[n];return Math.round(t/e*100)/100}}]),e}(),$p=Bp.create({timeout:6e3,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}});$p.interceptors.response.use(function(e){var t=e.data,n=t.error_code,i=t.ErrorCode;return ya(n)&&(i=n),0!==i&&(e.data.ErrorCode=Number(i)),e},function(e){return"Network Error"===e.message&&(!0===$p.defaults.withCredentials&&va.warn("Network Error, try to close `IMAxiosAVChatroom.defaults.withCredentials` to false. (IMAxiosAVChatroom.js)"),$p.defaults.withCredentials=!1),Promise.reject(e)});var Zp=Bp.CancelToken,Xp=function(){function e(t){Dn(this,e),this._initializeOptions(t),this._initializeMembers(),this.status=new Yp}return xn(e,[{key:"destructor",value:function(){clearTimeout(this._seedID);var e=this._index();for(var t in this)Object.prototype.hasOwnProperty.call(this,t)&&(this[t]=null);return e}},{key:"setIndex",value:function(e){this._index=e}},{key:"getIndex",value:function(){return this._index}},{key:"isRunning",value:function(){return!this._stoped}},{key:"_initializeOptions",value:function(e){this.options=e}},{key:"_initializeMembers",value:function(){this._index=-1,this._seedID=0,this._requestStatus=!1,this._stoped=!1,this._intervalTime=0,this._intervalIncreaseStep=1e3,this._intervalDecreaseStep=1e3,this._intervalTimeMax=5e3,this._protectTimeout=3e3,this._getNoticeSeq=this.options.getNoticeSeq,this._retryCount=0,this._responseTime=Date.now(),this._responseTimeThreshold=2e3,this.requestor=this.options.isAVChatRoomLoop?$p:Hp,va.log("XHRRunLoop._initializeMembers isAVChatRoomLoop=".concat(!!this.options.isAVChatRoomLoop)),this.abort=null}},{key:"start",value:function(){0===this._seedID?(this._stoped=!1,this._send()):va.log('XHRRunLoop.start(), XHRRunLoop is running now, if you want to restart runLoop , please run "stop()" first.')}},{key:"_reset",value:function(){va.log("XHRRunLoop._reset(), reset long poll _intervalTime",this._intervalTime),this.stop(),this.start()}},{key:"_intervalTimeIncrease",value:function(){this._intervalTime!==this._responseTimeThreshold&&(this._intervalTime<this._responseTimeThreshold&&(this._intervalTime+=this._intervalIncreaseStep),this._intervalTime>this._responseTimeThreshold&&(this._intervalTime=this._responseTimeThreshold))}},{key:"_intervalTimeDecrease",value:function(){0!==this._intervalTime&&(this._intervalTime>0&&(this._intervalTime-=this._intervalDecreaseStep),this._intervalTime<0&&(this._intervalTime=0))}},{key:"_intervalTimeAdjustment",value:function(){var e=Date.now();100*Math.floor((e-this._responseTime)/100)<=this._responseTimeThreshold?this._intervalTimeIncrease():this._intervalTimeDecrease(),this._responseTime=e}},{key:"_intervalTimeAdjustmentBaseOnResponseData",value:function(e){0===e.ErrorCode?this._intervalTimeDecrease():this._intervalTimeIncrease()}},{key:"_send",value:function(){var e=this;if(!0!==this._requestStatus){this._requestStatus=!0,this.status.request++,"function"==typeof this.options.before&&this.options.before(this.options.pack.requestData);var t=Date.now(),n=0;this.requestor.request({url:this.options.pack.getUrl(),data:this.options.pack.requestData,method:this.options.pack.method,cancelToken:new Zp(function(t){e.abort=t})}).then(function(i){if(e._intervalTimeAdjustmentBaseOnResponseData.bind(e)(i.data),e._retryCount>0&&(e._retryCount=0),e.status.success++,n=Date.now(),e.status.setRequestTime(t,n),i.data.timecost=n-t,"function"==typeof e.options.success)try{e.options.success({pack:e.options.pack,error:!1,data:e.options.pack.callback(i.data)})}catch(r){va.warn("XHRRunLoop._send(), error:",r)}e._requestStatus=!1,!1===e._stoped&&(e._seedID=setTimeout(e._send.bind(e),e._intervalTime)),e.status.report()}).catch(function(i){if(e.status.fail++,e._retryCount++,e._intervalTimeAdjustment.bind(e)(),!1===e._stoped&&(e._seedID=setTimeout(e._send.bind(e),e._intervalTime)),e._requestStatus=!1,"function"==typeof e.options.fail&&void 0!==i.request)try{e.options.fail({pack:e.options.pack,error:i,data:!1})}catch(r){va.warn("XHRRunLoop._send(), fail callback error:",r),va.error(r)}n=Date.now(),e.status.setRequestTime(t,n),e.status.report()})}}},{key:"stop",value:function(){this._clearAllTimeOut(),this._stoped=!0}},{key:"_clearAllTimeOut",value:function(){clearTimeout(this._seedID),this._seedID=0}}]),e}(),Jp=function(){function e(t){Dn(this,e),this._initializeOptions(t),this._initializeMembers(),this.status=new Yp}return xn(e,[{key:"destructor",value:function(){clearTimeout(this._seedID);var e=this._index();for(var t in this)Object.prototype.hasOwnProperty.call(this,t)&&(this[t]=null);return e}},{key:"setIndex",value:function(e){this._index=e}},{key:"isRunning",value:function(){return!this._stoped}},{key:"getIndex",value:function(){return this._index}},{key:"_initializeOptions",value:function(e){this.options=e}},{key:"_initializeMembers",value:function(){this._index=-1,this._seedID=0,this._requestStatus=!1,this._stoped=!1,this._intervalTime=0,this._intervalIncreaseStep=1e3,this._intervalDecreaseStep=1e3,this._intervalTimeMax=5e3,this._protectTimeout=3e3,this._getNoticeSeq=this.options.getNoticeSeq,this._retryCount=0,this._responseTime=Date.now(),this._responseTimeThreshold=2e3,this.requestor=new Kp,this.abort=null}},{key:"start",value:function(){0===this._seedID?(this._stoped=!1,this._send()):va.log('WXRunLoop.start(): WXRunLoop is running now, if you want to restart runLoop , please run "stop()" first.')}},{key:"_reset",value:function(){va.log("WXRunLoop.reset(), long poll _intervalMaxRate",this._intervalMaxRate),this.stop(),this.start()}},{key:"_intervalTimeIncrease",value:function(){this._intervalTime!==this._responseTimeThreshold&&(this._intervalTime<this._responseTimeThreshold&&(this._intervalTime+=this._intervalIncreaseStep),this._intervalTime>this._responseTimeThreshold&&(this._intervalTime=this._responseTimeThreshold))}},{key:"_intervalTimeDecrease",value:function(){0!==this._intervalTime&&(this._intervalTime>0&&(this._intervalTime-=this._intervalDecreaseStep),this._intervalTime<0&&(this._intervalTime=0))}},{key:"_intervalTimeAdjustment",value:function(){var e=Date.now();100*Math.floor((e-this._responseTime)/100)<=this._responseTimeThreshold?this._intervalTimeIncrease():this._intervalTimeDecrease(),this._responseTime=e}},{key:"_intervalTimeAdjustmentBaseOnResponseData",value:function(e){0===e.ErrorCode?this._intervalTimeDecrease():this._intervalTimeIncrease()}},{key:"_send",value:function(){var e=this;if(!0!==this._requestStatus){var t=this;this._requestStatus=!0,this.status.request++,"function"==typeof this.options.before&&this.options.before(t.options.pack.requestData);var n=Date.now(),i=0;this.requestor.request({url:t.options.pack.getUrl(),data:t.options.pack.requestData,method:t.options.pack.method,updateAbort:function(t){e.abort=t}}).then(function(r){if(t._intervalTimeAdjustmentBaseOnResponseData.bind(e)(r.data),t._retryCount>0&&(t._retryCount=0),e.status.success++,i=Date.now(),e.status.setRequestTime(n,i),r.data.timecost=i-n,"function"==typeof t.options.success)try{e.options.success({pack:e.options.pack,error:!1,data:e.options.pack.callback(r.data)})}catch(o){va.warn("WXRunLoop._send(), error:",o)}t._requestStatus=!1,!1===t._stoped&&(t._seedID=setTimeout(t._send.bind(t),t._intervalTime)),e.status.report()}).catch(function(r){if(e.status.fail++,t._retryCount++,t._intervalTimeAdjustment.bind(e)(),!1===t._stoped&&(t._seedID=setTimeout(t._send.bind(t),t._intervalTime)),t._requestStatus=!1,"function"==typeof t.options.fail)try{e.options.fail({pack:e.options.pack,error:r,data:!1})}catch(o){va.warn("WXRunLoop._send(), fail callback error:",o),va.error(o)}i=Date.now(),e.status.setRequestTime(n,i),e.status.report()})}}},{key:"stop",value:function(){this._clearAllTimeOut(),this._stoped=!0}},{key:"_clearAllTimeOut",value:function(){clearTimeout(this._seedID),this._seedID=0}}]),e}(),Qp=function(){function e(t){Dn(this,e),this.tim=t,this.httpConnection=Us?new Kp:new Wp,this.keepAliveConnections=[]}return xn(e,[{key:"initializeListener",value:function(){this.tim.innerEmitter.on(Gf,this._stopAllRunLoop,this)}},{key:"request",value:function(e){return this.httpConnection.request({url:e.url,data:e.requestData,method:e.method,callback:e.callback}).then(function(t){return t.data=e.callback(t.data),0!==t.data.errorCode?vd(new _h({code:t.data.errorCode,message:t.data.errorInfo||t.data.errorMsg})):t})}},{key:"createRunLoop",value:function(e){var t=this.createKeepAliveConnection(e);return t.setIndex(this.keepAliveConnections.push(t)-1),t}},{key:"stopRunLoop",value:function(e){e.stop()}},{key:"_stopAllRunLoop",value:function(){for(var e=this.keepAliveConnections.length,t=0;t<e;t++)this.keepAliveConnections[t].stop()}},{key:"destroyRunLoop",value:function(e){e.stop();var t=e.destructor();this.keepAliveConnections.slice(t,1)}},{key:"startRunLoopExclusive",value:function(e){for(var t=e.getIndex(),n=0;n<this.keepAliveConnections.length;n++)n!==t&&this.keepAliveConnections[n].stop();e.start()}},{key:"createKeepAliveConnection",value:function(e){return Us?new Jp(e):new Xp(e)}},{key:"clearAll",value:function(){this.conn.cancelAll()}},{key:"reset",value:function(){this.keepAliveConnections=[]}}]),e}(),eg=function(){function e(t){Dn(this,e),this.tim=t,this.tim.innerEmitter.on(Bf,this._onErrorDetected,this)}return xn(e,[{key:"_onErrorDetected",value:function(e){var t=e.data;new Dd("exceptionError").setText("code=".concat(t.code," message=").concat(t.message)).setNetworkType(this.tim.netMonitor.getNetworkType()).setEnd(),va.warn(t.code?"Oops! code:".concat(t.code," message:").concat(t.message):"Oops! message:".concat(t.message," stack:").concat(t.stack)),this.tim.outerEmitter.emit(kn.ERROR,t)}}]),e}(),tg=function(){function e(t){var n=this;Dn(this,e),eu(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.gender=t.gender||"",this.birthday=t.birthday||0,this.location=t.location||"",this.selfSignature=t.selfSignature||"",this.allowType=t.allowType||wn.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||"",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||wn.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],eu(t.profileCustomField)||t.profileCustomField.forEach(function(e){n.profileCustomField.push({key:e.key,value:e.value})}))}return xn(e,[{key:"validate",value:function(e){var t=!0,n="";if(eu(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var i=e.profileCustomField.length,r=null,o=0;o<i;o++){if(!_a((r=e.profileCustomField[o]).key)||-1===r.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"\u81ea\u5b9a\u4e49\u8d44\u6599\u5b57\u6bb5\u7684\u524d\u7f00\u5fc5\u987b\u662f Tag_Profile_Custom"};if(!_a(r.value))return{valid:!1,tips:"\u81ea\u5b9a\u4e49\u8d44\u6599\u5b57\u6bb5\u7684 value \u5fc5\u987b\u662f\u5b57\u7b26\u4e32"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if("profileCustomField"===s)continue;if(eu(e[s])&&!_a(e[s])&&!ya(e[s])){n="key:"+s+", invalid value:"+e[s],t=!1;continue}switch(s){case"nick":_a(e[s])||(n="nick should be a string",t=!1),Pa(e[s])>500&&(n="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(Pa(e[s])," bytes"),t=!1);break;case"gender":Fa(Jl,e.gender)||(n="key:gender, invalid value:"+e.gender,t=!1);break;case"birthday":ya(e.birthday)||(n="birthday should be a number",t=!1);break;case"location":_a(e.location)||(n="location should be a string",t=!1);break;case"selfSignature":_a(e.selfSignature)||(n="selfSignature should be a string",t=!1);break;case"allowType":Fa(eh,e.allowType)||(n="key:allowType, invalid value:"+e.allowType,t=!1);break;case"language":ya(e.language)||(n="language should be a number",t=!1);break;case"avatar":_a(e.avatar)||(n="avatar should be a string",t=!1);break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n="messageSettings should be 0 or 1",t=!1);break;case"adminForbidType":Fa(Ql,e.adminForbidType)||(n="key:adminForbidType, invalid value:"+e.adminForbidType,t=!1);break;case"level":ya(e.level)||(n="level should be a number",t=!1);break;case"role":ya(e.role)||(n="role should be a number",t=!1);break;default:n="unknown key:"+s+"  "+e[s],t=!1}}return{valid:t,tips:n}}}]),e}(),ng=function(){function e(t){Dn(this,e),this.userController=t,this.TAG="profile",this.Actions={Q:"query",U:"update"},this.accountProfileMap=new Map,this.expirationTime=864e5}return xn(e,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this.userController.getMyAccount(),n.length>100&&(va.warn("ProfileHandler.getUserProfile \u83b7\u53d6\u7528\u6237\u8d44\u6599\u4eba\u6570\u4e0d\u80fd\u8d85\u8fc7100\u4eba"),n.length=100);for(var i,r=[],o=[],s=0,a=n.length;s<a;s++)this.userController.isMyFriend(i=n[s])&&this._containsAccount(i)?o.push(this._getProfileFromMap(i)):r.push(i);if(0===r.length)return gd(o);e.toAccount=r;var u=e.bFromGetMyProfile||!1,c=[];e.toAccount.forEach(function(e){c.push({toAccount:e,standardSequence:0,customSequence:0})}),e.userItem=c;var l=new Dd("getUserProfile");l.setText(n.length>5?"userIDList.length=".concat(n.length):"userIDList=".concat(n));var h=this.userController.generateConfig(this.TAG,this.Actions.Q,e);return this.userController.request(h).then(function(e){l.setNetworkType(t.userController.getNetworkType()).setEnd(),va.info("ProfileHandler.getUserProfile ok");var n=t._handleResponse(e).concat(o);return u?(t.userController.onGotMyProfile(),new dd(n[0])):new dd(n)}).catch(function(e){return t.userController.probeNetwork().then(function(t){var n=Wn(t,2);l.setError(e,n[0],n[1]).setEnd()}),va.error("ProfileHandler.getUserProfile error:",e),vd(e)})}},{key:"getMyProfile",value:function(){var e=this.userController.getMyAccount();if(va.log("ProfileHandler.getMyProfile myAccount="+e),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return va.debug("ProfileHandler.getMyProfile from cache, myProfile:"+JSON.stringify(t)),this.userController.onGotMyProfile(),gd(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){for(var t,n,i=Da.now(),r=e.data.userProfileItem,o=[],s=0,a=r.length;s<a;s++)"@TLS#NOT_FOUND"!==r[s].to&&""!==r[s].to&&(n=this._updateMap(t=r[s].to,this._getLatestProfileFromResponse(t,r[s].profileItem)),o.push(n));return va.log("ProfileHandler._handleResponse cost "+(Da.now()-i)+" ms"),o}},{key:"_getLatestProfileFromResponse",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!eu(t))for(var i=0,r=t.length;i<r;i++)if(t[i].tag.indexOf("Tag_Profile_Custom")>-1)n.profileCustomField.push({key:t[i].tag,value:t[i].value});else switch(t[i].tag){case Xl.NICK:n.nick=t[i].value;break;case Xl.GENDER:n.gender=t[i].value;break;case Xl.BIRTHDAY:n.birthday=t[i].value;break;case Xl.LOCATION:n.location=t[i].value;break;case Xl.SELFSIGNATURE:n.selfSignature=t[i].value;break;case Xl.ALLOWTYPE:n.allowType=t[i].value;break;case Xl.LANGUAGE:n.language=t[i].value;break;case Xl.AVATAR:n.avatar=t[i].value;break;case Xl.MESSAGESETTINGS:n.messageSettings=t[i].value;break;case Xl.ADMINFORBIDTYPE:n.adminForbidType=t[i].value;break;case Xl.LEVEL:n.level=t[i].value;break;case Xl.ROLE:n.role=t[i].value;break;default:va.warn("ProfileHandler._handleResponse unkown tag->",t[i].tag,t[i].value)}return n}},{key:"updateMyProfile",value:function(e){var t=this,n=new Dd("updateMyProfile");n.setText(JSON.stringify(e));var i=(new tg).validate(e);if(!i.valid)return n.setCode(bh.UPDATE_PROFILE_INVALID_PARAM).setMessage("ProfileHandler.updateMyProfile info:".concat(i.tips)).setNetworkType(this.userController.getNetworkType()).setEnd(),va.error("ProfileHandler.updateMyProfile info:".concat(i.tips,"\uff0c\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#updateMyProfile")),vd({code:bh.UPDATE_PROFILE_INVALID_PARAM,message:"\u4f20\u5165 updateMyProfile \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548"});var r=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&("profileCustomField"===o?e.profileCustomField.forEach(function(e){r.push({tag:e.key,value:e.value})}):r.push({tag:Xl[o.toUpperCase()],value:e[o]}));if(0===r.length)return n.setCode(bh.UPDATE_PROFILE_NO_KEY).setMessage(Mh).setNetworkType(this.userController.getNetworkType()).setEnd(),va.error("ProfileHandler.updateMyProfile info:".concat(Mh,"\uff0c\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#updateMyProfile")),vd({code:bh.UPDATE_PROFILE_NO_KEY,message:Mh});var s=this.userController.generateConfig(this.TAG,this.Actions.U,{fromAccount:this.userController.getMyAccount(),profileItem:r});return this.userController.request(s).then(function(i){n.setNetworkType(t.userController.getNetworkType()).setEnd(),va.info("ProfileHandler.updateMyProfile ok");var r=t._updateMap(t.userController.getMyAccount(),e);return t.userController.emitOuterEvent(kn.PROFILE_UPDATED,[r]),gd(r)}).catch(function(e){return t.userController.probeNetwork().then(function(t){var i=Wn(t,2);n.setError(e,i[0],i[1]).setEnd()}),va.error("ProfileHandler.updateMyProfile error:",e),vd(e)})}},{key:"onProfileModified",value:function(e){var t=e.data;if(!eu(t)){var n,i,r=t.length;va.info("ProfileHandler.onProfileModified length="+r);for(var o=[],s=0;s<r;s++)i=this._updateMap(n=t[s].userID,this._getLatestProfileFromResponse(n,t[s].profileList)),o.push(i);this.userController.emitInnerEvent(Kf,o),this.userController.emitOuterEvent(kn.PROFILE_UPDATED,o)}}},{key:"_fillMap",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,i=e.length;n<i;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);va.log("ProfileHandler._fillMap from cache, map.size="+this.accountProfileMap.size)}}},{key:"_updateMap",value:function(e,t){var n,i=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&ja(n.profileCustomField,t.profileCustomField),Aa(n,t,["profileCustomField"]),n.lastUpdatedTime=i):(n=new tg(t),(this.userController.isMyFriend(e)||e===this.userController.getMyAccount())&&(n.lastUpdatedTime=i,this.accountProfileMap.set(e,n))),this._flushMap(e===this.userController.getMyAccount()),n}},{key:"_flushMap",value:function(e){var t=Kn(this.accountProfileMap.values()),n=this.userController.tim.storage;va.debug("ProfileHandler._flushMap length=".concat(t.length," flushAtOnce=").concat(e)),n.setItem(this.TAG,t,e)}},{key:"_containsAccount",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this.userController.tim.storage.getItem(this.TAG);return eu(e)?[]:e}},{key:"onConversationsProfileUpdated",value:function(e){for(var t,n,i,r=[],o=0,s=e.length;o<s;o++)n=(t=e[o]).userID,this.userController.isMyFriend(n)&&(this._containsAccount(n)?(i=this._getProfileFromMap(n),Aa(i,t)>0&&r.push(n)):r.push(t.userID));0!==r.length&&(va.info("ProfileHandler.onConversationsProfileUpdated toAccount:",r),this.getUserProfile({userIDList:r}))}},{key:"getNickAndAvatarByUserID",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:"",avatar:""}}},{key:"reset",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}();De({target:"String",proto:!0},{repeat:Oi});var ig=function(){function e(t){Dn(this,e),this.options=t?t.options:{enablePointer:!0},this.pointsList={},this.reportText={},this.maxNameLen=0,this.gapChar="-",this.log=console.log,this.currentTask=""}return xn(e,[{key:"newTask",value:function(e){!1!==this.options.enablePointer&&(e||(e=["task",this._timeFormat()].join("-")),this.pointsList[e]=[],this.currentTask=e,console.log("Pointer new Task : ".concat(this.currentTask)))}},{key:"deleteTask",value:function(e){!1!==this.options.enablePointer&&(e||(e=this.currentTask),this.pointsList[e].length=0,delete this.pointsList[e])}},{key:"dot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!1!==this.options.enablePointer){t=t||this.currentTask;var n=+new Date;this.maxNameLen=this.maxNameLen<e.length?e.length:this.maxNameLen,this.flen=this.maxNameLen+10,this.pointsList[t].push({pointerName:e,time:n})}}},{key:"_analisys",value:function(e){if(!1!==this.options.enablePointer){for(var t=this.pointsList[e=e||this.currentTask],n=t.length,i=[],r=[],o=0;o<n;o++)0!==o&&(r=this._analisysTowPoints(t[o-1],t[o]),i.push(r.join("")));return r=this._analisysTowPoints(t[0],t[n-1],!0),i.push(r.join("")),i.join("")}}},{key:"_analisysTowPoints",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!1!==this.options.enablePointer){var i=this.flen,r=(t.time-e.time).toString(),o=e.pointerName+this.gapChar.repeat(i-e.pointerName.length),s=t.pointerName+this.gapChar.repeat(i-t.pointerName.length),a=this.gapChar.repeat(4-r.length)+r;return n?["%c",o,s,a,"ms\n%c"]:[o,s,a,"ms\n"]}}},{key:"report",value:function(e){if(!1!==this.options.enablePointer){var t=this._analisys(e=e||this.currentTask);this.pointsList=[];var n=this._timeFormat(),i="Pointer[".concat(e,"(").concat(n,")]"),r=4*this.maxNameLen,o=(r-i.length)/2;console.log(["-".repeat(o),i,"-".repeat(o)].join("")),console.log("%c"+t,"color:#66a","color:red","color:#66a"),console.log("-".repeat(r))}}},{key:"_timeFormat",value:function(){var e=new Date,t=this.zeroFix(e.getMonth()+1,2),n=this.zeroFix(e.getDate(),2);return"".concat(t,"-").concat(n," ").concat(e.getHours(),":").concat(e.getSeconds(),":").concat(e.getMinutes(),"~").concat(e.getMilliseconds())}},{key:"zeroFix",value:function(e,t){return("000000000"+e).slice(-t)}},{key:"reportAll",value:function(){if(!1!==this.options.enablePointer)for(var e in this.pointsList)Object.prototype.hasOwnProperty.call(this.pointsList,e)&&this.eport(e)}}]),e}(),rg=function e(t,n){Dn(this,e),this.userID=t;var i={};if(i.userID=t,!eu(n))for(var r=0,o=n.length;r<o;r++)switch(n[r].tag){case Xl.NICK:i.nick=n[r].value;break;case Xl.GENDER:i.gender=n[r].value;break;case Xl.BIRTHDAY:i.birthday=n[r].value;break;case Xl.LOCATION:i.location=n[r].value;break;case Xl.SELFSIGNATURE:i.selfSignature=n[r].value;break;case Xl.ALLOWTYPE:i.allowType=n[r].value;break;case Xl.LANGUAGE:i.language=n[r].value;break;case Xl.AVATAR:i.avatar=n[r].value;break;case Xl.MESSAGESETTINGS:i.messageSettings=n[r].value;break;case Xl.ADMINFORBIDTYPE:i.adminForbidType=n[r].value;break;case Xl.LEVEL:i.level=n[r].value;break;case Xl.ROLE:i.role=n[r].value;break;default:va.debug("snsProfileItem unkown tag->",n[r].tag)}this.profile=new tg(i)},og=function(){function e(t){Dn(this,e),this.userController=t,this.TAG="friend",this.Actions={G:"get",D:"delete"},this.friends=new Map,this.pointer=new ig}return xn(e,[{key:"isMyFriend",value:function(e){var t=this.friends.has(e);return t||va.debug("FriendHandler.isMyFriend "+e+" is not my friend"),t}},{key:"_transformFriendList",value:function(e){if(!eu(e)&&!eu(e.infoItem)){va.info("FriendHandler._transformFriendList friendNum="+e.friendNum);for(var t,n,i=e.infoItem,r=0,o=i.length;r<o;r++)t=new rg(n=i[r].infoAccount,i[r].snsProfileItem),this.friends.set(n,t)}}},{key:"_friends2map",value:function(e){var t=new Map;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.set(n,e[n]);return t}},{key:"getFriendList",value:function(){var e=this,t={};t.fromAccount=this.userController.getMyAccount(),va.info("FriendHandler.getFriendList myAccount="+t.fromAccount);var n=this.userController.generateConfig(this.TAG,this.Actions.G,t);return this.userController.request(n).then(function(t){va.info("FriendHandler.getFriendList ok"),e._transformFriendList(t.data);var n=Kn(e.friends.values());return gd(n)}).catch(function(e){return va.error("FriendHandler.getFriendList error:",e),vd(e)})}},{key:"deleteFriend",value:function(e){if(!Array.isArray(e.toAccount))return va.error("FriendHandler.deleteFriend options.toAccount \u5fc5\u9700\u662f\u6570\u7ec4"),vd({code:bh.DEL_FRIEND_INVALID_PARAM,message:"\u4f20\u5165 deleteFriend \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548"});e.toAccount.length>1e3&&(va.warn("FriendHandler.deleteFriend \u5220\u9664\u597d\u53cb\u4eba\u6570\u4e0d\u80fd\u8d85\u8fc71000\u4eba"),e.toAccount.length=1e3);var t=this.userController.generateConfig(this.TAG,this.Actions.D,e);return this.userController.request(t).then(function(e){return va.info("FriendHandler.deleteFriend ok"),gd()}).catch(function(e){return va.error("FriendHandler.deleteFriend error:",e),vd(e)})}}]),e}(),sg=function e(t){Dn(this,e),eu||(this.userID=t.userID||"",this.timeStamp=t.timeStamp||0)},ag=function(){function e(t){Dn(this,e),this.userController=t,this.TAG="blacklist",this.Actions={G:"get",C:"create",D:"delete"},this.blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.curruentSequence=0}return xn(e,[{key:"getBlacklist",value:function(){var e=this,t={};t.fromAccount=this.userController.getMyAccount(),t.maxLimited=this.maxLimited,t.startIndex=0,t.lastSequence=this.curruentSequence;var n=new Dd("getBlacklist"),i=this.userController.generateConfig(this.TAG,this.Actions.G,t);return this.userController.request(i).then(function(t){var i=eu(t.data.blackListItem)?0:t.data.blackListItem.length;return n.setNetworkType(e.userController.getNetworkType()).setText(i).setEnd(),va.info("BlacklistHandler.getBlacklist ok"),e.curruentSequence=t.data.curruentSequence,e._handleResponse(t.data.blackListItem,!0),e._onBlacklistUpdated()}).catch(function(t){return e.userController.probeNetwork().then(function(e){var i=Wn(e,2);n.setError(t,i[0],i[1]).setEnd()}),va.error("BlacklistHandler.getBlacklist error:",t),vd(t)})}},{key:"addBlacklist",value:function(e){var t=this,n=new Dd("addToBlacklist");if(!wa(e.userIDList))return n.setCode(bh.ADD_BLACKLIST_INVALID_PARAM).setMessage("BlacklistHandler.addBlacklist options.userIDList \u5fc5\u9700\u662f\u6570\u7ec4").setNetworkType(this.userController.getNetworkType()).setEnd(),va.error("BlacklistHandler.addBlacklist options.userIDList \u5fc5\u9700\u662f\u6570\u7ec4"),vd({code:bh.ADD_BLACKLIST_INVALID_PARAM,message:"\u4f20\u5165 addToBlacklist \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548"});var i=this.userController.tim.loginInfo.identifier;if(1===e.userIDList.length&&e.userIDList[0]===i)return n.setCode(bh.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage("\u4e0d\u80fd\u62c9\u9ed1\u81ea\u5df1").setNetworkType(this.userController.getNetworkType()).setEnd(),va.error("BlacklistHandler.addBlacklist \u4e0d\u80fd\u628a\u81ea\u5df1\u62c9\u9ed1"),vd({code:bh.CANNOT_ADD_SELF_TO_BLACKLIST,message:"\u4e0d\u80fd\u62c9\u9ed1\u81ea\u5df1"});e.userIDList.includes(i)&&(e.userIDList=e.userIDList.filter(function(e){return e!==i}),va.warn("BlacklistHandler.addBlacklist \u4e0d\u80fd\u628a\u81ea\u5df1\u62c9\u9ed1\uff0c\u5df2\u8fc7\u6ee4")),e.fromAccount=this.userController.getMyAccount(),e.toAccount=e.userIDList;var r=this.userController.generateConfig(this.TAG,this.Actions.C,e);return this.userController.request(r).then(function(i){return n.setNetworkType(t.userController.getNetworkType()).setText(e.userIDList.length>5?"userIDList.length=".concat(e.userIDList.length):"userIDList=".concat(e.userIDList)).setEnd(),va.info("BlacklistHandler.addBlacklist ok"),t._handleResponse(i.data.resultItem,!0),t._onBlacklistUpdated()}).catch(function(e){return t.userController.probeNetwork().then(function(t){var i=Wn(t,2);n.setError(e,i[0],i[1]).setEnd()}),va.error("BlacklistHandler.addBlacklist error:",e),vd(e)})}},{key:"_handleResponse",value:function(e,t){if(!eu(e))for(var n,i,r,o=0,s=e.length;o<s;o++)i=e[o].to,(Ca(r=e[o].resultCode)||0===r)&&(t?((n=this.blacklistMap.has(i)?this.blacklistMap.get(i):new sg).userID=i,!eu(e[o].addBlackTimeStamp)&&(n.timeStamp=e[o].addBlackTimeStamp),this.blacklistMap.set(i,n)):this.blacklistMap.has(i)&&(n=this.blacklistMap.get(i),this.blacklistMap.delete(i)));va.log("BlacklistHandler._handleResponse total="+this.blacklistMap.size+" bAdd="+t)}},{key:"deleteBlacklist",value:function(e){var t=this,n=new Dd("removeFromBlacklist");if(!wa(e.userIDList))return n.setCode(bh.DEL_BLACKLIST_INVALID_PARAM).setMessage("BlacklistHandler.deleteBlacklist options.userIDList \u5fc5\u9700\u662f\u6570\u7ec4").setNetworkType(this.userController.getNetworkType()).setEnd(),va.error("BlacklistHandler.deleteBlacklist options.userIDList \u5fc5\u9700\u662f\u6570\u7ec4"),vd({code:bh.DEL_BLACKLIST_INVALID_PARAM,message:"\u4f20\u5165 removeFromBlacklist \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548"});e.fromAccount=this.userController.getMyAccount(),e.toAccount=e.userIDList;var i=this.userController.generateConfig(this.TAG,this.Actions.D,e);return this.userController.request(i).then(function(i){return n.setNetworkType(t.userController.getNetworkType()).setText(e.userIDList.length>5?"userIDList.length=".concat(e.userIDList.length):"userIDList=".concat(e.userIDList)).setEnd(),va.info("BlacklistHandler.deleteBlacklist ok"),t._handleResponse(i.data.resultItem,!1),t._onBlacklistUpdated()}).catch(function(e){return t.userController.probeNetwork().then(function(t){var i=Wn(t,2);n.setError(e,i[0],i[1]).setEnd()}),va.error("BlacklistHandler.deleteBlacklist error:",e),vd(e)})}},{key:"_onBlacklistUpdated",value:function(){var e=Kn(this.blacklistMap.keys());return this.userController.emitOuterEvent(kn.BLACKLIST_UPDATED,e),gd(e)}},{key:"handleBlackListDelAccount",value:function(e){for(var t,n=[],i=0,r=e.length;i<r;i++)this.blacklistMap.has(t=e[i])&&(this.blacklistMap.delete(t),n.push(t));n.length>0&&(va.log("BlacklistHandler.handleBlackListDelAccount delCount="+n.length+" : "+n.join(",")),this.userController.emitOuterEvent(kn.BLACKLIST_UPDATED,Kn(this.blacklistMap.keys())))}},{key:"handleBlackListAddAccount",value:function(e){for(var t,n=[],i=0,r=e.length;i<r;i++)this.blacklistMap.has(t=e[i])||(this.blacklistMap.set(t,new sg({userID:t})),n.push(t));n.length>0&&(va.log("BlacklistHandler.handleBlackListAddAccount addCount="+n.length+" : "+n.join(",")),this.userController.emitOuterEvent(kn.BLACKLIST_UPDATED,Kn(this.blacklistMap.keys())))}},{key:"reset",value:function(){this.blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.curruentSequence=0}}]),e}(),ug=function(){function e(t){Dn(this,e),this.userController=t,this.TAG="applyC2C",this.Actions={C:"create",G:"get",D:"delete",U:"update"}}return xn(e,[{key:"applyAddFriend",value:function(e){var t=this,n=this.userController.generateConfig(this.TAG,this.Actions.C,e),i=this.userController.request(n);return i.then(function(e){t.userController.isActionSuccessful("applyAddFriend",t.Actions.C,e)}).catch(function(e){}),i}},{key:"getPendency",value:function(e){var t=this,n=this.userController.generateConfig(this.TAG,this.Actions.G,e),i=this.userController.request(n);return i.then(function(e){t.userController.isActionSuccessful("getPendency",t.Actions.G,e)}).catch(function(e){}),i}},{key:"deletePendency",value:function(e){var t=this,n=this.userController.generateConfig(this.TAG,this.Actions.D,e),i=this.userController.request(n);return i.then(function(e){t.userController.isActionSuccessful("deletePendency",t.Actions.D,e)}).catch(function(e){}),i}},{key:"replyPendency",value:function(){var e=this,t=this.userController.generateConfig(this.TAG,this.Actions.U,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),n=this.userController.request(t);return n.then(function(t){e.userController.isActionSuccessful("replyPendency",e.Actions.U,t)}).catch(function(e){}),n}}]),e}(),cg=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).profileHandler=new ng(Bn(i)),i.friendHandler=new og(Bn(i)),i.blacklistHandler=new ag(Bn(i)),i.applyC2CHandler=new ug(Bn(i)),i._initializeListener(),i}return xn(n,[{key:"_initializeListener",value:function(e){var t=this.tim.innerEmitter;t.on(uf,this.onContextUpdated,this),t.on(Df,this.onProfileModified,this),t.on(Of,this.onNewFriendMessages,this),t.on(qf,this.onConversationsProfileUpdated,this)}},{key:"onContextUpdated",value:function(e){var t=this.tim.context;0!=!!t.a2Key&&0!=!!t.tinyID&&(this.profileHandler.getMyProfile(),this.friendHandler.getFriendList(),this.blacklistHandler.getBlacklist())}},{key:"onGotMyProfile",value:function(){this.triggerReady()}},{key:"onProfileModified",value:function(e){this.profileHandler.onProfileModified(e)}},{key:"onNewFriendMessages",value:function(e){va.debug("onNewFriendMessages",JSON.stringify(e.data)),eu(e.data.blackListDelAccount)||this.blacklistHandler.handleBlackListDelAccount(e.data.blackListDelAccount),eu(e.data.blackListAddAccount)||this.blacklistHandler.handleBlackListAddAccount(e.data.blackListAddAccount)}},{key:"onConversationsProfileUpdated",value:function(e){this.profileHandler.onConversationsProfileUpdated(e.data)}},{key:"getMyAccount",value:function(){return this.tim.context.identifier}},{key:"isMyFriend",value:function(e){return this.friendHandler.isMyFriend(e)}},{key:"generateConfig",value:function(e,t,n){return{name:e,action:t,param:n}}},{key:"getMyProfile",value:function(){return this.profileHandler.getMyProfile()}},{key:"getUserProfile",value:function(e){return this.profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this.profileHandler.updateMyProfile(e)}},{key:"getFriendList",value:function(){return this.friendHandler.getFriendList()}},{key:"deleteFriend",value:function(e){return this.friendHandler.deleteFriend(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this.profileHandler.getNickAndAvatarByUserID(e)}},{key:"getBlacklist",value:function(){return this.blacklistHandler.getBlacklist()}},{key:"addBlacklist",value:function(e){return this.blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this.blacklistHandler.deleteBlacklist(e)}},{key:"applyAddFriend",value:function(e){return this.applyC2CHandler.applyAddFriend(e)}},{key:"getPendency",value:function(e){return this.applyC2CHandler.getPendency(e)}},{key:"deletePendency",value:function(e){return this.applyC2CHandler.deletePendency(e)}},{key:"replyPendency",value:function(e){return this.applyC2CHandler.replyPendency(e)}},{key:"reset",value:function(){va.info("UserController.reset"),this.resetReady(),this.profileHandler.reset(),this.blacklistHandler.reset(),this.checkTimes=0}}]),n}(ld),lg=[],hg=lg.sort,fg=r(function(){lg.sort(void 0)}),dg=r(function(){lg.sort(null)}),pg=ot("sort");De({target:"Array",proto:!0,forced:fg||!dg||!pg},{sort:function(e){return void 0===e?hg.call(xe(this)):hg.call(xe(this),Qe(e))}});var gg=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers"],vg=function(){function e(t){Dn(this,e),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:""},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.groupCustomField=[],this.muteAllMembers=void 0,this._initGroup(t)}return xn(e,[{key:"_initGroup",value:function(e){for(var t in e)gg.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),this[t]=e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=JSON.parse(JSON.stringify(e));t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),Ca(t.muteAllMembers)||(t.muteAllMembers="On"===t.muteAllMembers),t.groupCustomField&&ja(this.groupCustomField,t.groupCustomField),Ca(t.memberNum)||(this.memberCount=t.memberNum),Ca(t.maxMemberNum)||(this.maxMemberCount=t.maxMemberNum),Aa(this,t,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum"])}},{key:"updateSelfInfo",value:function(e){Aa(this.selfInfo,{nameCard:e.nameCard,joinTime:e.joinTime,role:e.role,messageRemindType:e.messageRemindType},[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}},{key:"memberNum",set:function(e){},get:function(){return va.warn("\uff01\uff01\uff01v2.8.0\u8d77\u5f03\u7528memberNum\uff0c\u8bf7\u4f7f\u7528 memberCount"),this.memberCount}},{key:"maxMemberNum",set:function(e){},get:function(){return va.warn("\uff01\uff01\uff01v2.8.0\u8d77\u5f03\u7528maxMemberNum\uff0c\u8bf7\u4f7f\u7528 maxMemberCount"),this.maxMemberCount}}]),e}(),mg=function(e,t){if(Ca(t))return"";switch(e){case wn.MSG_TEXT:return t.text;case wn.MSG_IMAGE:return"[\u56fe\u7247]";case wn.MSG_GEO:return"[\u4f4d\u7f6e]";case wn.MSG_AUDIO:return"[\u8bed\u97f3]";case wn.MSG_VIDEO:return"[\u89c6\u9891]";case wn.MSG_FILE:return"[\u6587\u4ef6]";case wn.MSG_CUSTOM:return"[\u81ea\u5b9a\u4e49\u6d88\u606f]";case wn.MSG_GRP_TIP:return"[\u7fa4\u63d0\u793a\u6d88\u606f]";case wn.MSG_GRP_SYS_NOTICE:return"[\u7fa4\u7cfb\u7edf\u901a\u77e5]";case wn.MSG_FACE:return"[\u52a8\u753b\u8868\u60c5]";case wn.MSG_MERGER:return"[\u804a\u5929\u8bb0\u5f55]";default:return""}},yg=function(e){return Ca(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:"",isRevoked:!1}:e instanceof qh?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:mg(e.type,e.payload),payload:e.payload||null,type:e.type||null,isRevoked:!1}:zn(zn({},e),{},{isRevoked:!1,messageForShow:mg(e.type,e.payload)})},_g=function(){function e(t){Dn(this,e),this.conversationID=t.conversationID||"",this.unreadCount=t.unreadCount||0,this.type=t.type||"",this.lastMessage=yg(t.lastMessage),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this._initProfile(t)}return xn(e,[{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}}),Ca(this.userProfile)&&this.type===wn.CONV_C2C?this.userProfile=new tg({userID:e.conversationID.replace("C2C","")}):Ca(this.groupProfile)&&this.type===wn.CONV_GROUP&&(this.groupProfile=new vg({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e,t){Ca(e)||(this.unreadCount=qa(this.subType)||Wa(this.subType)?0:t&&this.type===wn.CONV_GROUP?e:this.unreadCount+e)}},{key:"updateLastMessage",value:function(e){this.lastMessage=yg(e)}},{key:"updateGroupAtInfoList",value:function(e){var t,n=(Yn(t=e.groupAtType)||$n(t)||Zn(t)||Jn()).slice(0);-1!==n.indexOf(wn.CONV_AT_ME)&&-1!==n.indexOf(wn.CONV_AT_ALL)&&(n=[wn.CONV_AT_ALL_AT_ME]),this.groupAtInfoList.push({from:e.from,groupID:e.groupID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence}),va.debug("Conversation.updateGroupAtInfoList conversationID=".concat(this.conversationID),this.groupAtInfoList)}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){this.unreadCount>=1&&(this.unreadCount-=1)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence;return this.type===wn.CONV_C2C&&t===this.lastMessage.lastSequence&&e.time===this.lastMessage.lastTime||this.type===wn.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"toAccount",get:function(){return this.conversationID.replace("C2C","").replace("GROUP","")}},{key:"subType",get:function(){return this.groupProfile?this.groupProfile.type:""}}]),e}(),bg=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).pagingStatus="notStart",i.pagingTimeStamp=0,i.conversationMap=new Map,i.tempGroupList=[],i.tempGroupAtTipsList=[],i._initListeners(),i}return xn(n,[{key:"hasLocalConversationMap",value:function(){return this.conversationMap.size>0}},{key:"_createLocalConversation",value:function(e){return this.conversationMap.has(e)?this.conversationMap.get(e):(va.log("ConversationController._createLocalConversation conversationID:".concat(e)),new _g({conversationID:e,type:e.slice(0,3)===wn.CONV_C2C?wn.CONV_C2C:wn.CONV_GROUP}))}},{key:"hasLocalConversation",value:function(e){return this.conversationMap.has(e)}},{key:"getConversationList",value:function(){var e=this;va.log("ConversationController.getConversationList."),"rejected"===this.pagingStatus&&(va.log("ConversationController.getConversationList. continue to sync conversationList"),this._syncConversationList());var t=new Dd("getConversationList");return this.request({name:"conversation",action:"query"}).then(function(n){var i=n.data.conversations,r=void 0===i?[]:i,o=e._getConversationOptions(r);return e._updateLocalConversationList(o,!0),e._setStorageConversationList(),e._handleC2CPeerReadTime(),t.setText(r.length).setNetworkType(e.getNetworkType()).setEnd(),va.log("ConversationController.getConversationList ok."),gd({conversationList:e.getLocalConversationList()})}).catch(function(n){return e.probeNetwork().then(function(e){var i=Wn(e,2);t.setError(n,i[0],i[1]).setEnd()}),va.error("ConversationController.getConversationList error:",n),vd(n)})}},{key:"_syncConversationList",value:function(){var e=this,t=new Dd("syncConversationList");return"notStart"===this.pagingStatus&&this.conversationMap.clear(),this._autoPagingSyncConversationList().then(function(n){return e.pagingStatus="resolved",e._setStorageConversationList(),e._handleC2CPeerReadTime(),t.setText("".concat(e.conversationMap.size)).setNetworkType(e.getNetworkType()).setEnd(),n}).catch(function(n){return e.pagingStatus="rejected",t.setText(e.pagingTimeStamp),e.probeNetwork().then(function(e){var i=Wn(e,2);t.setError(n,i[0],i[1]).setEnd()}),vd(n)})}},{key:"_autoPagingSyncConversationList",value:function(){var e=this;return this.pagingStatus="pengding",this.request({name:"conversation",action:"pagingQuery",param:{fromAccount:this.tim.context.identifier,timeStamp:this.pagingTimeStamp,orderType:1}}).then(function(t){var n=t.data,i=n.completeFlag,r=n.conversations,o=void 0===r?[]:r,s=n.timeStamp;if(va.log("ConversationController._autoPagingSyncConversationList completeFlag=".concat(i," nums=").concat(o.length)),o.length>0){var a=e._getConversationOptions(o);e._updateLocalConversationList(a,!0)}if(e._isReady)e._emitConversationUpdate();else{if(!e.isLoggedIn())return gd();e.triggerReady()}return e.pagingTimeStamp=s,1!==i?e._autoPagingSyncConversationList():(e._handleGroupAtTipsList(),gd())}).catch(function(t){throw e.isLoggedIn()&&(e._isReady||(va.warn("ConversationController._autoPagingSyncConversationList failed. error:".concat(xa(t))),e.triggerReady())),t})}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=this.tim.messageController,n=Qn(this.conversationMap);try{for(n.s();!(e=n.n()).done;){var i=Wn(e.value,2),r=i[0],o=i[1];o.type===wn.CONV_C2C&&(va.debug("ConversationController._handleC2CPeerReadTime",r,o.peerReadTime),t.recordPeerReadTime(r,o.peerReadTime))}}catch(s){n.e(s)}finally{n.f()}}},{key:"getConversationProfile",value:function(e){var t=this,n=this.conversationMap.has(e)?this.conversationMap.get(e):this._createLocalConversation(e);if(n._isInfoCompleted||n.type===wn.CONV_SYSTEM)return gd({conversation:n});var i=new Dd("getConversationProfile");return va.log("ConversationController.getConversationProfile. conversationID:".concat(e," lastMessage:"),n.lastMessage),this._updateUserOrGroupProfileCompletely(n).then(function(n){return i.setNetworkType(t.getNetworkType()).setText("conversationID=".concat(e," unreadCount=").concat(n.data.conversation.unreadCount)).setEnd(),va.log("ConversationController.getConversationProfile ok. conversationID:",e),n}).catch(function(n){return t.probeNetwork().then(function(t){var r=Wn(t,2);i.setError(n,r[0],r[1]).setText("conversationID=".concat(e)).setEnd()}),va.error("ConversationController.getConversationProfile error:",n),vd(n)})}},{key:"deleteConversation",value:function(e){var t=this,n={};if(!this.conversationMap.has(e)){var i=new _h({code:bh.CONVERSATION_NOT_FOUND,message:"\u6ca1\u6709\u627e\u5230\u76f8\u5e94\u7684\u4f1a\u8bdd\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570"});return vd(i)}switch(this.conversationMap.get(e).type){case wn.CONV_C2C:n.type=1,n.toAccount=e.replace(wn.CONV_C2C,"");break;case wn.CONV_GROUP:n.type=2,n.toGroupID=e.replace(wn.CONV_GROUP,"");break;case wn.CONV_SYSTEM:return this.tim.groupController.deleteGroupSystemNotice({messageList:this.tim.messageController.getLocalMessageList(e)}),this.deleteLocalConversation(e),gd({conversationID:e});default:var r=new _h({code:bh.CONVERSATION_UN_RECORDED_TYPE,message:"\u672a\u8bb0\u5f55\u7684\u4f1a\u8bdd\u7c7b\u578b"});return vd(r)}var o=new Dd("deleteConversation");return o.setText("conversationID=".concat(e)),va.log("ConversationController.deleteConversation. conversationID=".concat(e)),this.tim.setMessageRead({conversationID:e}).then(function(){return t.request({name:"conversation",action:"delete",param:n})}).then(function(){return o.setNetworkType(t.getNetworkType()).setEnd(),va.log("ConversationController.deleteConversation ok."),t.deleteLocalConversation(e),gd({conversationID:e})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);o.setError(e,n[0],n[1]).setEnd()}),va.error("ConversationController.deleteConversation error:",e),vd(e)})}},{key:"getLocalConversationList",value:function(){return Kn(this.conversationMap.values())}},{key:"getLocalConversation",value:function(e){return this.conversationMap.get(e)}},{key:"_initLocalConversationList",value:function(){var e=new Dd("getConversationListInStorage");va.time("initConversationList"),va.log("ConversationController._initLocalConversationList.");var t=this._getStorageConversationList();if(t){for(var n=t.length,i=0;i<n;i++)this.conversationMap.set(t[i].conversationID,new _g(t[i]));this._emitConversationUpdate(!0,!1),e.setNetworkType(this.getNetworkType()).setText(n).setEnd()}else e.setNetworkType(this.getNetworkType()).setText(0).setEnd();this._syncConversationList()}},{key:"_getStorageConversationList",value:function(){return this.tim.storage.getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var e=this.getLocalConversationList().slice(0,20).map(function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}});this.tim.storage.setItem("conversationMap",e)}},{key:"_initListeners",value:function(){var e=this;this.tim.innerEmitter.once(uf,this._initLocalConversationList,this),this.tim.innerEmitter.on(ff,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(df,this._handleSyncMessages,this),this.tim.innerEmitter.on(pf,this._handleSyncMessages,this),this.tim.innerEmitter.on(gf,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(vf,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(mf,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ff,this._onGroupListUpdated,this),this.tim.innerEmitter.on(Kf,this._updateConversationUserProfile,this),this.tim.innerEmitter.on(yf,this._onMessageRevoked,this),this.tim.innerEmitter.on(Tf,this._onReceiveGroupAtTips,this),this.ready(function(){e.tempGroupList.length>0&&(e._updateConversationGroupProfile(e.tempGroupList),e.tempGroupList.length=0)})}},{key:"_onGroupListUpdated",value:function(e){this._updateConversationGroupProfile(e.data)}},{key:"_updateConversationGroupProfile",value:function(e){var t=this;wa(e)&&0===e.length||(this.hasLocalConversationMap()?(e.forEach(function(e){var n="GROUP".concat(e.groupID);if(t.conversationMap.has(n)){var i=t.conversationMap.get(n);i.groupProfile=e,i.lastMessage.lastSequence<e.nextMessageSeq&&(i.lastMessage.lastSequence=e.nextMessageSeq-1),i.subType||(i.subType=e.type)}}),this._emitConversationUpdate(!0,!1)):this.tempGroupList=e)}},{key:"_updateConversationUserProfile",value:function(e){var t=this;e.data.forEach(function(e){var n="C2C".concat(e.userID);t.conversationMap.has(n)&&(t.conversationMap.get(n).userProfile=e)}),this._emitConversationUpdate(!0,!1)}},{key:"updateUserProfileSpecifiedKey",value:function(e){va.log("ConversationController.updateUserProfileSpecifiedKey options:",e);var t=e.conversationID,n=e.nick,i=e.avatar;if(this.conversationMap.has(t)){var r=this.conversationMap.get(t).userProfile;_a(n)&&r.nick!==n&&(r.nick=n),_a(i)&&r.avatar!==i&&(r.avatar=i),this._emitConversationUpdate(!0,!1)}}},{key:"_onMessageRevoked",value:function(e){var t=this,n=e.data;if(0!==n.length){var i=null,r=!1;n.forEach(function(e){(i=t.conversationMap.get(e.conversationID))&&i.isLastMessageRevoked(e)&&(r=!0,i.setLastMessageRevoked(!0))}),r&&this._emitConversationUpdate(!0,!1)}}},{key:"_onReceiveGroupAtTips",value:function(e){var t=this,n=null;e.data.forEach(function(e){e.groupAtTips?n=e.groupAtTips:e.elements&&(n=e.elements),n.__random=e.random,n.__sequence=e.clientSequence,t.tempGroupAtTipsList.push(n)}),va.debug("ConversationController._onReceiveGroupAtTips isReady=".concat(this._isReady),this.tempGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e=this;if(0!==this.tempGroupAtTipsList.length){var t=!1;this.tempGroupAtTipsList.forEach(function(n){var i=n.groupID;if(n.from!==e.tim.context.identifier){var r=e.conversationMap.get("".concat(wn.CONV_GROUP).concat(i));r&&(r.updateGroupAtInfoList(n),t=!0)}}),t&&this._emitConversationUpdate(!0,!1),this.tempGroupAtTipsList.length=0}}},{key:"deleteGroupAtTips",value:function(e){va.log("ConversationController.deleteGroupAtTips");var t=this.conversationMap.get(e);if(!t)return Promise.resolve();var n=t.groupAtInfoList;if(0===n.length)return Promise.resolve();var i=this.tim.context.identifier;return this.request({name:"conversation",action:"deleteGroupAtTips",param:{messageListToDelete:n.map(function(e){return{from:e.from,to:i,messageSeq:e.__sequence,messageRandom:e.__random,groupID:e.groupID}})}}).then(function(){return va.log("ConversationController.deleteGroupAtTips ok. nums=".concat(n.length)),t.clearGroupAtInfoList(),Promise.resolve()}).catch(function(e){return va.error("ConversationController.deleteGroupAtTips error:",e),vd(e)})}},{key:"_handleSyncMessages",value:function(e){this._onSendOrReceiveMessage(e,!0)}},{key:"_onSendOrReceiveMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.data.eventDataList;this._isReady?0!==i.length&&(this._getPeerReadTime(i),this._updateLocalConversationList(i,!1,n),this._setStorageConversationList(),this._emitConversationUpdate()):this.ready(function(){t._onSendOrReceiveMessage(e,n)})}},{key:"_getPeerReadTime",value:function(e){var t=this,n=[];e.forEach(function(e){t.conversationMap.has(e.conversationID)||e.type!==wn.CONV_C2C||n.push(e.conversationID.replace(wn.CONV_C2C,""))}),n.length>0&&(va.debug("ConversationController._getPeerReadTime userIDList:".concat(n)),this.tim.messageController.getPeerReadTime(n))}},{key:"_updateLocalConversationList",value:function(e,t,n){var i;i=this._updateTempConversations(e,t,n),this.conversationMap=new Map(this._sortConversations([].concat(Kn(i.conversations),Kn(this.conversationMap)))),t||this._updateUserOrGroupProfile(i.newerConversations)}},{key:"_updateTempConversations",value:function(e,t,n){for(var i=[],r=[],o=0,s=e.length;o<s;o++){var a=new _g(e[o]),u=this.conversationMap.get(a.conversationID);if(this.conversationMap.has(a.conversationID)){var c=["unreadCount","allowType","adminForbidType","payload"];n&&c.push("lastMessage"),Aa(u,a,c,[null,void 0,"",0,NaN]),u.updateUnreadCount(a.unreadCount,t),n||(u.lastMessage.payload=e[o].lastMessage.payload),this.conversationMap.delete(u.conversationID),i.push([u.conversationID,u])}else{if(a.type===wn.CONV_GROUP){var l=this.tim.groupController.getLocalGroupProfile(a.groupProfile.groupID);l&&(a.groupProfile=l,a.updateUnreadCount(0))}r.push(a),i.push([a.conversationID,a])}}return{conversations:i,newerConversations:r}}},{key:"_sortConversations",value:function(e){return e.sort(function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})}},{key:"_updateUserOrGroupProfile",value:function(e){var t=this;if(0!==e.length){var n=[],i=[];e.forEach(function(e){if(e.type===wn.CONV_C2C)n.push(e.toAccount);else if(e.type===wn.CONV_GROUP){var r=e.toAccount;t.tim.groupController.hasLocalGroup(r)?e.groupProfile=t.tim.groupController.getLocalGroupProfile(r):i.push(r)}}),n.length>0&&this.tim.getUserProfile({userIDList:n}).then(function(e){var n=e.data;wa(n)?n.forEach(function(e){t.conversationMap.get("C2C".concat(e.userID)).userProfile=e}):t.conversationMap.get("C2C".concat(n.userID)).userProfile=n}),i.length>0&&this.tim.groupController.getGroupProfileAdvance({groupIDList:i,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then(function(e){e.data.successGroupList.forEach(function(e){var n="GROUP".concat(e.groupID);if(t.conversationMap.has(n)){var i=t.conversationMap.get(n);Aa(i.groupProfile,e,[],[null,void 0,"",0,NaN]),!i.subType&&e.type&&(i.subType=e.type)}})})}}},{key:"_updateUserOrGroupProfileCompletely",value:function(e){var t=this;return e.type===wn.CONV_C2C?this.tim.getUserProfile({userIDList:[e.toAccount]}).then(function(n){var i=n.data;return 0===i.length?vd(new _h({code:bh.USER_OR_GROUP_NOT_FOUND,message:"\u6ca1\u6709\u627e\u5230\u76f8\u5e94\u7684\u7528\u6237\u6216\u7fa4\u7ec4\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570"})):(e.userProfile=i[0],e._isInfoCompleted=!0,t._unshiftConversation(e),gd({conversation:e}))}):this.tim.getGroupProfile({groupID:e.toAccount}).then(function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),gd({conversation:e})})}},{key:"_unshiftConversation",value:function(e){e instanceof _g&&!this.conversationMap.has(e.conversationID)&&(this.conversationMap=new Map([[e.conversationID,e]].concat(Kn(this.conversationMap))),this._setStorageConversationList(),this._emitConversationUpdate(!0,!1))}},{key:"deleteLocalConversation",value:function(e){this.conversationMap.delete(e),this._setStorageConversationList(),this.emitInnerEvent(Wf,e),this._emitConversationUpdate(!0,!1)}},{key:"_getConversationOptions",value:function(e){var t=[],n=e.filter(function(e){return ka(e.lastMsg)}).map(function(e){if(1===e.type){var n={userID:e.userID,nick:e.c2CNick,avatar:e.c2CImage};return t.push(n),{conversationID:"C2C".concat(e.userID),type:"C2C",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null},userProfile:new tg(n),peerReadTime:e.c2cPeerReadTime}}return{conversationID:"GROUP".concat(e.groupID),type:"GROUP",lastMessage:{lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null},groupProfile:new vg({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0}});return t.length>0&&this.emitInnerEvent(qf,t),n}},{key:"_emitConversationUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Kn(this.conversationMap.values());t&&this.emitInnerEvent(Hf,n),e&&this.emitOuterEvent(kn.CONVERSATION_LIST_UPDATED,n)}},{key:"_conversationMapTreeShaking",value:function(e){var t=this,n=new Map(Kn(this.conversationMap));e.forEach(function(e){return n.delete(e.conversationID)}),n.has(wn.CONV_SYSTEM)&&n.delete(wn.CONV_SYSTEM);var i=this.tim.groupController.getJoinedAVChatRoom();i&&i.forEach(function(e){n.delete("".concat(wn.CONV_GROUP).concat(e))}),Kn(n.keys()).forEach(function(e){return t.conversationMap.delete(e)})}},{key:"reset",value:function(){this.pagingStatus="notStart",this.pagingTimeStamp=0,this.conversationMap.clear(),this.tempGroupAtTipsList.length=0,this.resetReady(),this.tim.innerEmitter.once(uf,this._initLocalConversationList,this)}}]),n}(ld),kg=1..toFixed,wg=Math.floor,Cg=function e(t,n,i){return 0===n?i:n%2==1?e(t,n-1,i*t):e(t*t,n/2,i)},Sg=kg&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(function(){kg.call({})});De({target:"Number",proto:!0,forced:Sg},{toFixed:function(e){var t,n,i,r,o=function(e){if("number"!=typeof e&&"Number"!=h(e))throw TypeError("Incorrect invocation");return+e}(this),s=se(e),a=[0,0,0,0,0,0],u="",c="0",l=function(e,t){for(var n=-1,i=t;++n<6;)a[n]=(i+=e*a[n])%1e7,i=wg(i/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)a[t]=wg((n+=a[t])/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==a[e]){var n=String(a[e]);t=""===t?n:t+Oi.call("0",7-n.length)+n}return t};if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(u="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*Cg(2,69,1))-69)<0?o*Cg(2,-t,1):o/Cg(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),i=s;i>=7;)l(1e7,0),i-=7;for(l(Cg(10,i,1),0),i=t-1;i>=23;)f(1<<23),i-=23;f(1<<i),l(1,1),f(2),c=d()}else l(0,n),l(1<<-t,0),c=d()+Oi.call("0",s);return s>0?u+((r=c.length)<=s?"0."+Oi.call("0",s-r)+c:c.slice(0,r-s)+"."+c.slice(r-s)):u+c}});var Eg=[].push,Ig=Math.min,Tg=!r(function(){return!RegExp(4294967295,"y")});fs("split",2,function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(p(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!ns(e))return t.call(i,e,r);for(var o,s,a,u=[],c=0,l=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(o=Xo.call(l,i))&&!((s=l.lastIndex)>c&&(u.push(i.slice(c,o.index)),o.length>1&&o.index<i.length&&Eg.apply(u,o.slice(1)),a=o[0].length,c=s,u.length>=r));)l.lastIndex===o.index&&l.lastIndex++;return c===i.length?!a&&l.test("")||u.push(""):u.push(i.slice(c)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=p(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(String(r),t,n)},function(e,r){var o=n(i,e,this,r,i!==t);if(o.done)return o.value;var s=I(e),a=String(this),u=Tr(s,RegExp),c=s.unicode,l=new u(Tg?s:"^(?:"+s.source+")",(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Tg?"y":"g")),h=void 0===r?4294967295:r>>>0;if(0===h)return[];if(0===a.length)return null===gs(l,a)?[a]:[];for(var f=0,d=0,p=[];d<a.length;){l.lastIndex=Tg?d:0;var g,v=gs(l,Tg?a:a.slice(d));if(null===v||(g=Ig(ue(l.lastIndex+(Tg?0:d)),a.length))===f)d=ps(a,d,c);else{if(p.push(a.slice(f,d)),p.length===h)return p;for(var m=1;m<=v.length-1;m++)if(p.push(v[m]),p.length===h)return p;d=f=g}}return p.push(a.slice(f)),p}]},!Tg);var Mg=function(){function e(t){if(Dn(this,e),void 0===t)throw new _h({code:bh.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,message:wh});if(void 0===t.tim)throw new _h({code:bh.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,message:"".concat(wh,".tim")});this.list=new Map,this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map,this.tim=t.tim,this._initializeOptions(t)}return xn(e,[{key:"getLocalOldestMessageByConversationID",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:"_initializeOptions",value:function(e){this.options={};var t={memory:{maxDatasPerKey:100,maxBytesPerData:256,maxKeys:0},cache:{maxDatasPerKey:10,maxBytesPerData:256,maxKeys:0}};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(void 0===e[n]){this.options[n]=t[n];continue}var i=t[n];for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){if(void 0===e[n][r]){this.options[n][r]=i[r];continue}this.options[n][r]=e[n][r]}}}},{key:"pushIn",value:function(e){var t=e.conversationID,n=e.ID,i=!0;return this.list.has(t)||this.list.set(t,new Map),this.list.has(t)&&this.list.get(t).has(n)?i=!1:(this.list.get(t).set(n,e),this._setLatestMessageSentByPeer(t,e),this._setLatestMessageSentByMe(t,e)),i}},{key:"unshift",value:function(e){var t;if(wa(e)?e.length>0&&(t=e[0].conversationID,this._unshiftMultipleMessages(e)):(t=e.conversationID,this._unshiftSingleMessage(e)),t&&t.startsWith(wn.CONV_C2C)){var n=Array.from(this.list.get(t).values()),i=n.length;if(0===i)return;for(var r=i-1;r>=0;r--)if("out"===n[r].flow){this._setLatestMessageSentByMe(t,n[r]);break}for(var o=i-1;o>=0;o--)if("in"===n[o].flow){this._setLatestMessageSentByPeer(t,n[o]);break}}}},{key:"_unshiftSingleMessage",value:function(e){var t=e.conversationID,n=e.ID;if(!this.list.has(t))return this.list.set(t,new Map),void this.list.get(t).set(n,e);var i=Array.from(this.list.get(t));i.unshift([n,e]),this.list.set(t,new Map(i))}},{key:"_unshiftMultipleMessages",value:function(e){for(var t=e.length,n=[],i=e[0].conversationID,r=this.list.has(i)?Array.from(this.list.get(i)):[],o=0;o<t;o++)n.push([e[o].ID,e[o]]);this.list.set(i,new Map(n.concat(r)))}},{key:"remove",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:"revoke",value:function(e,t,n){if(va.debug("revoke message",e,t,n),this.list.has(e)){var i,r=Qn(this.list.get(e));try{for(r.s();!(i=r.n()).done;){var o=Wn(i.value,2)[1];if(o.sequence===t&&!o.isRevoked&&(Ca(n)||o.random===n))return o.isRevoked=!0,o}}catch(s){r.e(s)}finally{r.f()}}return null}},{key:"removeByConversationID",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){var n=[];if(this.list.has(e)){var i,r=Qn(this.list.get(e));try{for(r.s();!(i=r.n()).done;){var o=Wn(i.value,2)[1];o.time<=t&&!o.isPeerRead&&"out"===o.flow&&(o.isPeerRead=!0,n.push(o))}}catch(s){r.e(s)}finally{r.f()}va.log("MessagesList.updateMessageIsPeerReadProperty conversationID=".concat(e," peerReadTime=").concat(t," count=").concat(n.length))}return n}},{key:"hasLocalMessageList",value:function(e){return this.list.has(e)}},{key:"getLocalMessageList",value:function(e){return this.hasLocalMessageList(e)?Kn(this.list.get(e).values()):[]}},{key:"hasLocalMessage",value:function(e,t){return!!this.hasLocalMessageList(e)&&this.list.get(e).has(t)}},{key:"getLocalMessage",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:"_setLatestMessageSentByPeer",value:function(e,t){e.startsWith(wn.CONV_C2C)&&"in"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:"_setLatestMessageSentByMe",value:function(e,t){e.startsWith(wn.CONV_C2C)&&"out"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:"modifyMessageSentByPeer",value:function(e){var t=this.list.get(e);if(!eu(t)){var n=Array.from(t.values()),i=n.length;if(0!==i){for(var r=null,o=null,s=0,a=!1,u=i-1;u>=0;u--)"in"===n[u].flow&&(null===o?o=n[u]:((r=n[u]).nick!==o.nick&&(r.setNickAndAvatar({nick:o.nick}),a=!0),r.avatar!==o.avatar&&(r.setNickAndAvatar({avatar:o.avatar}),a=!0),a&&(s+=1)));va.log("MessagesList.modifyMessageSentByPeer conversationID=".concat(e," count=").concat(s))}}}},{key:"modifyMessageSentByMe",value:function(e){var t=e.conversationID,n=e.latestNick,i=e.latestAvatar,r=this.list.get(t);if(!eu(r)){var o=Array.from(r.values()),s=o.length;if(0!==s){for(var a=null,u=0,c=!1,l=s-1;l>=0;l--)"out"===o[l].flow&&((a=o[l]).nick!==n&&(a.setNickAndAvatar({nick:n}),c=!0),a.avatar!==i&&(a.setNickAndAvatar({avatar:i}),c=!0),c&&(u+=1));va.log("MessagesList.modifyMessageSentByMe conversationID=".concat(t," count=").concat(u))}}}},{key:"reset",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear()}}]),e}(),Og=function(){function e(t){Dn(this,e),this.tim=t}return xn(e,[{key:"setMessageRead",value:function(e){var t=e.conversationID,n=e.messageID,i=this.tim.conversationController,r=i.getLocalConversation(t);if(va.log("ReadReportHandler.setMessageRead conversationID=".concat(t," unreadCount=").concat(r?r.unreadCount:0)),!r)return gd();if(r.type!==wn.CONV_GROUP||eu(r.groupAtInfoList)||i.deleteGroupAtTips(t),0===r.unreadCount)return gd();var o=n?this.tim.messageController.getLocalMessage(t,n):null;switch(r.type){case wn.CONV_C2C:return this._setC2CMessageRead({conversationID:t,lastMessageTime:o?o.time:r.lastMessage.lastTime});case wn.CONV_GROUP:return this._setGroupMessageRead({conversationID:t,lastMessageSeq:o?o.sequence:r.lastMessage.lastSequence});case wn.CONV_SYSTEM:return r.unreadCount=0,gd();default:return gd()}}},{key:"_setC2CMessageRead",value:function(e){var t=this,n=e.conversationID,i=e.lastMessageTime;va.log("ReadReportHandler._setC2CMessageRead conversationID=".concat(n," lastMessageTime=").concat(i)),ya(i)||va.warn("ReadReportHandler._setC2CMessageRead \u8bf7\u52ff\u4fee\u6539 Conversation.lastMessage.lastTime\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5df2\u8bfb\u4e0a\u62a5\u7ed3\u679c\u4e0d\u51c6\u786e");var r=new Dd("setC2CMessageRead");return r.setText("".concat(n,"-").concat(i)),this.tim.messageController.request({name:"conversation",action:"setC2CMessageRead",param:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:n.replace("C2C",""),lastMessageTime:i,receipt:1}]}}}).then(function(){return r.setNetworkType(t.tim.netMonitor.getNetworkType()).setEnd(),va.log("ReadReportHandler._setC2CMessageRead ok."),t.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:i}),t.updateUnreadCount(n),new dd}).catch(function(e){return t.tim.netMonitor.probe().then(function(t){var n=Wn(t,2);r.setError(e,n[0],n[1]).setEnd()}),va.log("ReadReportHandler._setC2CMessageRead failed. ".concat(xa(e))),vd(e)})}},{key:"_setGroupMessageRead",value:function(e){var t=this,n=e.conversationID,i=e.lastMessageSeq;va.log("ReadReportHandler._setGroupMessageRead conversationID=".concat(n," lastMessageSeq=").concat(i)),ya(i)||va.warn("ReadReportHandler._setGroupMessageRead \u8bf7\u52ff\u4fee\u6539 Conversation.lastMessage.lastSequence\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5df2\u8bfb\u4e0a\u62a5\u7ed3\u679c\u4e0d\u51c6\u786e");var r=new Dd("setGroupMessageRead");return r.setText("".concat(n,"-").concat(i)),this.tim.messageController.request({name:"conversation",action:"setGroupMessageRead",param:{groupID:n.replace("GROUP",""),messageReadSeq:i}}).then(function(){return r.setNetworkType(t.tim.netMonitor.getNetworkType()).setEnd(),va.log("ReadReportHandler._setGroupMessageRead ok."),t.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:i}),t.updateUnreadCount(n),new dd}).catch(function(e){return t.tim.netMonitor.probe().then(function(t){var n=Wn(t,2);r.setError(e,n[0],n[1]).setEnd()}),va.log("ReadReportHandler._setGroupMessageRead failed. ".concat(xa(e))),vd(e)})}},{key:"updateUnreadCount",value:function(e){var t=this.tim,n=t.messageController,i=t.conversationController.getLocalConversation(e),r=n.getLocalMessageList(e);i&&(i.unreadCount=r.filter(function(e){return!e.isRead&&!e.getOnlineOnlyFlag()}).length,va.log("ReadReportHandler.updateUnreadCount conversationID=".concat(i.conversationID," unreadCount=").concat(i.unreadCount)))}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.lastMessageSeq,n=e.lastMessageTime,i=this.tim.messageController.getLocalMessageList(e.conversationID);if(0!==i.length)for(var r,o=i.length-1;o>=0;o--)if(r=i[o],!(n&&r.time>n||t&&r.sequence>t)){if("in"===r.flow&&r.isRead)break;r.setIsRead(!0)}}},{key:"updateIsRead",value:function(e){var t=this.tim,n=t.messageController,i=t.conversationController.getLocalConversation(e),r=n.getLocalMessageList(e);if(i&&0!==r.length&&!Ka(i.type)){for(var o=[],s=0;s<r.length;s++)"in"!==r[s].flow?"out"!==r[s].flow||r[s].isRead||r[s].setIsRead(!0):o.push(r[s]);var a=0;if(i.type===wn.CONV_C2C){var u=o.slice(-i.unreadCount).filter(function(e){return e.isRevoked}).length;a=o.length-i.unreadCount-u}else a=o.length-i.unreadCount;for(var c=0;c<a&&!o[c].isRead;c++)o[c].setIsRead(!0)}}}]),e}(),Dg=rt.findIndex,Ag=!0,xg=ct("findIndex");"findIndex"in[]&&Array(1).findIndex(function(){Ag=!1}),De({target:"Array",proto:!0,forced:Ag||!xg},{findIndex:function(e){return Dg(this,e,arguments.length>1?arguments[1]:void 0)}}),ai("findIndex");var Rg=function(){function e(t){var n=t.tim,i=t.messageController;Dn(this,e),this.tim=n,this.messageController=i,this.completedMap=new Map,this._initListener()}return xn(e,[{key:"getMessageList",value:function(e){var t=this,n=e.conversationID,i=e.nextReqMessageID,r=e.count;if(this.tim.groupController.checkJoinedAVChatRoomByID(n.replace("GROUP","")))return va.log("GetMessageHandler.getMessageList not available in avchatroom. conversationID=".concat(n)),gd({messageList:[],nextReqMessageID:"",isCompleted:!0});(Ca(r)||r>15)&&(r=15);var o=this._computeLeftCount({conversationID:n,nextReqMessageID:i});return va.log("GetMessageHandler.getMessageList. conversationID=".concat(n," leftCount=").concat(o," count=").concat(r," nextReqMessageID=").concat(i)),this._needGetHistory({conversationID:n,leftCount:o,count:r})?this.messageController.getHistoryMessages({conversationID:n,count:20}).then(function(){return o=t._computeLeftCount({conversationID:n,nextReqMessageID:i}),new dd(t._computeResult({conversationID:n,nextReqMessageID:i,count:r,leftCount:o}))}):(va.log("GetMessageHandler.getMessageList. get messagelist from memory"),this.messageController.modifyMessageList(n),gd(this._computeResult({conversationID:n,nextReqMessageID:i,count:r,leftCount:o})))}},{key:"setCompleted",value:function(e){va.log("GetMessageHandler.setCompleted. conversationID=".concat(e)),this.completedMap.set(e,!0)}},{key:"deleteCompletedItem",value:function(e){va.log("GetMessageHandler.deleteCompletedItem. conversationID=".concat(e)),this.completedMap.delete(e)}},{key:"_initListener",value:function(){var e=this;this.tim.innerEmitter.on($f,function(){e.setCompleted(wn.CONV_SYSTEM)}),this.tim.innerEmitter.on(Yf,function(t){var n=t.data;e.setCompleted("".concat(wn.CONV_GROUP).concat(n))})}},{key:"_getMessageListSize",value:function(e){return this.messageController.getLocalMessageList(e).length}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,n=e.leftCount,i=e.count,r=this.tim.conversationController.getLocalConversation(t);return!(r&&r.type===wn.CONV_SYSTEM||r&&r.subType===wn.GRP_AVCHATROOM||!(n<i)||this.completedMap.has(t))}},{key:"_computeResult",value:function(e){var t=e.conversationID,n=e.count,i=e.leftCount,r=this._computeMessageList({conversationID:t,nextReqMessageID:e.nextReqMessageID,count:n}),o=this._computeIsCompleted({conversationID:t,leftCount:i,count:n}),s=this._computeNextReqMessageID({messageList:r,isCompleted:o,conversationID:t});return va.log("GetMessageHandler._computeResult. conversationID=".concat(t," leftCount=").concat(i," count=").concat(n," nextReqMessageID=").concat(s," nums=").concat(r.length," isCompleted=").concat(o)),{messageList:r,nextReqMessageID:s,isCompleted:o}}},{key:"_computeNextReqMessageID",value:function(e){var t=e.messageList;if(!e.isCompleted)return 0===t.length?"":t[0].ID;var n=this.messageController.getLocalMessageList(e.conversationID);return 0===n.length?"":n[0].ID}},{key:"_computeMessageList",value:function(e){var t=e.nextReqMessageID,n=e.count,i=this.messageController.getLocalMessageList(e.conversationID),r=this._computeIndexEnd({nextReqMessageID:t,messageList:i}),o=this._computeIndexStart({indexEnd:r,count:n});return i.slice(o,r)}},{key:"_computeIndexEnd",value:function(e){var t=e.messageList,n=void 0===t?[]:t,i=e.nextReqMessageID;return i?n.findIndex(function(e){return e.ID===i}):n.length}},{key:"_computeIndexStart",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:"_computeLeftCount",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this.messageController.getLocalMessageList(t).findIndex(function(e){return e.ID===n}):this._getMessageListSize(t)}},{key:"_computeIsCompleted",value:function(e){return!!(e.leftCount<=e.count&&this.completedMap.has(e.conversationID))}},{key:"reset",value:function(){va.log("GetMessageHandler.reset"),this.completedMap.clear()}}]),e}(),Pg=function e(t){Dn(this,e),this.value=t,this.next=null},zg=function(){function e(t){Dn(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,va.log("SinglyLinkedList init MAX_LENGTH=".concat(this.MAX_LENGTH))}return xn(e,[{key:"pushIn",value:function(e){var t=new Pg(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:"has",value:function(e){return this.map.has(e)}},{key:"tail",value:function(){return this.pTail}},{key:"size",value:function(){return this.map.size}},{key:"data",value:function(){return Array.from(this.map.keys())}},{key:"reset",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),Lg=function(){function e(t){Dn(this,e),this.tim=t}return xn(e,[{key:"upload",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();switch(e.type){case wn.MSG_IMAGE:return this._uploadImage(e);case wn.MSG_FILE:return this._uploadFile(e);case wn.MSG_AUDIO:return this._uploadAudio(e);case wn.MSG_VIDEO:return this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var t=this.tim,n=t.uploadController,i=t.messageController,r=e.getElements()[0],o=i.getMessageOptionByID(e.messageID);return n.uploadImage({file:o.payload.file,to:o.to,onProgress:function(e){if(r.updatePercent(e),Ea(o.onProgress))try{o.onProgress(e)}catch(t){return vd(new _h({code:bh.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:"".concat(Sh)}))}}}).then(function(t){var n=t.fileType,i=t.fileSize,o=t.width,s=t.height,a=Va(t.location);r.updateImageFormat(n);var u=Xa({originUrl:a,originWidth:o,originHeight:s,min:198}),c=Xa({originUrl:a,originWidth:o,originHeight:s,min:720});return r.updateImageInfoArray([{size:i,url:a,width:o,height:s},zn({},c),zn({},u)]),e})}},{key:"_uploadFile",value:function(e){var t=this.tim,n=t.uploadController,i=t.messageController,r=e.getElements()[0],o=i.getMessageOptionByID(e.messageID);return n.uploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(r.updatePercent(e),Ea(o.onProgress))try{o.onProgress(e)}catch(t){return vd(new _h({code:bh.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:"".concat(Sh)}))}}}).then(function(t){var n=Va(t.location);return r.updateFileUrl(n),e})}},{key:"_uploadAudio",value:function(e){var t=this.tim,n=t.uploadController,i=t.messageController,r=e.getElements()[0],o=i.getMessageOptionByID(e.messageID);return n.uploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(r.updatePercent(e),Ea(o.onProgress))try{o.onProgress(e)}catch(t){return vd(new _h({code:bh.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:"".concat(Sh)}))}}}).then(function(t){var n=Va(t.location);return r.updateAudioUrl(n),e})}},{key:"_uploadVideo",value:function(e){var t=this.tim,n=t.uploadController,i=t.messageController,r=e.getElements()[0],o=i.getMessageOptionByID(e.messageID);return n.uploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(r.updatePercent(e),Ea(o.onProgress))try{o.onProgress(e)}catch(t){return vd(new _h({code:bh.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:"".concat(Sh)}))}}}).then(function(t){var n=Va(t.location);return r.updateVideoUrl(n),e})}}]),e}(),Ng="MergerMessageHandler",Fg=function(){function e(t){Dn(this,e),this.messageController=t}return xn(e,[{key:"uploadMergerMessage",value:function(e,t){var n=this;va.debug("".concat(Ng,".uploadMergerMessage message:"),e,"messageBytes=".concat(t));var i=e.payload.messageList,r=i.length,o=new Dd("uploadMergerMessage");return this.messageController.request({name:"mergerMessage",action:"create",param:{messageList:i}}).then(function(e){va.debug("".concat(Ng,".uploadMergerMessage ok. response:"),e.data);var i=e.data,s=i.downloadKey,a={pbDownloadKey:i.pbDownloadKey,downloadKey:s,messageNumber:r};return o.setNetworkType(n.messageController.getNetworkType()).setText("".concat(r,"-").concat(t,"-").concat(s)).setEnd(),a}).catch(function(e){throw va.warn("".concat(Ng,".uploadMergerMessage failed. error:"),e),n.messageController.probeNetwork().then(function(t){var n=Wn(t,2);o.setError(e,n[0],n[1]).setEnd()}),e})}},{key:"downloadMergerMessage",value:function(e){var t=this;va.debug("".concat(Ng,".downloadMergerMessage message:"),e);var n=e.payload.downloadKey,i=new Dd("downloadMergerMessage");return i.setText(n),this.messageController.request({name:"mergerMessage",action:"query",param:{downloadKey:n}}).then(function(n){if(va.debug("".concat(Ng,".downloadMergerMessage ok. response:"),n.data),Ea(e.clearElement)){var r=jn(e.payload,["downloadKey","pbDownloadKey","messageList"]);e.clearElement(),e.setElement({type:e.type,content:zn({messageList:n.data.messageList},r)})}else{var o=[];n.data.messageList.forEach(function(e){if(!eu(e)){var t=new jh(e);o.push(t)}}),e.payload.messageList=o,e.payload.downloadKey="",e.payload.pbDownloadKey=""}return i.setNetworkType(t.messageController.getNetworkType()).setEnd(),e}).catch(function(e){throw va.warn("".concat(Ng,".downloadMergerMessage failed. key:").concat(n," error:"),e),t.messageController.probeNetwork().then(function(t){var n=Wn(t,2);i.setError(e,n[0],n[1]).setEnd()}),e})}},{key:"createMergerMessagePack",value:function(e,t,n){return e.conversationType===wn.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:"_createC2CMergerMessagePack",value:function(e,t,n){var i=null;t&&(t.offlinePushInfo&&(i=t.offlinePushInfo),!0===t.onlineUserOnly&&(i?i.disablePush=!0:i={disablePush:!0}));var r="";_a(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var o=n.pbDownloadKey,s=n.downloadKey,a=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,h=u.compatibleText;return{name:"c2cMessage",action:"create",tjgID:this.messageController.generateTjgID(e),param:{toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:o,downloadKey:s,title:c,abstractList:l,compatibleText:h,messageNumber:a}}],cloudCustomData:r,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.messageController.isOnlineMessage(e,t)?0:void 0,offlinePushInfo:i?{pushFlag:!0===i.disablePush?1:0,title:i.title||"",desc:i.description||"",ext:i.extension||"",apnsInfo:{badgeMode:!0===i.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:i.androidOPPOChannelID||""}}:void 0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,n){var i=null;t&&t.offlinePushInfo&&(i=t.offlinePushInfo);var r="";_a(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var o=n.pbDownloadKey,s=n.downloadKey,a=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,h=u.compatibleText;return{name:"groupMessage",action:"create",tjgID:this.messageController.generateTjgID(e),param:{groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:o,downloadKey:s,title:c,abstractList:l,compatibleText:h,messageNumber:a}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:r,onlineOnlyFlag:this.messageController.isOnlineMessage(e,t)?1:0,offlinePushInfo:i?{pushFlag:!0===i.disablePush?1:0,title:i.title||"",desc:i.description||"",ext:i.extension||"",apnsInfo:{badgeMode:!0===i.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:i.androidOPPOChannelID||""}}:void 0}}}}]),e}(),Ug=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e))._initializeMembers(),i._initializeListener(),i._initializeHandlers(),i.messageOptionMap=new Map,i}return xn(n,[{key:"_initializeMembers",value:function(){this.messagesList=new Mg({tim:this.tim}),this.currentMessageKey={},this.singlyLinkedList=new zg(100),this._peerReadTimeMap=new Map}},{key:"_initializeHandlers",value:function(){this.readReportHandler=new Og(this.tim,this),this.getMessageHandler=new Rg({messageController:this,tim:this.tim}),this.uploadFileHandler=new Lg(this.tim),this.mergerMessageHandler=new Fg(this)}},{key:"reset",value:function(){this.messagesList.reset(),this.currentMessageKey={},this.getMessageHandler.reset(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this.messageOptionMap.clear()}},{key:"_initializeListener",value:function(){var e=this.tim.innerEmitter;e.on(Sf,this._onReceiveC2CMessage,this),e.on(lf,this._onSyncMessagesProcessing,this),e.on(hf,this._onSyncMessagesFinished,this),e.on(Ef,this._onReceiveGroupMessage,this),e.on(If,this._onReceiveGroupTips,this),e.on(Mf,this._onReceiveSystemNotice,this),e.on(Af,this._onReceiveGroupMessageRevokedNotice,this),e.on(xf,this._onReceiveGroupMessageReadNotice,this),e.on(Rf,this._onReceiveC2CMessageRevokedNotice,this),e.on(Pf,this._onC2CMessageReadReceipt,this),e.on(zf,this._onC2CMessageReadNotice,this),e.on(Wf,this._clearConversationMessages,this)}},{key:"_guardForAVChatRoom",value:function(e){if(e.conversationType===wn.CONV_GROUP){var t=this.tim.groupController,n=e.to;return t.hasLocalGroup(n)?Promise.resolve():t.getGroupProfile({groupID:n}).then(function(t){var i=t.data.group.type;if(va.log("MessageController._guardForAVChatRoom. groupID=".concat(n," type=").concat(i)),i===wn.GRP_AVCHATROOM){var r="userId=".concat(e.from," \u672a\u52a0\u5165\u7fa4 groupID=").concat(n,"\u3002\u53d1\u6d88\u606f\u524d\u5148\u4f7f\u7528 joinGroup \u63a5\u53e3\u7533\u8bf7\u52a0\u7fa4\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#joinGroup");return va.warn("MessageController._guardForAVChatRoom sendMessage not allowed. ".concat(r)),vd(new _h({code:bh.MESSAGE_SEND_FAIL,message:r,data:{message:e}}))}return Promise.resolve()})}return Promise.resolve()}},{key:"sendMessageInstance",value:function(e,t){var n,i=this,r=null;switch(e.conversationType){case wn.CONV_C2C:r=this._handleOnSendC2CMessageSuccess.bind(this);break;case wn.CONV_GROUP:r=this._handleOnSendGroupMessageSuccess.bind(this);break;default:return vd(new _h({code:bh.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:'Message.conversationType \u53ea\u80fd\u4e3a "C2C" \u6216 "GROUP"'}))}return this.singlyLinkedList.pushIn(e.random),this.uploadFileHandler.upload(e).then(function(){return i._guardForAVChatRoom(e).then(function(){var r=null;if(!e.isSendable())return vd({code:bh.MESSAGE_FILE_URL_IS_EMPTY,message:"\u7f3a\u5c11\u5fc5\u8981\u7684\u53c2\u6570\u6587\u4ef6 URL"});i._addSendMessageTotalCount(e),n=Date.now();var o=function(e){var t="utf-8";Gs&&document&&(t=document.charset.toLowerCase());var n,i,r=0;if(i=e.length,"utf-8"===t||"utf8"===t)for(var o=0;o<i;o++)(n=e.codePointAt(o))<=127?r+=1:n<=2047?r+=2:n<=65535?r+=3:(r+=4,o++);else if("utf-16"===t||"utf16"===t)for(var s=0;s<i;s++)(n=e.codePointAt(s))<=65535?r+=2:(r+=4,s++);else r=e.replace(/[^\x00-\xff]/g,"aa").length;return r}(JSON.stringify(e));return e.type===wn.MSG_MERGER&&o>7e3?i.mergerMessageHandler.uploadMergerMessage(e,o).then(function(n){return r=i.mergerMessageHandler.createMergerMessagePack(e,t,n),i.request(r)}):(e.conversationType===wn.CONV_C2C?r=i._createC2CMessagePack(e,t):e.conversationType===wn.CONV_GROUP&&(r=i._createGroupMessagePack(e,t)),i.request(r))}).then(function(o){i._addSendMessageSuccessCount(e,n);var s=!1;if(e.conversationType===wn.CONV_GROUP)e.sequence=o.data.sequence,e.time=o.data.time,e.generateMessageID(i.tim.context.identifier);else if(e.conversationType===wn.CONV_C2C){var a=i.messagesList.getLatestMessageSentByMe(e.conversationID);a&&(a.nick===e.nick&&a.avatar===e.avatar||(s=!0))}return i.messagesList.pushIn(e),r(e,o.data),s&&i.messagesList.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),i.messageOptionMap.delete(e.messageID),i.isOnlineMessage(e,t)?e.setOnlineOnlyFlag(!0):i.emitInnerEvent(ff,{eventDataList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:e}]}),e.getRelayFlag()||"TIMImageElem"!==e.type||Ja(e.payload.imageInfoArray),new dd({message:e})}).catch(function(t){e.status="fail";var n=new Dd("sendMessage");return n.setMessageType(e.type).setText("".concat(i.generateTjgID(e),"-").concat(e.type,"-").concat(e.from,"-").concat(e.to)),i.probeNetwork().then(function(e){var i=Wn(e,2);n.setError(t,i[0],i[1]).setEnd()}),va.error("MessageController.sendMessageInstance error:",t),vd(new _h({code:t&&t.code?t.code:bh.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:kh,data:{message:e}}))})})}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===wn.CONV_C2C)return kd;if(e.conversationType===wn.CONV_GROUP){var t=this.tim.groupController.getLocalGroupProfile(e.to);if(!t)return;var n=t.type;if(Ba(n))return wd;if(Ha(n))return Cd;if(qa(n))return Sd;if(Wa(n))return Ed}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this.tim.sumStatController;t.addTotalCount(bd);var n=this._getSendMessageSpecifiedKey(e);n&&t.addTotalCount(n)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=this.tim.sumStatController,i=Math.abs(Date.now()-t);n.addSuccessCount(bd),n.addCost(bd,i);var r=this._getSendMessageSpecifiedKey(e);r&&(n.addSuccessCount(r),n.addCost(r,i))}},{key:"resendMessage",value:function(e){return e.isResend=!0,e.status="unSend",this.sendMessageInstance(e)}},{key:"_isFileLikeMessage",value:function(e){return[wn.MSG_IMAGE,wn.MSG_FILE,wn.MSG_AUDIO,wn.MSG_VIDEO].indexOf(e.type)>=0}},{key:"_resendBinaryTypeMessage",value:function(){}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.tim.groupController.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==wn.CONV_GROUP}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_createC2CMessagePack",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var i="";return _a(e.cloudCustomData)&&e.cloudCustomData.length>0&&(i=e.cloudCustomData),{name:"c2cMessage",action:"create",tjgID:this.generateTjgID(e),param:{toAccount:e.to,msgBody:e.getElements(),cloudCustomData:i,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.isOnlineMessage(e,t)?0:void 0,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0}}}},{key:"_handleOnSendC2CMessageSuccess",value:function(e,t){e.status="success",e.time=t.time}},{key:"_createGroupMessagePack",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var i="";_a(e.cloudCustomData)&&e.cloudCustomData.length>0&&(i=e.cloudCustomData);var r=e.getGroupAtInfoList();return{name:"groupMessage",action:"create",tjgID:this.generateTjgID(e),param:{groupID:e.to,msgBody:e.getElements(),cloudCustomData:i,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==wn.MSG_TEXT||eu(r)?void 0:r,onlineOnlyFlag:this.isOnlineMessage(e,t)?1:0,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0}}}},{key:"_handleOnSendGroupMessageSuccess",value:function(e,t){e.sequence=t.sequence,e.time=t.time,e.status="success"}},{key:"_onReceiveC2CMessage",value:function(e){va.debug("MessageController._onReceiveC2CMessage nums=".concat(e.data.length));var t=Date.now(),n=this._newC2CMessageStoredAndSummary({notifiesList:e.data,type:wn.CONV_C2C,C2CRemainingUnreadList:e.C2CRemainingUnreadList}),i=n.eventDataList,r=n.result;if(i.length>0&&this.emitInnerEvent(gf,{eventDataList:i,result:r}),r.length>0){var o=this.tim.sumStatController;o.addTotalCount(Id),o.addSuccessCount(Id),o.addCost(Id,Date.now()-t),this.emitOuterEvent(kn.MESSAGE_RECEIVED,r)}}},{key:"_onReceiveGroupMessage",value:function(e){va.debug("MessageController._onReceiveGroupMessage nums=".concat(e.data.length));var t=Date.now(),n=this.newGroupMessageStoredAndSummary(e.data),i=n.eventDataList,r=n.result;if(i.length>0&&this.emitInnerEvent(vf,{eventDataList:i,result:r,isGroupTip:!1}),r.length>0){var o=this.tim.sumStatController;o.addTotalCount(Id),o.addSuccessCount(Id),o.addCost(Id,Date.now()-t),this.emitOuterEvent(kn.MESSAGE_RECEIVED,r)}}},{key:"_onReceiveGroupTips",value:function(e){var t=Date.now(),n=e.data;va.debug("MessageController._onReceiveGroupTips nums=".concat(n.length));var i=this.newGroupTipsStoredAndSummary(n),r=i.eventDataList,o=i.result;if(r.length>0&&this.emitInnerEvent(vf,{eventDataList:r,result:o,isGroupTip:!0}),o.length>0){var s=this.tim.sumStatController;s.addTotalCount(Id),s.addSuccessCount(Id),s.addCost(Id,Date.now()-t),this.emitOuterEvent(kn.MESSAGE_RECEIVED,o)}}},{key:"_onReceiveSystemNotice",value:function(e){var t=Date.now(),n=e.data,i=n.groupSystemNotices,r=n.type;va.debug("MessageController._onReceiveSystemNotice nums=".concat(i.length));var o=this.newSystemNoticeStoredAndSummary({notifiesList:i,type:r}),s=o.eventDataList,a=o.result;if(s.length>0&&this.emitInnerEvent(mf,{eventDataList:s,result:a,type:r}),a.length>0&&"poll"===r){var u=this.tim.sumStatController;u.addTotalCount(Id),u.addSuccessCount(Id),u.addCost(Id,Date.now()-t),this.emitOuterEvent(kn.MESSAGE_RECEIVED,a)}}},{key:"_onReceiveGroupMessageRevokedNotice",value:function(e){var t=this;va.debug("MessageController._onReceiveGroupMessageRevokedNotice nums=".concat(e.data.length));var n=[],i=null;e.data.forEach(function(e){var r=e.elements.revokedInfos;Ca(r)||r.forEach(function(e){(i=t.messagesList.revoke("GROUP".concat(e.groupID),e.sequence))&&n.push(i)})}),0!==n.length&&(this.emitInnerEvent(yf,n),this.emitOuterEvent(kn.MESSAGE_REVOKED,n))}},{key:"_onReceiveGroupMessageReadNotice",value:function(e){var t=this;e.data.forEach(function(e){var n=e.elements.groupMessageReadNotice;Ca(n)||n.forEach(function(e){var n=e.groupID,i=e.lastMessageSeq;va.debug("MessageController._onReceiveGroupMessageReadNotice groupID=".concat(n," lastMessageSeq=").concat(i));var r="".concat(wn.CONV_GROUP).concat(n);t.readReportHandler.updateIsReadAfterReadReport({conversationID:r,lastMessageSeq:i}),t.readReportHandler.updateUnreadCount(r)})})}},{key:"_onReceiveC2CMessageRevokedNotice",value:function(e){var t=this;va.debug("MessageController._onReceiveC2CMessageRevokedNotice nums=".concat(e.data.length));var n=[],i=null;e.data.forEach(function(e){if(e.c2cMessageRevokedNotify){var r=e.c2cMessageRevokedNotify.revokedInfos;Ca(r)||r.forEach(function(e){var r=t.tim.context.identifier===e.from?"".concat(wn.CONV_C2C).concat(e.to):"".concat(wn.CONV_C2C).concat(e.from);(i=t.messagesList.revoke(r,e.sequence,e.random))&&n.push(i)})}}),0!==n.length&&(this.emitInnerEvent(yf,n),this.emitOuterEvent(kn.MESSAGE_REVOKED,n))}},{key:"_onC2CMessageReadReceipt",value:function(e){var t=this;e.data.forEach(function(e){if(!eu(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach(function(e){var i=e.peerReadTime;va.debug("MessageController._onC2CMessageReadReceipt to=".concat(n," peerReadTime=").concat(i));var r="".concat(wn.CONV_C2C).concat(n);t.recordPeerReadTime(r,i),t._updateMessageIsPeerReadProperty(r,i)})}})}},{key:"_onC2CMessageReadNotice",value:function(e){var t=this;e.data.forEach(function(e){eu(e.c2cMessageReadNotice)||e.c2cMessageReadNotice.uinPairReadArray.forEach(function(e){var n=e.from,i=e.peerReadTime;va.debug("MessageController._onC2CMessageReadNotice from=".concat(n," lastReadTime=").concat(i));var r="".concat(wn.CONV_C2C).concat(n);t.readReportHandler.updateIsReadAfterReadReport({conversationID:r,lastMessageTime:i}),t.readReportHandler.updateUnreadCount(r)})})}},{key:"_updateMessageIsPeerReadProperty",value:function(e,t){if(e.startsWith(wn.CONV_C2C)&&t>0){var n=this.messagesList.updateMessageIsPeerReadProperty(e,t);n.length>0&&this.emitOuterEvent(kn.MESSAGE_READ_BY_PEER,n)}}},{key:"getPeerReadTime",value:function(e){var t=this;if(!eu(e)){var n=new Dd("getPeerReadTime");return va.log("MessageController.getPeerReadTime userIDList:".concat(e)),this.request({name:"c2cPeerReadTime",action:"get",param:{userIDList:e}}).then(function(i){var r=i.data.peerReadTimeList;va.log("MessageController.getPeerReadTime ok. peerReadTimeList:".concat(r));for(var o="",s=0;s<e.length;s++)o+="".concat(e[s],"-").concat(r[s]," "),r[s]>0&&t.recordPeerReadTime("C2C".concat(e[s]),r[s]);n.setNetworkType(t.getNetworkType()).setText(o).setEnd()}).catch(function(e){t.probeNetwork().then(function(t){var i=Wn(t,2);n.setError(e,i[0],i[1]).setEnd()}),va.warn("MessageController.getPeerReadTime failed. error:",e)})}}},{key:"recordPeerReadTime",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:"_clearConversationMessages",value:function(e){var t=e.data;this.messagesList.removeByConversationID(t),this.getMessageHandler.deleteCompletedItem(t)}},{key:"_pushIntoNoticeResult",value:function(e,t){return!(!this.messagesList.pushIn(t)||this.singlyLinkedList.has(t.random)||(e.push(t),0))}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.tim.userController.getNickAndAvatarByUserID(e)}},{key:"_newC2CMessageStoredAndSummary",value:function(e){for(var t=e.notifiesList,n=e.type,i=e.C2CRemainingUnreadList,r=e.isFromSync,o=null,s=[],a=[],u={},c=this.tim.bigDataHallwayController,l=0,h=t.length;l<h;l++){var f=t[l];if(f.currentUser=this.tim.context.identifier,f.conversationType=n,f.isSystemMessage=!!f.isSystemMessage,o=new qh(f),f.elements=c.parseElements(f.elements,f.from),o.setElement(f.elements),o.setNickAndAvatar({nick:f.nick,avatar:f.avatar}),!r){var d=o.conversationID,p=!1;if(o.from!==this.tim.context.identifier){var g=this.messagesList.getLatestMessageSentByPeer(d);g&&(g.nick===o.nick&&g.avatar===o.avatar||(p=!0))}else{var v=this.messagesList.getLatestMessageSentByMe(d);v&&(v.nick===o.nick&&v.avatar===o.avatar||this.messagesList.modifyMessageSentByMe({conversationID:d,latestNick:o.nick,latestAvatar:o.avatar}))}if(!this._pushIntoNoticeResult(a,o))continue;p&&(this.messagesList.modifyMessageSentByPeer(d),this.tim.conversationController.updateUserProfileSpecifiedKey({conversationID:d,nick:o.nick,avatar:o.avatar}))}0!==f.msgLifeTime?void 0===u[o.conversationID]?u[o.conversationID]=s.push({conversationID:o.conversationID,unreadCount:"out"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})-1:(s[u[o.conversationID]].type=o.conversationType,s[u[o.conversationID]].subType=o.conversationSubType,s[u[o.conversationID]].lastMessage=o,"in"===o.flow&&s[u[o.conversationID]].unreadCount++):o.setOnlineOnlyFlag(!0)}if(wa(i))for(var m=function(e,t){var n=s.find(function(t){return t.conversationID==="C2C".concat(i[e].from)});n?n.unreadCount+=i[e].count:s.push({conversationID:"C2C".concat(i[e].from),unreadCount:i[e].count,type:wn.CONV_C2C,lastMsgTime:i[e].lastMsgTime})},y=0,_=i.length;y<_;y++)m(y);return{eventDataList:s,result:a}}},{key:"newGroupMessageStoredAndSummary",value:function(e){var t=null,n=[],i={},r=[],o=wn.CONV_GROUP,s=this.tim.bigDataHallwayController,a=e.length;a>1&&e.sort(function(e,t){return e.sequence-t.sequence});for(var u=0;u<a;u++){var c=e[u];c.currentUser=this.tim.context.identifier,c.conversationType=o,c.isSystemMessage=!!c.isSystemMessage,t=new qh(c),c.elements=s.parseElements(c.elements,c.from),t.setElement(c.elements),this._isMessageFromAVChatroom(t)||this._pushIntoNoticeResult(r,t)&&(1!==c.onlineOnlyFlag?void 0===i[t.conversationID]?i[t.conversationID]=n.push({conversationID:t.conversationID,unreadCount:"out"===t.flow?0:1,type:t.conversationType,subType:t.conversationSubType,lastMessage:t})-1:(n[i[t.conversationID]].type=t.conversationType,n[i[t.conversationID]].subType=t.conversationSubType,n[i[t.conversationID]].lastMessage=t,"in"===t.flow&&n[i[t.conversationID]].unreadCount++):t.setOnlineOnlyFlag(!0))}return{eventDataList:n,result:r}}},{key:"_isMessageFromAVChatroom",value:function(e){var t=e.conversationID.slice(5);return this.tim.groupController.checkJoinedAVChatRoomByID(t)}},{key:"newGroupTipsStoredAndSummary",value:function(e){for(var t=null,n=[],i=[],r={},o=0,s=e.length;o<s;o++){var a=e[o];a.currentUser=this.tim.context.identifier,a.conversationType=wn.CONV_GROUP,(t=new qh(a)).setElement({type:wn.MSG_GRP_TIP,content:zn(zn({},a.elements),{},{groupProfile:a.groupProfile})}),t.isSystemMessage=!1,this._isMessageFromAVChatroom(t)||this._pushIntoNoticeResult(i,t)&&(void 0===r[t.conversationID]?r[t.conversationID]=n.push({conversationID:t.conversationID,unreadCount:"out"===t.flow?0:1,type:t.conversationType,subType:t.conversationSubType,lastMessage:t})-1:(n[r[t.conversationID]].type=t.conversationType,n[r[t.conversationID]].subType=t.conversationSubType,n[r[t.conversationID]].lastMessage=t,"in"===t.flow&&n[r[t.conversationID]].unreadCount++))}return{eventDataList:n,result:i}}},{key:"newSystemNoticeStoredAndSummary",value:function(e){var t=e.notifiesList,n=e.type,i=null,r=t.length,o=0,s=[],a={conversationID:wn.CONV_SYSTEM,unreadCount:0,type:wn.CONV_SYSTEM,subType:null,lastMessage:null};for(o=0;o<r;o++){var u=t[o];if(15!==u.elements.operationType){u.currentUser=this.tim.context.identifier,u.conversationType=wn.CONV_SYSTEM,u.conversationID=wn.CONV_SYSTEM,(i=new qh(u)).setElement({type:wn.MSG_GRP_SYS_NOTICE,content:zn(zn({},u.elements),{},{groupProfile:u.groupProfile})}),i.isSystemMessage=!0;var c="";i.payload.groupProfile&&(c=i.payload.groupProfile.groupID),this.tim.groupController.checkJoinedAVChatRoomByID(c)&&255===i.payload.operationType||((1===i.sequence&&1===i.random||2===i.sequence&&2===i.random)&&(i.sequence=za(),i.random=za(),i.generateMessageID(u.currentUser),va.log("MessageController.newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID=".concat(i.ID))),this._pushIntoNoticeResult(s,i)&&("poll"===n?a.unreadCount++:"sync"===n&&i.setIsRead(!0),a.subType=i.conversationSubType))}}return a.lastMessage=s[s.length-1],{eventDataList:s.length>0?[a]:[],result:s}}},{key:"_onSyncMessagesProcessing",value:function(e){var t=this._newC2CMessageStoredAndSummary({notifiesList:e.data,type:wn.CONV_C2C,isFromSync:!0,C2CRemainingUnreadList:e.C2CRemainingUnreadList});this.emitInnerEvent(df,{eventDataList:t.eventDataList,result:t.result})}},{key:"_onSyncMessagesFinished",value:function(e){this.triggerReady();var t=this._newC2CMessageStoredAndSummary({notifiesList:e.data.messageList,type:wn.CONV_C2C,isFromSync:!0,C2CRemainingUnreadList:e.data.C2CRemainingUnreadList});this.emitInnerEvent(pf,{eventDataList:t.eventDataList,result:t.result})}},{key:"getHistoryMessages",value:function(e){if(e.conversationID===wn.CONV_SYSTEM)return gd();!e.count&&(e.count=15),e.count>20&&(e.count=20);var t=this.messagesList.getLocalOldestMessageByConversationID(e.conversationID);t||((t={}).time=0,t.sequence=0,0===e.conversationID.indexOf(wn.CONV_C2C)?(t.to=e.conversationID.replace(wn.CONV_C2C,""),t.conversationType=wn.CONV_C2C):0===e.conversationID.indexOf(wn.CONV_GROUP)&&(t.to=e.conversationID.replace(wn.CONV_GROUP,""),t.conversationType=wn.CONV_GROUP));var n="";switch(t.conversationType){case wn.CONV_C2C:return n=e.conversationID.replace(wn.CONV_C2C,""),this.getC2CRoamMessages({conversationID:e.conversationID,peerAccount:n,count:e.count,lastMessageTime:void 0===this.currentMessageKey[e.conversationID]?0:t.time});case wn.CONV_GROUP:return this.getGroupRoamMessages({conversationID:e.conversationID,groupID:t.to,count:e.count,sequence:t.sequence-1});default:return gd()}}},{key:"getC2CRoamMessages",value:function(e){var t=this,n=e.conversationID,i=void 0!==this.currentMessageKey[n]?this.currentMessageKey[n]:"";va.log("MessageController.getC2CRoamMessages toAccount=".concat(e.peerAccount," count=").concat(e.count||15," lastMessageTime=").concat(e.lastMessageTime||0," messageKey=").concat(i));var r=new Dd("getC2CRoamingMessages");return this.request({name:"c2cMessage",action:"query",param:{peerAccount:e.peerAccount,count:e.count||15,lastMessageTime:e.lastMessageTime||0,messageKey:i}}).then(function(o){var s=o.data,a=s.complete,u=s.messageList;Ca(u)?va.log("MessageController.getC2CRoamMessages ok. complete=".concat(a," but messageList is undefined!")):va.log("MessageController.getC2CRoamMessages ok. complete=".concat(a," nums=").concat(u.length)),r.setNetworkType(t.getNetworkType()).setText("".concat(e.peerAccount,"-").concat(e.count||15,"-").concat(e.lastMessageTime||0,"-").concat(i,"-").concat(a,"-").concat(u?u.length:"undefined")).setEnd(),1===a&&t.getMessageHandler.setCompleted(n);var c=t._roamMessageStore(u,wn.CONV_C2C,n);t.modifyMessageList(n),t.readReportHandler.updateIsRead(n),t.currentMessageKey[n]=o.data.messageKey;var l=t._peerReadTimeMap.get(n);if(va.log("MessageController.getC2CRoamMessages update isPeerRead property. conversationID=".concat(n," peerReadTime=").concat(l)),l)t._updateMessageIsPeerReadProperty(n,l);else{var h=n.replace(wn.CONV_C2C,"");t.getPeerReadTime([h]).then(function(){t._updateMessageIsPeerReadProperty(n,t._peerReadTimeMap.get(n))})}return c}).catch(function(n){return t.probeNetwork().then(function(t){var o=Wn(t,2);r.setError(n,o[0],o[1]).setText("".concat(e.peerAccount,"-").concat(e.count||15,"-").concat(e.lastMessageTime||0,"-").concat(i)).setEnd()}),va.warn("MessageController.getC2CRoamMessages failed. ".concat(n)),vd(n)})}},{key:"modifyMessageList",value:function(e){if(e.startsWith(wn.CONV_C2C)){var t=Date.now();this.messagesList.modifyMessageSentByPeer(e);var n=this._getNickAndAvatarByUserID(this.tim.context.identifier);this.messagesList.modifyMessageSentByMe({conversationID:e,latestNick:n.nick,latestAvatar:n.avatar}),va.log("MessageController.modifyMessageList conversationID=".concat(e," cost ").concat(Date.now()-t," ms"))}}},{key:"_computeLastSequence",value:function(e){return e.sequence>=0?Promise.resolve(e.sequence):this.tim.groupController.getGroupLastSequence(e.groupID)}},{key:"getGroupRoamMessages",value:function(e){var t=this,n=new Dd("getGroupRoamingMessages"),i=0;return this._computeLastSequence(e).then(function(n){return i=n,va.log("MessageController.getGroupRoamMessages groupID=".concat(e.groupID," lastSequence=").concat(i)),t.request({name:"groupMessage",action:"query",param:{groupID:e.groupID,count:21,sequence:i}})}).then(function(r){var o=r.data,s=o.messageList,a=o.complete;Ca(s)?va.log("MessageController.getGroupRoamMessages ok. complete=".concat(a," but messageList is undefined!")):va.log("MessageController.getGroupRoamMessages ok. complete=".concat(a," nums=").concat(s.length)),n.setNetworkType(t.getNetworkType()).setText("".concat(e.groupID,"-").concat(i,"-").concat(a,"-").concat(s?s.length:"undefined")).setEnd();var u="GROUP".concat(e.groupID);if(2===a||eu(s))return t.getMessageHandler.setCompleted(u),[];var c=t._roamMessageStore(s,wn.CONV_GROUP,u);return t.readReportHandler.updateIsRead(u),t._patchConversationLastMessage(u),c}).catch(function(r){return t.probeNetwork().then(function(t){var o=Wn(t,2);n.setError(r,o[0],o[1]).setText("".concat(e.groupID,"-").concat(i)).setEnd()}),va.warn("MessageController.getGroupRoamMessages failed. ".concat(r)),vd(r)})}},{key:"_patchConversationLastMessage",value:function(e){var t=this.tim.conversationController.getLocalConversation(e);if(t){var n=t.lastMessage,i=n.payload;if(eu(n.messageForShow)||eu(i)){var r=this.messagesList.getLocalMessageList(e);if(0===r.length)return;var o=r[r.length-1];va.log("MessageController._patchConversationLastMessage conversationID:".concat(e," payload:"),o.payload),t.updateLastMessage(o)}}}},{key:"_roamMessageStore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=null,r=[],o=0,s=e.length,a=null,u=t===wn.CONV_GROUP,c=this.tim.bigDataHallwayController,l=function(){o=u?e.length-1:0,s=u?0:e.length},h=function(){u?--o:++o},f=function(){return u?o>=s:o<s};for(l();f();h())if(u&&1===e[o].sequence&&this.getMessageHandler.setCompleted(n),1!==e[o].isPlaceMessage)if((i=new qh(e[o])).to=e[o].to,i.isSystemMessage=!!e[o].isSystemMessage,i.conversationType=t,e[o].event===Zl.JSON.TYPE.GROUP.TIP?a={type:wn.MSG_GRP_TIP,content:zn(zn({},e[o].elements),{},{groupProfile:e[o].groupProfile})}:(e[o].elements=c.parseElements(e[o].elements,e[o].from),a=e[o].elements),u||i.setNickAndAvatar({nick:e[o].nick,avatar:e[o].avatar}),eu(a)){var d=new Dd(xd);d.setText("from:".concat(i.from," to:").concat(i.to," sequence:").concat(i.sequence," event:").concat(e[o].event)),d.setNetworkType(this.getNetworkType()).setEnd()}else i.setElement(a),i.reInitialize(this.tim.context.identifier),r.push(i);return this.messagesList.unshift(r),l=h=f=null,r}},{key:"getLocalMessageList",value:function(e){return this.messagesList.getLocalMessageList(e)}},{key:"getLocalMessage",value:function(e,t){return this.messagesList.getLocalMessage(e,t)}},{key:"hasLocalMessage",value:function(e,t){return this.messagesList.hasLocalMessage(e,t)}},{key:"deleteLocalMessage",value:function(e){e instanceof qh&&this.messagesList.remove(e)}},{key:"revokeMessage",value:function(e){var t,n=this;e.conversationType===wn.CONV_C2C?t={name:"c2cMessageWillBeRevoked",action:"create",param:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}}:e.conversationType===wn.CONV_GROUP&&(t={name:"groupMessageWillBeRevoked",action:"create",param:{to:e.to,msgSeqList:[{msgSeq:e.sequence}]}});var i=new Dd("revokeMessage");return i.setMessageType(e.type).setText("".concat(this.generateTjgID(e),"-").concat(e.type,"-").concat(e.from,"-").concat(e.to)),this.request(t).then(function(t){var r=t.data.recallRetList;if(!eu(r)&&0!==r[0].retCode){var o=new _h({code:r[0].retCode,message:yh[r[0].retCode]||"\u6d88\u606f\u64a4\u56de\u5931\u8d25",data:{message:e}});return i.setCode(o.code).setMessage(o.message).setEnd(),vd(o)}return va.info("MessageController.revokeMessage ok. ID=".concat(e.ID)),e.isRevoked=!0,i.setEnd(),n.emitInnerEvent(yf,[e]),new dd({message:e})}).catch(function(t){n.probeNetwork().then(function(e){var n=Wn(e,2);i.setError(t,n[0],n[1]).setEnd()});var r=new _h({code:t&&t.code?t.code:bh.MESSAGE_REVOKE_FAIL,message:t&&t.message?t.message:"\u6d88\u606f\u64a4\u56de\u5931\u8d25",data:{message:e}});return va.warn("MessageController.revokeMessage failed. ID=".concat(e.ID," code=").concat(r.code," message=").concat(r.message)),vd(r)})}},{key:"setMessageRead",value:function(e){var t=this;return new Promise(function(n,i){t.ready(function(){t.readReportHandler.setMessageRead(e).then(n).catch(i)})})}},{key:"getMessageList",value:function(e){return this.getMessageHandler.getMessageList(e)}},{key:"createTextMessage",value:function(e){var t=this.tim.context.identifier;e.currentUser=t;var n=new qh(e),i=new qu({text:"string"==typeof e.payload?e.payload:e.payload.text}),r=this._getNickAndAvatarByUserID(t);return n.setElement(i),n.setNickAndAvatar(r),n}},{key:"createCustomMessage",value:function(e){var t=this.tim.context.identifier;e.currentUser=t;var n=new qh(e),i=new Ph({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),r=this._getNickAndAvatarByUserID(t);return n.setElement(i),n.setNickAndAvatar(r),n}},{key:"createImageMessage",value:function(e){var t=this.tim.context.identifier;e.currentUser=t;var n=new qh(e);if(Us){var i=e.payload.file;if(ma(i))return void va.warn("\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u8c03\u7528 createImageMessage \u63a5\u53e3\u65f6\uff0cpayload.file \u4e0d\u652f\u6301\u4f20\u5165 File \u5bf9\u8c61");var r=i.tempFilePaths[0],o={url:r,name:r.slice(r.lastIndexOf("/")+1),size:i.tempFiles&&i.tempFiles[0].size||1,type:r.slice(r.lastIndexOf(".")+1).toLowerCase()};e.payload.file=o}else Gs&&ma(e.payload.file)&&(e.payload.file={files:[e.payload.file]});var s=new th({imageFormat:Zl.IMAGE_FORMAT.UNKNOWN,uuid:this._generateUUID(),file:e.payload.file}),a=this._getNickAndAvatarByUserID(t);return n.setElement(s),n.setNickAndAvatar(a),this.messageOptionMap.set(n.messageID,e),n}},{key:"createFileMessage",value:function(e){if(!Us){Gs&&ma(e.payload.file)&&(e.payload.file={files:[e.payload.file]});var t=this.tim.context.identifier;e.currentUser=t;var n=new qh(e),i=new Rh({uuid:this._generateUUID(),file:e.payload.file}),r=this._getNickAndAvatarByUserID(t);return n.setElement(i),n.setNickAndAvatar(r),this.messageOptionMap.set(n.messageID,e),n}va.warn("\u5c0f\u7a0b\u5e8f\u76ee\u524d\u4e0d\u652f\u6301\u9009\u62e9\u6587\u4ef6\uff0c createFileMessage \u63a5\u53e3\u4e0d\u53ef\u7528\uff01")}},{key:"createAudioMessage",value:function(e){if(Us){var t=e.payload.file;if(Us){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()};e.payload.file=n}var i=this.tim.context.identifier;e.currentUser=i;var r=new qh(e),o=new ih({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()}),s=this._getNickAndAvatarByUserID(i);return r.setElement(o),r.setNickAndAvatar(s),this.messageOptionMap.set(r.messageID,e),r}va.warn("createAudioMessage \u76ee\u524d\u53ea\u652f\u6301\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u53d1\u8bed\u97f3\u6d88\u606f")}},{key:"createVideoMessage",value:function(e){var t=this.tim.context.identifier;e.currentUser=t,e.payload.file.thumbUrl="https://web.sdk.qcloud.com/im/assets/images/transparent.png",e.payload.file.thumbSize=1668;var n={};if(Us){if(ma(e.payload.file))return void va.warn("\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u8c03\u7528 createVideoMessage \u63a5\u53e3\u65f6\uff0cpayload.file \u4e0d\u652f\u6301\u4f20\u5165 File \u5bf9\u8c61");var i=e.payload.file;n.url=i.tempFilePath,n.name=i.tempFilePath.slice(i.tempFilePath.lastIndexOf("/")+1),n.size=i.size,n.second=i.duration,n.type=i.tempFilePath.slice(i.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else if(Gs){ma(e.payload.file)&&(e.payload.file.files=[e.payload.file]);var r=e.payload.file;n.url=window.URL.createObjectURL(r.files[0]),n.name=r.files[0].name,n.size=r.files[0].size,n.second=r.files[0].duration||0,n.type=r.files[0].type.split("/")[1]}e.payload.file.videoFile=n;var o=new qh(e),s=new zh({videoFormat:n.type,videoSecond:Number(n.second.toFixed(0)),videoSize:n.size,remoteVideoUrl:"",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),a=this._getNickAndAvatarByUserID(t);return o.setElement(s),o.setNickAndAvatar(a),this.messageOptionMap.set(o.messageID,e),o}},{key:"createFaceMessage",value:function(e){var t=this.tim.context.identifier;e.currentUser=t;var n=new qh(e),i=new nh(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(i),n.setNickAndAvatar(r),n}},{key:"createMergerMessage",value:function(e){var t=this.tim.context.identifier;e.currentUser=t;var n=this._getNickAndAvatarByUserID(t),i=new qh(e),r=new Bh(e.payload);return i.setElement(r),i.setNickAndAvatar(n),i.setRelayFlag(!0),i}},{key:"createForwardMessage",value:function(e){var t=e.to,n=e.conversationType,i=e.priority,r=e.payload,o=this.tim.context.identifier,s=this._getNickAndAvatarByUserID(o);if(r.type===wn.MSG_GRP_TIP)return vd(new _h({code:bh.MESSAGE_FORWARD_TYPE_INVALID,message:"\u9009\u62e9\u7684\u6d88\u606f\u7c7b\u578b\uff08\u5982\u7fa4\u63d0\u793a\u6d88\u606f\uff09\u4e0d\u53ef\u4ee5\u8f6c\u53d1"}));var a={to:t,conversationType:n,conversationID:"".concat(n).concat(t),priority:i,isPlaceMessage:0,status:"unSend",currentUser:o,cloudCustomData:e.cloudCustomData||r.cloudCustomData||""},u=new qh(a);return u.setElement(r.getElements()[0]),u.setNickAndAvatar(s),u.setRelayFlag(!0),u}},{key:"downloadMergerMessage",value:function(e){return this.mergerMessageHandler.downloadMergerMessage(e)}},{key:"_generateUUID",value:function(){var e=this.tim.context;return"".concat(e.SDKAppID,"-").concat(e.identifier,"-").concat(function(){for(var e="",t=32;t>0;--t)e+=La[Math.floor(Math.random()*Na)];return e}())}},{key:"generateTjgID",value:function(e){return this.tim.context.tinyID+"-"+e.random}},{key:"getMessageOptionByID",value:function(e){return this.messageOptionMap.get(e)}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this.messagesList.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:"pushToMessageList",value:function(e){this.messagesList.pushIn(e)}}]),n}(ld),Gg=function(){function e(t){Dn(this,e),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return xn(e,[{key:"_initMember",value:function(e){this.updateMember(e)}},{key:"updateMember",value:function(e){e.memberCustomField&&ja(this.memberCustomField,e.memberCustomField),Aa(this,e,["memberCustomField"],[null,void 0,"",0,NaN])}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){Ca(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){Ca(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&ja(this.memberCustomField,e)}}]),e}(),Vg=function(){function e(t){Dn(this,e),this.tim=t.tim,this.groupController=t.groupController,this._initListeners()}return xn(e,[{key:"_initListeners",value:function(){this.tim.innerEmitter.on(vf,this._onReceivedGroupTips,this)}},{key:"_onReceivedGroupTips",value:function(e){var t=this,n=e.data;n.isGroupTip&&n.result.forEach(function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:va.warn("GroupTipsHandler._onReceivedGroupTips Unhandled groupTips. operationType=",e.payload.operationType)}})}},{key:"_onNewMemberComeIn",value:function(e){var t=e.payload,n=t.memberNum,i=this.groupController.getLocalGroupProfile(t.groupProfile.groupID);i&&ya(n)&&(i.memberNum=n)}},{key:"_onMemberQuit",value:function(e){var t=e.payload,n=t.memberNum,i=t.groupProfile.groupID,r=this.groupController.getLocalGroupProfile(i);r&&ya(n)&&(r.memberNum=n),this.groupController.deleteLocalGroupMembers(i,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,n=t.memberNum,i=t.groupProfile.groupID,r=this.groupController.getLocalGroupProfile(i);r&&ya(n)&&(r.memberNum=n),this.groupController.deleteLocalGroupMembers(i,e.payload.userIDList)}},{key:"_onMemberSetAdmin",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e.payload.userIDList.forEach(function(e){var i=t.groupController.getLocalGroupMemberInfo(n,e);i&&i.updateRole(wn.GRP_MBR_ROLE_ADMIN)})}},{key:"_onMemberCancelledAdmin",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e.payload.userIDList.forEach(function(e){var i=t.groupController.getLocalGroupMemberInfo(n,e);i&&i.updateRole(wn.GRP_MBR_ROLE_MEMBER)})}},{key:"_onGroupProfileModified",value:function(e){var t=this,n=e.payload.newGroupProfile,i=this.groupController.getLocalGroupProfile(e.payload.groupProfile.groupID);Object.keys(n).forEach(function(e){switch(e){case"ownerID":t._ownerChaged(i,n);break;default:i[e]=n[e]}}),this.groupController.emitGroupListUpdate(!0,!0)}},{key:"_ownerChaged",value:function(e,t){var n=e.groupID,i=this.groupController.getLocalGroupProfile(n),r=this.tim.context.identifier;if(r===t.ownerID){i.updateGroup({selfInfo:{role:wn.GRP_MBR_ROLE_OWNER}});var o=this.groupController.getLocalGroupMemberInfo(n,r),s=this.groupController.getLocalGroupProfile(n).ownerID,a=this.groupController.getLocalGroupMemberInfo(n,s);o&&o.updateRole(wn.GRP_MBR_ROLE_OWNER),a&&a.updateRole(wn.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e.payload.memberList.forEach(function(e){var i=t.groupController.getLocalGroupMemberInfo(n,e.userID);i&&e.muteTime&&i.updateMuteUntil(e.muteTime)})}}]),e}(),jg=function(){function e(t){Dn(this,e),this.groupController=t.groupController,this.tim=t.tim,this.pendencyMap=new Map,this._initListener()}return xn(e,[{key:"_initListener",value:function(){this.tim.innerEmitter.on(mf,this._onReceivedGroupSystemNotice,this),this.tim.innerEmitter.on(hf,this._clearGroupSystemNotice,this)}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this.getPendencyList().then(function(t){t.forEach(function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)});var n=e.tim.messageController.getLocalMessageList(wn.CONV_SYSTEM),i=[];n.forEach(function(t){var n=t.payload,r=n.groupProfile;if(1===n.operationType){var o="".concat(n.operatorID,"_").concat(r.groupID,"_").concat(r.to),s=e.pendencyMap.get(o);s&&ya(s.handled)&&0!==s.handled&&i.push(t)}}),e.groupController.deleteGroupSystemNotice({messageList:i})})}},{key:"getPendencyList",value:function(e){var t=this;return this.groupController.request({name:"group",action:"getGroupPendency",param:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this.tim.context.identifier}}).then(function(e){var n=e.data,i=n.pendencyList;return 0!==n.nextStartTime?t.getPendencyList({startTime:n.nextStartTime}).then(function(e){return[].concat(Kn(i),Kn(e))}):i})}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,n=e.data;"sync"!==n.type&&n.result.forEach(function(e){switch(e.payload.operationType){case 1:t._onApplyGroupRequest(e);break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:t._onApplyGroupRequestRefused(e);break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 11:case 12:case 15:break;case 255:t.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:255})}})}},{key:"_onApplyGroupRequest",value:function(e){this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:1})}},{key:"_onApplyGroupRequestAgreed",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(n)||this.groupController.getGroupProfile({groupID:n}).then(function(e){var n=e.data.group;n&&(t.groupController.updateGroupMap([n]),t.groupController.emitGroupListUpdate())}),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:2})}},{key:"_onApplyGroupRequestRefused",value:function(e){this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:3})}},{key:"_onMemberKicked",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)&&this.groupController.deleteLocalGroupAndConversation(t),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:4})}},{key:"_onGroupDismissed",value:function(e){var t=e.payload.groupProfile.groupID,n=this.groupController.hasLocalGroup(t),i=this.groupController.AVChatRoomHandler;n&&this.groupController.deleteLocalGroupAndConversation(t),i.checkJoinedAVChatRoomByID(t)&&i.reset(t),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:5})}},{key:"_onInviteGroup",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(n)||this.groupController.getGroupProfile({groupID:n}).then(function(e){var n=e.data.group;n&&(t.groupController.updateGroupMap([n]),t.groupController.emitGroupListUpdate())}),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:7})}},{key:"_onQuitGroup",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)&&this.groupController.deleteLocalGroupAndConversation(t),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:8})}},{key:"_onSetManager",value:function(e){var t=e.payload.groupProfile,n=this.groupController.getLocalGroupMemberInfo(t.groupID,t.to);n&&n.updateRole(wn.GRP_MBR_ROLE_ADMIN),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:9})}},{key:"_onDeleteManager",value:function(e){var t=e.payload.groupProfile,n=this.groupController.getLocalGroupMemberInfo(t.groupID,t.to);n&&n.updateRole(wn.GRP_MBR_ROLE_MEMBER),this.groupController.emitOuterEvent(kn.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:10})}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),e}(),Bg=Ye("splice"),Hg=ct("splice",{ACCESSORS:!0,0:0,1:2}),qg=Math.max,Wg=Math.min;De({target:"Array",proto:!0,forced:!Bg||!Hg},{splice:function(e,t){var n,i,r,o,s,a,u=xe(this),c=ue(u.length),l=he(e,c),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=c-l):(n=h-2,i=Wg(qg(se(t),0),c-l)),c+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(r=Ve(u,i),o=0;o<i;o++)(s=l+o)in u&&Re(r,o,u[s]);if(r.length=i,n<i){for(o=l;o<c-i;o++)a=o+n,(s=o+i)in u?u[a]=u[s]:delete u[a];for(o=c;o>c-i+n;o--)delete u[o-1]}else if(n>i)for(o=c-i;o>l;o--)a=o+n-1,(s=o+i-1)in u?u[a]=u[s]:delete u[a];for(o=0;o<n;o++)u[o+l]=arguments[o+2];return u.length=c-i+n,r}});var Kg={3:!0,4:!0,5:!0,6:!0},Yg=function(){function e(t){var n=t.tim,i=t.groupController;Dn(this,e),this.tim=n,this.groupController=i,this.sequencesLinkedList=new zg(100),this.receivedMessageCount=0,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this._joinedGroupMap=new Map,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60}return xn(e,[{key:"hasJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0?Kn(this._joinedGroupMap.keys()):null}},{key:"start",value:function(e){var t=this._pollingRequestInfoMap.get(e),n={key:t.key,startSeq:t.startSeq};if(this._pollingInstanceMap.has(e)){var i=this._pollingInstanceMap.get(e);i.isRunning()||i.start()}else{var r=this.groupController.createTransportCapsule({name:"AVChatRoom",action:"startLongPoll",param:n}),o=this.tim.connectionController.createRunLoop({pack:r,before:this._updateRequestData.bind(this,e),success:this._handleSuccess.bind(this,e),fail:this._handleFailure.bind(this),isAVChatRoomLoop:!0});o.start(),this._pollingInstanceMap.set(e,o),va.log("AVChatRoomHandler.start message channel started. groupID=".concat(e))}}},{key:"stop",value:function(e){var t=this._pollingInstanceMap.get(e);t&&t.isRunning()&&(t.abort(),t.stop(),va.log("AVChatRoomHandler.stop message channel stopped. groupID=".concat(e)))}},{key:"startRunLoop",value:function(e){var t=this;return this._precheck().then(function(){var n=e.group,i=n.groupID;return t._pollingRequestInfoMap.set(i,{key:e.longPollingKey,startSeq:0}),t._joinedGroupMap.set(i,n),t._addAVChatRoomID(i),t.groupController.updateGroupMap([n]),t.groupController.emitGroupListUpdate(!0,!1),t.start(i),t.groupController.isLoggedIn()?gd({status:"JoinedSuccess",group:n}):gd({status:"JoinedSuccess"})})}},{key:"joinWithoutAuth",value:function(e){var t=this;return this.groupController.request({name:"group",action:"applyJoinAVChatRoom",param:e}).then(function(n){var i=n.data.longPollingKey;if(Ca(i))return vd(new _h({code:bh.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN,message:"\u975e AVChatRoom \u7c7b\u578b\u7684\u7fa4\u7ec4\u4e0d\u5141\u8bb8\u533f\u540d\u52a0\u7fa4\uff0c\u8bf7\u5148\u767b\u5f55\u540e\u518d\u52a0\u7fa4"}));va.log("AVChatRoomHandler.joinWithoutAuth ok. groupID:".concat(e.groupID)),t.groupController.emitInnerEvent("joinAVChatRoomSuccessNoAuth"),t.groupController.emitInnerEvent(Yf,e.groupID);var r=new vg({groupID:e.groupID});return t.startRunLoop({group:r,longPollingKey:i}),new dd({status:"JoinedSuccess"})}).catch(function(t){return va.error("AVChatRoomHandler.joinWithoutAuth error:".concat(xa(t),". groupID:").concat(e.groupID)),vd(t)})}},{key:"_precheck",value:function(){if(this.tim.context.unlimitedAVChatRoom)return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=Wn(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this.groupController.isLoggedIn()){if(n.selfInfo.role!==wn.GRP_MBR_ROLE_OWNER&&n.ownerID!==this.tim.loginInfo.identifier)return this.groupController.quitGroup(t);this.groupController.deleteLocalGroupAndConversation(t)}else this.groupController.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"_updateRequestData",value:function(e,t){var n=this._pollingRequestInfoMap.get(e),i=n.key;t.StartSeq=n.startSeq,t.Key=i,this.tim.sumStatController.addTotalCount(_d)}},{key:"_handleSuccess",value:function(e,t){this.tim.sumStatController.addSuccessCount(_d),this.tim.sumStatController.addCost(_d,t.data.timecost);var n=t.data,i=n.errorCode,r=n.errorInfo,o=n.key,s=n.nextSeq,a=n.rspMsgList;if(0!==i){var u=this._pollingRequestInfoMap.get(e),c=new Dd(Pd),l=u?"".concat(u.key,"-").concat(u.startSeq):"requestInfo is undefined";c.setMessage("".concat(e,"-").concat(l,"-").concat(r||JSON.stringify(t.data))).setCode(i).setNetworkType(this.groupController.getNetworkType()).setEnd(!0)}else _a(o)&&ya(s)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:s}),wa(a)&&a.length>0&&(a.forEach(function(e){e.to=e.groupID}),this._dispatchNotice(a));this.groupController.emitInnerEvent(Nf)}},{key:"_handleFailure",value:function(e){if(e.error)if("ECONNABORTED"===e.error.code||e.error.code===bh.NETWORK_TIMEOUT)if(e.error.config){var t=e.error.config.data;va.log("AVChatRoomHandler._handleFailure request timed out. url=".concat(e.error.config.url," data=").concat(t))}else va.log("AVChatRoomHandler._handleFailure request timed out");else va.log("AVChatRoomHandler._handleFailure request failed due to network error");this.groupController.emitInnerEvent(Lf)}},{key:"_dispatchNotice",value:function(e){if(wa(e)&&0!==e.length){var t=Date.now(),n=null,i=[],r=[],o=e.length;o>1&&e.sort(function(e,t){return e.sequence-t.sequence});for(var s=0;s<o;s++)if(Kg[e[s].event]){if(this.receivedMessageCount+=1,n=this.packMessage(e[s],e[s].event),this.tim.context.unlimitedAVChatRoom||!this.sequencesLinkedList.has(n.sequence)){var a=n.conversationID;if(this.receivedMessageCount%40==0&&this.tim.messageLossController.detectMessageLoss(a,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var u=this.sequencesLinkedList.tail().value,c=n.sequence-u;c>1&&c<=20?this.tim.messageLossController.onMessageMaybeLost(a,u+1,c-1):c<-1&&c>=-20&&this.tim.messageLossController.onMessageMaybeLost(a,n.sequence+1,Math.abs(c)-1)}this.sequencesLinkedList.pushIn(n.sequence),this._isMessageSentByCurrentInstance(n)||(n.conversationType===wn.CONV_SYSTEM&&r.push(n),i.push(n))}}else va.warn("AVChatRoomHandler._dispatchMessage \u672a\u5904\u7406\u7684 event \u7c7b\u578b: ".concat(e[s].event));if(r.length>0&&this.groupController.emitInnerEvent(mf,{result:r,eventDataList:[],type:"poll"}),0!==i.length){var l=this.packConversationOption(i);l.length>0&&this.groupController.emitInnerEvent(vf,{eventDataList:l,type:"poll"}),va.debug("AVChatRoomHandler._dispatchNotice nums=".concat(i.length));var h=this.tim.sumStatController;h.addTotalCount(Td),h.addSuccessCount(Td),h.addCost(Td,Date.now()-t),this._checkMessageStacked(i),this.groupController.emitOuterEvent(kn.MESSAGE_RECEIVED,i)}}}},{key:"_checkMessageStacked",value:function(e){var t=e.length;t>=100&&(va.warn("AVChatRoomHandler.checkMessageStacked \u76f4\u64ad\u7fa4\u6d88\u606f\u5806\u79ef\u6570:".concat(e.length,'\uff01\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u6e32\u67d3\u65f6\u9047\u5230 "Dom limit exceeded" \u7684\u9519\u8bef\uff0c\u5efa\u8bae\u63a5\u5165\u4fa7\u6b64\u65f6\u53ea\u6e32\u67d3\u6700\u8fd1\u768410\u6761\u6d88\u606f')),this._reportMessageStackedCount<5&&(new Dd("messageStacked").setNetworkType(this.groupController.getNetworkType()).setText("nums=".concat(t," groupID=").concat(Kn(this._joinedGroupMap.keys()))).setEnd(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this.tim.messageController.isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this.tim.context.identifier,e.conversationType=5===t?wn.CONV_SYSTEM:wn.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new qh(e),i=this.packElements(e,t);return n.setElement(i),n}},{key:"packElements",value:function(e,t){return 4===t||6===t?(this._updateMemberCountByGroupTips(e),{type:wn.MSG_GRP_TIP,content:zn(zn({},e.elements),{},{groupProfile:e.groupProfile})}):5===t?{type:wn.MSG_GRP_SYS_NOTICE,content:zn(zn({},e.elements),{},{groupProfile:e.groupProfile})}:this.tim.bigDataHallwayController.parseElements(e.elements,e.from)}},{key:"packConversationOption",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var i=e[n],r=i.conversationID;if(t.has(r)){var o=t.get(r);o.lastMessage=i,"in"===i.flow&&o.unreadCount++}else t.set(r,{conversationID:i.conversationID,unreadCount:"out"===i.flow?0:1,type:i.conversationType,subType:i.conversationSubType,lastMessage:i})}return Kn(t.values())}},{key:"_addAVChatRoomID",value:function(e){var t=this.tim.loginInfo.avchatroomIDList||[];t.includes(e)||(this.tim.context.unlimitedAVChatRoom?t.push(e):t.splice(0,1,e),this.tim.loginInfo.avchatroomIDList=t)}},{key:"_deleteAVChatRoomID",value:function(e){var t=this.tim.loginInfo.avchatroomIDList||[],n=t.indexOf(e);-1!==n&&(t.splice(n,1),this.tim.loginInfo.avchatroomIDList=t)}},{key:"joinAVChatRoomSilently",value:function(){var e=this,t=this.tim.loginInfo.avchatroomIDList||[];if(0!==t.length){var n=new Dd("joinAVChatRoomSilently");t.forEach(function(t){e.groupController.joinGroup({groupID:t}).then(function(i){va.warn("AVChatRoomHandler.joinAVChatRoomSilently silently join group ok:".concat(t)),n.setCode(i.code).setText("groupID=".concat(t)).setNetworkType(e.groupController.getNetworkType()).setEnd(!0)}).catch(function(i){va.warn("AVChatRoomHandler.joinAVChatRoomSilently silently join group failed:".concat(xa(i))),n.setMessage("".concat(t,"-").concat(JSON.stringify(i))).setCode(i.code).setNetworkType(e.groupController.getNetworkType()).setEnd(!0)})})}}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return eu(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then(function(e){return new dd({memberCount:e.memberCount})}).catch(function(e){return vd(e)})):gd({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this;return this.groupController.request({name:"group",action:"getOnlineMemberNum",param:{groupID:e}}).then(function(n){var i=t._onlineMemberCountMap.get(e)||{},r=n.data,o=r.onlineMemberNum,s=void 0===o?0:o,a=r.expireTime,u=void 0===a?t.DEFAULT_EXPIRE_TIME:a;va.log("AVChatRoomHandler._getGroupOnlineMemberCount ok. groupID=".concat(e," memberCount=").concat(s," expireTime=").concat(u));var c=Date.now();return eu(i)&&(i.lastReqTime=c),t._onlineMemberCountMap.set(e,Object.assign(i,{lastSyncTime:c,latestUpdateTime:c,memberCount:s,expireTime:u})),{memberCount:s}}).catch(function(n){return va.warn("AVChatRoomHandler._getGroupOnlineMemberCount failed. error:".concat(xa(n))),new Dd("getGroupOnlineMemberCount").setCode(n.code).setMessage("".concat(e,"-").concat(JSON.stringify(n))).setNetworkType(t.groupController.getNetworkType()).setEnd(),Promise.reject(n)})}},{key:"_updateMemberCountByGroupTips",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,i=void 0===n?void 0:n;if(void 0!==i){var r=i.onlineMemberNum,o=void 0===r?0:r,s=i.expireTime,a=void 0===s?this.DEFAULT_EXPIRE_TIME:s,u=this._onlineMemberCountMap.get(t)||{},c=Date.now();eu(u)?Object.assign(u,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:c,memberCount:o,expireTime:a}):(u.latestUpdateTime=c,u.memberCount=o),va.debug("AVChatRoomHandler._updateMemberCountByGroupTips info:",u),this._onlineMemberCountMap.set(t,u)}}},{key:"reset",value:function(e){if(0!==this._pollingInstanceMap.size){if(e)va.log("AVChatRoomHandler.reset groupID=".concat(e)),this.stop(e),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e);else{va.log("AVChatRoomHandler.reset all");var t,n=Qn(this._pollingInstanceMap.keys());try{for(n.s();!(t=n.n()).done;)this.stop(t.value)}catch(r){n.e(r)}finally{n.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear()}this.sequencesLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._deleteAVChatRoomID(e)}}}]),e}(),$g="GroupController",Zg=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).groupMap=new Map,i.groupMemberListMap=new Map,i.groupNoticeHandler=new jg({tim:e,groupController:Bn(i)}),i.groupTipsHandler=new Vg({tim:e,groupController:Bn(i)}),i.AVChatRoomHandler=new Yg({tim:e,groupController:Bn(i)}),i._initListeners(),i}return xn(n,[{key:"createGroup",value:function(e){var t=this,n="".concat($g,".createGroup");if(!["Public","Private","ChatRoom","AVChatRoom"].includes(e.type)){var i=new _h({code:bh.ILLEGAL_GROUP_TYPE,message:"\u975e\u6cd5\u7684\u7fa4\u7c7b\u578b\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570"});return vd(i)}Wa(e.type)&&!Ca(e.memberList)&&e.memberList.length>0&&(va.warn("".concat(n,"\u521b\u5efaAVChatRoom\u65f6\u4e0d\u80fd\u6dfb\u52a0\u7fa4\u6210\u5458\uff0c\u81ea\u52a8\u5ffd\u7565\u8be5\u5b57\u6bb5")),e.memberList=void 0),Ha(e.type)||Ca(e.joinOption)||(va.warn("".concat(n," \u521b\u5efaWork/Meeting/AVChatRoom\u7fa4\u65f6\u4e0d\u80fd\u8bbe\u7f6e\u5b57\u6bb5\uff1ajoinOption\uff0c\u81ea\u52a8\u5ffd\u7565\u8be5\u5b57\u6bb5")),e.joinOption=void 0);var r=new Dd("createGroup");va.log("".concat(n));var o=[];return this.request({name:"group",action:"create",param:e}).then(function(i){var s=i.data,a=s.groupID,u=s.overLimitUserIDList,c=void 0===u?[]:u;if(o=c,r.setNetworkType(t.getNetworkType()).setText("groupType=".concat(e.type," groupID=").concat(a," overLimitUserIDList=").concat(c)).setEnd(),va.log("".concat(n," ok. groupID:").concat(a," overLimitUserIDList:"),c),e.type===wn.GRP_AVCHATROOM)return t.getGroupProfile({groupID:a});eu(e.memberList)||eu(c)||(e.memberList=e.memberList.filter(function(e){return-1===c.indexOf(e.userID)})),t.updateGroupMap([zn(zn({},e),{},{groupID:a})]);var l=t.tim.createCustomMessage({to:a,conversationType:wn.CONV_GROUP,payload:{data:"group_create",extension:"".concat(t.tim.context.identifier,"\u521b\u5efa\u7fa4\u7ec4")}});return t.tim.sendMessage(l),t.emitGroupListUpdate(),t.getGroupProfile({groupID:a})}).then(function(e){var t=e.data.group;return t.selfInfo.messageRemindType=wn.MSG_REMIND_ACPT_AND_NOTE,t.selfInfo.role=wn.GRP_MBR_ROLE_OWNER,new dd({group:t,overLimitUserIDList:o})}).catch(function(i){return r.setText("groupType=".concat(e.type)),t.probeNetwork().then(function(e){var t=Wn(e,2);r.setError(i,t[0],t[1]).setEnd()}),va.error("".concat(n," error:"),i),vd(i)})}},{key:"joinGroup",value:function(e){var t=this,n=e.groupID,i=e.type,r="".concat($g,".joinGroup");if(i===wn.GRP_WORK){var o=new _h({code:bh.CANNOT_JOIN_WORK,message:"\u4e0d\u80fd\u52a0\u5165 Work \u7c7b\u578b\u7684\u7fa4\u7ec4"});return vd(o)}if(this.hasLocalGroup(n)){if(!this.isLoggedIn())return gd({status:wn.JOIN_STATUS_ALREADY_IN_GROUP});var s=new Dd(Rd);return this.getGroupProfile({groupID:n}).then(function(e){return s.setNetworkType(t.getNetworkType()).setText("groupID=".concat(n," joinedStatus=").concat(wn.JOIN_STATUS_ALREADY_IN_GROUP)).setEnd(),gd({status:wn.JOIN_STATUS_ALREADY_IN_GROUP})}).catch(function(i){return s.setNetworkType(t.getNetworkType()).setText("groupID=".concat(n," unjoined")).setEnd(),va.warn("".concat(r," ").concat(n," was unjoined, now join!")),t.groupMap.delete(n),t.applyJoinGroup(e)})}return va.log("".concat(r," groupID:"),n),this.isLoggedIn()?this.applyJoinGroup(e):this.AVChatRoomHandler.joinWithoutAuth(e)}},{key:"quitGroup",value:function(e){var t=this,n="".concat($g,".quitGroup");va.log("".concat(n," groupID:"),e);var i=this.AVChatRoomHandler.checkJoinedAVChatRoomByID(e);if(!i&&!this.hasLocalGroup(e)){var r=new _h({code:bh.MEMBER_NOT_IN_GROUP,message:"\u7528\u6237\u4e0d\u5728\u8be5\u7fa4\u7ec4\u5185"});return vd(r)}if(i&&!this.isLoggedIn())return va.log("".concat(n," anonymously ok. groupID:"),e),this.deleteLocalGroupAndConversation(e),this.AVChatRoomHandler.reset(e),gd({groupID:e});var o=new Dd("quitGroup");return this.request({name:"group",action:"quitGroup",param:{groupID:e}}).then(function(){return o.setNetworkType(t.getNetworkType()).setText("groupID=".concat(e)).setEnd(),va.log("".concat(n," ok. groupID:"),e),i&&t.AVChatRoomHandler.reset(e),t.deleteLocalGroupAndConversation(e),new dd({groupID:e})}).catch(function(i){return o.setText("groupID=".concat(e)),t.probeNetwork().then(function(e){var t=Wn(e,2);o.setError(i,t[0],t[1]).setEnd()}),va.error("".concat(n," error. error:").concat(xa(i)," groupID:").concat(e)),vd(i)})}},{key:"changeGroupOwner",value:function(e){var t=this,n="".concat($g,".changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===wn.GRP_AVCHATROOM)return vd(new _h({code:bh.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:"AVChatRoom \u7c7b\u578b\u7684\u7fa4\u7ec4\u4e0d\u80fd\u8f6c\u8ba9\u7fa4\u4e3b"}));if(e.newOwnerID===this.tim.loginInfo.identifier)return vd(new _h({code:bh.CANNOT_CHANGE_OWNER_TO_SELF,message:"\u4e0d\u80fd\u628a\u7fa4\u4e3b\u8f6c\u8ba9\u7ed9\u81ea\u5df1"}));var i=new Dd("changeGroupOwner");return va.log("".concat(n," groupID:"),e.groupID),this.request({name:"group",action:"changeGroupOwner",param:e}).then(function(){i.setNetworkType(t.getNetworkType()).setText("groupID=".concat(e.groupID)).setEnd(),va.log("".concat(n," ok. groupID:"),e.groupID);var r=e.groupID,o=e.newOwnerID;t.groupMap.get(r).ownerID=o;var s=t.groupMemberListMap.get(r);if(s instanceof Map){var a=s.get(t.tim.loginInfo.identifier);Ca(a)||(a.updateRole("Member"),t.groupMap.get(r).selfInfo.role="Member");var u=s.get(o);Ca(u)||u.updateRole("Owner")}return t.emitGroupListUpdate(!0,!1),new dd({group:t.groupMap.get(r)})}).catch(function(r){return i.setText("groupID=".concat(e.groupID)),t.probeNetwork().then(function(e){var t=Wn(e,2);i.setError(r,t[0],t[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e.groupID)),vd(r)})}},{key:"dismissGroup",value:function(e){var t=this,n="".concat($g,".dismissGroup");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===wn.GRP_WORK)return vd(new _h({code:bh.CANNOT_DISMISS_WORK,message:"\u4e0d\u80fd\u89e3\u6563 Work \u7c7b\u578b\u7684\u7fa4\u7ec4"}));var i=new Dd("dismissGroup");return va.log("".concat(n," groupID:").concat(e)),this.request({name:"group",action:"destroyGroup",param:{groupID:e}}).then(function(){return i.setNetworkType(t.getNetworkType()).setText("groupID=".concat(e)).setEnd(),va.log("".concat(n," ok. groupID:").concat(e)),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t.AVChatRoomHandler.reset(e),new dd({groupID:e})}).catch(function(r){return i.setText("groupID=".concat(e)),t.probeNetwork().then(function(e){var t=Wn(e,2);i.setError(r,t[0],t[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e)),vd(r)})}},{key:"updateGroupProfile",value:function(e){var t=this,n="".concat($g,".updateGroupProfile");!this.hasLocalGroup(e.groupID)||Ha(this.getLocalGroupProfile(e.groupID).type)||Ca(e.joinOption)||(va.warn("".concat(n," Work/Meeting/AVChatRoom\u7fa4\u4e0d\u80fd\u8bbe\u7f6e\u5b57\u6bb5\uff1ajoinOption\uff0c\u81ea\u52a8\u5ffd\u7565\u8be5\u5b57\u6bb5")),e.joinOption=void 0),Ca(e.muteAllMembers)||(e.muteAllMembers=e.muteAllMembers?"On":"Off");var i=new Dd("updateGroupProfile");return i.setText(JSON.stringify(e)),va.log("".concat(n," groupID:"),e.groupID),this.request({name:"group",action:"updateGroupProfile",param:e}).then(function(){return i.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok. groupID:"),e.groupID),t.hasLocalGroup(e.groupID)&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList()),new dd({group:t.groupMap.get(e.groupID)})}).catch(function(r){return t.probeNetwork().then(function(e){var t=Wn(e,2);i.setError(r,t[0],t[1]).setEnd()}),va.log("".concat(n," failed. error:").concat(xa(r)," groupID:").concat(e.groupID)),vd(r)})}},{key:"setGroupMemberRole",value:function(e){var t=this,n="".concat($g,".setGroupMemberRole"),i=e.groupID,r=e.userID,o=e.role,s=this.groupMap.get(i);if(s.selfInfo.role!==wn.GRP_MBR_ROLE_OWNER)return vd(new _h({code:bh.NOT_OWNER,message:"\u4f60\u4e0d\u662f\u7fa4\u4e3b\uff0c\u53ea\u6709\u7fa4\u4e3b\u624d\u6709\u6743\u9650\u64cd\u4f5c"}));if([wn.GRP_WORK,wn.GRP_AVCHATROOM].includes(s.type))return vd(new _h({code:bh.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM,message:"\u4e0d\u80fd\u5728 Work / AVChatRoom \u7c7b\u578b\u7684\u7fa4\u4e2d\u8bbe\u7f6e\u7fa4\u6210\u5458\u8eab\u4efd"}));if([wn.GRP_MBR_ROLE_ADMIN,wn.GRP_MBR_ROLE_MEMBER].indexOf(o)<0)return vd(new _h({code:bh.INVALID_MEMBER_ROLE,message:"\u4e0d\u5408\u6cd5\u7684\u7fa4\u6210\u5458\u8eab\u4efd\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570"}));if(r===this.tim.loginInfo.identifier)return vd(new _h({code:bh.CANNOT_SET_SELF_MEMBER_ROLE,message:"\u4e0d\u80fd\u8bbe\u7f6e\u81ea\u5df1\u7684\u7fa4\u6210\u5458\u8eab\u4efd\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570"}));var a=new Dd("setGroupMemberRole");return a.setText("groupID=".concat(i," userID=").concat(r," role=").concat(o)),va.log("".concat(n," groupID:").concat(i,". userID: ").concat(r)),this._modifyGroupMemberInfo({groupID:i,userID:r,role:o}).then(function(e){return a.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok. groupID:").concat(i,". userID: ").concat(r)),new dd({group:s,member:e})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);a.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(e)," groupID:").concat(i," userID:").concat(r)),vd(e)})}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,n=e.groupID,i=e.userID,r=e.muteTime,o="".concat($g,".setGroupMemberMuteTime");if(i===this.tim.loginInfo.identifier)return vd(new _h({code:bh.CANNOT_MUTE_SELF,message:"\u4e0d\u80fd\u5c06\u81ea\u5df1\u7981\u8a00\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570"}));va.log("".concat(o," groupID:").concat(n,". userID: ").concat(i));var s=new Dd("setGroupMemberMuteTime");return s.setText("groupID=".concat(n," userID=").concat(i," muteTime=").concat(r)),this._modifyGroupMemberInfo({groupID:n,userID:i,muteTime:r}).then(function(e){return s.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(o," ok. groupID:").concat(n,". userID: ").concat(i)),new dd({group:t.getLocalGroupProfile(n),member:e})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);s.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(o," error:").concat(xa(e)," groupID:").concat(n," userID:").concat(i)),vd(e)})}},{key:"setMessageRemindType",value:function(e){var t=this,n="".concat($g,".setMessageRemindType"),i=new Dd("setMessageRemindType");i.setText("groupID=".concat(e.groupID," userID=").concat(e.userID||this.tim.loginInfo.identifier)),va.log("".concat(n," groupID:").concat(e.groupID,". userID: ").concat(e.userID||this.tim.loginInfo.identifier));var r=e.messageRemindType;return this._modifyGroupMemberInfo({groupID:e.groupID,messageRemindType:r,userID:this.tim.loginInfo.identifier}).then(function(){i.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok. groupID:").concat(e.groupID," userID:").concat(e.userID||t.tim.loginInfo.identifier));var o=t.getLocalGroupProfile(e.groupID);return o&&(o.selfInfo.messageRemindType=r),new dd({group:o})}).catch(function(r){return t.probeNetwork().then(function(e){var t=Wn(e,2);i.setError(r,t[0],t[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e.groupID," userID:").concat(e.userID||t.tim.loginInfo.identifier)),vd(r)})}},{key:"setGroupMemberNameCard",value:function(e){var t=this,n="".concat($g,".setGroupMemberNameCard"),i=e.groupID,r=e.userID,o=void 0===r?this.tim.loginInfo.identifier:r,s=e.nameCard;va.log("".concat(n," groupID:").concat(i,". userID: ").concat(o));var a=new Dd("setGroupMemberNameCard");return a.setText("groupID=".concat(i," userID=").concat(o," nameCard=").concat(s)),this._modifyGroupMemberInfo({groupID:i,userID:o,nameCard:s}).then(function(e){va.log("".concat(n," ok. groupID:").concat(i,". userID: ").concat(o)),a.setNetworkType(t.getNetworkType()).setEnd();var r=t.getLocalGroupProfile(i);return o===t.tim.loginInfo.identifier&&r&&r.setSelfNameCard(s),new dd({group:r,member:e})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);a.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(e)," groupID:").concat(i," userID:").concat(o)),vd(e)})}},{key:"setGroupMemberCustomField",value:function(e){var t=this,n="".concat($g,".setGroupMemberCustomField"),i=e.groupID,r=e.userID,o=void 0===r?this.tim.loginInfo.identifier:r,s=e.memberCustomField;va.log("".concat(n," groupID:").concat(i,". userID: ").concat(o));var a=new Dd("setGroupMemberCustomField");return a.setText("groupID=".concat(i," userID=").concat(o," memberCustomField=").concat(JSON.stringify(s))),this._modifyGroupMemberInfo({groupID:i,userID:o,memberCustomField:s}).then(function(e){return a.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok. groupID:").concat(i,". userID: ").concat(o)),new dd({group:t.groupMap.get(i),member:e})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);a.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(e)," groupID:").concat(i," userID:").concat(o)),vd(e)})}},{key:"getGroupList",value:function(e){var t=this,n="".concat($g,".getGroupList"),i=new Dd("getGroupList");va.log("".concat(n));var r={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption",muteAllMembers:"ShutUpAllMember"},o=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime"];return e&&e.groupProfileFilter&&e.groupProfileFilter.forEach(function(e){r[e]&&o.push(r[e])}),this.request({name:"group",action:"list",param:{responseFilter:{groupBaseInfoFilter:o,selfInfoFilter:["Role","JoinTime","MsgFlag"]}}}).then(function(e){var r=e.data.groups;return va.log("".concat(n," ok. nums=").concat(r.length)),t._groupListTreeShaking(r),t.updateGroupMap(r),i.setNetworkType(t.getNetworkType()).setText("".concat(r.length,"-afterTreeshaking-").concat(t.groupMap.size)).setEnd(),t.tempConversationList&&(va.log("".concat(n," update last message with tempConversationList, nums=").concat(t.tempConversationList.length)),t._handleUpdateGroupLastMessage({data:t.tempConversationList}),t.tempConversationList=null),t.emitGroupListUpdate(),new dd({groupList:t.getLocalGroups()})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);i.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(n," error:"),e),vd(e)})}},{key:"getGroupMemberList",value:function(e){var t=this,n=e.groupID,i=e.offset,r=void 0===i?0:i,o=e.count,s=void 0===o?15:o,a="".concat($g,".getGroupMemberList"),u=new Dd("getGroupMemberList");va.log("".concat(a," groupID: ").concat(n," offset: ").concat(r," count: ").concat(s));var c=[];return this.request({name:"group",action:"getGroupMemberList",param:{groupID:n,offset:r,limit:s>100?100:s,memberInfoFilter:["Role","NameCard","ShutUpUntil"]}}).then(function(e){var i=e.data,r=i.members,o=i.memberNum;return wa(r)&&0!==r.length?(t.hasLocalGroup(n)&&(t.getLocalGroupProfile(n).memberNum=o),c=t._updateLocalGroupMemberMap(n,r),t.tim.getUserProfile({userIDList:r.map(function(e){return e.userID}),tagList:[Xl.NICK,Xl.AVATAR]})):Promise.resolve([])}).then(function(e){var i=e.data;if(!wa(i)||0===i.length)return gd({memberList:[]});var o=i.map(function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}});return t._updateLocalGroupMemberMap(n,o),u.setNetworkType(t.getNetworkType()).setText("groupID=".concat(n," offset=").concat(r," count=").concat(s)).setEnd(),va.log("".concat(a," ok.")),new dd({memberList:c})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);u.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(a," error:"),e),vd(e)})}},{key:"getLocalGroups",value:function(){return Kn(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"getGroupProfile",value:function(e){var t=this,n="".concat($g,".getGroupProfile"),i=new Dd("getGroupProfile");va.log("".concat(n," groupID:"),e.groupID);var r=e.groupID;return this.getGroupProfileAdvance({groupIDList:[r],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:e.groupCustomFieldFilter}}).then(function(o){var s,a=o.data,u=a.successGroupList,c=a.failureGroupList;return va.log("".concat(n," ok. groupID:").concat(e.groupID)),c.length>0?vd(c[0]):(Wa(u[0].type)&&!t.hasLocalGroup(r)?s=new vg(u[0]):(t.updateGroupMap(u),s=t.getLocalGroupProfile(r)),i.setNetworkType(t.getNetworkType()).setText("groupID=".concat(s.groupID," type=").concat(s.type," muteAllMembers=").concat(s.muteAllMembers," ownerID=").concat(s.ownerID)).setEnd(),s&&s.selfInfo&&!s.selfInfo.nameCard?t.updateSelfInfo(s).then(function(e){return new dd({group:e})}):new dd({group:s}))}).catch(function(r){return t.probeNetwork().then(function(t){var n=Wn(t,2);i.setError(r,n[0],n[1]).setText("groupID=".concat(e.groupID)).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e.groupID)),vd(r)})}},{key:"getGroupMemberProfile",value:function(e){var t=this,n="".concat($g,".getGroupMemberProfile"),i=new Dd("getGroupMemberProfile");i.setText(e.userIDList.length>5?"userIDList.length=".concat(e.userIDList.length):"userIDList=".concat(e.userIDList)),va.log("".concat(n," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList.join(","))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var r=e.groupID,o=e.userIDList;return this._getGroupMemberProfileAdvance(zn(zn({},e),{},{userIDList:o})).then(function(e){var n=e.data.members;return wa(n)&&0!==n.length?(t._updateLocalGroupMemberMap(r,n),t.tim.getUserProfile({userIDList:n.map(function(e){return e.userID}),tagList:[Xl.NICK,Xl.AVATAR]})):gd([])}).then(function(e){var n=e.data.map(function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}});t._updateLocalGroupMemberMap(r,n);var s=o.filter(function(e){return t.hasLocalGroupMember(r,e)}).map(function(e){return t.getLocalGroupMemberInfo(r,e)});return i.setNetworkType(t.getNetworkType()).setEnd(),new dd({memberList:s})})}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this.request({name:"group",action:"getGroupMemberProfile",param:zn(zn({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:["Role","JoinTime","NameCard","ShutUpUntil"]})})}},{key:"updateSelfInfo",value:function(e){var t="".concat($g,".updateSelfInfo"),n=e.groupID;return va.log("".concat(t," groupID:"),n),this.getGroupMemberProfile({groupID:n,userIDList:[this.tim.loginInfo.identifier]}).then(function(i){var r=i.data.memberList;return va.log("".concat(t," ok. groupID:"),n),e&&0!==r.length&&e.updateSelfInfo(r[0]),e})}},{key:"addGroupMember",value:function(e){var t=this,n="".concat($g,".addGroupMember"),i=new Dd("addGroupMember");i.setText("groupID=".concat(e.groupID));var r=this.getLocalGroupProfile(e.groupID);if(Wa(r.type)){var o=new _h({code:bh.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:Th});return i.setCode(bh.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setMessage(Th).setNetworkType(this.getNetworkType()).setText("groupID=".concat(e.groupID," groupType=").concat(r.type)).setEnd(),vd(o)}return e.userIDList=e.userIDList.map(function(e){return{userID:e}}),va.log("".concat(n," groupID:"),e.groupID),this.request({name:"group",action:"addGroupMember",param:e}).then(function(o){var s=o.data.members;va.log("".concat(n," ok. groupID:"),e.groupID);var a=s.filter(function(e){return 1===e.result}).map(function(e){return e.userID}),u=s.filter(function(e){return 0===e.result}).map(function(e){return e.userID}),c=s.filter(function(e){return 2===e.result}).map(function(e){return e.userID}),l=s.filter(function(e){return 4===e.result}).map(function(e){return e.userID}),h="groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(a,", ")+"failureUserIDList:".concat(u,", ")+"existedUserIDList:".concat(c,", ")+"overLimitUserIDList:".concat(l);return i.setNetworkType(t.getNetworkType()).setText(h).setEnd(),0===a.length?new dd({successUserIDList:a,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l}):(r.memberNum+=a.length,new dd({successUserIDList:a,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l,group:r}))}).catch(function(r){return t.probeNetwork().then(function(t){var n=Wn(t,2);i.setError(r,n[0],n[1]).setText("groupID=".concat(e.groupID)).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e.groupID)),vd(r)})}},{key:"deleteGroupMember",value:function(e){var t=this,n="".concat($g,".deleteGroupMember"),i=new Dd("deleteGroupMember");i.setText(e.userIDList.length>5?"userIDList.length=".concat(e.userIDList.length):"userIDList=".concat(e.userIDList)),va.log("".concat(n," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList));var r=this.getLocalGroupProfile(e.groupID);return r.type===wn.GRP_AVCHATROOM?vd(new _h({code:bh.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:"\u4e0d\u80fd\u5728 AVChatRoom \u7c7b\u578b\u7684\u7fa4\u7ec4\u8e22\u4eba"})):this.request({name:"group",action:"deleteGroupMember",param:e}).then(function(){return i.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok")),r.memberNum--,t.deleteLocalGroupMembers(e.groupID,e.userIDList),new dd({group:r,userIDList:e.userIDList})}).catch(function(r){return t.probeNetwork().then(function(t){var n=Wn(t,2);i.setError(r,n[0],n[1]).setText("groupID=".concat(e.groupID)).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e.groupID)),vd(r)})}},{key:"searchGroupByID",value:function(e){var t=this,n="".concat($g,".searchGroupByID"),i={groupIDList:[e]},r=new Dd("searchGroupByID");return r.setText("groupID=".concat(e)),va.log("".concat(n," groupID:").concat(e)),this.request({name:"group",action:"searchGroupByID",param:i}).then(function(i){var o=i.data.groupProfile;if(0!==o[0].errorCode)throw new _h({code:o[0].errorCode,message:o[0].errorInfo});return r.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok. groupID:").concat(e)),new dd({group:new vg(o[0])})}).catch(function(i){return t.probeNetwork().then(function(e){var t=Wn(e,2);r.setError(i,t[0],t[1]).setEnd()}),va.warn("".concat(n," error:").concat(xa(i)," groupID:").concat(e)),vd(i)})}},{key:"applyJoinGroup",value:function(e){var t=this,n="".concat($g,".applyJoinGroup"),i=new Dd(Rd);return this.request({name:"group",action:"applyJoinGroup",param:e}).then(function(r){var o=r.data,s=o.joinedStatus,a=o.longPollingKey;switch(i.setNetworkType(t.getNetworkType()).setText("groupID=".concat(e.groupID," joinedStatus=").concat(s)).setEnd(),va.log("".concat(n," ok. groupID:").concat(e.groupID," joinedStatus:").concat(s," longPollingKey:").concat(a)),s){case"WaitAdminApproval":return new dd({status:"WaitAdminApproval"});case"JoinedSuccess":return t.getGroupProfile({groupID:e.groupID}).then(function(n){var i=n.data.group,r={status:"JoinedSuccess",group:i};return Ca(a)?(t.emitGroupListUpdate(!0,!1),new dd(r)):(t.emitInnerEvent(Yf,e.groupID),t.AVChatRoomHandler.startRunLoop({longPollingKey:a,group:i}))});default:var u=new _h({code:bh.JOIN_GROUP_FAIL,message:"\u52a0\u7fa4\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570\u6216\u91cd\u8bd5"});return va.error("".concat(n," error:").concat(xa(u)," groupID:").concat(e.groupID)),vd(u)}}).catch(function(r){return i.setText("groupID=".concat(e.groupID)),t.probeNetwork().then(function(e){var t=Wn(e,2);i.setError(r,t[0],t[1]).setEnd()}),va.error("".concat(n," error:").concat(xa(r)," groupID:").concat(e.groupID)),vd(r)})}},{key:"applyJoinAVChatRoom",value:function(e){return this.AVChatRoomHandler.applyJoinAVChatRoom(e)}},{key:"handleGroupApplication",value:function(e){var t=this,n="".concat($g,".handleGroupApplication"),i=e.message.payload,r=i.groupProfile.groupID,o=i.authentication,s=i.messageKey,a=i.operatorID,u=new Dd("handleGroupApplication");return u.setText("groupID=".concat(r)),va.log("".concat(n," groupID:"),r),this.request({name:"group",action:"handleApplyJoinGroup",param:zn(zn({},e),{},{applicant:a,groupID:r,authentication:o,messageKey:s})}).then(function(){return u.setNetworkType(t.getNetworkType()).setEnd(),va.log("".concat(n," ok. groupID:"),r),t.deleteGroupSystemNotice({messageList:[e.message]}),new dd({group:t.getLocalGroupProfile(r)})}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);u.setError(e,n[0],n[1]).setEnd()}),va.error("".concat(n," error. error:").concat(xa(e)," groupID:").concat(r)),vd(e)})}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,n="".concat($g,".deleteGroupSystemNotice");return wa(e.messageList)&&0!==e.messageList.length?(va.log("".concat(n)+e.messageList.map(function(e){return e.ID})),this.request({name:"group",action:"deleteGroupSystemNotice",param:{messageListToDelete:e.messageList.map(function(e){return{from:wn.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}})}}).then(function(){return va.log("".concat(n," ok")),e.messageList.forEach(function(e){t.tim.messageController.deleteLocalMessage(e)}),new dd}).catch(function(e){return va.error("".concat(n," error:"),e),vd(e)})):gd()}},{key:"getGroupProfileAdvance",value:function(e){var t="".concat($g,".getGroupProfileAdvance");return wa(e.groupIDList)&&e.groupIDList.length>50&&(va.warn("".concat(t," \u83b7\u53d6\u7fa4\u8d44\u6599\u7684\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc750\u4e2a")),e.groupIDList.length=50),va.log("".concat(t," groupIDList:"),e.groupIDList),this.request({name:"group",action:"query",param:e}).then(function(e){va.log("".concat(t," ok."));var n=e.data.groups,i=n.filter(function(e){return Ca(e.errorCode)||0===e.errorCode}),r=n.filter(function(e){return e.errorCode&&0!==e.errorCode}).map(function(e){return new _h({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})});return new dd({successGroupList:i,failureGroupList:r})}).catch(function(n){return va.error("".concat(t," error:").concat(xa(n)," groupIDList:").concat(e.groupIDList)),vd(n)})}},{key:"_deleteLocalGroup",value:function(e){return this.groupMap.delete(e),this.groupMemberListMap.delete(e),this._setStorageGroupList(),this.groupMap.has(e)&&this.groupMemberListMap.has(e)}},{key:"_initGroupList",value:function(){var e=this,t="".concat($g,"._initGroupList"),n=new Dd("getGroupListInStorage");va.time(Md),va.log("".concat(t));var i=this._getStorageGroupList();wa(i)&&i.length>0?(i.forEach(function(t){e.groupMap.set(t.groupID,new vg(t))}),this.emitGroupListUpdate(!0,!1),n.setNetworkType(this.getNetworkType()).setText(this.groupMap.size).setEnd()):n.setNetworkType(this.getNetworkType()).setText(0).setEnd(),this.triggerReady(),va.log("".concat(t," ok. initCost=").concat(va.timeEnd(Md),"ms")),this.getGroupList()}},{key:"_initListeners",value:function(){var e=this.tim.innerEmitter;e.once(uf,this._initGroupList,this),e.on(Hf,this._handleUpdateGroupLastMessage,this),e.on(vf,this._handleReceivedGroupMessage,this),e.on(Kf,this._handleProfileUpdated,this)}},{key:"emitGroupListUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroups(),i=JSON.parse(JSON.stringify(n));t&&this.emitInnerEvent(Ff,i),e&&this.emitOuterEvent(kn.GROUP_LIST_UPDATED,n)}},{key:"_handleReceivedGroupMessage",value:function(e){var t=this,n=e.data.eventDataList;Array.isArray(n)&&n.forEach(function(e){var n=e.conversationID.replace(wn.CONV_GROUP,"");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)})}},{key:"_onReceivedGroupSystemNotice",value:function(e){this.groupNoticeHandler._onReceivedGroupNotice(e.data)}},{key:"_handleUpdateGroupLastMessage",value:function(e){var t="".concat($g,"._handleUpdateGroupLastMessage"),n=e.data;if(va.log("".concat(t," convNums=").concat(n.length," groupNums=").concat(this.groupMap.size)),0!==this.groupMap.size){for(var i,r,o,s=!1,a=0,u=n.length;a<u;a++)(i=n[a]).conversationID&&i.type!==wn.CONV_GROUP&&(r=i.conversationID.split(/^GROUP/)[1],(o=this.getLocalGroupProfile(r))&&(o.lastMessage=i.lastMessage,s=!0));s&&(this.groupMap=this._sortLocalGroupList(this.groupMap),this.emitGroupListUpdate(!0,!1))}else this.tempConversationList=n}},{key:"_sortLocalGroupList",value:function(e){var t=Kn(e).filter(function(e){return!eu(Wn(e,2)[1].lastMessage)});return t.sort(function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}),new Map([].concat(Kn(t),Kn(e)))}},{key:"_getStorageGroupList",value:function(){return this.tim.storage.getItem("groupMap")}},{key:"_setStorageGroupList",value:function(){var e=this.getLocalGroups().filter(function(e){return!Wa(e.type)}).slice(0,20).map(function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}});this.tim.storage.setItem("groupMap",e)}},{key:"updateGroupMap",value:function(e){var t=this;e.forEach(function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new vg(e))}),this._setStorageGroupList()}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var n=this;return wa(t)&&0!==t.length?t.map(function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new Gg(t)),n.getLocalGroupMemberInfo(e,t.userID)}):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach(function(e){n.delete(e)})}},{key:"_modifyGroupMemberInfo",value:function(e){var t=this,n=e.groupID,i=e.userID;return this.request({name:"group",action:"modifyGroupMemberInfo",param:e}).then(function(){if(t.hasLocalGroupMember(n,i)){var r=t.getLocalGroupMemberInfo(n,i);return Ca(e.muteTime)||r.updateMuteUntil(e.muteTime),Ca(e.role)||r.updateRole(e.role),Ca(e.nameCard)||r.updateNameCard(e.nameCard),Ca(e.memberCustomField)||r.updateMemberCustomField(e.memberCustomField),r}return t.getGroupMemberProfile({groupID:n,userIDList:[i]}).then(function(e){return Wn(e.data.memberList,1)[0]})})}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(Kn(this.groupMap)),n=0,i=e.length;n<i;n++)t.delete(e[n].groupID);this.AVChatRoomHandler.hasJoinedAVChatRoom()&&this.AVChatRoomHandler.getJoinedAVChatRoom().forEach(function(e){t.delete(e)});for(var r=Kn(t.keys()),o=0,s=r.length;o<s;o++)this.groupMap.delete(r[o])}},{key:"_handleProfileUpdated",value:function(e){for(var t=this,n=e.data,i=function(e){var i=n[e];t.groupMemberListMap.forEach(function(e){e.has(i.userID)&&e.get(i.userID).updateMember({nick:i.nick,avatar:i.avatar})})},r=0;r<n.length;r++)i(r)}},{key:"getJoinedAVChatRoom",value:function(){return this.AVChatRoomHandler.getJoinedAVChatRoom()}},{key:"deleteLocalGroupAndConversation",value:function(e){this._deleteLocalGroup(e),this.tim.conversationController.deleteLocalConversation("GROUP".concat(e)),this.emitGroupListUpdate(!0,!1)}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this.AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"getGroupLastSequence",value:function(e){var t=this,n="".concat($g,".getGroupLastSequence"),i=new Dd("getGroupLastSequence"),r=0;if(this.hasLocalGroup(e)){var o=this.getLocalGroupProfile(e);if(o.lastMessage.lastSequence>0)return r=o.lastMessage.lastSequence,va.log("".concat(n," got lastSequence=").concat(r," from local group profile[lastMessage.lastSequence]. groupID=").concat(e)),i.setNetworkType(this.getNetworkType()).setText("got lastSequence=".concat(r," from local group profile[lastMessage.lastSequence]. groupID=").concat(e)).setEnd(),Promise.resolve(r);if(o.nextMessageSeq>1)return r=o.nextMessageSeq-1,va.log("".concat(n," got lastSequence=").concat(r," from local group profile[nextMessageSeq]. groupID=").concat(e)),i.setNetworkType(this.getNetworkType()).setText("got lastSequence=".concat(r," from local group profile[nextMessageSeq]. groupID=").concat(e)).setEnd(),Promise.resolve(r)}var s="GROUP".concat(e),a=this.tim.conversationController.getLocalConversation(s);return a&&a.lastMessage.lastSequence?(r=a.lastMessage.lastSequence,va.log("".concat(n," got lastSequence=").concat(r," from local conversation profile[lastMessage.lastSequence]. groupID=").concat(e)),i.setNetworkType(this.getNetworkType()).setText("got lastSequence=".concat(r," from local conversation profile[lastMessage.lastSequence]. groupID=").concat(e)).setEnd(),Promise.resolve(r)):this.getGroupProfileAdvance({groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}}).then(function(o){var s=o.data.successGroupList;return eu(s)?va.log("".concat(n," successGroupList is empty. groupID=").concat(e)):(r=s[0].nextMessageSeq-1,va.log("".concat(n," got lastSequence=").concat(r," from getGroupProfileAdvance. groupID=").concat(e))),i.setNetworkType(t.getNetworkType()).setText("got lastSequence=".concat(r," from getGroupProfileAdvance. groupID=").concat(e)).setEnd(),r}).catch(function(r){return t.probeNetwork().then(function(t){var n=Wn(t,2);i.setError(r,n[0],n[1]).setText("get lastSequence failed from getGroupProfileAdvance. groupID=".concat(e)).setEnd()}),va.warn("".concat(n," failed. ").concat(r)),vd(r)})}},{key:"getGroupOnlineMemberCount",value:function(e){return this.AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this.AVChatRoomHandler.getGroupOnlineMemberCount(e):gd({memberCount:0})}},{key:"reset",value:function(){this.groupMap.clear(),this.groupMemberListMap.clear(),this.resetReady(),this.groupNoticeHandler.reset(),this.AVChatRoomHandler.reset(),this.tim.innerEmitter.once(uf,this._initGroupList,this)}}]),n}(ld),Xg=function(e){Ln(n,e);var t=qn(n);function n(e){var i;Dn(this,n),(i=t.call(this,e)).REALTIME_MESSAGE_TIMEOUT=3e5,i.LONGPOLLING_ID_TIMEOUT=3e5,i._currentState=wn.NET_STATE_CONNECTED,i._status={OPENIM:{lastResponseReceivedTime:0,jitterCount:0,failedCount:0},AVCHATROOM:{lastResponseReceivedTime:0,jitterCount:0,failedCount:0}};var r=i.tim.innerEmitter;return r.on(_f,i._onGetLongPollIDFailed,Bn(i)),r.on(kf,i._onOpenIMResponseOK,Bn(i)),r.on(bf,i._onOpenIMRequestFailed,Bn(i)),r.on(Nf,i._onAVChatroomResponseOK,Bn(i)),r.on(Lf,i._onAVChatroomRequestFailed,Bn(i)),i}return xn(n,[{key:"_onGetLongPollIDFailed",value:function(){this._currentState!==wn.NET_STATE_DISCONNECTED&&this._emitNetStateChangeEvent(wn.NET_STATE_DISCONNECTED)}},{key:"_onOpenIMResponseOK",value:function(){this._onResponseOK("OPENIM")}},{key:"_onOpenIMRequestFailed",value:function(){this._onRequestFailed("OPENIM")}},{key:"_onAVChatroomResponseOK",value:function(){this.isLoggedIn()||this._onResponseOK("AVCHATROOM")}},{key:"_onAVChatroomRequestFailed",value:function(){this.isLoggedIn()||this._onRequestFailed("AVCHATROOM")}},{key:"_onResponseOK",value:function(e){var t=this._status[e],n=Date.now();if(0!==t.lastResponseReceivedTime){var i=n-t.lastResponseReceivedTime;va.debug("StatusController._onResponseOK key=".concat(e," currentState=").concat(this._currentState," interval=").concat(i," failedCount=").concat(t.failedCount," jitterCount=").concat(t.jitterCount)),t.failedCount>0&&(t.failedCount=0,t.jitterCount+=1,this._currentState!==wn.NET_STATE_CONNECTED&&this._emitNetStateChangeEvent(wn.NET_STATE_CONNECTED)),i<=this.LONGPOLLING_ID_TIMEOUT?t.jitterCount>=3&&(new Dd("networkJitter").setText("".concat(e,"-").concat(i,"-").concat(t.jitterCount)).setNetworkType(this.getNetworkType()).setEnd(),t.jitterCount=0):(new Dd("sdkReload").setText("".concat(e,"-").concat(i)).setNetworkType(this.getNetworkType()).setEnd(),va.warn("StatusController._onResponseOK, sdk reload. key=".concat(e," interval=").concat(i,"ms. https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/module-EVENT.html#.SDK_RELOAD")),this.emitInnerEvent(Zf)),t.lastResponseReceivedTime=n}else t.lastResponseReceivedTime=n}},{key:"_onRequestFailed",value:function(e){var t=this,n=this._status[e];Date.now()-n.lastResponseReceivedTime>=this.LONGPOLLING_ID_TIMEOUT?this._currentState!==wn.NET_STATE_DISCONNECTED&&(va.warn("StatusController._onRequestFailed, disconnected, longpolling unavailable more than 5min. key=".concat(e," networkType=").concat(this.getNetworkType())),this._emitNetStateChangeEvent(wn.NET_STATE_DISCONNECTED)):(n.failedCount+=1,n.failedCount>5?this.probeNetwork().then(function(i){var r=Wn(i,2),o=r[1];r[0]?(t._currentState!==wn.NET_STATE_CONNECTING&&t._emitNetStateChangeEvent(wn.NET_STATE_CONNECTING),va.warn("StatusController._onRequestFailed, connecting, network jitter. key=".concat(e," networkType=").concat(o))):(t._currentState!==wn.NET_STATE_DISCONNECTED&&t._emitNetStateChangeEvent(wn.NET_STATE_DISCONNECTED),va.warn("StatusController._onRequestFailed, disconnected, longpolling unavailable. key=".concat(e," networkType=").concat(o))),n.failedCount=0,n.jitterCount=0}):this._currentState===wn.NET_STATE_CONNECTED&&this._emitNetStateChangeEvent(wn.NET_STATE_CONNECTING))}},{key:"_emitNetStateChangeEvent",value:function(e){va.log("StatusController._emitNetStateChangeEvent net state changed from ".concat(this._currentState," to ").concat(e)),this._currentState=e,this.emitOuterEvent(kn.NET_STATE_CHANGE,{state:e})}},{key:"reset",value:function(){va.log("StatusController.reset"),this._currentState=wn.NET_STATE_CONNECTED,this._status={OPENIM:{lastResponseReceivedTime:0,jitterCount:0,failedCount:0},AVCHATROOM:{lastResponseReceivedTime:0,jitterCount:0,failedCount:0}}}}]),n}(ld);function Jg(){return null}var Qg=function(){function e(t){Dn(this,e),this.tim=t,this.storageQueue=new Map,this.checkTimes=0,this.checkTimer=setInterval(this._onCheckTimer.bind(this),1e3),this._errorTolerantHandle()}return xn(e,[{key:"_errorTolerantHandle",value:function(){!Us&&Ca(window.localStorage)&&(this.getItem=Jg,this.setItem=Jg,this.removeItem=Jg,this.clear=Jg)}},{key:"_onCheckTimer",value:function(){if(this.checkTimes++,this.checkTimes%20==0){if(0===this.storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var e,t=Qn(this.storageQueue);try{for(t.s();!(e=t.n()).done;){var n=Wn(e.value,2),i=n[1];this._setStorageSync(this._getKey(n[0]),i)}}catch(o){t.e(o)}finally{t.f()}this.storageQueue.clear()}catch(Iv){va.warn("Storage._doFlush error",Iv)}}},{key:"_getPrefix",value:function(){var e=this.tim.loginInfo,t=e.identifier;return"TIM_".concat(e.SDKAppID,"_").concat(t,"_")}},{key:"getItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this._getStorageSync(n)}catch(Iv){return va.warn("Storage.getItem error:",Iv),{}}}},{key:"setItem",value:function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var n=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?e:this._getKey(e);this._setStorageSync(n,t)}else this.storageQueue.set(e,t)}},{key:"clear",value:function(){try{Us?Vs.clearStorageSync():localStorage.clear()}catch(Iv){va.warn("Storage.clear error:",Iv)}}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(Iv){va.warn("Storage.removeItem error:",Iv)}}},{key:"getSize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var i={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(i,"leftSize",{enumerable:!0,get:function(){return i.limitSize-i.size}}),Us&&(i.limitSize=1024*Vs.getStorageInfoSync().limitSize),e)i.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(Us)Vs.getStorageInfoSync().keys.forEach(function(e){i.size+=JSON.stringify(t._getStorageSync(e)).length+t._getKey(e).length});else for(var r in localStorage)localStorage.hasOwnProperty(r)&&(i.size+=localStorage.getItem(r).length+r.length);return this._convertUnit(i)}catch(Iv){va.warn("Storage.getSize error:",Iv)}}},{key:"_convertUnit",value:function(e){var t={},n=e.unit;for(var i in t.unit=n,e)"number"==typeof e[i]&&(t[i]="kb"===n.toLowerCase()?Math.round(e[i]/1024):"mb"===n.toLowerCase()?Math.round(e[i]/1024/1024):e[i]);return t}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"_setStorageSync",value:function(e,t){Us?Fs?my.setStorageSync({key:e,data:t}):Vs.setStorageSync(e,t):localStorage.setItem(e,JSON.stringify(t))}},{key:"_getStorageSync",value:function(e){return Us?Fs?my.getStorageSync({key:e}).data:Vs.getStorageSync(e):JSON.parse(localStorage.getItem(e))}},{key:"_removeStorageSync",value:function(e){Us?Fs?my.removeStorageSync({key:e}):Vs.removeStorageSync(e):localStorage.removeItem(e)}},{key:"reset",value:function(){this._doFlush(),this.checkTimes=0}}]),e}(),ev=t(function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=this._events[n?n+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,r=t.length,o=new Array(r);i<r;i++)o[i]=t[i].fn;return o},a.prototype.listenerCount=function(e){var t=this._events[n?n+e:e];return t?t.fn?1:t.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,r),!0;case 5:return l.fn.call(l.context,t,i,r,o),!0;case 6:return l.fn.call(l.context,t,i,r,o,s),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,i);break;case 4:l[c].fn.call(l[c].context,t,i,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||r&&!a[u].once||i&&a[u].context!==i)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?this._events[t=n?n+e:e]&&s(this,t):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a});function tv(e){var t=e.context||null;return{platform:"10",websdkappid:"537048168",v:"1.7.3",a2:t&&t.a2Key||void 0,tinyid:t&&t.tinyID||void 0,sdkappid:t&&t.SDKAppID||0,contentType:t&&t.contentType||0,apn:t&&t.apn||1,accounttype:t&&t.accountType||0,sdkability:2}}var nv=function(){function e(t){Dn(this,e),this.tim=t,this.tim.innerEmitter.on(sf,this._update,this),this.tim.innerEmitter.on(af,this._update,this),this.tim.innerEmitter.on(cf,this._updateSpecifiedConfig,this),this._initConfig()}return xn(e,[{key:"_update",value:function(e){this._initConfig()}},{key:"_updateSpecifiedConfig",value:function(e){var t=this;e.data.forEach(function(e){t._set(e)})}},{key:"get",value:function(e){var t=e.name,n=e.action,i=e.param,r=e.tjgID;if(Ca(this.config[t])||Ca(this.config[t][n]))throw new _h({code:bh.NETWORK_PACKAGE_UNDEFINED,message:"".concat("\u672a\u5b9a\u4e49\u7684 packageConfig",": PackageConfig.").concat(t)});var o=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var n=Array.isArray(t)?[]:Object.create(null),i="";for(var r in t)null!==t[r]?void 0!==t[r]?(i=On(t[r]),n[r]=["string","number","function","boolean"].indexOf(i)>=0?t[r]:e(t[r])):n[r]=void 0:n[r]=null;return n}(this.config[t][n]);return o.requestData=this._initRequestData(i,o),o.encode=this._initEncoder(o),o.decode=this._initDecoder(o),r&&(o.queryString.tjg_id=r),o}},{key:"_set",value:function(e){var t=e.key,n=e.value;if(0!=!!t){var i=t.split(".");i.length<=0||function e(t,n,i,r){var o=n[i];"object"===On(t[o])?e(t[o],n,i+1,r):t[o]=r}(this.config,i,0,n)}}},{key:"_initConfig",value:function(){var e;this.config={},this.config.accessLayer={create:null,query:{serverName:rf.NAME.WEB_IM,cmd:rf.CMD.ACCESS_LAYER,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:zn(zn({},tv(e=this.tim)),{},{identifier:e.context.identifier,usersig:e.context.userSig}),requestData:{}},update:null,delete:null},this.config.login=function(e){return{create:null,query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.LOGIN,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:zn(zn({},tv(e)),{},{identifier:e.loginInfo.identifier,usersig:e.loginInfo.userSig,sdkappid:e.loginInfo.SDKAppID,accounttype:e.loginInfo.accountType,reqtime:+new Date/1e3}),requestData:{state:"Online"},keyMaps:{request:{tinyID:"tinyId"},response:{TinyId:"tinyID"}}},update:null,delete:null}}(this.tim),this.config.logout=function(e){return{create:null,query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.LOGOUT_ALL,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:zn(zn({},tv(e)),{},{reqtime:+new Date/1e3}),requestData:{}},update:null,delete:null}}(this.tim),this.config.longPollLogout=function(e){return{create:null,query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.LOGOUT_LONG_POLL,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:zn(zn({},tv(e)),{},{reqtime:+new Date}),requestData:{longPollID:""},keyMaps:{request:{longPollID:"LongPollingId"}}},update:null,delete:null}}(this.tim),this.config.profile=function(e){var t=tv(e),n={serverName:rf.NAME.PROFILE,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{query:zn(zn({},n),{},{cmd:rf.CMD.PORTRAIT_GET,requestData:{fromAccount:"",userItem:[]},keyMaps:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}),update:zn(zn({},n),{},{cmd:rf.CMD.PORTRAIT_SET,requestData:{fromAccount:"",profileItem:[{tag:Xl.NICK,value:""},{tag:Xl.GENDER,value:""},{tag:Xl.ALLOWTYPE,value:""},{tag:Xl.AVATAR,value:""}]}})}}(this.tim),this.config.group=function(e){var t=rf.NAME.GROUP,n=tv(e);1===e.context.login&&e.context.a2Key||(t=rf.NAME.BIG_GROUP_NO_AUTH,n=jn(tv(e),["a2","tinyid"]));var i={request:{ownerID:"Owner_Account",userID:"Member_Account",newOwnerID:"NewOwner_Account",maxMemberNum:"MaxMemberCount",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember",messageRemindType:"MsgFlag",userIDList:"MemberList",groupIDList:"GroupIdList",applyMessage:"ApplyMsg",muteTime:"ShutUpTime",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl"},response:{GroupIdList:"groups",MsgFlag:"messageRemindType",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers",ApplyJoinOption:"joinOption",OverJoinedGroupLimit_Account:"overLimitUserIDList"}},r={serverName:rf.NAME.GROUP,channel:rf.CHANNEL.XHR,protocol:nf,queryString:n};return{create:zn(zn({},r),{},{cmd:rf.CMD.CREATE_GROUP,requestData:{type:wn.GRP_WORK,name:void 0,groupID:void 0,ownerID:e.loginInfo.identifier,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0},keyMaps:i}),list:zn(zn({},r),{},{cmd:rf.CMD.GET_JOINED_GROUPS,requestData:{userID:e.loginInfo.identifier,limit:void 0,offset:void 0,groupType:void 0,responseFilter:void 0},keyMaps:i}),query:zn(zn({},r),{},{cmd:rf.CMD.GET_GROUP_INFO,requestData:{groupIDList:void 0,responseFilter:void 0},keyMaps:i}),getGroupMemberProfile:zn(zn({},r),{},{cmd:rf.CMD.GET_GROUP_MEMBER_INFO,requestData:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMaps:{request:zn(zn({},i.request),{},{userIDList:"Member_List_Account"}),response:i.response}}),getGroupMemberList:zn(zn({},r),{},{cmd:rf.CMD.GET_GROUP_MEMBER_LIST,requestData:{groupID:void 0,limit:0,offset:0,memberRoleFilter:void 0,memberInfoFilter:void 0},keyMaps:i}),quitGroup:zn(zn({},r),{},{cmd:rf.CMD.QUIT_GROUP,requestData:{groupID:void 0}}),changeGroupOwner:zn(zn({},r),{},{cmd:rf.CMD.CHANGE_GROUP_OWNER,queryString:n,requestData:{groupID:void 0,newOwnerID:void 0},keyMaps:i}),destroyGroup:zn(zn({},r),{},{cmd:rf.CMD.DESTROY_GROUP,requestData:{groupID:void 0}}),updateGroupProfile:zn(zn({},r),{},{cmd:rf.CMD.MODIFY_GROUP_INFO,requestData:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMaps:{request:zn(zn({},i.request),{},{groupCustomField:"AppDefinedData"}),response:i.response}}),modifyGroupMemberInfo:zn(zn({},r),{},{cmd:rf.CMD.MODIFY_GROUP_MEMBER_INFO,requestData:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMaps:i}),addGroupMember:zn(zn({},r),{},{cmd:rf.CMD.ADD_GROUP_MEMBER,requestData:{groupID:void 0,silence:void 0,userIDList:void 0},keyMaps:i}),deleteGroupMember:zn(zn({},r),{},{cmd:rf.CMD.DELETE_GROUP_MEMBER,requestData:{groupID:void 0,userIDList:void 0,reason:void 0},keyMaps:{request:{userIDList:"MemberToDel_Account"}}}),searchGroupByID:zn(zn({},r),{},{cmd:rf.CMD.SEARCH_GROUP_BY_ID,requestData:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption"]}},keyMaps:{request:{groupIDList:"GroupIdList"}}}),applyJoinGroup:zn(zn({},r),{},{cmd:rf.CMD.APPLY_JOIN_GROUP,requestData:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0},keyMaps:i}),applyJoinAVChatRoom:zn(zn({},r),{},{serverName:rf.NAME.BIG_GROUP_NO_AUTH,cmd:rf.CMD.APPLY_JOIN_GROUP,requestData:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0},keyMaps:i}),handleApplyJoinGroup:zn(zn({},r),{},{cmd:rf.CMD.HANDLE_APPLY_JOIN_GROUP,requestData:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMaps:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"},response:{MsgKey:"messageKey"}}}),deleteGroupSystemNotice:zn(zn({},r),{},{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.DELETE_GROUP_SYSTEM_MESSAGE,requestData:{messageListToDelete:void 0},keyMaps:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}),getGroupPendency:zn(zn({},r),{},{cmd:rf.CMD.GET_GROUP_PENDENCY,requestData:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMaps:{request:{handleAccount:"Handle_Account"}}}),getOnlineMemberNum:{serverName:t,cmd:rf.CMD.GET_ONLINE_MEMBER_NUM,channel:rf.CHANNEL.XHR,protocol:nf,queryString:n,requestData:{groupID:void 0}}}}(this.tim),this.config.longPollID=function(e){return{create:{},query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.GET_LONG_POLL_ID,channel:rf.CHANNEL.XHR,protocol:nf,queryString:zn(zn({},tv(e)),{},{instanceid:e.context.instanceID,reqtime:+new Date/1e3}),requestData:{},keyMaps:{response:{LongPollingId:"longPollingID"}}},update:{},delete:{}}}(this.tim),this.config.longPoll=function(e){var t=zn(zn({},tv(e)),{},{instanceid:e.context.instanceID,reqtime:Math.ceil(+new Date/1e3)});return{create:{},query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.LONG_POLL,channel:rf.CHANNEL.AUTO,protocol:nf,queryString:t,requestData:{timeout:null,cookie:{notifySeq:0,noticeSeq:0,longPollingID:0}},keyMaps:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension"}}},update:{},delete:{}}}(this.tim),this.config.applyC2C=function(e){var t=tv(e),n={serverName:rf.NAME.FRIEND,channel:rf.CHANNEL.XHR,protocol:nf,queryString:t};return{create:zn(zn({},n),{},{cmd:rf.CMD.FRIEND_ADD,requestData:{fromAccount:"",addFriendItem:[]}}),get:zn(zn({},n),{},{cmd:rf.CMD.GET_PENDENCY,requestData:{fromAccount:"",pendencyType:"Pendency_Type_ComeIn"}}),update:zn(zn({},n),{},{cmd:rf.CMD.RESPONSE_PENDENCY,requestData:{fromAccount:"",responseFriendItem:[]}}),delete:zn(zn({},n),{},{cmd:rf.CMD.DELETE_PENDENCY,requestData:{fromAccount:"",toAccount:[],pendencyType:"Pendency_Type_ComeIn"}})}}(this.tim),this.config.friend=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}}),n={serverName:rf.NAME.FRIEND,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{get:zn(zn({},n),{},{cmd:rf.CMD.FRIEND_GET_ALL,requestData:{fromAccount:"",timeStamp:0,tagList:[Xl.NICK,"Tag_SNS_IM_Remark",Xl.AVATAR]},keyMaps:{request:{},response:{}}}),delete:zn(zn({},n),{},{cmd:rf.CMD.FRIEND_DELETE,requestData:{fromAccount:"",toAccount:[],deleteType:"Delete_Type_Single"}})}}(this.tim),this.config.blacklist=function(e){var t=tv(e),n={serverName:rf.NAME.FRIEND,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{create:zn(zn({},n),{},{cmd:rf.CMD.ADD_BLACKLIST,requestData:{fromAccount:"",toAccount:[]}}),get:zn(zn({},n),{},{cmd:rf.CMD.GET_BLACKLIST,requestData:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0}}),delete:zn(zn({},n),{},{cmd:rf.CMD.DELETE_BLACKLIST,requestData:{fromAccount:"",toAccount:[]}}),update:{}}}(this.tim),this.config.c2cMessage=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}}),n={request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"},response:{MsgContent:"content",MsgTime:"time",Data:"data",Desc:"description",Ext:"extension",MsgKey:"messageKey",MsgType:"type",MsgBody:"elements",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}},i={serverName:rf.NAME.OPEN_IM,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{create:zn(zn({},i),{},{cmd:rf.CMD.SEND_MESSAGE,requestData:{fromAccount:e.loginInfo.identifier,toAccount:"",msgTimeStamp:Math.ceil(+new Date/1e3),msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:""}}},keyMaps:n}),query:zn(zn({},i),{},{cmd:rf.CMD.GET_C2C_ROAM_MESSAGES,requestData:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMsg:1},keyMaps:n})}}(this.tim),this.config.c2cMessageWillBeRevoked=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}});return{create:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.REVOKE_C2C_MESSAGE,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t,requestData:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:Math.ceil(+new Date/1e3),msgSeq:0,msgRandom:0}},keyMaps:{request:{msgInfo:"MsgInfo",fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody"}}}}}(this.tim),this.config.c2cPeerReadTime=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}});return{get:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.GET_PEER_READ_TIME,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t,requestData:{userIDList:void 0},keyMaps:{request:{userIDList:"To_Account"},response:{ReadTime:"peerReadTimeList"}}}}}(this.tim),this.config.groupMessage=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}}),n={request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}},i={serverName:rf.NAME.GROUP,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{create:zn(zn({},i),{},{cmd:rf.CMD.SEND_GROUP_MESSAGE,requestData:{groupID:"",fromAccount:e.loginInfo.identifier,random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:""}},groupAtInfo:[]},keyMaps:n}),query:zn(zn({},i),{},{cmd:rf.CMD.GET_GROUP_ROAM_MESSAGES,requestData:{withRecalledMsg:1,groupID:"",count:15,sequence:""},keyMaps:n}),update:null,delete:null}}(this.tim),this.config.groupMessageWillBeRevoked=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}});return{create:{serverName:rf.NAME.GROUP,cmd:rf.CMD.REVOKE_GROUP_MESSAGE,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t,requestData:{to:"",msgSeqList:[]},keyMaps:{request:{to:"GroupId",msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}}}(this.tim),this.config.conversation=function(e){var t=tv(e),n={serverName:rf.NAME.RECENT_CONTACT,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{query:zn(zn({},n),{},{cmd:rf.CMD.GET_CONVERSATION_LIST,requestData:{fromAccount:e.loginInfo.identifier,count:0},keyMaps:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq"}}}),pagingQuery:zn(zn({},n),{},{cmd:rf.CMD.PAGING_GET_CONVERSATION_LIST,requestData:{fromAccount:void 0,timeStamp:void 0,orderType:void 0},keyMaps:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime"}}}),delete:zn(zn({},n),{},{cmd:rf.CMD.DELETE_CONVERSATION,requestData:{fromAccount:e.loginInfo.identifier,toAccount:void 0,type:1,toGroupID:void 0},keyMaps:{request:{toGroupID:"ToGroupid"}}}),setC2CMessageRead:zn(zn({},n),{},{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.SET_C2C_MESSAGE_READ,requestData:{C2CMsgReaded:void 0},keyMaps:{request:{lastMessageTime:"LastedMsgTime"}}}),setGroupMessageRead:zn(zn({},n),{},{serverName:rf.NAME.GROUP,cmd:rf.CMD.SET_GROUP_MESSAGE_READ,requestData:{groupID:void 0,messageReadSeq:void 0},keyMaps:{request:{messageReadSeq:"MsgReadedSeq"}}}),deleteGroupAtTips:zn(zn({},n),{},{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.DELETE_GROUP_AT_TIPS,requestData:{messageListToDelete:void 0},keyMaps:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}})}}(this.tim),this.config.syncMessage=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return[Math.ceil(+new Date),Math.random()].join("")}});return{create:null,query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.GET_MESSAGES,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t,requestData:{cookie:"",syncFlag:0,needAbstract:1},keyMaps:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"groupID",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList"}}},update:null,delete:null}}(this.tim),this.config.AVChatRoom=function(e){var t=rf.NAME.BIG_GROUP_LONG_POLLING,n=zn(zn({},tv(e)),{},{accounttype:"792",reqtime:function(){return+new Date}});return 1===e.context.login&&e.context.a2Key||(t=rf.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,n=jn(n,["a2","tinyid"])),{startLongPoll:{serverName:t,cmd:rf.CMD.AVCHATROOM_LONG_POLL,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:n,requestData:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMaps:{request:{USP:"USP"},response:{ToGroupId:"groupID",MsgPriority:"priority"}}}}}(this.tim),this.config.cosUpload=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}});return{create:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.FILE_UPLOAD,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t,requestData:{appVersion:"2.1",fromAccount:"",toAccount:"",sequence:0,time:function(){return Math.ceil(Date.now()/1e3)},random:function(){return za()},fileStrMd5:"",fileSize:"",serverVer:1,authKey:"",busiId:1,pkgFlag:1,sliceOffset:0,sliceSize:0,sliceData:"",contentType:"application/x-www-form-urlencoded"},keyMaps:{request:{},response:{}}},update:null,delete:null}}(this.tim),this.config.cosSig=function(e){return{create:null,query:{serverName:rf.NAME.IM_COS_SIGN,cmd:rf.CMD.COS_SIGN,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:{sdkappid:e.loginInfo.SDKAppID,identifier:e.loginInfo.identifier,userSig:e.context.userSig},requestData:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMaps:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}},update:null,delete:null}}(this.tim),this.config.cosPreSig=function(e){return{query:{serverName:rf.NAME.IM_COS_MESSAGE,cmd:rf.CMD.COS_PRE_SIG,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:{sdkappid:e.loginInfo.SDKAppID,identifier:e.loginInfo.identifier,userSig:e.context.userSig,platform:Us?8:7,version:"1.7.3"},requestData:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMaps:{request:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},response:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl"}}}}}(this.tim),this.config.bigDataHallwayAuthKey=function(e){return{create:null,query:{serverName:rf.NAME.OPEN_IM,cmd:rf.CMD.BIG_DATA_HALLWAY_AUTH_KEY,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:zn(zn({},tv(e)),{},{accounttype:"792",reqtime:function(){return+new Date}}),requestData:{}}}}(this.tim),this.config.ssoEventStat=function(e){var t={sdkappid:e.loginInfo.SDKAppID,reqtime:Math.ceil(+new Date/1e3)};return{create:{serverName:rf.NAME.IM_OPEN_STAT,cmd:rf.CMD.TIM_WEB_REPORT,channel:rf.CHANNEL.AUTO,protocol:nf,queryString:t,requestData:{table:"",report:[]},keyMaps:{request:{table:"table",report:"report",SDKAppID:"sdkappid",version:"version",tinyID:"tinyid",userID:"userid",platform:"platform",method:"method",time:"time",start:"start",end:"end",cost:"cost",status:"status",codeint:"codeint",message:"message",pointer:"pointer",text:"text",msgType:"msgtype",networkType:"networktype",startts:"startts",endts:"endts",timespan:"timespan"}}},query:{},update:{},delete:{}}}(this.tim),this.config.ssoSumStat=function(e){var t=null;return null!==e.context&&(t={sdkappid:e.context.SDKAppID,reqtime:Math.ceil(+new Date/1e3)}),{create:{serverName:rf.NAME.IM_OPEN_STAT,cmd:rf.CMD.TIM_WEB_REPORT,channel:rf.CHANNEL.AUTO,protocol:nf,queryString:t,requestData:{table:"",report:[]},keyMaps:{request:{table:"table",report:"report",SDKAppID:"sdkappid",version:"version",tinyID:"tinyid",userID:"userid",item:"item",lpID:"lpid",platform:"platform",scene:"scene",networkType:"networktype",total:"total",successRate:"successrate",avg:"avg",timespan:"timespan",time:"time"}}},query:{},update:{},delete:{}}}(this.tim),this.config.mergerMessage=function(e){var t=zn(zn({},tv(e)),{},{reqtime:function(){return+new Date}}),n={request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"},response:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}},i={serverName:rf.NAME.IM_LONG_MESSAGE,channel:rf.CHANNEL.XHR,protocol:nf,method:"POST",queryString:t};return{create:zn(zn({},i),{},{cmd:rf.CMD.UPLOAD_MERGER_MESSAGE,requestData:{messageList:[]},keyMaps:n}),query:zn(zn({},i),{},{cmd:rf.CMD.DOWNLOAD_MERGER_MESSAGE,requestData:{downloadKey:""},keyMaps:n})}}(this.tim)}},{key:"_initRequestData",value:function(e,t){if(void 0===e)return id(t.requestData,this._getRequestMap(t),this.tim);var n=t.requestData,i=Object.create(null);for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(i[r]="function"==typeof n[r]?n[r]():n[r],void 0===e[r])continue;i[r]=e[r]}return id(i,this._getRequestMap(t),this.tim)}},{key:"_getRequestMap",value:function(e){if(e.keyMaps&&e.keyMaps.request&&Object.keys(e.keyMaps.request).length>0)return e.keyMaps.request}},{key:"_initEncoder",value:function(e){switch(e.protocol){case nf:return function(e){if("string"===On(e))try{return JSON.parse(e)}catch(Iv){return e}return e};case tf:return function(e){return e};default:return function(e){return va.warn("PackageConfig._initEncoder(), unknow response type, data: ",JSON.stringify(e)),e}}}},{key:"_initDecoder",value:function(e){switch(e.protocol){case nf:return function(e){if("string"===On(e))try{return JSON.parse(e)}catch(Iv){return e}return e};case tf:return function(e){return e};default:return function(e){return va.warn("PackageConfig._initDecoder(), unknow response type, data: ",e),e}}}}]),e}(),iv=Math.floor;De({target:"Number",stat:!0},{isInteger:function(e){return!v(e)&&isFinite(e)&&iv(e)===e}});var rv=function(){for(var e=[],t=ov(arguments),n=0;n<arguments.length;n++)Number.isInteger(arguments[n])?e.push(arguments[n]):e.push(1==!!arguments[n]?"1":"0");return e.join(t)},ov=function(e){var t=e.length,n=e[t-1];if("string"!=typeof n)return"";if(n.length>1)return"";var i=e[t-1];return delete e[t-1],e.length-=t===e.length?1:0,i},sv={C2CMessageArray:1,groupMessageArray:1,groupTips:1,C2CNotifyMessageArray:1,profileModify:1,friendListMod:1},av=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e))._initialization(),i}return xn(n,[{key:"_initialization",value:function(){this._syncOffset="",this._syncNoticeList=[],this._syncEventArray=[],this._syncMessagesIsRunning=!1,this._syncMessagesFinished=!1,this._isLongPoll=!1,this._longPollID="0",this._noticeSequence=0,this._initializeListener(),this._runLoop=null,this._initShuntChannels()}},{key:"_initShuntChannels",value:function(){this._shuntChannels=Object.create(null),this._shuntChannels.C2CMessageArray=this._C2CMessageArrayChannel.bind(this),this._shuntChannels.groupMessageArray=this._groupMessageArrayChannel.bind(this),this._shuntChannels.groupTips=this._groupTipsChannel.bind(this),this._shuntChannels.C2CNotifyMessageArray=this._C2CNotifyMessageArrayChannel.bind(this),this._shuntChannels.profileModify=this._profileModifyChannel.bind(this),this._shuntChannels.friendListMod=this._friendListModChannel.bind(this)}},{key:"_C2CMessageArrayChannel",value:function(e,t,n){this.emitInnerEvent(Sf,t)}},{key:"_groupMessageArrayChannel",value:function(e,t,n){this.emitInnerEvent(Ef,t)}},{key:"_groupTipsChannel",value:function(e,t,n){var i=this;switch(e){case 4:case 6:this.emitInnerEvent(If,t);break;case 5:t.forEach(function(e){wa(e.elements.revokedInfos)?i.emitInnerEvent(Af,t):wa(e.elements.groupMessageReadNotice)?i.emitInnerEvent(xf,t):i.emitInnerEvent(Mf,{groupSystemNotices:t,type:n})});break;case 12:this.emitInnerEvent(Tf,t);break;default:va.log("NotificationController._groupTipsChannel unknown event=".concat(e," type=").concat(n),t)}}},{key:"_C2CNotifyMessageArrayChannel",value:function(e,t,n){var i=this;wa(t)&&t.forEach(function(e){ka(e)&&(e.hasOwnProperty("kickoutMsgNotify")?i.emitInnerEvent(Cf):e.hasOwnProperty("c2cMessageRevokedNotify")?i.emitInnerEvent(Rf,t):e.hasOwnProperty("c2cMessageReadReceipt")?i.emitInnerEvent(Pf,t):e.hasOwnProperty("c2cMessageReadNotice")&&i.emitInnerEvent(zf,t))})}},{key:"_profileModifyChannel",value:function(e,t,n){this.emitInnerEvent(Df,t)}},{key:"_friendListModChannel",value:function(e,t,n){this.emitInnerEvent(Of,t)}},{key:"_dispatchNotice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"poll";if(wa(e))for(var n=null,i=null,r="",o=0,s=0,a=e.length;s<a;s++)o=(n=e[s]).event,r=Object.keys(n).find(function(e){return void 0!==sv[e]}),Ea(this._shuntChannels[r])?(i=n[r],"poll"===t&&this._updatenoticeSequence(i),this._shuntChannels[r](o,i,t)):("poll"===t&&this._updatenoticeSequence(),va.log("NotificationController._dispatchNotice unknown eventItem=",n))}},{key:"getLongPollID",value:function(){return this._longPollID}},{key:"_IAmReady",value:function(){this.triggerReady()}},{key:"reset",value:function(){this._noticeSequence=0,this._resetSync(),this.closeNoticeChannel()}},{key:"_resetSync",value:function(){this._syncOffset="",this._syncNoticeList=[],this._syncEventArray=[],this._syncMessagesIsRunning=!1,this._syncMessagesFinished=!1}},{key:"_setNoticeSeqInRequestData",value:function(e){e.Cookie.NoticeSeq=this._noticeSequence,this.tim.sumStatController.addTotalCount(yd)}},{key:"_updatenoticeSequence",value:function(e){if(e){var t=e[e.length-1].noticeSequence;t&&"number"==typeof t?t<=this._noticeSequence||(this._noticeSequence=t):this._noticeSequence++}else this._noticeSequence++}},{key:"_initializeListener",value:function(){var e=this.tim.innerEmitter;e.on(uf,this._startSyncMessages,this),e.on(Vf,this.closeNoticeChannel,this)}},{key:"openNoticeChannel",value:function(){va.log("NotificationController.openNoticeChannel"),this._getLongPollID()}},{key:"closeNoticeChannel",value:function(){va.log("NotificationController.closeNoticeChannel"),(this._runLoop instanceof Xp||this._runLoop instanceof Jp)&&(this._runLoop.abort(),this._runLoop.stop()),this._longPollID="0",this._isLongPoll=!1}},{key:"_getLongPollID",value:function(){var e=this;if("0"===this._longPollID){var t=new Dd("getLongPollID");this.request({name:"longPollID",action:"query"}).then(function(n){var i=n.data.longPollingID;e._onGetLongPollIDSuccess(i),t.setText("longPollingID=".concat(i)).setNetworkType(e.getNetworkType()).setEnd()}).catch(function(n){var i=new _h({code:n.code||bh.GET_LONGPOLL_ID_FAILED,message:n.message||"\u83b7\u53d6 longpolling id \u5931\u8d25"});e.emitInnerEvent(_f),e.emitInnerEvent(Bf,i),e.probeNetwork().then(function(e){var n=Wn(e,2);t.setError(i,n[0],n[1]).setEnd()})})}else this._onGetLongPollIDSuccess(this._longPollID)}},{key:"_onGetLongPollIDSuccess",value:function(e){this.emitInnerEvent(cf,[{key:"long_poll_logout.query.requestData.longPollingID",value:e},{key:"longPoll.query.requestData.cookie.longPollingID",value:e}]),this._longPollID=e,this._startLongPoll(),this._IAmReady(),this.tim.sumStatController.recordLongPollingID(this._longPollID)}},{key:"_startLongPoll",value:function(){if(!0!==this._isLongPoll){va.log("NotificationController._startLongPoll...");var e=this.tim.connectionController,t=this.createTransportCapsule({name:"longPoll",action:"query"});this._isLongPoll=!0,this._runLoop=e.createRunLoop({pack:t,before:this._setNoticeSeqInRequestData.bind(this),success:this._onNoticeReceived.bind(this),fail:this._onNoticeFail.bind(this)}),this._runLoop.start()}else va.log("NotificationController._startLongPoll is running...")}},{key:"_onNoticeReceived",value:function(e){var t=e.data;0!==t.errorCode?(new Dd(Pd).setMessage(t.errorInfo||JSON.stringify(t)).setCode(t.errorCode).setNetworkType(this.getNetworkType()).setEnd(!0),this._onResponseError(t)):this.emitInnerEvent(kf),this.tim.sumStatController.addSuccessCount(yd),this.tim.sumStatController.addCost(yd,t.timecost),e.data.eventArray&&this._dispatchNotice(e.data.eventArray)}},{key:"_onResponseError",value:function(e){switch(e.errorCode){case bh.LONG_POLL_KICK_OUT:va.warn("NotificationController._onResponseError, longPollingID=".concat(this._longPollID," was kicked out")),this.emitInnerEvent(wf),this.closeNoticeChannel();break;case bh.MESSAGE_A2KEY_EXPIRED:case bh.ACCOUNT_A2KEY_EXPIRED:this.emitInnerEvent(jf);break;default:Ca(e.errorCode)||Ca(e.errorInfo)?va.log("NotificationController._onResponseError, errorCode or errorInfo undefined!",e):this.emitInnerEvent(Bf,new _h({code:e.errorCode,message:e.errorInfo}))}}},{key:"_onNoticeFail",value:function(e){if(e.error)if("ECONNABORTED"===e.error.code||e.error.code===bh.NETWORK_TIMEOUT)if(e.error.config){var t=e.error.config.data;va.log("NotificationController._onNoticeFail request timed out. url=".concat(e.error.config.url," data=").concat(t))}else va.log("NotificationController._onNoticeFail request timed out.");else va.log("NotificationController._onNoticeFail request failed due to network error");this.emitInnerEvent(bf)}},{key:"_startSyncMessages",value:function(e){!0!==this._syncMessagesFinished&&this.syncMessage()}},{key:"syncMessage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._syncMessagesIsRunning=!0,this.request({name:"syncMessage",action:"query",param:{cookie:t,syncFlag:n}}).then(function(t){var n=t.data;switch(rv(n.cookie,n.syncFlag)){case"00":case"01":e.emitInnerEvent(Bf,{code:bh.NOTICE_RUNLOOP_OFFSET_LOST,message:Oh});break;case"10":case"11":n.eventArray&&e._dispatchNotice(n.eventArray,"sync"),e._syncNoticeList=e._syncNoticeList.concat(n.messageList),e.emitInnerEvent(lf,{data:n.messageList,C2CRemainingUnreadList:n.C2CRemainingUnreadList}),e._syncOffset=n.cookie,e.syncMessage(n.cookie,n.syncFlag);break;case"12":n.eventArray&&e._dispatchNotice(n.eventArray,"sync"),e.openNoticeChannel(),e._syncNoticeList=e._syncNoticeList.concat(n.messageList),e.emitInnerEvent(hf,{messageList:n.messageList,C2CRemainingUnreadList:n.C2CRemainingUnreadList}),e._syncOffset=n.cookie,e._syncNoticeList=[],e._syncMessagesIsRunning=!1,e._syncMessagesFinished=!0}}).catch(function(t){e._syncMessagesIsRunning=!1,va.error("NotificationController.syncMessage failed. error:",t)})}}]),n}(ld),uv=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).TIMUploadPlugin=null,i.timUploadPlugin=null,i.COSSDK=null,i._cosUploadMethod=null,i.expiredTimeLimit=600,i.appid=0,i.bucketName="",i.ciUrl="",i.directory="",i.downloadUrl="",i.uploadUrl="",i.expiredTimeOut=i.expiredTimeLimit,i.region="ap-shanghai",i.cos=null,i.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},i._timer=0,i.uploadFileType="",i.duration=900,i.tryCount=0,i.tim.innerEmitter.on(uf,i._init,Bn(i)),i.triggerReady(),i}return xn(n,[{key:"_expiredTimer",value:function(){var e=this;this._timer=setInterval(function(){Math.ceil(Date.now()/1e3)>=e.cosOptions.expiredTime-120&&(e._getAuthorizationKey(),clearInterval(e._timer))},6e4)}},{key:"_init",value:function(){if(this.TIMUploadPlugin=this.tim.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin)this._initUploaderMethod();else{var e=Us?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=this.tim.getPlugin(e),this.COSSDK?(this._getAuthorizationKey(),va.warn("UploadController._init v2.9.2\u8d77\u63a8\u8350\u4f7f\u7528 tim-upload-plugin \u4ee3\u66ff ".concat(e,"\uff0c\u4e0a\u4f20\u66f4\u5feb\u66f4\u5b89\u5168\u3002\u8be6\u7ec6\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#registerPlugin"))):va.warn("UploadController._init \u6ca1\u6709\u68c0\u6d4b\u5230\u4e0a\u4f20\u63d2\u4ef6\uff0c\u5c06\u65e0\u6cd5\u53d1\u9001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u3001\u6587\u4ef6\u7b49\u7c7b\u578b\u7684\u6d88\u606f\u3002\u8be6\u7ec6\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#registerPlugin")}}},{key:"_getAuthorizationKey",value:function(){var e=this,t=Math.ceil(Date.now()/1e3),n=new Dd("getCosAuthKey");this.request({name:"cosSig",action:"query",param:{duration:this.expiredTimeLimit}}).then(function(i){va.log("UploadController._getAuthorizationKey ok. data:",i.data);var r=i.data,o=r.expiredTime-t;n.setText("requestId=".concat(r.requestId," requestTime=").concat(t," expiredTime=").concat(r.expiredTime," timeout=").concat(o,"s")).setNetworkType(e.getNetworkType()).setEnd(),!Us&&r.region&&(e.region=r.region),e.appid=r.appid,e.bucketName=r.bucketName,e.ciUrl=r.ciUrl,e.directory=r.directory,e.downloadUrl=r.downloadUrl,e.uploadUrl=r.uploadUrl,e.expiredTimeOut=o,e.cosOptions={secretId:r.secretId,secretKey:r.secretKey,sessionToken:r.sessionToken,expiredTime:r.expiredTime},va.log("UploadController._getAuthorizationKey cos.config:","region=".concat(e.region,",bucketName=").concat(e.bucketName)),e._initUploaderMethod(),e._expiredTimer()}).catch(function(t){e.probeNetwork().then(function(e){var i=Wn(e,2);n.setError(t,i[0],i[1]).setEnd()}),va.warn("UploadController._getAuthorizationKey failed. error:",t)})}},{key:"_getCosPreSigUrl",value:function(e){var t=this,n=Math.ceil(Date.now()/1e3),i=new Dd("getCosPreSigUrl");return this.request({name:"cosPreSig",action:"query",param:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then(function(e){t.tryCount=0;var r=e.data||{},o=r.expiredTime-n;return va.log("UploadController._getCosPreSigUrl ok. data:",r),i.setText("requestId=".concat(r.requestId," expiredTime=").concat(r.expiredTime," timeout=").concat(o,"s")).setNetworkType(t.getNetworkType()).setEnd(),r}).catch(function(n){return-1===n.code&&(n.code=bh.COS_GET_SIG_FAIL),t.probeNetwork().then(function(e){var t=Wn(e,2);i.setError(n,t[0],t[1]).setEnd()}),va.warn("UploadController._getCosPreSigUrl failed. error:",n),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,vd(new _h({code:bh.COS_GET_SIG_FAIL,message:"\u83b7\u53d6 COS \u9884\u7b7e\u540d URL \u5931\u8d25"})))})}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=new this.COSSDK(Us?{ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}:{getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=Us?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"uploadImage",value:function(e){if(!e.file)return vd(new _h({code:bh.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:"\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u56fe\u7247"}));var t=this._checkImageType(e.file);if(!0!==t)return t;var n=this._checkImageMime(e.file);if(!0!==n)return n;var i=this._checkImageSize(e.file);if(!0!==i)return i;var r=null;return this._setUploadFileType(1),this.upload(e).then(function(e){return r=e,t="https://".concat(e.location),Us?new Promise(function(e,n){Vs.getImageInfo({src:t,success:function(t){e({width:t.width,height:t.height})},fail:function(){e({width:0,height:0})}})}):Zs&&9===Xs?Promise.resolve({width:0,height:0}):new Promise(function(e,n){var i=new Image;i.onload=function(){e({width:this.width,height:this.height}),i=null},i.onerror=function(){e({width:0,height:0}),i=null},i.src=t});var t}).then(function(e){return r.width=e.width,r.height=e.height,Promise.resolve(r)})}},{key:"_checkImageType",value:function(e){var t="";return t=Us?e.url.slice(e.url.lastIndexOf(".")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1),Ah.indexOf(t.toLowerCase())>=0||vd(new _h({code:bh.MESSAGE_IMAGE_TYPES_LIMIT,message:"\u53ea\u5141\u8bb8\u4e0a\u4f20 jpg png jpeg gif bmp\u683c\u5f0f\u7684\u56fe\u7247"}))}},{key:"_checkImageMime",value:function(e){return!0}},{key:"_checkImageSize",value:function(e){var t;return 0===(t=Us?e.size:e.files[0].size)?vd(new _h({code:bh.MESSAGE_FILE_IS_EMPTY,message:"".concat(Ch)})):t<20971520||vd(new _h({code:bh.MESSAGE_IMAGE_SIZE_LIMIT,message:"".concat("\u56fe\u7247\u5927\u5c0f\u8d85\u8fc720M\uff0c\u65e0\u6cd5\u53d1\u9001")}))}},{key:"uploadFile",value:function(e){var t=null;return e.file?e.file.files[0].size>104857600?(t=new _h({code:bh.MESSAGE_FILE_SIZE_LIMIT,message:Ih}),vd(t)):0===e.file.files[0].size?(t=new _h({code:bh.MESSAGE_FILE_IS_EMPTY,message:"".concat(Ch)}),vd(t)):(this._setUploadFileType(255),this.upload(e)):(t=new _h({code:bh.MESSAGE_FILE_SELECT_FILE_FIRST,message:"\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u6587\u4ef6"}),vd(t))}},{key:"uploadVideo",value:function(e){return e.file.videoFile.size>104857600?vd(new _h({code:bh.MESSAGE_VIDEO_SIZE_LIMIT,message:"".concat("\u89c6\u9891\u5927\u5c0f\u8d85\u8fc7100M\uff0c\u65e0\u6cd5\u53d1\u9001")})):0===e.file.videoFile.size?vd(new _h({code:bh.MESSAGE_FILE_IS_EMPTY,message:"".concat(Ch)})):-1===xh.indexOf(e.file.videoFile.type)?vd(new _h({code:bh.MESSAGE_VIDEO_TYPES_LIMIT,message:"".concat("\u53ea\u5141\u8bb8\u4e0a\u4f20 mp4 \u683c\u5f0f\u7684\u89c6\u9891")})):(this._setUploadFileType(2),Us?this.handleVideoUpload({file:e.file.videoFile}):Gs?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise(function(n,i){t.upload(e).then(function(e){n(e)}).catch(function(){t.upload(e).then(function(e){n(e)}).catch(function(){i(new _h({code:bh.MESSAGE_VIDEO_UPLOAD_FAIL,message:"\u89c6\u9891\u4e0a\u4f20\u5931\u8d25"}))})})})}},{key:"uploadAudio",value:function(e){return e.file?e.file.size>20971520?vd(new _h({code:bh.MESSAGE_AUDIO_SIZE_LIMIT,message:"".concat("\u8bed\u97f3\u5927\u5c0f\u5927\u4e8e20M\uff0c\u65e0\u6cd5\u53d1\u9001")})):0===e.file.size?vd(new _h({code:bh.MESSAGE_FILE_IS_EMPTY,message:"".concat(Ch)})):(this._setUploadFileType(3),this.upload(e)):vd(new _h({code:bh.MESSAGE_AUDIO_UPLOAD_FAIL,message:"\u8bed\u97f3\u4e0a\u4f20\u5931\u8d25"}))}},{key:"upload",value:function(e){var t=this;if(!Ea(this._cosUploadMethod))return va.warn("UploadController.upload \u6ca1\u6709\u68c0\u6d4b\u5230\u4e0a\u4f20\u63d2\u4ef6\uff0c\u5c06\u65e0\u6cd5\u53d1\u9001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u3001\u6587\u4ef6\u7b49\u7c7b\u578b\u7684\u6d88\u606f\u3002\u8be6\u7ec6\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#registerPlugin"),vd(new _h({code:bh.COS_UNDETECTED,message:"\u672a\u68c0\u6d4b\u5230 COS \u4e0a\u4f20\u63d2\u4ef6"}));if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var n=new Dd("upload");va.time(Od);var i=Us?e.file:e.file.files[0];return new Promise(function(r,o){var s=Us?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),a=t;t._cosUploadMethod(s,function(e,s){var u=Object.create(null);if(s){if(e||wa(s.files)&&s.files[0].error){var c=new _h({code:bh.MESSAGE_FILE_UPLOAD_FAIL,message:Eh});return n.setError(c,!0,t.getNetworkType()).setEnd(),va.log("UploadController.upload failed, error:",s.files[0].error),403===s.files[0].error.statusCode&&(va.warn("UploadController.upload failed. cos AccessKeyId was invalid, regain auth key!"),t._getAuthorizationKey()),void o(c)}u.fileName=i.name,u.fileSize=i.size,u.fileType=i.type.slice(i.type.indexOf("/")+1).toLowerCase(),u.location=Us?s.Location:s.files[0].data.Location;var l=va.timeEnd(Od),h=a._formatFileSize(i.size),f=a._formatSpeed(1e3*i.size/l),d="size=".concat(h,",time=").concat(l,"ms,speed=").concat(f);return va.log("UploadController.upload success name=".concat(i.name,",").concat(d)),r(u),void n.setNetworkType(t.getNetworkType()).setText(d).setEnd()}var p=new _h({code:bh.MESSAGE_FILE_UPLOAD_FAIL,message:Eh});n.setError(p,!0,a.getNetworkType()).setEnd(),va.warn("UploadController.upload failed, error:",e),403===e.statusCode&&(va.warn("UploadController.upload failed. cos AccessKeyId was invalid, regain auth key!"),t._getAuthorizationKey()),o(p)})})}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,n=Us?e.file:e.file.files[0];return this._createCosOptionsPreSigUrl(e).then(function(e){return new Promise(function(i,r){var o=new Dd("upload");va.time(Od),t._cosUploadMethod(e,function(e,s){var a=Object.create(null);if(e||403===s.statusCode){var u=new _h({code:bh.MESSAGE_FILE_UPLOAD_FAIL,message:Eh});return o.setError(u,!0,t.getNetworkType()).setEnd(),va.log("UploadController._uploadWithPreSigUrl failed, error:",e),void r(u)}var c=s.data.location||"";0!==c.indexOf("https://")&&0!==c.indexOf("http://")||(c=c.split("//")[1]),a.fileName=n.name,a.fileSize=n.size,a.fileType=n.type.slice(n.type.indexOf("/")+1).toLowerCase(),a.location=c;var l=va.timeEnd(Od),h=t._formatFileSize(n.size),f=t._formatSpeed(1e3*n.size/l),d="size=".concat(h,",time=").concat(l,"ms,speed=").concat(f);va.log("UploadController._uploadWithPreSigUrl success name=".concat(n.name,",").concat(d)),o.setNetworkType(t.getNetworkType()).setText(d).setEnd(),i(a)})})})}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?(e/1024).toFixed(1)+"KB/s":(e/1048576).toFixed(1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=this._genFileName(e.file.files[0].name);return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(t),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){va.warn("onProgress callback error:",n),va.error(n)}},onFileFinish:function(e,t,n){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._genFileName(e.file.name),n=e.file.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(t),FilePath:n,onProgress:function(t){if(va.log(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){va.warn("onProgress callback error:",n),va.error(n)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t=this,n="",i="",r=0;return Us?(n=this._genFileName(e.file.name),i=e.file.url,r=1):(n=this._genFileName("".concat(za(999999))),i=e.file.files[0],r=0),this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:r,duration:this.duration}).then(function(r){return{url:r.uploadUrl,fileType:t.uploadFileType,fileName:n,resources:i,downloadUrl:r.downloadUrl,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){va.warn("onProgress callback error:",n),va.error(n)}}}})}},{key:"_genFileName",value:function(e){return"".concat(Za(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"reset",value:function(){this._timer&&(clearInterval(this._timer),this._timer=0)}}]),n}(ld),cv=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},i._bdh_download_server="grouptalk.c2c.qq.com",i._BDHBizID=10001,i._authKey="",i._expireTime=0,i.tim.innerEmitter.on(uf,i._getAuthKey,Bn(i)),i}return xn(n,[{key:"_getAuthKey",value:function(){var e=this;this.request({name:"bigDataHallwayAuthKey",action:"query"}).then(function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))})}},{key:"_isFromOlderVersion",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:"parseElements",value:function(e,t){if(!wa(e)||!t)return[];for(var n=[],i=null,r=0;r<e.length;r++)this._needParse(i=e[r])?n.push(this._parseElement(i,t)):n.push(e[r]);return n}},{key:"_needParse",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==wn.MSG_AUDIO&&e.type!==wn.MSG_FILE&&e.type!==wn.MSG_VIDEO)}},{key:"_parseElement",value:function(e,t){switch(e.type){case wn.MSG_AUDIO:return this._parseAudioElement(e,t);case wn.MSG_FILE:return this._parseFileElement(e,t);case wn.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:"_parseAudioElement",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:"_parseFileElement",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:"_parseVideoElement",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:"_genAudioUrl",value:function(e,t){return""===this._authKey?(va.warn("BigDataHallwayController._genAudioUrl no authKey!"),""):"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(this.tim.context.SDKAppID,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.SOUND,"&openid=").concat(t,"&ver=0")}},{key:"_genFileUrl",value:function(e,t,n){return""===this._authKey?(va.warn("BigDataHallwayController._genFileUrl no authKey!"),""):(n||(n="".concat(Math.floor(1e5*Math.random()),"-").concat(Date.now())),"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(this.tim.context.SDKAppID,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.FILE,"&openid=").concat(t,"&ver=0&filename=").concat(encodeURIComponent(n)))}},{key:"_genVideoUrl",value:function(e,t){return""===this._authKey?(va.warn("BigDataHallwayController._genVideoUrl no authKey!"),""):"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(this.tim.context.SDKAppID,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.VIDEO,"&openid=").concat(t,"&ver=0")}},{key:"reset",value:function(){this._authKey="",this.expireTime=0}}]),n}(ld),lv=function(){function e(t){Dn(this,e),this._table="timwebii",this._report=[]}return xn(e,[{key:"pushIn",value:function(e){va.debug("SSOLogBody.pushIn",this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;wa(e)&&0!==e.length&&(va.debug("SSOLogBody.backfill",this._report.length,e.length),(t=this._report).unshift.apply(t,Kn(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getTable",value:function(){return this._table}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),hv=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).TAG="im-ssolog-event",i._reportBody=new lv,i._version="2.10.2",i.MIN_THRESHOLD=20,i.MAX_THRESHOLD=100,i.WAITING_TIME=6e4,i.INTERVAL=2e4,i._timerID=0,i._resetLastReportTime(),i._startReportTimer(),i._retryCount=0,i.MAX_RETRY_COUNT=3,i.tim.innerEmitter.on(Uf,i._onLoginSuccess,Bn(i)),i}return xn(n,[{key:"reportAtOnce",value:function(){va.debug("EventStatController.reportAtOnce"),this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.tim.storage,n=t.getItem(this.TAG,!1);!eu(n)&&Ea(n.forEach)&&(va.log("EventStatController._onLoginSuccess get ssolog in storage, nums="+n.length),n.forEach(function(t){e._reportBody.pushIn(t)}),t.removeItem(this.TAG,!1))}},{key:"pushIn",value:function(e){e instanceof Dd&&(e.setCommonInfo({SDKAppID:this.tim.context.SDKAppID,version:this._version,tinyID:this.tim.context.tinyID,userID:this.tim.loginInfo.identifier,platform:this.getPlatform(),scene:this.tim.context.scene,instanceID:this.tim.context.instanceID}),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"_resetLastReportTime",value:function(){this._lastReportTime=Date.now()}},{key:"_startReportTimer",value:function(){var e=this;this._timerID=setInterval(function(){Date.now()<e._lastReportTime+e.WAITING_TIME||e._reportBody.isEmpty()||e._report()},this.INTERVAL)}},{key:"_stopReportTimer",value:function(){this._timerID>0&&(clearInterval(this._timerID),this._timerID=0)}},{key:"_report",value:function(){var e=this;if(!this._reportBody.isEmpty()){var t=this._reportBody.getLogsInMemory();this.request({name:"ssoEventStat",action:"create",param:{table:this._reportBody.getTable(),report:t}}).then(function(){e._resetLastReportTime(),e._retryCount>0&&(va.debug("EventStatController.report retry success"),e._retryCount=0)}).catch(function(n){if(va.warn("EventStatController.report, networkType:".concat(e.getNetworkType()," error:").concat(xa(n))),e._reportBody.backfill(t),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD||e._retryCount===e.MAX_RETRY_COUNT||0===e._timerID)return e._retryCount=0,void e._flushAtOnce();e._retryCount+=1})}}},{key:"_flushAtOnce",value:function(){var e=this.tim.storage,t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory();if(eu(t))va.log("EventStatController._flushAtOnce nums="+n.length),e.setItem(this.TAG,n,!0,!1);else{var i=n.concat(t);i.length>this.MAX_THRESHOLD&&(i=i.slice(0,this.MAX_THRESHOLD)),va.log("EventStatController._flushAtOnce nums="+i.length),e.setItem(this.TAG,i,!0,!1)}}},{key:"reset",value:function(){va.log("EventStatController.reset"),this._stopReportTimer(),this._report()}}]),n}(ld),fv="none",dv="online",pv=function(){function e(){Dn(this,e),this._networkType="",this.maxWaitTime=3e3}return xn(e,[{key:"start",value:function(){var e=this;Us?(Vs.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===fv?va.warn("NetMonitor no network, please check!"):va.info("NetMonitor networkType:".concat(t.networkType))}}),Vs.onNetworkStatusChange(this._onNetworkStatusChange.bind(this))):this._networkType=dv}},{key:"_onNetworkStatusChange",value:function(e){this._networkType=e.networkType,e.isConnected?va.info("NetMonitor networkType:".concat(e.networkType)):va.warn("NetMonitor no network, please check!")}},{key:"probe",value:function(){var e=this;return new Promise(function(t,n){if(Us)Vs.getNetworkType({success:function(n){e._networkType=n.networkType,n.networkType===fv?(va.warn("NetMonitor no network, please check!"),t([!1,n.networkType])):(va.info("NetMonitor networkType:".concat(n.networkType)),t([!0,n.networkType]))}});else if(window&&window.fetch)fetch("".concat(Ga(),"//web.sdk.qcloud.com/im/assets/speed.xml?random=").concat(Math.random())).then(function(e){t(e.ok?[!0,dv]:[!1,fv])}).catch(function(e){t([!1,fv])});else{var i=new XMLHttpRequest,r=setTimeout(function(){va.warn("NetMonitor fetch timeout. Probably no network, please check!"),i.abort(),e._networkType=fv,t([!1,fv])},e.maxWaitTime);i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(r),200===i.status||304===i.status?(this._networkType=dv,t([!0,dv])):(va.warn("NetMonitor fetch status:".concat(i.status,". Probably no network, please check!")),this._networkType=fv,t([!1,fv])))},i.open("GET","".concat(Ga(),"//web.sdk.qcloud.com/im/assets/speed.xml?random=").concat(Math.random())),i.send()}})}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){this._networkType=""}}]),e}(),gv=function(){function e(t){var n=this;Dn(this,e),wa(t)?(this._map=new Map,t.forEach(function(e){n._map.set(e,[])})):va.warn("AverageCalculator.constructor need keys")}return xn(e,[{key:"push",value:function(e,t){return!(Ca(e)||!this._map.has(e)||!ya(t)||(this._map.get(e).push(t),0))}},{key:"getSize",value:function(e){return Ca(e)||!this._map.has(e)?-1:this._map.get(e).length}},{key:"getAvg",value:function(e){if(Ca(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=t.length;if(0===n)return 0;var i=0;return t.forEach(function(e){i+=e}),t.length=0,this._map.set(e,[]),parseInt(i/n)}},{key:"getMax",value:function(e){return Ca(e)||!this._map.has(e)?-1:Math.max.apply(null,this._map.get(e))}},{key:"getMin",value:function(e){return Ca(e)||!this._map.has(e)?-1:Math.min.apply(null,this._map.get(e))}},{key:"reset",value:function(){this._map.forEach(function(e){e.length=0})}}]),e}(),vv=function(){function e(t){var n=this;Dn(this,e),wa(t)?(this._map=new Map,t.forEach(function(e){n._map.set(e,{totalCount:0,successCount:0})})):va.warn("SuccessRateCalculator.constructor need keys")}return xn(e,[{key:"addTotalCount",value:function(e){return!(Ca(e)||!this._map.has(e)||(this._map.get(e).totalCount+=1,0))}},{key:"addSuccessCount",value:function(e){return!(Ca(e)||!this._map.has(e)||(this._map.get(e).successCount+=1,0))}},{key:"getSuccessRate",value:function(e){if(Ca(e)||!this._map.has(e))return-1;var t=this._map.get(e);if(0===t.totalCount)return 1;var n=parseFloat((t.successCount/t.totalCount).toFixed(2));return n>1&&(n=1),t.totalCount=t.successCount=0,n}},{key:"getTotalCount",value:function(e){return Ca(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"reset",value:function(){this._map.forEach(function(e){e.totalCount=0,e.successCount=0})}}]),e}(),mv=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e)).TABLE="timwebsum",i.TAG="im-ssolog-sumstat",i._items=[yd,_d,bd,kd,wd,Cd,Sd,Ed,Id,Td],i._thresholdMap=new Map,i._thresholdMap.set(yd,100),i._thresholdMap.set(_d,150),i._thresholdMap.set(bd,15),i._thresholdMap.set(kd,6),i._thresholdMap.set(wd,6),i._thresholdMap.set(Cd,6),i._thresholdMap.set(Sd,6),i._thresholdMap.set(Ed,6),i._thresholdMap.set(Id,50),i._thresholdMap.set(Td,50),i._lpID="",i._platform=i.getPlatform(),i._lastReportTime=0,i._statInfoArr=[],i._retryCount=0,i._avgCalc=new gv(i._items),i._successRateCalc=new vv(i._items),i.tim.innerEmitter.on(Uf,i._onLoginSuccess,Bn(i)),i}return xn(n,[{key:"_onLoginSuccess",value:function(){var e=this,t=this.tim.storage,n=t.getItem(this.TAG,!1);!eu(n)&&Ea(n.forEach)&&(va.log("SumStatController._onLoginSuccess get sumstatlog in storage, nums="+n.length),n.forEach(function(t){e._statInfoArr.push(t)}),t.removeItem(this.TAG,!1))}},{key:"recordLongPollingID",value:function(e){this._lpID=e}},{key:"addTotalCount",value:function(e){this._successRateCalc.addTotalCount(e)?1===this._successRateCalc.getTotalCount(e)&&(this._lastReportTime=Date.now()):va.warn("SumStatController.addTotalCount invalid key:",e)}},{key:"addSuccessCount",value:function(e){this._successRateCalc.addSuccessCount(e)||va.warn("SumStatController.addSuccessCount invalid key:",e)}},{key:"addCost",value:function(e,t){this._avgCalc.push(e,t)?(va.debug("SumStatController.addCost",e,t,this._avgCalc.getSize(e)),this._avgCalc.getSize(e)>=this._thresholdMap.get(e)&&this._report(e)):va.warn("SumStatController.addCost invalid key or cost:",e,t)}},{key:"_getItemNum",value:function(e){switch(e){case yd:return 1;case _d:return 2;case bd:return 3;case Id:return 4;case Td:return 5;case kd:return 6;case wd:return 7;case Cd:return 8;case Sd:return 9;case Ed:return 10;default:return 100}}},{key:"_getStatInfo",value:function(e){var t=null;return this._avgCalc.getSize(e)>0&&(t={SDKAppID:"".concat(this.tim.context.SDKAppID),version:"".concat("2.10.2"),tinyID:this.tim.context.tinyID,userID:this.tim.loginInfo.identifier,item:this._getItemNum(e),lpID:e===yd?this._lpID:"",platform:this._platform,scene:this.tim.context.scene,networkType:this.getNetworkType(),total:this._successRateCalc.getTotalCount(e),successRate:this._successRateCalc.getSuccessRate(e),avg:this._avgCalc.getAvg(e),timespan:Date.now()-this._lastReportTime,time:Ra()}),t}},{key:"_report",value:function(e){var t=this,n=[],i=null;Ca(e)?this._items.forEach(function(e){null!==(i=t._getStatInfo(e))&&n.push(i)}):null!==(i=this._getStatInfo(e))&&n.push(i),va.debug("SumStatController._report",n),this._statInfoArr.length>0&&(n=n.concat(this.statInfoArr),this._statInfoArr=[]),this._doReport(n)}},{key:"_doReport",value:function(e){var t=this;eu(e)?va.warn("SumStatController._doReport statInfoArr is empty, do nothing"):this.request({name:"ssoSumStat",action:"create",param:{table:this.TABLE,report:e}}).then(function(){t._lastReportTime=Date.now(),t._retryCount>0&&(va.debug("SumStatController._doReport retry success"),t._retryCount=0)}).catch(function(n){va.warn("SumStatController._doReport, online:".concat(t.getNetworkType()," error:").concat(xa(n)),e),t._retryCount<=1?setTimeout(function(){va.info("SumStatController._doReport retry",e),t._retryCount+=1,t._doReport(e)},5e3):(t._retryCount=0,t._statInfoArr=t._statInfoArr.concat(e),t._flushAtOnce())})}},{key:"_flushAtOnce",value:function(){var e=this.tim.storage,t=e.getItem(this.TAG,!1),n=this._statInfoArr;if(eu(t))va.log("SumStatController._flushAtOnce nums="+n.length),e.setItem(this.TAG,n,!0,!1);else{var i=n.concat(t);i.length>10&&(i=i.slice(0,10)),va.log("SumStatController._flushAtOnce nums="+i.length),e.setItem(this.TAG,i,!0,!1)}this._statInfoArr=[]}},{key:"reset",value:function(){va.info("SumStatController.reset"),this._report(),this._avgCalc.reset(),this._successRateCalc.reset()}}]),n}(ld),yv=function(){function e(){Dn(this,e),this._funcMap=new Map}return xn(e,[{key:"defense",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var i=null;return this._funcMap.get(e).has(t)?i=this._funcMap.get(e).get(t):(i=this._pack(e,t,n),this._funcMap.get(e).set(t,i)),i}},{key:"defenseOnce",value:function(e,t){return"function"!=typeof t?null:this._pack(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(va.log("SafetyCallback.find: \u627e\u4e0d\u5230 func \u2014\u2014 ".concat(e,"/").concat(""!==t.name?t.name:"[anonymous]")),null):(va.log("SafetyCallback.find: \u627e\u4e0d\u5230 eventName-".concat(e," \u5bf9\u5e94\u7684 func")),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(s){var i=Object.values(kn).indexOf(e);if(-1!==i){var r=Object.keys(kn)[i];va.warn("\u63a5\u5165\u4fa7\u4e8b\u4ef6 TIM.EVENT.".concat(r," \u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\u903b\u8f91\u5b58\u5728\u95ee\u9898\uff0c\u8bf7\u68c0\u67e5\uff01"),s)}new Dd(zd).setText("eventName=".concat(e)).setMessage(s.message).setEnd()}}}}]),e}(),_v=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e))._maybeLostSequencesMap=new Map,i}return xn(n,[{key:"onMessageMaybeLost",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var i=this._maybeLostSequencesMap.get(e),r=0;r<n;r++)i.push(t+r);va.debug("MessageLossController.onMessageMaybeLost. maybeLostSequences:".concat(i))}},{key:"detectMessageLoss",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!eu(n)&&!eu(t)){var i=t.filter(function(e){return-1!==n.indexOf(e)});if(va.debug("MessageLossController.detectMessageLoss. matchedSequences:".concat(i)),n.length===i.length)va.info("MessageLossController.detectMessageLoss no message loss. conversationID=".concat(e));else{var r,o=n.filter(function(e){return-1===i.indexOf(e)}),s=o.length;s<=5?r=e+"-"+o.join("-"):(o.sort(function(e,t){return e-t}),r=e+" start:"+o[0]+" end:"+o[s-1]+" count:"+s),new Dd("messageLoss").setText(r).setNetworkType(this.getNetworkType()).setEnd(),va.warn("MessageLossController.detectMessageLoss message loss detected. conversationID:".concat(e," lostSequences:").concat(o))}n.length=0}}},{key:"reset",value:function(){va.log("MessageLossController.reset"),this._maybeLostSequencesMap.clear()}}]),n}(ld),bv=function(e){Ln(n,e);var t=qn(n);function n(e){var i;return Dn(this,n),(i=t.call(this,e))._request=Us?new Kp:new Wp,i}return xn(n,[{key:"sendMessage",value:function(e){var t=this,n=this._constructMessageInstance(e);if(null===n)return vd({code:bh.MESSAGE_SEND_FAIL,message:kh});var i=Date.now(),r=eu(e.GroupId)?"openim/sendmsg":"group_open_http_svc/send_group_msg",o=this.tim.context,s=o.identifier,a={url:"https://"+(!0===this.tim.context.oversea?"api.im.qcloud.com":"webim.tim.qq.com")+"/v4/"+r+"?platform=10&websdkappid=537048168&v=1.7.3&a2="+o.a2Key+"&tinyid="+o.tinyID+"&sdkappid="+o.SDKAppID+"&contentType=json&apn=1&reqtime="+Date.now()+"tjg_id="+this._generateTjgID(n),data:e,method:"POST"};this._addSendMessageTotalCount(n);var u=new Dd("sendComboMessage");return u.setText("".concat(this._generateTjgID(n),"-").concat(n.from,"-").concat(n.to,"-").concat(n.getElements().length)),this._request.request(a).then(function(e){var r=e.data,o=r.ErrorCode,a=r.ErrorInfo;if(0!==o)return u.setCode(o).setMessage(a).setNetworkType(t.getNetworkType()).setEnd(),n.status="fail",vd(new _h({code:o,message:a||kh,data:{message:n}}));t._addSendMessageSuccessCount(n,i),n.status="success";var c=e.data,l=c.MsgSeq;return n.time=c.MsgTime,l&&(n.sequence=l),n.generateMessageID(s),t.tim.messageController.pushToMessageList(n),t.emitInnerEvent(ff,{eventDataList:[{conversationID:n.conversationID,unreadCount:0,type:n.conversationType,subType:n.conversationSubType,lastMessage:n}]}),gd(n)}).catch(function(e){return t.probeNetwork().then(function(t){var n=Wn(t,2);u.setError(e,n[0],n[1]).setEnd()}),va.warn("ComboMessageController.sendMessage failed. error:",e),n.status="fail",vd(new _h({code:bh.MESSAGE_SEND_FAIL,message:kh,data:{message:n}}))})}},{key:"_constructMessageInstance",value:function(e){var t=null;try{var n=this.tim.context.identifier,i={};i.currentUser=n,i.from=e.From_Account||n,e.GroupId?(i.conversationID="".concat(wn.CONV_GROUP).concat(e.GroupId),i.conversationType=wn.CONV_GROUP,i.to=e.GroupId):e.To_Account&&(i.conversationID="".concat(wn.CONV_C2C).concat(e.To_Account),i.conversationType=wn.CONV_C2C,i.to=e.To_Account),i.time=e.MsgTimeStamp||0,i.random=e.Random||e.MsgRandom||0,i.priority=e.MsgPriority,(t=new qh(i)).status="unSend";for(var r,o=e.MsgBody.length,s=0;s<o;s++)"TIMTextElem"===(r=e.MsgBody[s]).MsgType?t.setTextElement(r.MsgContent.Text):"TIMCustomElem"===r.MsgType?t.setCustomElement({data:r.MsgContent.Data||"",description:r.MsgContent.Desc||"",extension:r.MsgContent.Ext||""}):"TIMFaceElem"===r.MsgType&&t.setFaceElement({index:r.MsgContent.Index,data:r.MsgContent.Data});var a=t.getElements();t.payload=a[0].content,t.type=a[0].type}catch(Iv){t=null,va.error("ComboMessageController._constructMessageInstance failed. error:",Iv)}return t}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=this.tim.sumStatController,i=Math.abs(Date.now()-t);n.addSuccessCount(bd),n.addCost(bd,i);var r=this._getSendMessageSpecifiedKey(e);r&&(n.addSuccessCount(r),n.addCost(r,i))}},{key:"_addSendMessageTotalCount",value:function(e){var t=this.tim.sumStatController;t.addTotalCount(bd);var n=this._getSendMessageSpecifiedKey(e);n&&t.addTotalCount(n)}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===wn.CONV_C2C)return kd;if(e.conversationType===wn.CONV_GROUP){var t=this.tim.groupController.getLocalGroupProfile(e.to);if(!t)return;var n=t.type;if(Ba(n))return wd;if(Ha(n))return Cd;if(qa(n))return Sd;if(Wa(n))return Ed}}},{key:"_generateTjgID",value:function(e){return this.tim.context.tinyID+"-"+e.random}},{key:"reset",value:function(){va.info("ComboMessageController.reset")}}]),n}(ld),kv=function(){function e(t){Dn(this,e);var n=new Dd("sdkConstruct");cd.mixin(this),this._initOptions(t),this._initMemberVariables(),this._initControllers(),this._initListener(),Dd.bindController(this.eventStatController),n.setText("instanceID=".concat(this.loginInfo.instanceID,"-oversea=").concat(this.loginInfo.oversea,"-mp=").concat(Us,"-ua=").concat(Bs)).setEnd(),va.info("SDK instanceID:".concat(this.loginInfo.instanceID," oversea:").concat(this.loginInfo.oversea," inMiniApp:").concat(Us,", SDKAppID:").concat(t.SDKAppID,", UserAgent:").concat(Bs)),this._safetyCallbackFactory=new yv}return xn(e,[{key:"login",value:function(e){return va.time(md),this._ssoLog=new Dd("sdkReady"),this.netMonitor.start(),this.loginInfo.identifier=e.identifier||e.userID,this.loginInfo.userSig=e.userSig,this.signController.login(this.loginInfo)}},{key:"logout",value:function(){var e=this.signController.logout();return this.resetSDK(),e}},{key:"on",value:function(e,t,n){e===kn.GROUP_SYSTEM_NOTICE_RECEIVED&&va.warn("\uff01\uff01\uff01TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0\u8d77\u5f03\u7528\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u4f53\u9a8c\uff0c\u8bf7\u5728 TIM.EVENT.MESSAGE_RECEIVED \u4e8b\u4ef6\u56de\u8c03\u5185\u63a5\u6536\u5904\u7406\u7fa4\u7cfb\u7edf\u901a\u77e5\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003\uff1ahttps://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/Message.html#.GroupSystemNoticePayload"),va.debug("on","eventName:".concat(e)),this.outerEmitter.on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"once",value:function(e,t,n){va.debug("once","eventName:".concat(e)),this.outerEmitter.once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:"off",value:function(e,t,n,i){va.debug("off","eventName:".concat(e));var r=this._safetyCallbackFactory.find(e,t);null!==r&&(this.outerEmitter.off(e,r,n,i),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){var t=this;this.plugins||(this.plugins={}),Object.keys(e).forEach(function(n){t.plugins[n]=e[n]}),new Dd("registerPlugin").setText("key=".concat(Object.keys(e))).setEnd()}},{key:"getPlugin",value:function(e){return this.plugins[e]||void 0}},{key:"setLogLevel",value:function(e){e<=0&&(console.log([""," ________  ______  __       __  __       __  ________  _______","|        \\|      \\|  \\     /  \\|  \\  _  |  \\|        \\|       \\"," \\$$$$$$$$ \\$$$$$$| $$\\   /  $$| $$ / \\ | $$| $$$$$$$$| $$$$$$$\\","   | $$     | $$  | $$$\\ /  $$$| $$/  $\\| $$| $$__    | $$__/ $$","   | $$     | $$  | $$$$\\  $$$$| $$  $$$\\ $$| $$  \\   | $$    $$","   | $$     | $$  | $$\\$$ $$ $$| $$ $$\\$$\\$$| $$$$$   | $$$$$$$\\","   | $$    _| $$_ | $$ \\$$$| $$| $$$$  \\$$$$| $$_____ | $$__/ $$","   | $$   |   $$ \\| $$  \\$ | $$| $$$    \\$$$| $$     \\| $$    $$","    \\$$    \\$$$$$$ \\$$      \\$$ \\$$      \\$$ \\$$$$$$$$ \\$$$$$$$","",""].join("\n")),console.log("%cIM \u667a\u80fd\u5ba2\u670d\uff0c\u968f\u65f6\u968f\u5730\u89e3\u51b3\u60a8\u7684\u95ee\u9898 \u2192_\u2192 https://cloud.tencent.com/act/event/smarty-service?from=im-doc","color:#ff0000"),console.log(["","\u53c2\u8003\u4ee5\u4e0b\u6587\u6863\uff0c\u4f1a\u66f4\u5feb\u89e3\u51b3\u95ee\u9898\u54e6\uff01(#^.^#)\n","SDK \u66f4\u65b0\u65e5\u5fd7: https://cloud.tencent.com/document/product/269/38492\n","SDK \u63a5\u53e3\u6587\u6863: https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html\n","\u5e38\u89c1\u95ee\u9898: https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/tutorial-01-faq.html\n","\u53cd\u9988\u95ee\u9898\uff1f\u6233\u6211\u63d0 issue: https://github.com/tencentyun/TIMSDK/issues\n","\u5982\u679c\u60a8\u9700\u8981\u5728\u751f\u4ea7\u73af\u5883\u5173\u95ed\u4e0a\u9762\u7684\u65e5\u5fd7\uff0c\u8bf7 tim.setLogLevel(1)\n"].join("\n"))),va.setLevel(e)}},{key:"destroy",value:function(){var e=this;return this.logout().finally(function(){e.outerEmitter.emit(kn.SDK_DESTROY,{SDKAppID:e.loginInfo.SDKAppID})})}},{key:"createTextMessage",value:function(e){return this.messageController.createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this.messageController.createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this.messageController.createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this.messageController.createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this.messageController.createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this.messageController.createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this.messageController.createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this.messageController.createFileMessage(e)}},{key:"createMergerMessage",value:function(e){return this.messageController.createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==wn.MSG_MERGER?vd(new _h({code:bh.MESSAGE_MERGER_TYPE_INVALID,message:"\u975e\u5408\u5e76\u6d88\u606f"})):eu(e.payload.downloadKey)?vd(new _h({code:bh.MESSAGE_MERGER_KEY_INVALID,message:"\u5408\u5e76\u6d88\u606f\u7684 messageKey \u65e0\u6548"})):this.messageController.downloadMergerMessage(e).catch(function(e){return vd(new _h({code:bh.MESSAGE_MERGER_DOWNLOAD_FAIL,message:"\u4e0b\u8f7d\u5408\u5e76\u6d88\u606f\u5931\u8d25"}))})}},{key:"createForwardMessage",value:function(e){return this.messageController.createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof qh?this.messageController.sendMessageInstance(e,t):vd(new _h({code:bh.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:"\u9700\u8981 Message \u7684\u5b9e\u4f8b"}))}},{key:"callExperimentalAPI",value:function(e,t){return"sendComboMessage"===e?this.comboMessageController.sendMessage(t):vd(new _h({code:bh.INVALID_OPERATION,message:"\u65e0\u6548\u64cd\u4f5c\uff0c\u5982\u8c03\u7528\u4e86\u672a\u5b9a\u4e49\u6216\u8005\u672a\u5b9e\u73b0\u7684\u65b9\u6cd5\u7b49"}))}},{key:"revokeMessage",value:function(e){return this.messageController.revokeMessage(e)}},{key:"resendMessage",value:function(e){return this.messageController.resendMessage(e)}},{key:"getMessageList",value:function(e){return this.messageController.getMessageList(e)}},{key:"setMessageRead",value:function(e){return this.messageController.setMessageRead(e)}},{key:"getConversationList",value:function(){return this.conversationController.getConversationList()}},{key:"getConversationProfile",value:function(e){return this.conversationController.getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this.conversationController.deleteConversation(e)}},{key:"getMyProfile",value:function(){return this.userController.getMyProfile()}},{key:"getUserProfile",value:function(e){return this.userController.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this.userController.updateMyProfile(e)}},{key:"getFriendList",value:function(){return this.userController.getFriendList()}},{key:"deleteFriend",value:function(e){return this.userController.deleteFriend(e)}},{key:"getBlacklist",value:function(){return this.userController.getBlacklist()}},{key:"addToBlacklist",value:function(e){return this.userController.addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this.userController.deleteBlacklist(e)}},{key:"getGroupList",value:function(e){return this.groupController.getGroupList(e)}},{key:"getGroupProfile",value:function(e){return this.groupController.getGroupProfile(e)}},{key:"createGroup",value:function(e){return this.groupController.createGroup(e)}},{key:"dismissGroup",value:function(e){return this.groupController.dismissGroup(e)}},{key:"updateGroupProfile",value:function(e){return this.groupController.updateGroupProfile(e)}},{key:"joinGroup",value:function(e){return this.groupController.joinGroup(e)}},{key:"quitGroup",value:function(e){return this.groupController.quitGroup(e)}},{key:"searchGroupByID",value:function(e){return this.groupController.searchGroupByID(e)}},{key:"changeGroupOwner",value:function(e){return this.groupController.changeGroupOwner(e)}},{key:"handleGroupApplication",value:function(e){return this.groupController.handleGroupApplication(e)}},{key:"setMessageRemindType",value:function(e){return this.groupController.setMessageRemindType(e)}},{key:"getGroupMemberList",value:function(e){return this.groupController.getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this.groupController.getGroupMemberProfile(e)}},{key:"getGroupOnlineMemberCount",value:function(e){return this.groupController.getGroupOnlineMemberCount(e)}},{key:"addGroupMember",value:function(e){return this.groupController.addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this.groupController.deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this.groupController.setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this.groupController.setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this.groupController.setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this.groupController.setGroupMemberCustomField(e)}},{key:"_initOptions",value:function(e){this.plugins={},this._sdkReloadFlag=!1;var t=e.SDKAppID||0,n=za();this.context={SDKAppID:t,accountType:n},this.loginInfo={SDKAppID:t,accountType:n,identifier:null,userSig:null,unlimitedAVChatRoom:e.unlimitedAVChatRoom||!1,scene:e.scene||"",oversea:e.oversea||!1,avchatroomIDList:[],instanceID:Za()},this.options={runLoopNetType:e.runLoopNetType||2,enablePointer:e.enablePointer||!1}}},{key:"_initMemberVariables",value:function(){this.innerEmitter=new ev,this.outerEmitter=new ev,function(e){pd=e}(this.outerEmitter),this.packageConfig=new nv(this),this.storage=new Qg(this),this.netMonitor=new pv,this.outerEmitter._emit=this.outerEmitter.emit,this.outerEmitter.emit=(function(e,t){this.outerEmitter._emit.apply(this.outerEmitter,[arguments[0],{name:arguments[0],data:arguments[1]}])}).bind(this),this.innerEmitter._emit=this.innerEmitter.emit,this.innerEmitter.emit=(function(e,t){var n;ka(arguments[1])&&arguments[1].data?(va.warn("inner eventData has data property, please check!"),n=[e,{name:arguments[0],data:arguments[1].data}]):n=[e,{name:arguments[0],data:arguments[1]}],this.innerEmitter._emit.apply(this.innerEmitter,n)}).bind(this)}},{key:"_initControllers",value:function(){this.exceptionController=new eg(this),this.connectionController=new Qp(this),this.contextController=new fd(this),this.context=this.contextController.getContext(),this.signController=new Ld(this),this.messageController=new Ug(this),this.comboMessageController=new bv(this),this.conversationController=new bg(this),this.userController=new cg(this),this.groupController=new Zg(this),this.notificationController=new av(this),this.bigDataHallwayController=new cv(this),this.statusController=new Xg(this),this.uploadController=new uv(this),this.messageLossController=new _v(this),this.eventStatController=new hv(this),this.sumStatController=new mv(this),this._initReadyListener()}},{key:"_initListener",value:function(){var e=this;if(this.innerEmitter.on(Zf,this._onSDKReload,this),Us&&"function"==typeof Vs.onAppShow&&"function"==typeof Vs.onAppHide){var t=null;Vs.onAppHide(function(){t=new Dd("mpHideToShow")}),Vs.onAppShow(function(){null!==t&&t.setNetworkType(e.netMonitor.getNetworkType()).setEnd()})}}},{key:"_initReadyListener",value:function(){for(var e=this,t=this.readyList,n=0,i=t.length;n<i;n++)this[t[n]].ready(function(){return e._readyHandle()})}},{key:"_onSDKReload",value:function(){var e=this;va.log("sdk reloading..."),this.resetSDK(),this.login(this.loginInfo).then(function(t){e._sdkReloadFlag=!0})}},{key:"resetSDK",value:function(){var e=this;this.initList.forEach(function(t){e[t].reset&&e[t].reset()}),this.netMonitor.reset(),this.storage.reset(),this.resetReady(),this._initReadyListener(),this.outerEmitter.emit(kn.SDK_NOT_READY)}},{key:"_readyHandle",value:function(){for(var e=this.readyList,t=!0,n=0,i=e.length;n<i;n++)if(!this[e[n]].isReady()){t=!1;break}if(t){var r=va.timeEnd(md);va.warn("SDK is ready. cost=".concat(r,"ms")),this.triggerReady(),this.innerEmitter.emit($f),this.outerEmitter.emit(kn.SDK_READY),this._sdkReloadFlag&&(this.outerEmitter.emit(kn.SDK_RELOAD),this.groupController.AVChatRoomHandler.joinAVChatRoomSilently(),this._sdkReloadFlag=!1),this._ssoLog.setNetworkType(this.netMonitor.getNetworkType()).setText(r).setEnd()}}}]),e}();kv.prototype.readyList=["conversationController"],kv.prototype.initList=["exceptionController","connectionController","signController","contextController","messageController","comboMessageController","conversationController","userController","groupController","notificationController","eventStatController","sumStatController","messageLossController","statusController"];var wv={login:"login",logout:"logout",destroy:"destroy",on:"on",off:"off",ready:"ready",setLogLevel:"setLogLevel",joinGroup:"joinGroup",quitGroup:"quitGroup",registerPlugin:"registerPlugin",getGroupOnlineMemberCount:"getGroupOnlineMemberCount"};function Cv(e,t){return!(!e.isReady()&&void 0===wv[t]&&(e.innerEmitter.emit(Bf,new _h({code:bh.SDK_IS_NOT_READY,message:"".concat(t," ").concat(Dh,"\uff0c\u8bf7\u53c2\u8003 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/module-EVENT.html#.SDK_READY")})),1))}var Sv={},Ev={create:function(e){if(e.SDKAppID&&Sv[e.SDKAppID])return Sv[e.SDKAppID];va.log("TIM.create");var t=new kv(e);t.on(kn.SDK_DESTROY,function(e){Sv[e.data.SDKAppID]=null,delete Sv[e.data.SDKAppID]});var n=function(e){var t=Object.create(null);return Object.keys(Qh).forEach(function(n){if(e[n]){var i=Qh[n],r=new ei;t[i]=function(){var t=Array.from(arguments);return r.use(function(t,i){return Cv(e,n)?i():vd(new _h({code:bh.SDK_IS_NOT_READY,message:"".concat(n," ").concat(Dh,"\u3002")}))}).use(function(e,t){if(!0===tu(e,Jh[n],i))return t()}).use(function(t,i){return e[n].apply(e,t)}),r.run(t)}}}),t}(t);return Sv[e.SDKAppID]=n,va.log("TIM.create ok"),n}};return Ev.TYPES=wn,Ev.EVENT=kn,Ev.VERSION="2.10.2",va.log("TIM.VERSION: ".concat(Ev.VERSION)),Ev}()},9037:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var a="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync,u="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync,c="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync,l="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync,h="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync,f=a||u||c||l||h,d=u?qq:c?tt:l?swan:h?my:a?wx:{},p=function(t){if("object"!==e(t)||null===t)return!1;var n=Object.getPrototypeOf(t);if(null===n)return!0;for(var i=n;null!==Object.getPrototypeOf(i);)i=Object.getPrototypeOf(i);return n===i};function g(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(p(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}var v=function(){function e(){t(this,e),this.downloadUrl=""}return i(e,[{key:"request",value:function(e,t){var n=this;this.downloadUrl=e.downloadUrl||"";var i=(e.method||"PUT").toUpperCase(),r=e.url;if(e.qs){var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=";return g(e)?"":p(e)?Object.keys(e).map(function(i){var r=encodeURIComponent(i)+n;return Array.isArray(e[i])?e[i].map(function(e){return r+encodeURIComponent(e)}).join(t):r+encodeURIComponent(e[i])}).filter(Boolean).join(t):void 0}(e.qs);o&&(r+="".concat(-1===r.indexOf("?")?"?":"&").concat(o))}var s=new XMLHttpRequest;s.open(i,r,!0),s.responseType=e.dataType||"text";var a=e.headers||{};if(!g(a))for(var u in a)a.hasOwnProperty(u)&&"content-length"!==u.toLowerCase()&&"user-agent"!==u.toLowerCase()&&"origin"!==u.toLowerCase()&&"host"!==u.toLowerCase()&&s.setRequestHeader(u,a[u]);return s.onload=function(){t(null,n._xhrRes(s,n._xhrBody(s)))},s.onerror=function(e){var i=n._xhrBody(s);if(i)t(e,n._xhrRes(s,i));else{var r=s.statusText;r||0!==s.status||(r="CORS blocked or network error"),t(r,n._xhrRes(s,i))}},e.onProgress&&s.upload&&(s.upload.onprogress=function(t){var n=t.total,i=t.loaded,r=Math.floor(100*i/n);e.onProgress({total:n,loaded:i,percent:(r>=100?100:r)/100})}),s.send(e.resources),s}},{key:"_xhrRes",value:function(e,t){var n={};return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){if(e){var t=e.indexOf(":"),i=e.substr(0,t).trim().toLowerCase(),r=e.substr(t+1).trim();n[i]=r}}),{statusCode:e.status,statusMessage:e.statusText,headers:n,data:t}}},{key:"_xhrBody",value:function(e){return 200===e.status&&e.responseURL&&this.downloadUrl?{location:this.downloadUrl}:{response:e.responseText}}}]),e}(),m=["unknown","image","video","audio","log"],y=function(){function e(){t(this,e),this.downloadUrl=""}return i(e,[{key:"request",value:function(e,t){var n=this,i=e.resources,r=void 0===i?"":i,o=e.headers,a=void 0===o?{}:o,u=e.url,c=e.downloadUrl,l=void 0===c?"":c;this.downloadUrl=l;var f=null,p="",g=l.match(/^(https?:\/\/[^/]+\/)([^/]*\/?)(.*)$/);p=(p=decodeURIComponent(g[3])).indexOf("?")>-1?p.split("?")[0]:p,a["Content-Type"]="multipart/form-data";var v={url:u,header:a,name:"file",filePath:r,formData:{key:p,success_action_status:200,"Content-Type":""},timeout:e.timeout||3e5};return h&&(v=s(s({},function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(v,["name"])),{},{fileName:"file",fileType:m[e.fileType]})),(f=d.uploadFile(s(s({},v),{},{success:function(e){n._handleResponse(e,t)},fail:function(e){n._handleResponse(e,t)}}))).onProgressUpdate(function(t){e.onProgress&&e.onProgress({total:t.totalBytesExpectedToSend,loaded:t.totalBytesSent,percent:Math.floor(t.progress)/100})}),f}},{key:"_handleResponse",value:function(e,t){var n=e.header,i={};if(n)for(var r in n)n.hasOwnProperty(r)&&(i[r.toLowerCase()]=n[r]);var o=+e.statusCode;200===o?t(null,{statusCode:o,headers:i,data:s(s({},e.data),{},{location:this.downloadUrl})}):t(e,{statusCode:o,headers:i,data:void 0})}}]),e}();return function(){function e(){t(this,e),this.retry=1,this.tryCount=0,this.systemClockOffset=0,this.httpRequest=f?new y:new v}return i(e,[{key:"uploadFile",value:function(e,t){var n=this;return this.httpRequest.request(e,function(i,r){i&&n.tryCount<n.retry&&n.allowRetry(i)?(n.tryCount++,n.uploadFile(e,t)):(n.tryCount=0,t(i,r))})}},{key:"allowRetry",value:function(e){var t=!1,n=!1;if(e){var i=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var r=e.error&&e.error.Code;("RequestTimeTooSkewed"===r||"AccessDenied"===r&&"Request has expired"===(e.error&&e.error.Message))&&(n=!0)}catch(a){}if(n&&i){var o=Date.now(),s=Date.parse(i);Math.abs(o+this.systemClockOffset-s)>=3e4&&(this.systemClockOffset=s-o,t=!0)}else 5===Math.floor(e.statusCode/100)&&(t=!0)}return t}}]),e}()}()},6354:function(e){e.exports=function(){"use strict";var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,r=!1;function o(){r=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=e.length;i<o;++i)t[i]=e[i],n[e.charCodeAt(i)]=i;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63}function s(e,n,i){for(var r,o=[],s=n;s<i;s+=3)o.push(t[(r=(e[s]<<16)+(e[s+1]<<8)+e[s+2])>>18&63]+t[r>>12&63]+t[r>>6&63]+t[63&r]);return o.join("")}function a(e){var n;r||o();for(var i=e.length,a=i%3,u="",c=[],l=0,h=i-a;l<h;l+=16383)c.push(s(e,l,l+16383>h?h:l+16383));return 1===a?(u+=t[(n=e[i-1])>>2],u+=t[n<<4&63],u+="=="):2===a&&(u+=t[(n=(e[i-2]<<8)+e[i-1])>>10],u+=t[n>>4&63],u+=t[n<<2&63],u+="="),c.push(u),c.join("")}function u(e,t,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?r-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=c}return(d?-1:1)*s*Math.pow(2,o-i)}function c(e,t,n,i,r,o){var s,a,u,c=8*o-r-1,l=(1<<c)-1,h=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,r),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;e[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*g}var l={}.toString,h=Array.isArray||function(e){return"[object Array]"==l.call(e)};function f(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(e,t){if(f()<t)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=p.prototype:(null===e&&(e=new p(t)),e.length=t),e}function p(e,t,n){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return m(this,e)}return g(this,e,t,n)}function g(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),p.TYPED_ARRAY_SUPPORT?(e=t).__proto__=p.prototype:e=y(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|k(t,n),r=(e=d(e,i)).write(t,n);return r!==i&&(e=e.slice(0,r)),e}(e,t,n):function(e,t){if(b(t)){var n=0|_(t.length);return 0===(e=d(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?d(e,0):y(e,t);if("Buffer"===t.type&&h(t.data))return y(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function v(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function m(e,t){if(v(t),e=d(e,t<0?0:0|_(t)),!p.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function y(e,t){var n=t.length<0?0:0|_(t.length);e=d(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function _(e){if(e>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|e}function b(e){return!(null==e||!e._isBuffer)}function k(e,t){if(b(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return Y(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return z(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function C(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function S(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=p.from(t,i)),b(t))return 0===t.length?-1:E(e,t,n,i,r);if("number"==typeof t)return t&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,i,r){var o,s=1,a=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function I(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function T(e,t,n,i){return Z(Y(t,e.length-n),e,n,i)}function M(e,t,n,i){return Z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function O(e,t,n,i){return M(e,t,n,i)}function D(e,t,n,i){return Z($(t),e,n,i)}function A(e,t,n,i){return Z(function(e,t){for(var n,i,r=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(n=e.charCodeAt(o))>>8,r.push(n%256),r.push(i);return r}(t,e.length-n),e,n,i)}function x(e,t,n){return a(0===t&&n===e.length?e:e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,s,a,u,c=e[r],l=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[r+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:s=e[r+2],128==(192&(o=e[r+1]))&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[r+2],a=e[r+3],128==(192&(o=e[r+1]))&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(i.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),i.push(l),r+=h}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=P));return n}(i)}p.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT,p.poolSize=8192,p._augment=function(e){return e.__proto__=p.prototype,e},p.from=function(e,t,n){return g(null,e,t,n)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array),p.alloc=function(e,t,n){return function(e,t,n,i){return v(t),t<=0?d(e,t):void 0!==n?"string"==typeof i?d(e,t).fill(n,i):d(e,t).fill(n):d(e,t)}(null,e,t,n)},p.allocUnsafe=function(e){return m(null,e)},p.allocUnsafeSlow=function(e){return m(null,e)},p.isBuffer=X,p.compare=function(e,t){if(!b(e)||!b(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!h(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=p.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!b(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},p.byteLength=k,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},p.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):w.apply(this,arguments)},p.prototype.equals=function(e){if(!b(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},p.prototype.compare=function(e,t,n,i,r){if(!b(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(i,r),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},p.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return D(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function z(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function L(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function N(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=K(e[o]);return r}function F(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function U(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function G(e,t,n,i,r,o){if(!b(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function V(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function j(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function B(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,i,r){return r||B(e,0,n,4),c(e,t,n,i,23,4),n+4}function q(e,t,n,i,r){return r||B(e,0,n,8),c(e,t,n,i,52,8),n+8}p.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),p.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=p.prototype;else{var r=t-e;n=new p(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},p.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},p.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},p.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},p.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},p.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),u(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),u(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),u(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),u(this,e,!1,52,8)},p.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||G(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},p.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||G(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},p.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,1,255,0),p.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},p.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);G(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},p.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);G(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,1,127,-128),p.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),p.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},p.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!p.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},p.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=b(e)?e:Y(new p(e,i).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return function(e){var t,s,a,u,c,l;r||o();var h=e.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l=new i(3*h/4-(c="="===e[h-2]?2:"="===e[h-1]?1:0)),a=c>0?h-4:h;var f=0;for(t=0,s=0;t<a;t+=4,s+=3)u=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],l[f++]=u>>16&255,l[f++]=u>>8&255,l[f++]=255&u;return 2===c?(u=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,l[f++]=255&u):1===c&&(u=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,l[f++]=u>>8&255,l[f++]=255&u),l}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e){return null!=e&&(!!e._isBuffer||J(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&J(e.slice(0,0))}(e))}function J(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ee(e,t){return e(t={exports:{}},t.exports),t.exports}var te,ne,ie,re="object",oe=function(e){return e&&e.Math==Math&&e},se=oe(typeof globalThis==re&&globalThis)||oe(typeof window==re&&window)||oe(typeof self==re&&self)||oe(typeof Q==re&&Q)||Function("return this")(),ae=function(e){try{return!!e()}catch(e){return!0}},ue=!ae(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),ce={}.propertyIsEnumerable,le=Object.getOwnPropertyDescriptor,he={f:le&&!ce.call({1:2},1)?function(e){var t=le(this,e);return!!t&&t.enumerable}:ce},fe=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},de={}.toString,pe=function(e){return de.call(e).slice(8,-1)},ge="".split,ve=ae(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==pe(e)?ge.call(e,""):Object(e)}:Object,me=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},ye=function(e){return ve(me(e))},_e=function(e){return"object"==typeof e?null!==e:"function"==typeof e},be=function(e,t){if(!_e(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!_e(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!_e(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!_e(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},ke={}.hasOwnProperty,we=function(e,t){return ke.call(e,t)},Ce=se.document,Se=_e(Ce)&&_e(Ce.createElement),Ee=function(e){return Se?Ce.createElement(e):{}},Ie=!ue&&!ae(function(){return 7!=Object.defineProperty(Ee("div"),"a",{get:function(){return 7}}).a}),Te=Object.getOwnPropertyDescriptor,Me={f:ue?Te:function(e,t){if(e=ye(e),t=be(t,!0),Ie)try{return Te(e,t)}catch(e){}if(we(e,t))return fe(!he.f.call(e,t),e[t])}},Oe=function(e){if(!_e(e))throw TypeError(String(e)+" is not an object");return e},De=Object.defineProperty,Ae={f:ue?De:function(e,t,n){if(Oe(e),t=be(t,!0),Oe(n),Ie)try{return De(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},xe=ue?function(e,t,n){return Ae.f(e,t,fe(1,n))}:function(e,t,n){return e[t]=n,e},Re=function(e,t){try{xe(se,e,t)}catch(n){se[e]=t}return t},Pe=ee(function(e){var t=se["__core-js_shared__"]||Re("__core-js_shared__",{});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),ze=Pe("native-function-to-string",Function.toString),Le=se.WeakMap,Ne="function"==typeof Le&&/native code/.test(ze.call(Le)),Fe=0,Ue=Math.random(),Ge=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Fe+Ue).toString(36)},Ve=Pe("keys"),je=function(e){return Ve[e]||(Ve[e]=Ge(e))},Be={};if(Ne){var He=new(0,se.WeakMap),qe=He.get,We=He.has,Ke=He.set;te=function(e,t){return Ke.call(He,e,t),t},ne=function(e){return qe.call(He,e)||{}},ie=function(e){return We.call(He,e)}}else{var Ye=je("state");Be[Ye]=!0,te=function(e,t){return xe(e,Ye,t),t},ne=function(e){return we(e,Ye)?e[Ye]:{}},ie=function(e){return we(e,Ye)}}var $e={set:te,get:ne,has:ie,enforce:function(e){return ie(e)?ne(e):te(e,{})},getterFor:function(e){return function(t){var n;if(!_e(t)||(n=ne(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ze=ee(function(e){var t=$e.get,n=$e.enforce,i=String(ze).split("toString");Pe("inspectSource",function(e){return ze.call(e)}),(e.exports=function(e,t,r,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof t||we(r,"name")||xe(r,"name",t),n(r).source=i.join("string"==typeof t?t:"")),e!==se?(s?!u&&e[t]&&(a=!0):delete e[t],a?e[t]=r:xe(e,t,r)):a?e[t]=r:Re(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||ze.call(this)})}),Xe=se,Je=function(e){return"function"==typeof e?e:void 0},Qe=function(e,t){return arguments.length<2?Je(Xe[e])||Je(se[e]):Xe[e]&&Xe[e][t]||se[e]&&se[e][t]},et=Math.ceil,tt=Math.floor,nt=function(e){return isNaN(e=+e)?0:(e>0?tt:et)(e)},it=Math.min,rt=function(e){return e>0?it(nt(e),9007199254740991):0},ot=Math.max,st=Math.min,at=function(e){return function(t,n,i){var r,o=ye(t),s=rt(o.length),a=function(e,t){var n=nt(e);return n<0?ot(n+t,0):st(n,t)}(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},ut=(at(!0),at(!1)),ct=function(e,t){var n,i=ye(e),r=0,o=[];for(n in i)!we(Be,n)&&we(i,n)&&o.push(n);for(;t.length>r;)we(i,n=t[r++])&&(~ut(o,n)||o.push(n));return o},lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=lt.concat("length","prototype"),ft={f:Object.getOwnPropertyNames||function(e){return ct(e,ht)}},dt={f:Object.getOwnPropertySymbols},pt=Qe("Reflect","ownKeys")||function(e){var t=ft.f(Oe(e)),n=dt.f;return n?t.concat(n(e)):t},gt=function(e,t){for(var n=pt(t),i=Ae.f,r=Me.f,o=0;o<n.length;o++){var s=n[o];we(e,s)||i(e,s,r(t,s))}},vt=/#|\.prototype\./,mt=function(e,t){var n=_t[yt(e)];return n==kt||n!=bt&&("function"==typeof t?ae(t):!!t)},yt=mt.normalize=function(e){return String(e).replace(vt,".").toLowerCase()},_t=mt.data={},bt=mt.NATIVE="N",kt=mt.POLYFILL="P",wt=mt,Ct=Me.f,St=function(e,t){var n,i,r,o,s,a=e.target,u=e.global,c=e.stat;if(n=u?se:c?se[a]||Re(a,{}):(se[a]||{}).prototype)for(i in t){if(o=t[i],r=e.noTargetGet?(s=Ct(n,i))&&s.value:n[i],!wt(u?i:a+(c?".":"#")+i,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;gt(o,r)}(e.sham||r&&r.sham)&&xe(o,"sham",!0),Ze(n,i,o,e)}};St({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Et=Date.prototype,It=Et.toString,Tt=Et.getTime;new Date(NaN)+""!="Invalid Date"&&Ze(Et,"toString",function(){var e=Tt.call(this);return e==e?It.call(this):"Invalid Date"});var Mt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return Oe(n),function(e){if(!_e(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),Ot=function(e,t,n){var i,r;return Mt&&"function"==typeof(i=t.constructor)&&i!==n&&_e(r=i.prototype)&&r!==n.prototype&&Mt(e,r),e},Dt=Object.keys||function(e){return ct(e,lt)},At=ue?Object.defineProperties:function(e,t){Oe(e);for(var n,i=Dt(t),r=i.length,o=0;r>o;)Ae.f(e,n=i[o++],t[n]);return e},xt=Qe("document","documentElement"),Rt=je("IE_PROTO"),Pt=function(){},zt=function(){var e,t=Ee("iframe"),n=lt.length;for(t.style.display="none",xt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),zt=e.F;n--;)delete zt.prototype[lt[n]];return zt()},Lt=Object.create||function(e,t){var n;return null!==e?(Pt.prototype=Oe(e),n=new Pt,Pt.prototype=null,n[Rt]=e):n=zt(),void 0===t?n:At(n,t)};Be[Rt]=!0;var Nt="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",Ft=RegExp("^"+Nt+Nt+"*"),Ut=RegExp(Nt+Nt+"*$"),Gt=function(e){return function(t){var n=String(me(t));return 1&e&&(n=n.replace(Ft,"")),2&e&&(n=n.replace(Ut,"")),n}},Vt={start:Gt(1),end:Gt(2),trim:Gt(3)},jt=ft.f,Bt=Me.f,Ht=Ae.f,qt=Vt.trim,Wt=se.Number,Kt=Wt.prototype,Yt="Number"==pe(Lt(Kt)),$t=function(e){var t,n,i,r,o,s,a,u,c=be(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=qt(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(s=(o=c.slice(2)).length,a=0;a<s;a++)if((u=o.charCodeAt(a))<48||u>r)return NaN;return parseInt(o,i)}return+c};if(wt("Number",!Wt(" 0o1")||!Wt("0b1")||Wt("+0x1"))){for(var Zt,Xt=function e(t){var n=arguments.length<1?0:t,i=this;return i instanceof e&&(Yt?ae(function(){Kt.valueOf.call(i)}):"Number"!=pe(i))?Ot(new Wt($t(n)),i,e):$t(n)},Jt=ue?jt(Wt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Qt=0;Jt.length>Qt;Qt++)we(Wt,Zt=Jt[Qt])&&!we(Xt,Zt)&&Ht(Xt,Zt,Bt(Wt,Zt));Xt.prototype=Kt,Kt.constructor=Xt,Ze(se,"Number",Xt)}var en=!!Object.getOwnPropertySymbols&&!ae(function(){return!String(Symbol())}),tn=se.Symbol,nn=Pe("wks"),rn=function(e){return nn[e]||(nn[e]=en&&tn[e]||(en?tn:Ge)("Symbol."+e))},on=rn("toStringTag"),sn="Arguments"==pe(function(){return arguments}()),an={};an[rn("toStringTag")]="z";var un="[object z]"!==String(an)?function(){return"[object "+function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),on))?n:sn?pe(t):"Object"==(i=pe(t))&&"function"==typeof t.callee?"Arguments":i}(this)+"]"}:an.toString,cn=Object.prototype;un!==cn.toString&&Ze(cn,"toString",un,{unsafe:!0});var ln,hn,fn=function(){var e=Oe(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},dn=RegExp.prototype.exec,pn=String.prototype.replace,gn=dn,vn=(hn=/b*/g,dn.call(ln=/a/,"a"),dn.call(hn,"a"),0!==ln.lastIndex||0!==hn.lastIndex),mn=void 0!==/()??/.exec("")[1];(vn||mn)&&(gn=function(e){var t,n,i,r,o=this;return mn&&(n=new RegExp("^"+o.source+"$(?!\\s)",fn.call(o))),vn&&(t=o.lastIndex),i=dn.call(o,e),vn&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),mn&&i&&i.length>1&&pn.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i});var yn=gn;St({target:"RegExp",proto:!0,forced:/./.exec!==yn},{exec:yn});var _n=RegExp.prototype,bn=_n.toString;(ae(function(){return"/a/b"!=bn.call({source:"a",flags:"b"})})||"toString"!=bn.name)&&Ze(RegExp.prototype,"toString",function(){var e=Oe(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in _n)?fn.call(e):n)},{unsafe:!0}),rn("species");var kn=!ae(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),wn=(ae(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),function(e){return function(t,n){var i,r,o=String(me(t)),s=nt(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):i:e?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}}),Cn=(wn(!1),wn(!0)),Sn=function(e,t,n){return t+(n?Cn(e,t).length:1)},En=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==pe(e))throw TypeError("RegExp#exec called on incompatible receiver");return yn.call(e,t)},In=Math.max,Tn=Math.min,Mn=Math.floor,On=/\$([$&'`]|\d\d?|<[^>]*>)/g,Dn=/\$([$&'`]|\d\d?)/g;function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,n,i){var r=rn(e),o=!ae(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),s=o&&!ae(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},t[r](""),!e});if(!o||!s||!kn){var a=/./[r],u=function(e,t,n){return[function(n,i){var r=me(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,i):t.call(String(r),n,i)},function(e,r){var o=n(t,e,this,r);if(o.done)return o.value;var s=Oe(e),a=String(this),u="function"==typeof r;u||(r=String(r));var c=s.global;if(c){var l=s.unicode;s.lastIndex=0}for(var h=[];;){var f=En(s,a);if(null===f)break;if(h.push(f),!c)break;""===String(f[0])&&(s.lastIndex=Sn(a,rt(s.lastIndex),l))}for(var d,p="",g=0,v=0;v<h.length;v++){f=h[v];for(var m=String(f[0]),y=In(Tn(nt(f.index),a.length),0),_=[],b=1;b<f.length;b++)_.push(void 0===(d=f[b])?d:String(d));var k=f.groups;if(u){var w=[m].concat(_,y,a);void 0!==k&&w.push(k);var C=String(r.apply(void 0,w))}else C=i(m,a,y,_,k,r);y>=g&&(p+=a.slice(g,y)+C,g=y+m.length)}return p+a.slice(g)}];function i(e,n,i,r,o,s){var a=i+e.length,u=r.length,c=Dn;return void 0!==o&&(o=function(e){return Object(me(e))}(o),c=On),t.call(s,c,function(t,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(a);case"<":c=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return t;if(l>u){var h=Mn(l/10);return 0===h?t:h<=u?void 0===r[h-1]?s.charAt(1):r[h-1]+s.charAt(1):t}c=r[l-1]}return void 0===c?"":c})}}(r,""[e],function(e,t,n,i,r){return t.exec===yn?o&&!r?{done:!0,value:a.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),c=u[1];Ze(String.prototype,e,u[0]),Ze(RegExp.prototype,r,function(e,t){return c.call(e,this,t)})}}("replace");var xn=ee(function(e,t){var n;e.exports=n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},r=i.lib={},o=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++)t[i+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(i+o)%4*8;else for(o=0;o<r;o+=4)t[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,i=[],r=function(t){t=t;var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=r(4294967296*(n||e.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new s.init(i,t)}}),a=i.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++)i.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*u,r);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(i,l);var h=i.splice(0,u);n.sigBytes-=c}return new s.init(h,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math)}),Rn=(ee(function(e,t){var n,i,r,o,s,a;e.exports=(r=(i=n=xn).lib,o=r.Base,s=r.WordArray,(a=i.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var r=e[i];n.push(r.high),n.push(r.low)}return s.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),n)}),ee(function(e,t){var n;e.exports=(n=xn,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,i=[],r=0;r<n;r++)i[r>>>2]|=e[r]<<24-r%4*8;t.call(this,i,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n.lib.WordArray,t=n.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r+=2)i.push(String.fromCharCode(t[r>>>2]>>>16-r%4*8&65535));return i.join("")},parse:function(t){for(var n=t.length,i=[],r=0;r<n;r++)i[r>>>1]|=t.charCodeAt(r)<<16-r%2*16;return e.create(i,2*n)}},t.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var s=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var n=t.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(r,2*n)}}}(),n.enc.Utf16)}),ee(function(e,t){var n,i,r;e.exports=(r=(i=n=xn).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var i=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,u=n[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return r.create(i,o)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}),ee(function(e,t){var n;e.exports=(n=xn,function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,s=e[t+0],u=e[t+1],d=e[t+2],p=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],y=e[t+7],_=e[t+8],b=e[t+9],k=e[t+10],w=e[t+11],C=e[t+12],S=e[t+13],E=e[t+14],I=e[t+15],T=o[0],M=o[1],O=o[2],D=o[3];T=c(T,M,O,D,s,7,a[0]),D=c(D,T,M,O,u,12,a[1]),O=c(O,D,T,M,d,17,a[2]),M=c(M,O,D,T,p,22,a[3]),T=c(T,M,O,D,g,7,a[4]),D=c(D,T,M,O,v,12,a[5]),O=c(O,D,T,M,m,17,a[6]),M=c(M,O,D,T,y,22,a[7]),T=c(T,M,O,D,_,7,a[8]),D=c(D,T,M,O,b,12,a[9]),O=c(O,D,T,M,k,17,a[10]),M=c(M,O,D,T,w,22,a[11]),T=c(T,M,O,D,C,7,a[12]),D=c(D,T,M,O,S,12,a[13]),O=c(O,D,T,M,E,17,a[14]),T=l(T,M=c(M,O,D,T,I,22,a[15]),O,D,u,5,a[16]),D=l(D,T,M,O,m,9,a[17]),O=l(O,D,T,M,w,14,a[18]),M=l(M,O,D,T,s,20,a[19]),T=l(T,M,O,D,v,5,a[20]),D=l(D,T,M,O,k,9,a[21]),O=l(O,D,T,M,I,14,a[22]),M=l(M,O,D,T,g,20,a[23]),T=l(T,M,O,D,b,5,a[24]),D=l(D,T,M,O,E,9,a[25]),O=l(O,D,T,M,p,14,a[26]),M=l(M,O,D,T,_,20,a[27]),T=l(T,M,O,D,S,5,a[28]),D=l(D,T,M,O,d,9,a[29]),O=l(O,D,T,M,y,14,a[30]),T=h(T,M=l(M,O,D,T,C,20,a[31]),O,D,v,4,a[32]),D=h(D,T,M,O,_,11,a[33]),O=h(O,D,T,M,w,16,a[34]),M=h(M,O,D,T,E,23,a[35]),T=h(T,M,O,D,u,4,a[36]),D=h(D,T,M,O,g,11,a[37]),O=h(O,D,T,M,y,16,a[38]),M=h(M,O,D,T,k,23,a[39]),T=h(T,M,O,D,S,4,a[40]),D=h(D,T,M,O,s,11,a[41]),O=h(O,D,T,M,p,16,a[42]),M=h(M,O,D,T,m,23,a[43]),T=h(T,M,O,D,b,4,a[44]),D=h(D,T,M,O,C,11,a[45]),O=h(O,D,T,M,I,16,a[46]),T=f(T,M=h(M,O,D,T,d,23,a[47]),O,D,s,6,a[48]),D=f(D,T,M,O,y,10,a[49]),O=f(O,D,T,M,E,15,a[50]),M=f(M,O,D,T,v,21,a[51]),T=f(T,M,O,D,C,6,a[52]),D=f(D,T,M,O,p,10,a[53]),O=f(O,D,T,M,k,15,a[54]),M=f(M,O,D,T,u,21,a[55]),T=f(T,M,O,D,_,6,a[56]),D=f(D,T,M,O,I,10,a[57]),O=f(O,D,T,M,m,15,a[58]),M=f(M,O,D,T,S,21,a[59]),T=f(T,M,O,D,g,6,a[60]),D=f(D,T,M,O,w,10,a[61]),O=f(O,D,T,M,d,15,a[62]),M=f(M,O,D,T,b,21,a[63]),o[0]=o[0]+T|0,o[1]=o[1]+M|0,o[2]=o[2]+O|0,o[3]=o[3]+D|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function l(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function f(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(u),t.HmacMD5=o._createHmacHelper(u)}(Math),n.MD5)}),ee(function(e,t){var n,i,r,o,s,a,u;e.exports=(r=(i=n=xn).lib,o=r.WordArray,a=[],u=i.algo.SHA1=(s=r.Hasher).extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}var h=(i<<5|i>>>27)+u+a[c];h+=c<20?1518500249+(r&o|~r&s):c<40?1859775393+(r^o^s):c<60?(r&o|r&s|o&s)-1894007588:(r^o^s)-899497514,u=s,s=o,o=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=s._createHelper(u),i.HmacSHA1=s._createHmacHelper(u),n.SHA1)}),ee(function(e,t){var n;e.exports=(n=xn,function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)t(i)&&(r<8&&(a[r]=n(e.pow(i,.5))),u[r]=n(e.pow(i,1/3)),r++),i++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],h=n[6],f=n[7],d=0;d<64;d++){if(d<16)c[d]=0|e[t+d];else{var p=c[d-15],g=c[d-2];c[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+c[d-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+c[d-16]}var v=i&r^i&o^r&o,m=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&h)+u[d]+c[d];f=h,h=l,l=a,a=s+m|0,s=o,o=r,r=i,i=m+(((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+v)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),n.SHA256)}),ee(function(e,t){var n,i,r,o,s,a;e.exports=(r=(i=n=xn).lib.WordArray,a=(o=i.algo).SHA224=(s=o.SHA256).extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),i.SHA224=s._createHelper(a),i.HmacSHA224=s._createHmacHelper(a),n.SHA224)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n,t=e.lib.Hasher,i=e.x64,r=i.Word,o=i.WordArray,s=e.algo;function a(){return r.create.apply(r,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=a()}();var l=s.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],h=n[6],f=n[7],d=i.high,p=i.low,g=r.high,v=r.low,m=o.high,y=o.low,_=s.high,b=s.low,k=a.high,w=a.low,C=l.high,S=l.low,E=h.high,I=h.low,T=f.high,M=f.low,O=d,D=p,A=g,x=v,R=m,P=y,z=_,L=b,N=k,F=w,U=C,G=S,V=E,j=I,B=T,H=M,q=0;q<80;q++){var W=c[q];if(q<16)var K=W.high=0|e[t+2*q],Y=W.low=0|e[t+2*q+1];else{var $=c[q-15],Z=$.high,X=$.low,J=(X>>>1|Z<<31)^(X>>>8|Z<<24)^(X>>>7|Z<<25),Q=c[q-2],ee=Q.high,te=Q.low,ne=(te>>>19|ee<<13)^(te<<3|ee>>>29)^(te>>>6|ee<<26),ie=c[q-7],re=c[q-16],oe=re.low;K=(K=(K=((Z>>>1|X<<31)^(Z>>>8|X<<24)^Z>>>7)+ie.high+((Y=J+ie.low)>>>0<J>>>0?1:0))+((ee>>>19|te<<13)^(ee<<3|te>>>29)^ee>>>6)+((Y+=ne)>>>0<ne>>>0?1:0))+re.high+((Y+=oe)>>>0<oe>>>0?1:0),W.high=K,W.low=Y}var se,ae=N&U^~N&V,ue=F&G^~F&j,ce=O&A^O&R^A&R,le=(D>>>28|O<<4)^(D<<30|O>>>2)^(D<<25|O>>>7),he=u[q],fe=he.low,de=B+((N>>>14|F<<18)^(N>>>18|F<<14)^(N<<23|F>>>9))+((se=H+((F>>>14|N<<18)^(F>>>18|N<<14)^(F<<23|N>>>9)))>>>0<H>>>0?1:0),pe=le+(D&x^D&P^x&P);B=V,H=j,V=U,j=G,U=N,G=F,N=z+(de=(de=(de=de+ae+((se+=ue)>>>0<ue>>>0?1:0))+he.high+((se+=fe)>>>0<fe>>>0?1:0))+K+((se+=Y)>>>0<Y>>>0?1:0))+((F=L+se|0)>>>0<L>>>0?1:0)|0,z=R,L=P,R=A,P=x,A=O,x=D,O=de+(((O>>>28|D<<4)^(O<<30|D>>>2)^(O<<25|D>>>7))+ce+(pe>>>0<le>>>0?1:0))+((D=se+pe|0)>>>0<se>>>0?1:0)|0}p=i.low=p+D,i.high=d+O+(p>>>0<D>>>0?1:0),v=r.low=v+x,r.high=g+A+(v>>>0<x>>>0?1:0),y=o.low=y+P,o.high=m+R+(y>>>0<P>>>0?1:0),b=s.low=b+L,s.high=_+z+(b>>>0<L>>>0?1:0),w=a.low=w+F,a.high=k+N+(w>>>0<F>>>0?1:0),S=l.low=S+G,l.high=C+U+(S>>>0<G>>>0?1:0),I=h.low=I+j,h.high=E+V+(I>>>0<j>>>0?1:0),M=f.low=M+H,f.high=T+B+(M>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),n.SHA512)}),ee(function(e,t){var n,i,r,o,s,a,u,c;e.exports=(r=(i=n=xn).x64,o=r.Word,s=r.WordArray,c=(a=i.algo).SHA384=(u=a.SHA512).extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=u._doFinalize.call(this);return e.sigBytes-=16,e}}),i.SHA384=u._createHelper(c),i.HmacSHA384=u._createHmacHelper(c),n.SHA384)}),ee(function(e,t){var n;e.exports=(n=xn,function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,s=t.x64.Word,a=t.algo,u=[],c=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,o=0;o<24;o++){for(var a=0,h=0,f=0;f<7;f++){if(1&r){var d=(1<<f)-1;d<32?h^=1<<d:a^=1<<d-32}128&r?r=r<<1^113:r<<=1}l[o]=s.create(a,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var f=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,r=0;r<i;r++){var o=e[t+2*r],s=e[t+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(M=n[r]).high^=s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),M.low^=o}for(var a=0;a<24;a++){for(var f=0;f<5;f++){for(var d=0,p=0,g=0;g<5;g++)d^=(M=n[f+5*g]).high,p^=M.low;var v=h[f];v.high=d,v.low=p}for(f=0;f<5;f++){var m=h[(f+4)%5],y=h[(f+1)%5],_=y.high,b=y.low;for(d=m.high^(_<<1|b>>>31),p=m.low^(b<<1|_>>>31),g=0;g<5;g++)(M=n[f+5*g]).high^=d,M.low^=p}for(var k=1;k<25;k++){var w=(M=n[k]).high,C=M.low,S=u[k];S<32?(d=w<<S|C>>>32-S,p=C<<S|w>>>32-S):(d=C<<S-32|w>>>64-S,p=w<<S-32|C>>>64-S);var E=h[c[k]];E.high=d,E.low=p}var I=h[0],T=n[0];for(I.high=T.high,I.low=T.low,f=0;f<5;f++)for(g=0;g<5;g++){var M=n[k=f+5*g],O=h[k],D=h[(f+1)%5+5*g],A=h[(f+2)%5+5*g];M.high=O.high^~D.high&A.high,M.low=O.low^~D.low&A.low}var x=l[a];(M=n[0]).high^=x.high,M.low^=x.low}},_doFinalize:function(){var t=this._data,n=t.words,i=8*t.sigBytes,o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,c=[],l=0;l<u;l++){var h=s[l],f=h.high,d=h.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)),c.push(f)}return new r.init(c,a)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(f),t.HmacSHA3=o._createHmacHelper(f)}(Math),n.SHA3)}),ee(function(e,t){var n;e.exports=(n=xn,function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,s=t.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=r.create([0,1518500249,1859775393,2400959708,2840853838]),f=r.create([1352829926,1548603684,1836072691,2053994217,0]),d=s.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o,s,d,b,k,w,C,S,E,I,T,M=this._hash.words,O=h.words,D=f.words,A=a.words,x=u.words,R=c.words,P=l.words;for(w=o=M[0],C=s=M[1],S=d=M[2],E=b=M[3],I=k=M[4],n=0;n<80;n+=1)T=o+e[t+A[n]]|0,T+=n<16?p(s,d,b)+O[0]:n<32?g(s,d,b)+O[1]:n<48?v(s,d,b)+O[2]:n<64?m(s,d,b)+O[3]:y(s,d,b)+O[4],T=(T=_(T|=0,R[n]))+k|0,o=k,k=b,b=_(d,10),d=s,s=T,T=w+e[t+x[n]]|0,T+=n<16?y(C,S,E)+D[0]:n<32?m(C,S,E)+D[1]:n<48?v(C,S,E)+D[2]:n<64?g(C,S,E)+D[3]:p(C,S,E)+D[4],T=(T=_(T|=0,P[n]))+I|0,w=I,I=E,E=_(S,10),S=C,C=T;T=M[1]+d+E|0,M[1]=M[2]+b+I|0,M[2]=M[3]+k+w|0,M[3]=M[4]+o+C|0,M[4]=M[0]+s+S|0,M[0]=T},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,o=r.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function v(e,t,n){return(e|~t)^n}function m(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(d),t.HmacRIPEMD160=o._createHmacHelper(d)}(),n.RIPEMD160)}),ee(function(e,t){var n,i,r;e.exports=(i=(n=xn).lib,r=n.enc.Utf8,void(n.algo.HMAC=i.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))}),ee(function(e,t){var n,i,r,o,s,a,u,c;e.exports=(r=(i=n=xn).lib,s=r.WordArray,u=(a=i.algo).HMAC,c=a.PBKDF2=(o=r.Base).extend({cfg:o.extend({keySize:4,hasher:a.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=u.create(n.hasher,e),r=s.create(),o=s.create([1]),a=r.words,c=o.words,l=n.keySize,h=n.iterations;a.length<l;){var f=i.update(t).finalize(o);i.reset();for(var d=f.words,p=d.length,g=f,v=1;v<h;v++){g=i.finalize(g),i.reset();for(var m=g.words,y=0;y<p;y++)d[y]^=m[y]}r.concat(f),c[0]++}return r.sigBytes=4*l,r}}),i.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)},n.PBKDF2)}),ee(function(e,t){var n,i,r,o,s,a,u;e.exports=(r=(i=n=xn).lib,s=r.WordArray,u=(a=i.algo).EvpKDF=(o=r.Base).extend({cfg:o.extend({keySize:4,hasher:a.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),r=s.create(),o=r.words,a=n.keySize,u=n.iterations;o.length<a;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;l<u;l++)c=i.finalize(c),i.reset();r.concat(c)}return r.sigBytes=4*a,r}}),i.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},n.EvpKDF)}),ee(function(e,t){var n,i,r,o,s,a,u,c,l,h,f,d,p,g,v,m,y,_,b,k,w,C,S;e.exports=void((n=xn).lib.Cipher||(i=n,r=i.lib,o=r.Base,s=r.WordArray,a=r.BufferedBlockAlgorithm,u=i.enc,c=u.Base64,l=i.algo,h=l.EvpKDF,f=r.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?S:k}return function(t){return{encrypt:function(n,i,r){return e(i).encrypt(t,n,i,r)},decrypt:function(n,i,r){return e(i).decrypt(t,n,i,r)}}}}()}),r.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=i.mode={},p=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=d.CBC=function(){var e=p.extend();function t(e,t,n){var i=this._iv;if(i){var r=i;this._iv=void 0}else r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,o=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=o}}),e}(),v=i.pad={},m=v.Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,r=i<<24|i<<16|i<<8|i,o=[],a=0;a<i;a+=4)o.push(r);var u=s.create(o,i);e.concat(u)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=f.extend({cfg:f.cfg.extend({mode:g,padding:m}),reset:function(){f.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else i=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==i?this._mode.init(this,t&&t.words):(this._mode=i.call(n,this,t&&t.words),this._mode.__creator=i)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),y=r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),_=i.format={},b=_.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var i=s.create([1398893684,1701076831]).concat(n).concat(t);else i=t;return i.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var i=s.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return y.create({ciphertext:t,salt:i})}},k=r.SerializableCipher=o.extend({cfg:o.extend({format:b}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i),o=r.finalize(t),s=r.cfg;return y.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=i.kdf={},C=w.OpenSSL={execute:function(e,t,n,i){i||(i=s.random(8));var r=h.create({keySize:t+n}).compute(e,i),o=s.create(r.words.slice(t),4*n);return r.sigBytes=4*t,y.create({key:r,iv:o,salt:i})}},S=r.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:C}),encrypt:function(e,t,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize);i.iv=r.iv;var o=k.encrypt.call(this,e,t,r.key,i);return o.mixIn(r),o},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var r=i.kdf.execute(n,e.keySize,e.ivSize,t.salt);return i.iv=r.iv,k.decrypt.call(this,e,t,r.key,i)}})))}),ee(function(e,t){var n;e.exports=((n=xn).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,i){var r=this._iv;if(r){var o=r.slice(0);this._iv=void 0}else o=this._prevBlock;i.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}return e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r,i),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,o=e.slice(n,n+r);t.call(this,e,n,r,i),this._prevBlock=o}}),e}(),n.mode.CFB)}),ee(function(e,t){var n,i,r;e.exports=((n=xn).mode.CTR=(r=(i=n.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[i-1]=o[i-1]+1|0;for(var a=0;a<i;a++)e[t+a]^=s[a]}}),i.Decryptor=r,i),n.mode.CTR)}),ee(function(e,t){var n;e.exports=((n=xn).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,i=255&e;255===t?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=i}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(s);var a=s.slice(0);i.encryptBlock(a,0);for(var u=0;u<r;u++)e[n+u]^=a[u]}});return e.Decryptor=i,e}(),n.mode.CTRGladman)}),ee(function(e,t){var n,i,r;e.exports=((n=xn).mode.OFB=(r=(i=n.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<i;s++)e[t+s]^=o[s]}}),i.Decryptor=r,i),n.mode.OFB)}),ee(function(e,t){var n,i;e.exports=((n=xn).mode.ECB=((i=n.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),i.Decryptor=i.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),i),n.mode.ECB)}),ee(function(e,t){var n;e.exports=((n=xn).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,i=4*t,r=i-n%i,o=n+r-1;e.clamp(),e.words[o>>>2]|=r<<24-o%4*8,e.sigBytes+=r},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.pad.Ansix923)}),ee(function(e,t){var n;e.exports=((n=xn).pad.Iso10126={pad:function(e,t){var i=4*t,r=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(r-1)).concat(n.lib.WordArray.create([r<<24],1))},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.pad.Iso10126)}),ee(function(e,t){var n;e.exports=((n=xn).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)}),ee(function(e,t){var n;e.exports=((n=xn).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},n.pad.ZeroPadding)}),ee(function(e,t){var n;e.exports=((n=xn).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)}),ee(function(e,t){var n,i,r,o;e.exports=(r=(i=n=xn).lib.CipherParams,o=i.enc.Hex,i.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return r.create({ciphertext:t})}},n.format.Hex)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n,t=e.lib.BlockCipher,i=e.algo,r=[],o=[],s=[],a=[],u=[],c=[],l=[],h=[],f=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;r[n]=p=p>>>8^255&p^99,o[p]=n;var g=e[n],v=e[g],m=e[v],y=257*e[p]^16843008*p;s[n]=y<<24|y>>>8,a[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,c[n]=y,l[p]=(y=16843009*m^65537*v^257*g^16843008*n)<<24|y>>>8,h[p]=y<<16|y>>>16,f[p]=y<<8|y>>>24,d[p]=y,n?(n=g^e[e[e[m^g]]],i^=e[e[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<i;s++)if(s<n)o[s]=t[s];else{var a=o[s-1];s%n?n>6&&s%n==4&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=r[(a=a<<8|a>>>24)>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=p[s/n|0]<<24),o[s]=o[s-n]^a}for(var u=this._invKeySchedule=[],c=0;c<i;c++)s=i-c,a=c%4?o[s]:o[s-4],u[c]=c<4||s<=4?a:l[r[a>>>24]]^h[r[a>>>16&255]]^f[r[a>>>8&255]]^d[r[255&a]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,f,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,o,s,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],d=4,p=1;p<u;p++){var g=i[c>>>24]^r[l>>>16&255]^o[h>>>8&255]^s[255&f]^n[d++],v=i[l>>>24]^r[h>>>16&255]^o[f>>>8&255]^s[255&c]^n[d++],m=i[h>>>24]^r[f>>>16&255]^o[c>>>8&255]^s[255&l]^n[d++],y=i[f>>>24]^r[c>>>16&255]^o[l>>>8&255]^s[255&h]^n[d++];c=g,l=v,h=m,f=y}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[d++],m=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d++],y=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=y},keySize:8});e.AES=t._createHelper(g)}(),n.AES)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n,t=e.lib,i=t.WordArray,r=t.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var i=s[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(var r=this._subKeys=[],o=0;o<16;o++){var c=r[o]=[],l=u[o];for(n=0;n<24;n++)c[n/6|0]|=t[(a[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(a[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=r[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),f.call(this,1,1431655765);for(var i=0;i<16;i++){for(var r=n[i],o=this._lBlock,s=this._rBlock,a=0,u=0;u<8;u++)a|=c[u][((s^r[u])&l[u])>>>0];this._lBlock=s,this._rBlock=o^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,f.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function d(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(h);var p=o.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(i.create(e.slice(0,2))),this._des2=h.createEncryptor(i.create(e.slice(2,4))),this._des3=h.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(p)}(),n.TripleDES)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],r=0;r<256;r++)i[r]=r;r=0;for(var o=0;r<256;r++){var s=r%n,a=i[r];i[r]=i[o=(o+i[r]+(t[s>>>2]>>>24-s%4*8&255))%256],i[o]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,i=0,r=0;r<4;r++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,i|=e[(e[t]+e[n])%256]<<24-8*r}return this._i=t,this._j=n,i}e.RC4=t._createHelper(r);var s=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(s)}(),n.RC4)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n,t=e.lib.StreamCipher,i=[],r=[],o=[],s=e.algo.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)a.call(this);for(n=0;n<8;n++)r[n]^=i[n+4&7];if(t){var o=t.words,s=o[0],u=o[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,f=l<<16|65535&c;for(r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=f,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=f,n=0;n<4;n++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],s=65535&i,a=i>>>16;o[n]=((s*s>>>17)+s*a>>>15)+a*a^((4294901760&i)*i|0)+((65535&i)*i|0)}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),n.Rabbit)}),ee(function(e,t){var n;e.exports=(n=xn,function(){var e=n,t=e.lib.StreamCipher,i=[],r=[],o=[],s=e.algo.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)a.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var o=t.words,s=o[0],u=o[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,f=l<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=l,i[3]^=f,i[4]^=c,i[5]^=h,i[6]^=l,i[7]^=f,r=0;r<4;r++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],s=65535&i,a=i>>>16;o[n]=((s*s>>>17)+s*a>>>15)+a*a^((4294901760&i)*i|0)+((65535&i)*i|0)}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),n.RabbitLegacy)}),ee(function(e,t){e.exports=xn}));function Pn(){throw new Error("setTimeout has not been defined")}function zn(){throw new Error("clearTimeout has not been defined")}var Ln=Pn,Nn=zn;function Fn(e){if(Ln===setTimeout)return setTimeout(e,0);if((Ln===Pn||!Ln)&&setTimeout)return Ln=setTimeout,setTimeout(e,0);try{return Ln(e,0)}catch(t){try{return Ln.call(null,e,0)}catch(t){return Ln.call(this,e,0)}}}"function"==typeof e.setTimeout&&(Ln=setTimeout),"function"==typeof e.clearTimeout&&(Nn=clearTimeout);var Un,Gn=[],Vn=!1,jn=-1;function Bn(){Vn&&Un&&(Vn=!1,Un.length?Gn=Un.concat(Gn):jn=-1,Gn.length&&Hn())}function Hn(){if(!Vn){var e=Fn(Bn);Vn=!0;for(var t=Gn.length;t;){for(Un=Gn,Gn=[];++jn<t;)Un&&Un[jn].run();jn=-1,t=Gn.length}Un=null,Vn=!1,function(e){if(Nn===clearTimeout)return clearTimeout(e);if((Nn===zn||!Nn)&&clearTimeout)return Nn=clearTimeout,clearTimeout(e);try{Nn(e)}catch(t){try{return Nn.call(null,e)}catch(t){return Nn.call(this,e)}}}(e)}}function qn(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Gn.push(new Wn(e,t)),1!==Gn.length||Vn||Fn(Hn)}function Wn(e,t){this.fun=e,this.array=t}function Kn(){}function Yn(){Yn.init.call(this)}function $n(e){return void 0===e._maxListeners?Yn.defaultMaxListeners:e._maxListeners}function Zn(e,t,n){if(t)e.call(n);else for(var i=e.length,r=ri(e,i),o=0;o<i;++o)r[o].call(n)}function Xn(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,o=ri(e,r),s=0;s<r;++s)o[s].call(n,i)}function Jn(e,t,n,i,r){if(t)e.call(n,i,r);else for(var o=e.length,s=ri(e,o),a=0;a<o;++a)s[a].call(n,i,r)}function Qn(e,t,n,i,r,o){if(t)e.call(n,i,r,o);else for(var s=e.length,a=ri(e,s),u=0;u<s;++u)a[u].call(n,i,r,o)}function ei(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,o=ri(e,r),s=0;s<r;++s)o[s].apply(n,i)}function ti(e,t,n,i){var r,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=new Kn,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(r=$n(e))&&r>0&&s.length>r){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=n,++e._eventsCount;return e}function ni(e,t,n){var i=!1;function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}return r.listener=n,r}function ii(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function ri(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}Wn.prototype.run=function(){this.fun.apply(null,this.array)},Kn.prototype=Object.create(null),Yn.EventEmitter=Yn,Yn.usingDomains=!1,Yn.prototype.domain=void 0,Yn.prototype._events=void 0,Yn.prototype._maxListeners=void 0,Yn.defaultMaxListeners=10,Yn.init=function(){this.domain=null,Yn.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Kn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Yn.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Yn.prototype.getMaxListeners=function(){return $n(this)},Yn.prototype.emit=function(e){var t,n,i,r,o,s,a,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(n=s[e]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:Zn(n,l,this);break;case 2:Xn(n,l,this,arguments[1]);break;case 3:Jn(n,l,this,arguments[1],arguments[2]);break;case 4:Qn(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),o=1;o<i;o++)r[o-1]=arguments[o];ei(n,l,this,r)}return!0},Yn.prototype.on=Yn.prototype.addListener=function(e,t){return ti(this,e,t,!1)},Yn.prototype.prependListener=function(e,t){return ti(this,e,t,!0)},Yn.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,ni(this,e,t)),this},Yn.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,ni(this,e,t)),this},Yn.prototype.removeListener=function(e,t){var n,i,r,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new Kn:(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Kn,this;delete i[e]}else!function(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}(n,r);i.removeListener&&this.emit("removeListener",e,s||t)}return this},Yn.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Kn,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new Kn:delete n[e]),this;if(0===arguments.length){for(var i,r=Object.keys(n),o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Kn,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},Yn.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},Yn.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ii.call(e,t)},Yn.prototype.listenerCount=ii,Yn.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var oi="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},si=/%[sdj%]/g;function ai(e){if(!_i(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(hi(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,r=i.length,o=String(e).replace(si,function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),s=i[n];n<r;s=i[++n])yi(s)||!wi(s)?o+=" "+s:o+=" "+hi(s);return o}function ui(t,n){if(bi(e.process))return function(){return ui(t,n).apply(this,arguments)};var i=!1;return function(){return i||(console.error(n),i=!0),t.apply(this,arguments)}}var ci,li={};function hi(e,t){var n={seen:[],stylize:di};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),mi(t)?n.showHidden=t:t&&function(e,t){if(!t||!wi(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]]}(n,t),bi(n.showHidden)&&(n.showHidden=!1),bi(n.depth)&&(n.depth=2),bi(n.colors)&&(n.colors=!1),bi(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=fi),pi(n,e,n.depth)}function fi(e,t){var n=hi.styles[t];return n?"\x1b["+hi.colors[n][0]+"m"+e+"\x1b["+hi.colors[n][1]+"m":e}function di(e,t){return e}function pi(e,t,n){if(e.customInspect&&t&&Ei(t.inspect)&&t.inspect!==hi&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return _i(i)||(i=pi(e,i,n)),i}var r=function(e,t){if(bi(t))return e.stylize("undefined","undefined");if(_i(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return"number"==typeof t?e.stylize(""+t,"number"):mi(t)?e.stylize(""+t,"boolean"):yi(t)?e.stylize("null","null"):void 0}(e,t);if(r)return r;var o=Object.keys(t),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Si(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return gi(t);if(0===o.length){if(Ei(t))return e.stylize("[Function"+(t.name?": "+t.name:"")+"]","special");if(ki(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Ci(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Si(t))return gi(t)}var a,u="",c=!1,l=["{","}"];return Array.isArray(t)&&(c=!0,l=["[","]"]),Ei(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),ki(t)&&(u=" "+RegExp.prototype.toString.call(t)),Ci(t)&&(u=" "+Date.prototype.toUTCString.call(t)),Si(t)&&(u=" "+gi(t)),0!==o.length||c&&0!=t.length?n<0?ki(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),a=c?function(e,t,n,i,r){for(var o=[],s=0,a=t.length;s<a;++s)Ti(t,String(s))?o.push(vi(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(vi(e,t,n,i,r,!0))}),o}(e,t,n,s,o):o.map(function(i){return vi(e,t,n,s,i,c)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(a,u,l)):l[0]+u+l[1]}function gi(e){return"["+Error.prototype.toString.call(e)+"]"}function vi(e,t,n,i,r,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=e.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),Ti(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(u.value)<0?(a=yi(n)?pi(e,u.value,null):pi(e,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),bi(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function mi(e){return"boolean"==typeof e}function yi(e){return null===e}function _i(e){return"string"==typeof e}function bi(e){return void 0===e}function ki(e){return wi(e)&&"[object RegExp]"===Ii(e)}function wi(e){return"object"==typeof e&&null!==e}function Ci(e){return wi(e)&&"[object Date]"===Ii(e)}function Si(e){return wi(e)&&("[object Error]"===Ii(e)||e instanceof Error)}function Ei(e){return"function"==typeof e}function Ii(e){return Object.prototype.toString.call(e)}function Ti(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mi(){this.head=null,this.tail=null,this.length=0}hi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},hi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Mi.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},Mi.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},Mi.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},Mi.prototype.clear=function(){this.head=this.tail=null,this.length=0},Mi.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},Mi.prototype.concat=function(e){if(0===this.length)return p.alloc(0);if(1===this.length)return this.head.data;for(var t=p.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t};var Oi=p.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Di(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!Oi(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=xi;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Ri;break;default:return void(this.write=Ai)}this.charBuffer=new p(6),this.charReceived=0,this.charLength=0}function Ai(e){return e.toString(this.encoding)}function xi(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Ri(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Di.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i,r=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),r=(t+=e.toString(this.encoding,0,r)).length-1,(i=t.charCodeAt(r))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},Di.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Di.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.encoding;t+=this.charBuffer.slice(0,this.charReceived).toString(n)}return t},Li.ReadableState=zi;var Pi=function(e){return bi(ci)&&(ci=""),e=e.toUpperCase(),li[e]||(li[e]=new RegExp("\\b"+e+"\\b","i").test(ci)?function(){var t=ai.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:function(){}),li[e]}("stream");function zi(e,t){this.objectMode=!!(e=e||{}).objectMode,t instanceof cr&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark;this.highWaterMark=n||0===n?n:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=new Mi,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new Di(e.encoding),this.encoding=e.encoding)}function Li(e){if(!(this instanceof Li))return new Li(e);this._readableState=new zi(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),Yn.call(this)}function Ni(e,t,n,i,r){var o=function(e,t){var n=null;return X(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,Ui(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&r){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var u;!t.decoder||r||i||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),r||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&Ui(e))),function(e,t){t.readingMore||(t.readingMore=!0,qn(Vi,e,t))}(e,t)}else r||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function Fi(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Ui(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Pi("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?qn(Gi,e):Gi(e))}function Gi(e){Pi("emit readable"),e.emit("readable"),Hi(e)}function Vi(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Pi("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function ji(e){Pi("readable nexttick read 0"),e.read(0)}function Bi(e,t){t.reading||(Pi("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Hi(e),t.flowing&&!t.reading&&e.read(0)}function Hi(e){var t=e._readableState;for(Pi("flow",t.flowing);t.flowing&&null!==e.read(););}function qi(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(r+=s===o.length?o:o.slice(0,e),0==(e-=s)){s===o.length?(++i,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t):function(e,t){var n=p.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var o=i.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0==(e-=s)){s===o.length?(++r,t.head=i.next?i.next:t.tail=null):(t.head=i,i.data=o.slice(s));break}++r}return t.length-=r,n}(e,t),i}(e,t.buffer,t.decoder),n);var n}function Wi(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,qn(Ki,t,e))}function Ki(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Yi(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function $i(){}function Zi(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function Xi(e,t){Object.defineProperty(this,"buffer",{get:ui(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),this.objectMode=!!(e=e||{}).objectMode,t instanceof cr&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark;this.highWaterMark=n||0===n?n:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.decodeStrings=!(!1===e.decodeStrings),this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?qn(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}(e,n,i,t,r);else{var o=nr(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||tr(e,n),i?qn(er,e,n,o,r):er(e,n,o,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new or(this)}function Ji(e){if(!(this instanceof Ji||this instanceof cr))return new Ji(e);this._writableState=new Xi(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),Yn.call(this)}function Qi(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function er(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),rr(e,t)}function tr(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=new Array(t.bufferedRequestCount),r=t.corkedRequestsFree;r.entry=n;for(var o=0;n;)i[o]=n,n=n.next,o+=1;Qi(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new or(t)}else{for(;n;){var s=n.chunk;if(Qi(e,t,!1,t.objectMode?1:s.length,s,n.encoding,n.callback),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function nr(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function ir(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function rr(e,t){var n=nr(t);return n&&(0===t.pendingcb?(ir(e,t),t.finished=!0,e.emit("finish")):ir(e,t)),n}function or(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}oi(Li,Yn),Li.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=p.from(e,t),t=""),Ni(this,n,e,t,!1)},Li.prototype.unshift=function(e){return Ni(this,this._readableState,e,"",!0)},Li.prototype.isPaused=function(){return!1===this._readableState.flowing},Li.prototype.setEncoding=function(e){return this._readableState.decoder=new Di(e),this._readableState.encoding=e,this},Li.prototype.read=function(e){Pi("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Pi("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Wi(this):Ui(this),null;if(0===(e=Fi(e,t))&&t.ended)return 0===t.length&&Wi(this),null;var i,r=t.needReadable;return Pi("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&Pi("length less than watermark",r=!0),t.ended||t.reading?Pi("reading or ended",r=!1):r&&(Pi("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Fi(n,t))),null===(i=e>0?qi(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Wi(this)),null!==i&&this.emit("data",i),i},Li.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Li.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,Pi("pipe count=%d opts=%j",i.pipesCount,t);var r=t&&!1===t.end?c:s;function o(e){Pi("onunpipe"),e===n&&c()}function s(){Pi("onend"),e.end()}i.endEmitted?qn(r):n.once("end",r),e.on("unpipe",o);var a=function(e){return function(){var t=e._readableState;Pi("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,Hi(e))}}(n);e.on("drain",a);var u=!1;function c(){Pi("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",c),n.removeListener("data",h),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||a()}var l=!1;function h(t){Pi("ondata"),l=!1,!1!==e.write(t)||l||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==Yi(i.pipes,e))&&!u&&(Pi("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,l=!0),n.pause())}function f(t){Pi("onerror",t),g(),e.removeListener("error",f),0===e.listeners("error").length&&e.emit("error",t)}function d(){e.removeListener("finish",p),g()}function p(){Pi("onfinish"),e.removeListener("close",d),g()}function g(){Pi("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",d),e.once("finish",p),e.emit("pipe",n),i.flowing||(Pi("pipe resume"),n.resume()),e},Li.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=Yi(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},Li.prototype.addListener=Li.prototype.on=function(e,t){var n=Yn.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&Ui(this):qn(ji,this))}return n},Li.prototype.resume=function(){var e=this._readableState;return e.flowing||(Pi("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,qn(Bi,e,t))}(this,e)),this},Li.prototype.pause=function(){return Pi("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Pi("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Li.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;for(var r in e.on("end",function(){if(Pi("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){Pi("wrapped data"),t.decoder&&(r=t.decoder.write(r)),t.objectMode&&null==r||(t.objectMode||r&&r.length)&&(i.push(r)||(n=!0,e.pause()))}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));return function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n])}(["error","close","destroy","pause","resume"],function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){Pi("wrapped _read",t),n&&(n=!1,e.resume())},i},Li._fromList=qi,Ji.WritableState=Xi,oi(Ji,Yn),Xi.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Ji.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Ji.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return"function"==typeof t&&(n=t,t=null),p.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=$i),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),qn(t,n)}(this,n):function(e,t,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):p.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),qn(i,o),r=!1),r}(this,i,e,n)&&(i.pendingcb++,r=function(e,t,n,i,r){n=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,n)),t}(t,n,i),p.isBuffer(n)&&(i="buffer");var o=t.objectMode?1:n.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new Zi(n,i,r),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Qi(e,t,!1,o,n,i,r);return s}(this,i,e,t,n)),r},Ji.prototype.cork=function(){this._writableState.corked++},Ji.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||tr(this,e))},Ji.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Ji.prototype._write=function(e,t,n){n(new Error("not implemented"))},Ji.prototype._writev=null,Ji.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,rr(e,t),n&&(t.finished?qn(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)},oi(cr,Li);for(var sr=Object.keys(Ji.prototype),ar=0;ar<sr.length;ar++){var ur=sr[ar];cr.prototype[ur]||(cr.prototype[ur]=Ji.prototype[ur])}function cr(e){if(!(this instanceof cr))return new cr(e);Li.call(this,e),Ji.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",lr)}function lr(){this.allowHalfOpen||this._writableState.ended||qn(hr,this)}function hr(e){e.end()}function fr(e){this.afterTransform=function(t,n){return function(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!=n&&e.push(n),r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function dr(e){if(!(this instanceof dr))return new dr(e);cr.call(this,e),this._transformState=new fr(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){pr(t,e)}):pr(t)})}function pr(e,t){if(t)return e.emit("error",t);var n=e._transformState;if(e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function gr(e){if(!(this instanceof gr))return new gr(e);dr.call(this,e)}function vr(){Yn.call(this)}oi(dr,cr),dr.prototype.push=function(e,t){return this._transformState.needTransform=!1,cr.prototype.push.call(this,e,t)},dr.prototype._transform=function(e,t,n){throw new Error("Not implemented")},dr.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},dr.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},oi(gr,dr),gr.prototype._transform=function(e,t,n){n(null,e)},oi(vr,Yn),vr.Readable=Li,vr.Writable=Ji,vr.Duplex=cr,vr.Transform=dr,vr.PassThrough=gr,vr.Stream=vr,vr.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===Yn.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",s),n.removeListener("close",a),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e};var mr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function yr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function _r(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]}var br=Uint8Array,kr=Uint16Array,wr=Int32Array;function Cr(e){for(var t=e.length;--t>=0;)e[t]=0}var Sr=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Er=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ir=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Mr=new Array(576);Cr(Mr);var Or=new Array(60);Cr(Or);var Dr=new Array(512);Cr(Dr);var Ar=new Array(256);Cr(Ar);var xr=new Array(29);Cr(xr);var Rr,Pr,zr,Lr=new Array(30);function Nr(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function Fr(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Ur(e){return e<256?Dr[e]:Dr[256+(e>>>7)]}function Gr(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Vr(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Gr(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function jr(e,t,n){Vr(e,n[2*t],n[2*t+1])}function Br(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Hr(e,t,n){var i,r,o=new Array(16),s=0;for(i=1;i<=15;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=Br(o[a]++,a))}}function qr(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Wr(e){e.bi_valid>8?Gr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Kr(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function Yr(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Kr(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Kr(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function $r(e,t,n){var i,r,o,s,a=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],r=e.pending_buf[e.l_buf+a],a++,0===i?jr(e,r,t):(jr(e,(o=Ar[r])+256+1,t),0!==(s=Sr[o])&&Vr(e,r-=xr[o],s),jr(e,o=Ur(--i),n),0!==(s=Er[o])&&Vr(e,i-=Lr[o],s))}while(a<e.last_lit);jr(e,256,t)}function Zr(e,t){var n,i,r,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=s[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)Yr(e,o,n);r=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Yr(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,Yr(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,o,s,a,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=u[2*u[2*(i=e.heap[n])+1]+1]+1)>p&&(o=p,g++),u[2*i+1]=o,i>c||(e.bl_count[o]++,s=0,i>=d&&(s=f[i-d]),e.opt_len+=(a=u[2*i])*(o+s),h&&(e.static_len+=a*(l[2*i+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>c||(u[2*r+1]!==o&&(e.opt_len+=(o-u[2*r+1])*u[2*r],u[2*r+1]=o),i--)}}(e,t),Hr(o,c,e.bl_count)}function Xr(e,t,n){var i,r,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++a<u&&r===s||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=r,0===s?(u=138,c=3):r===s?(u=6,c=3):(u=7,c=4))}function Jr(e,t,n){var i,r,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++a<u&&r===s)){if(a<c)do{jr(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(jr(e,r,e.bl_tree),a--),jr(e,16,e.bl_tree),Vr(e,a-3,2)):a<=10?(jr(e,17,e.bl_tree),Vr(e,a-3,3)):(jr(e,18,e.bl_tree),Vr(e,a-11,7));a=0,o=r,0===s?(u=138,c=3):r===s?(u=6,c=3):(u=7,c=4)}}Cr(Lr);var Qr=!1;function eo(e,t,n,i){Vr(e,0+(i?1:0),3),function(e,t,n,i){Wr(e),Gr(e,n),Gr(e,~n),_r(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}function to(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ar[n]+256+1)]++,e.dyn_dtree[2*Ur(t)]++),e.last_lit===e.lit_bufsize-1}function no(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(r=r+t[i++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}var io=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function ro(e,t,n,i){var r=io,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}var oo,so=262;function ao(e,t){return e.msg=mr[t],t}function uo(e){return(e<<1)-(e>4?9:0)}function co(e){for(var t=e.length;--t>=0;)e[t]=0}function lo(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(_r(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function ho(e,t){(function(e,t,n,i){var r,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),Zr(e,e.l_desc),Zr(e,e.d_desc),s=function(e){var t;for(Xr(e,e.dyn_ltree,e.l_desc.max_code),Xr(e,e.dyn_dtree,e.d_desc.max_code),Zr(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Tr[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(o=e.static_len+3+7>>>3)<=(r=e.opt_len+3+7>>>3)&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?eo(e,t,n,i):4===e.strategy||o===r?(Vr(e,2+(i?1:0),3),$r(e,Mr,Or)):(Vr(e,4+(i?1:0),3),function(e,t,n,i){var r;for(Vr(e,t-257,5),Vr(e,n-1,5),Vr(e,i-4,4),r=0;r<i;r++)Vr(e,e.bl_tree[2*Tr[r]+1],3);Jr(e,e.dyn_ltree,t-1),Jr(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),$r(e,e.dyn_ltree,e.dyn_dtree)),qr(e),i&&Wr(e)})(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,lo(e.strm)}function fo(e,t){e.pending_buf[e.pending++]=t}function po(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function go(e,t){var n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-so?e.strstart-(e.w_size-so):0,c=e.window,l=e.w_mask,h=e.prev,f=e.strstart+258,d=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===p&&c[n+s-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<f);if(i=258-(f-o),o=f-258,i>s){if(e.match_start=t,s=i,i>=a)break;d=c[o+s-1],p=c[o+s]}}}while((t=h[t&l])>u&&0!=--r);return s<=e.lookahead?s:e.lookahead}function vo(e){var t,n,i,r,o,s,a,u,c,l,h=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-so)){_r(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=h?i-h:0}while(--n);t=n=h;do{i=e.prev[--t],e.prev[t]=i>=h?i-h:0}while(--n);r+=h}if(0===e.strm.avail_in)break;if(a=e.window,u=e.strstart+e.lookahead,l=void 0,(l=(s=e.strm).avail_in)>(c=r)&&(l=c),n=0===l?0:(s.avail_in-=l,_r(a,s.input,s.next_in,l,u),1===s.state.wrap?s.adler=no(s.adler,a,l,u):2===s.state.wrap&&(s.adler=ro(s.adler,a,l,u)),s.next_in+=l,s.total_in+=l,l),e.lookahead+=n,e.lookahead+e.insert>=3)for(e.ins_h=e.window[o=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<so&&0!==e.strm.avail_in)}function mo(e,t){for(var n,i;;){if(e.lookahead<so){if(vo(e),e.lookahead<so&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-so&&(e.match_length=go(e,n)),e.match_length>=3)if(i=to(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=to(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ho(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(ho(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ho(e,!1),0===e.strm.avail_out)?1:2}function yo(e,t){for(var n,i,r;;){if(e.lookahead<so){if(vo(e),e.lookahead<so&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-so&&(e.match_length=go(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=to(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(ho(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=to(e,0,e.window[e.strstart-1]))&&ho(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=to(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(ho(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ho(e,!1),0===e.strm.avail_out)?1:2}function _o(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function bo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new kr(1146),this.dyn_dtree=new kr(122),this.bl_tree=new kr(78),co(this.dyn_ltree),co(this.dyn_dtree),co(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new kr(16),this.heap=new kr(573),co(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new kr(573),co(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ko(e){var t,n=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,function(e){Qr||(function(){var e,t,n,i,r,o=new Array(16);for(n=0,i=0;i<28;i++)for(xr[i]=n,e=0;e<1<<Sr[i];e++)Ar[n++]=i;for(Ar[n-1]=i,r=0,i=0;i<16;i++)for(Lr[i]=r,e=0;e<1<<Er[i];e++)Dr[r++]=i;for(r>>=7;i<30;i++)for(Lr[i]=r<<7,e=0;e<1<<Er[i]-7;e++)Dr[256+r++]=i;for(t=0;t<=15;t++)o[t]=0;for(e=0;e<=143;)Mr[2*e+1]=8,e++,o[8]++;for(;e<=255;)Mr[2*e+1]=9,e++,o[9]++;for(;e<=279;)Mr[2*e+1]=7,e++,o[7]++;for(;e<=287;)Mr[2*e+1]=8,e++,o[8]++;for(Hr(Mr,287,o),e=0;e<30;e++)Or[2*e+1]=5,Or[2*e]=Br(e,5);Rr=new Nr(Mr,Sr,257,286,15),Pr=new Nr(Or,Er,0,30,15),zr=new Nr(new Array(0),Ir,0,19,7)}(),Qr=!0),e.l_desc=new Fr(e.dyn_ltree,Rr),e.d_desc=new Fr(e.dyn_dtree,Pr),e.bl_desc=new Fr(e.bl_tree,zr),e.bi_buf=0,e.bi_valid=0,qr(e)}(t),0):ao(e,-2)}(e);return 0===n&&((t=e.state).window_size=2*t.w_size,co(t.head),t.max_lazy_match=oo[t.level].max_lazy,t.good_match=oo[t.level].good_length,t.nice_match=oo[t.level].nice_length,t.max_chain_length=oo[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function wo(e,t){var n,i,r,o,s,a,u,c,l,h,f,d,p,g,v,m,y,_,b,k,w,C,S,E,I;E=e.input,r=(i=e.next_in)+(e.avail_in-5),I=e.output,s=(o=e.next_out)-(t-e.avail_out),a=o+(e.avail_out-257),u=(n=e.state).dmax,c=n.wsize,l=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(d+=E[i++]<<p,d+=E[i++]<<(p+=8),p+=8),_=g[d&m];t:for(;;){if(d>>>=b=_>>>24,p-=b,0==(b=_>>>16&255))I[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=g[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}k=65535&_,(b&=15)&&(p<b&&(d+=E[i++]<<p,p+=8),k+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=E[i++]<<p,d+=E[i++]<<(p+=8),p+=8),_=v[d&y];n:for(;;){if(d>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=v[(65535&_)+(d&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&_,p<(b&=15)&&(d+=E[i++]<<p,(p+=8)<b&&(d+=E[i++]<<p,p+=8)),(w+=d&(1<<b)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=b,p-=b,w>(b=o-s)){if((b=w-b)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,S=f,0===h){if(C+=c-b,b<k){k-=b;do{I[o++]=f[C++]}while(--b);C=o-w,S=I}}else if(h<b){if(C+=c+h-b,(b-=h)<k){k-=b;do{I[o++]=f[C++]}while(--b);if(C=0,h<k){k-=b=h;do{I[o++]=f[C++]}while(--b);C=o-w,S=I}}}else if(C+=h-b,b<k){k-=b;do{I[o++]=f[C++]}while(--b);C=o-w,S=I}for(;k>2;)I[o++]=S[C++],I[o++]=S[C++],I[o++]=S[C++],k-=3;k&&(I[o++]=S[C++],k>1&&(I[o++]=S[C++]))}else{C=o-w;do{I[o++]=I[C++],I[o++]=I[C++],I[o++]=I[C++],k-=3}while(k>2);k&&(I[o++]=I[C++],k>1&&(I[o++]=I[C++]))}break}}break}}while(i<r&&o<a);i-=k=p>>3,d&=(1<<(p-=k<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=p}oo=[new _o(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(vo(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,ho(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-so&&(ho(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(ho(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&ho(e,!1),1)}),new _o(4,4,8,4,mo),new _o(4,5,16,8,mo),new _o(4,6,32,32,mo),new _o(4,4,16,16,yo),new _o(8,16,32,32,yo),new _o(8,16,128,128,yo),new _o(8,32,128,256,yo),new _o(32,128,258,1024,yo),new _o(32,258,258,4096,yo)];var Co=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],So=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Eo=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Io=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function To(e,t,n,i,r,o,s,a){var u,c,l,h,f,d,p,g,v,m=a.bits,y=0,_=0,b=0,k=0,w=0,C=0,S=0,E=0,I=0,T=0,M=null,O=0,D=new kr(16),A=new kr(16),x=null,R=0;for(y=0;y<=15;y++)D[y]=0;for(_=0;_<i;_++)D[t[n+_]]++;for(w=m,k=15;k>=1&&0===D[k];k--);if(w>k&&(w=k),0===k)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(b=1;b<k&&0===D[b];b++);for(w<b&&(w=b),E=1,y=1;y<=15;y++)if(E<<=1,(E-=D[y])<0)return-1;if(E>0&&(0===e||1!==k))return-1;for(A[1]=0,y=1;y<15;y++)A[y+1]=A[y]+D[y];for(_=0;_<i;_++)0!==t[n+_]&&(s[A[t[n+_]]++]=_);if(0===e?(M=x=s,d=19):1===e?(M=Co,O-=257,x=So,R-=257,d=256):(M=Eo,x=Io,d=-1),T=0,_=0,y=b,f=o,C=w,S=0,l=-1,h=(I=1<<w)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){p=y-S,s[_]<d?(g=0,v=s[_]):s[_]>d?(g=x[R+s[_]],v=M[O+s[_]]):(g=96,v=0),u=1<<y-S,b=c=1<<C;do{r[f+(T>>S)+(c-=u)]=p<<24|g<<16|v|0}while(0!==c);for(u=1<<y-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,_++,0==--D[y]){if(y===k)break;y=t[n+s[_]]}if(y>w&&(T&h)!==l){for(0===S&&(S=w),f+=b,E=1<<(C=y-S);C+S<k&&!((E-=D[C+S])<=0);)C++,E<<=1;if(I+=1<<C,1===e&&I>852||2===e&&I>592)return 1;r[l=T&h]=w<<24|C<<16|f-o|0}}return 0!==T&&(r[f+T]=y-S<<24|64<<16|0),a.bits=w,0}function Mo(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Oo(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new kr(320),this.work=new kr(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Do(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new wr(852),t.distcode=t.distdyn=new wr(592),t.sane=1,t.back=-1,0):-2}(e)):-2}var Ao,xo,Ro,Po=!0;function zo(e){if(Po){var t;for(Ao=new wr(512),xo=new wr(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(To(1,e.lens,0,288,Ao,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;To(2,e.lens,0,32,xo,0,e.work,{bits:5}),Po=!1}e.lencode=Ao,e.lenbits=9,e.distcode=xo,e.distbits=5}function Lo(e){if(e<1||e>7)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function No(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}Lo.prototype.init=function(e,t,n,i,r){var o;switch(this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,3!==this.mode&&4!==this.mode||(this.windowBits+=16),7===this.mode&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new yr,this.mode){case 1:case 3:case 5:o=function(e,t,n,i,r,o){if(!e)return-2;var s=1;if(-1===t&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||i<8||i>15||t<0||t>9||o<0||o>4)return ao(e,-2);8===i&&(i=9);var a=new bo;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new br(2*a.w_size),a.head=new kr(a.hash_size),a.prev=new kr(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new br(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=8,ko(e)}(this.strm,this.level,0,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case 7:o=function(e,t){var n,i;return e?(i=new Oo,e.state=i,i.window=null,0!==(n=function(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,Do(e))):-2}(e,t))&&(e.state=null),n):-2}(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===o?(this.write_in_progress=!1,this.init_done=!0):this._error(o)},Lo.prototype.params=function(){throw new Error("deflateParams Not supported")},Lo.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},Lo.prototype.write=function(e,t,n,i,r,o,s){this._writeCheck(),this.write_in_progress=!0;var a=this;return qn(function(){a.write_in_progress=!1;var u=a._write(e,t,n,i,r,o,s);a.callback(u[0],u[1]),a.pending_close&&a.close()}),this},Lo.prototype.writeSync=function(e,t,n,i,r,o,s){return this._writeCheck(),this._write(e,t,n,i,r,o,s)},Lo.prototype._write=function(e,t,n,i,r,o,s){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new p(0),i=0,n=0),r.set=r._set?r._set:No;var a,u=this.strm;switch(u.avail_in=i,u.input=t,u.next_in=n,u.avail_out=s,u.output=r,u.next_out=o,this.mode){case 1:case 3:case 5:a=function(e,t){var n,i,r,o;if(!e||!e.state||t>5||t<0)return e?ao(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return ao(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,fo(i,31),fo(i,139),fo(i,8),i.gzhead?(fo(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),fo(i,255&i.gzhead.time),fo(i,i.gzhead.time>>8&255),fo(i,i.gzhead.time>>16&255),fo(i,i.gzhead.time>>24&255),fo(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),fo(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(fo(i,255&i.gzhead.extra.length),fo(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ro(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(fo(i,0),fo(i,0),fo(i,0),fo(i,0),fo(i,0),fo(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),fo(i,3),i.status=113);else{var s=8+(i.w_bits-8<<4)<<8;s|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=113,po(i,s),0!==i.strstart&&(po(i,e.adler>>>16),po(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=ro(e.adler,i.pending_buf,i.pending-r,r)),lo(e),r=i.pending,i.pending!==i.pending_buf_size));)fo(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=ro(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ro(e.adler,i.pending_buf,i.pending-r,r)),lo(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,fo(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(e.adler=ro(e.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ro(e.adler,i.pending_buf,i.pending-r,r)),lo(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,fo(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(e.adler=ro(e.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&lo(e),i.pending+2<=i.pending_buf_size&&(fo(i,255&e.adler),fo(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(lo(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&uo(t)<=uo(n)&&4!==t)return ao(e,-5);if(666===i.status&&0!==e.avail_in)return ao(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var a=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(vo(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=to(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ho(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(ho(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ho(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,i,r,o,s=e.window;;){if(e.lookahead<=258){if(vo(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=e.strstart+258;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=258-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=to(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=to(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ho(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(ho(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ho(e,!1),0===e.strm.avail_out)?1:2}(i,t):oo[i.level].func(i,t);if(3!==a&&4!==a||(i.status=666),1===a||3===a)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===a&&(1===t?function(e){Vr(e,2,3),jr(e,256,Mr),function(e){16===e.bi_valid?(Gr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}(i):5!==t&&(eo(i,0,0,!1),3===t&&(co(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),lo(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(fo(i,255&e.adler),fo(i,e.adler>>8&255),fo(i,e.adler>>16&255),fo(i,e.adler>>24&255),fo(i,255&e.total_in),fo(i,e.total_in>>8&255),fo(i,e.total_in>>16&255),fo(i,e.total_in>>24&255)):(po(i,e.adler>>>16),po(i,65535&e.adler)),lo(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)}(u,e);break;case 7:case 2:case 4:case 6:a=function(e,t){var n,i,r,o,s,a,u,c,l,h,f,d,p,g,v,m,y,_,b,k,w,C,S,E,I=0,T=new br(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),s=e.next_out,r=e.output,o=e.next_in,i=e.input,c=n.hold,l=n.bits,h=a=e.avail_in,f=u=e.avail_out,C=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;l<16;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(2&n.wrap&&35615===c){n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=ro(n.check,T,2,0),c=0,l=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",n.mode=30;break}if(l-=4,w=8+(15&(c>>>=4)),0===n.wbits)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<w,e.adler=n.check=1,n.mode=512&c?10:12,c=0,l=0;break;case 2:for(;l<16;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(n.flags=c,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ro(n.check,T,2,0)),c=0,l=0,n.mode=3;case 3:for(;l<32;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}n.head&&(n.head.time=c),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=ro(n.check,T,4,0)),c=0,l=0,n.mode=4;case 4:for(;l<16;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ro(n.check,T,2,0)),c=0,l=0,n.mode=5;case 5:if(1024&n.flags){for(;l<16;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ro(n.check,T,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((d=n.length)>a&&(d=a),d&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),_r(n.head.extra,i,o,d,w)),512&n.flags&&(n.check=ro(n.check,i,d,o)),a-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break e;d=0;do{w=i[o+d++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&d<a);if(512&n.flags&&(n.check=ro(n.check,i,d,o)),a-=d,o+=d,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break e;d=0;do{w=i[o+d++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&d<a);if(512&n.flags&&(n.check=ro(n.check,i,d,o)),a-=d,o+=d,w)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;l<16;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;l<32;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}e.adler=n.check=Mo(c),c=0,l=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=l,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&l,l-=7&l,n.mode=27;break}for(;l<3;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}switch(n.last=1&c,l-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(zo(n),n.mode=20,6===t){c>>>=2,l-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,l=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(d=n.length){if(d>a&&(d=a),d>u&&(d=u),0===d)break e;_r(r,i,o,d,s),a-=d,o+=d,u-=d,s+=d,n.length-=d;break}n.mode=12;break;case 17:for(;l<14;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(n.nlen=257+(31&c),l-=5,n.ndist=1+(31&(c>>>=5)),l-=5,n.ncode=4+(15&(c>>>=5)),c>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}n.lens[M[n.have++]]=7&c,c>>>=3,l-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C=To(0,n.lens,0,19,n.lencode,0,n.work,S={bits:n.lenbits}),n.lenbits=S.bits,C){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(I=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&I,!((v=I>>>24)<=l);){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(y<16)c>>>=v,l-=v,n.lens[n.have++]=y;else{if(16===y){for(E=v+2;l<E;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(c>>>=v,l-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}w=n.lens[n.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===y){for(E=v+3;l<E;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}l-=v,w=0,d=3+(7&(c>>>=v)),c>>>=3,l-=3}else{for(E=v+7;l<E;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}l-=v,w=0,d=11+(127&(c>>>=v)),c>>>=7,l-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=w}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C=To(1,n.lens,0,n.nlen,n.lencode,0,n.work,S={bits:n.lenbits}),n.lenbits=S.bits,C){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C=To(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S={bits:n.distbits}),n.distbits=S.bits,C){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(a>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=l,wo(e,f),s=e.next_out,r=e.output,u=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,c=n.hold,l=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;m=(I=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&I,!((v=I>>>24)<=l);){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(m&&0==(240&m)){for(_=v,b=m,k=y;m=(I=n.lencode[k+((c&(1<<_+b)-1)>>_)])>>>16&255,y=65535&I,!(_+(v=I>>>24)<=l);){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}c>>>=_,l-=_,n.back+=_}if(c>>>=v,l-=v,n.back+=v,n.length=y,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=12;break}if(64&m){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(E=n.extra;l<E;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(I=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&I,!((v=I>>>24)<=l);){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(0==(240&m)){for(_=v,b=m,k=y;m=(I=n.distcode[k+((c&(1<<_+b)-1)>>_)])>>>16&255,y=65535&I,!(_+(v=I>>>24)<=l);){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}c>>>=_,l-=_,n.back+=_}if(c>>>=v,l-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(E=n.extra;l<E;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break e;if(n.offset>(d=f-u)){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p=d>n.wnext?n.wsize-(d-=n.wnext):n.wnext-d,d>n.length&&(d=n.length),g=n.window}else g=r,p=s-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{r[s++]=g[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===u)break e;r[s++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;l<32;){if(0===a)break e;a--,c|=i[o++]<<l,l+=8}if(e.total_out+=f-=u,n.total+=f,f&&(e.adler=n.check=n.flags?ro(n.check,r,f,s-f):no(n.check,r,f,s-f)),f=u,(n.flags?c:Mo(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}c=0,l=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break e;a--,c+=i[o++]<<l,l+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}c=0,l=0}n.mode=29;case 29:C=1;break e;case 30:C=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=l,(n.wsize||f!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&function(e,t,n,i){var r,o=e.state;null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new br(o.wsize)),i>=o.wsize?(_r(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),_r(o.window,t,n-i,r,o.wnext),(i-=r)?(_r(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r)))}(e,e.output,e.next_out,f-e.avail_out),f-=e.avail_out,e.total_in+=h-=e.avail_in,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?ro(n.check,r,f,e.next_out-f):no(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||4===t)&&0===C&&(C=-5),C}(u,e);break;default:throw new Error("Unknown mode "+this.mode)}return 1!==a&&0!==a&&this._error(a),this.write_in_progress=!1,[u.avail_in,u.avail_out]},Lo.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,1===this.mode||3===this.mode||5===this.mode?function(e){var t;e&&e.state&&(42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?ao(e,-2):(e.state=null,113===t&&ao(e,-3)))}(this.strm):function(e){if(!e||!e.state)return-2;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},Lo.prototype.reset=function(){switch(this.mode){case 1:case 5:Ro=ko(this.strm);break;case 2:case 6:Ro=Do(this.strm)}0!==Ro&&this._error(Ro)},Lo.prototype._error=function(e){this.onerror(mr[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var Fo=Object.freeze({NONE:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:Lo}),Uo={};Object.keys(Fo).forEach(function(e){Uo[e]=Fo[e]}),Uo.Z_MIN_WINDOWBITS=8,Uo.Z_MAX_WINDOWBITS=15,Uo.Z_DEFAULT_WINDOWBITS=15,Uo.Z_MIN_CHUNK=64,Uo.Z_MAX_CHUNK=1/0,Uo.Z_DEFAULT_CHUNK=16384,Uo.Z_MIN_MEMLEVEL=1,Uo.Z_MAX_MEMLEVEL=9,Uo.Z_DEFAULT_MEMLEVEL=8,Uo.Z_MIN_LEVEL=-1,Uo.Z_MAX_LEVEL=9,Uo.Z_DEFAULT_LEVEL=Uo.Z_DEFAULT_COMPRESSION;var Go={Z_OK:Uo.Z_OK,Z_STREAM_END:Uo.Z_STREAM_END,Z_NEED_DICT:Uo.Z_NEED_DICT,Z_ERRNO:Uo.Z_ERRNO,Z_STREAM_ERROR:Uo.Z_STREAM_ERROR,Z_DATA_ERROR:Uo.Z_DATA_ERROR,Z_MEM_ERROR:Uo.Z_MEM_ERROR,Z_BUF_ERROR:Uo.Z_BUF_ERROR,Z_VERSION_ERROR:Uo.Z_VERSION_ERROR};function Vo(e,t){if("string"==typeof t&&(t=new p(t)),!X(t))throw new TypeError("Not a string or buffer");return e._processChunk(t,Uo.Z_FINISH)}function jo(e){if(!(this instanceof jo))return new jo(e);Ho.call(this,e,Uo.DEFLATE)}function Bo(e){if(!(this instanceof Bo))return new Bo(e);Ho.call(this,e,Uo.INFLATE)}function Ho(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||Uo.Z_DEFAULT_CHUNK,dr.call(this,e),e.flush&&e.flush!==Uo.Z_NO_FLUSH&&e.flush!==Uo.Z_PARTIAL_FLUSH&&e.flush!==Uo.Z_SYNC_FLUSH&&e.flush!==Uo.Z_FULL_FLUSH&&e.flush!==Uo.Z_FINISH&&e.flush!==Uo.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||Uo.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<Uo.Z_MIN_CHUNK||e.chunkSize>Uo.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<Uo.Z_MIN_WINDOWBITS||e.windowBits>Uo.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<Uo.Z_MIN_LEVEL||e.level>Uo.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<Uo.Z_MIN_MEMLEVEL||e.memLevel>Uo.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=Uo.Z_FILTERED&&e.strategy!=Uo.Z_HUFFMAN_ONLY&&e.strategy!=Uo.Z_RLE&&e.strategy!=Uo.Z_FIXED&&e.strategy!=Uo.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!X(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new Uo.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(e,t){n._binding=null,n._hadError=!0;var i=new Error(e);i.errno=t,i.code=Uo.codes[t],n.emit("error",i)};var i=Uo.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(i=e.level);var r=Uo.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(r=e.strategy),this._binding.init(e.windowBits||Uo.Z_DEFAULT_WINDOWBITS,i,e.memLevel||Uo.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new p(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=r,this.once("end",this.close)}return Object.keys(Go).forEach(function(e){Go[Go[e]]=e}),oi(Ho,dr),Ho.prototype.params=function(e,t,n){if(e<Uo.Z_MIN_LEVEL||e>Uo.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=Uo.Z_FILTERED&&t!=Uo.Z_HUFFMAN_ONLY&&t!=Uo.Z_RLE&&t!=Uo.Z_FIXED&&t!=Uo.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(Uo.Z_SYNC_FLUSH,function(){i._binding.params(e,t),i._hadError||(i._level=e,i._strategy=t,n&&n())})}else qn(n)},Ho.prototype.reset=function(){return this._binding.reset()},Ho.prototype._flush=function(e){this._transform(new p(0),"",e)},Ho.prototype.flush=function(e,t){var n=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=Uo.Z_FULL_FLUSH),n.ended)t&&qn(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var i=this;this.once("drain",function(){i.flush(t)})}else this._flushFlag=e,this.write(new p(0),"",t)},Ho.prototype.close=function(e){if(e&&qn(e),!this._closed){this._closed=!0,this._binding.close();var t=this;qn(function(){t.emit("close")})}},Ho.prototype._transform=function(e,t,n){var i,r=this._writableState,o=(r.ending||r.ended)&&(!e||r.length===e.length);if(null===!e&&!X(e))return n(new Error("invalid input"));o?i=Uo.Z_FINISH:(i=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||Uo.Z_NO_FLUSH)),this._processChunk(e,i,n)},Ho.prototype._processChunk=function(e,t,n){var i=e&&e.length,r=this._chunkSize-this._offset,o=0,s=this,a="function"==typeof n;if(!a){var u,c=[],l=0;this.on("error",function(e){u=e});do{var h=this._binding.writeSync(t,e,o,i,this._buffer,this._offset,r)}while(!this._hadError&&g(h[0],h[1]));if(this._hadError)throw u;var f=p.concat(c,l);return this.close(),f}var d=this._binding.write(t,e,o,i,this._buffer,this._offset,r);function g(u,h){if(!s._hadError){var f=r-h;if(function(e,t){if(!e)throw new Error("have should not go down")}(f>=0),f>0){var d=s._buffer.slice(s._offset,s._offset+f);s._offset+=f,a?s.push(d):(c.push(d),l+=d.length)}if((0===h||s._offset>=s._chunkSize)&&(r=s._chunkSize,s._offset=0,s._buffer=new p(s._chunkSize)),0===h){if(o+=i-u,i=u,!a)return!0;var v=s._binding.write(t,e,o,i,s._buffer,s._offset,s._chunkSize);return v.callback=g,void(v.buffer=e)}if(!a)return!1;n()}}d.buffer=e,d.callback=g},oi(jo,Ho),oi(Bo,Ho),oi(function e(t){if(!(this instanceof e))return new e(t);Ho.call(this,t,Uo.GZIP)},Ho),oi(function e(t){if(!(this instanceof e))return new e(t);Ho.call(this,t,Uo.GUNZIP)},Ho),oi(function e(t){if(!(this instanceof e))return new e(t);Ho.call(this,t,Uo.DEFLATERAW)},Ho),oi(function e(t){if(!(this instanceof e))return new e(t);Ho.call(this,t,Uo.INFLATERAW)},Ho),oi(function e(t){if(!(this instanceof e))return new e(t);Ho.call(this,t,Uo.UNZIP)},Ho),function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SDKAPPID=t,this.EXPIRETIME=i,this.PRIVATEKEY=n}var t;return(t=[{key:"genTestUserSig",value:function(e){return this._isNumber(this.SDKAPPID)?this._isString(this.PRIVATEKEY)?this._isString(e)?this._isNumber(this.EXPIRETIME)?(console.log("sdkAppID="+this.SDKAPPID+" key="+this.PRIVATEKEY+" userID="+e+" expire="+this.EXPIRETIME),this.genSigWithUserbuf(e,this.EXPIRETIME,null)):(console.error("expireTime must be a number"),""):(console.error("userID must be a string"),""):(console.error("privateKey must be a string"),""):(console.error("sdkAppID must be a number"),"")}},{key:"newBuffer",value:function(e,t){return p.from?p.from(e,t):new p(e,t)}},{key:"unescape",value:function(e){return e.replace(/_/g,"=").replace(/\-/g,"/").replace(/\*/g,"+")}},{key:"escape",value:function(e){return e.replace(/\+/g,"*").replace(/\//g,"-").replace(/=/g,"_")}},{key:"encode",value:function(e){return this.escape(this.newBuffer(e).toString("base64"))}},{key:"decode",value:function(e){return this.newBuffer(this.unescape(e),"base64")}},{key:"base64encode",value:function(e){return this.newBuffer(e).toString("base64")}},{key:"base64decode",value:function(e){return this.newBuffer(e,"base64").toString()}},{key:"_hmacsha256",value:function(e,t,n,i){var r="TLS.identifier:"+e+"\n";r+="TLS.sdkappid:"+this.SDKAPPID+"\n",r+="TLS.time:"+t+"\n",r+="TLS.expire:"+n+"\n",null!=i&&(r+="TLS.userbuf:"+i+"\n");var o=Rn.HmacSHA256(r,this.PRIVATEKEY);return Rn.enc.Base64.stringify(o)}},{key:"_utc",value:function(){return Math.round(Date.now()/1e3)}},{key:"_isNumber",value:function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===An(e)&&e.constructor===Number)}},{key:"_isString",value:function(e){return"string"==typeof e}},{key:"genSigWithUserbuf",value:function(e,t,n){var i=this._utc(),r={"TLS.ver":"2.0","TLS.identifier":e,"TLS.sdkappid":this.SDKAPPID,"TLS.time":i,"TLS.expire":t},o="";if(null!=n){var s=this.base64encode(n);r["TLS.userbuf"]=s,o=this._hmacsha256(e,i,t,s)}else o=this._hmacsha256(e,i,t,null);r["TLS.sig"]=o;var a=JSON.stringify(r),u=function(e,t){return Vo(new jo(void 0),e)}(this.newBuffer(a)).toString("base64"),c=this.escape(u);return console.log("ret="+c),c}},{key:"validate",value:function(e){var t=function(e,t){return Vo(new Bo(void 0),e)}(this.decode(e));console.log("validate ret="+t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}()}()},8765:function(i,r,s){"use strict";function u(e){return"function"==typeof e}var c=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else c&&console.log("RxJS: Back to a better error behavior. Thank you. <3");c=e},get useDeprecatedSynchronousErrorHandling(){return c}};function y(e){setTimeout(function(){throw e},0)}var k={closed:!0,next:function(e){},error:function(e){if(p.useDeprecatedSynchronousErrorHandling)throw e;y(e)},complete:function(){}},C=Array.isArray||function(e){return e&&"number"==typeof e.length};function S(e){return null!==e&&"object"==typeof e}var E,I=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),T=((E=function(){function e(t){b(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return w(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(u(i))try{i.call(this)}catch(l){t=l instanceof I?M(l.errors):[l]}if(C(r))for(var s=-1,a=r.length;++s<a;){var c=r[s];if(S(c))try{c.unsubscribe()}catch(l){t=t||[],l instanceof I?t=t.concat(M(l.errors)):t.push(l)}}if(t)throw new I(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new E),E);function M(e){return e.reduce(function(e,t){return e.concat(t instanceof I?t.errors:t)},[])}var O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),D=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;switch(b(this,n),(o=t.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=k;break;case 1:if(!e){o.destination=k;break}if("object"==typeof e){e instanceof n?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(m(o))):(o.syncErrorThrowable=!0,o.destination=new A(m(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new A(m(o),e,i,r)}return o}return w(n,[{key:O,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,f(_(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,i){var r=new n(e,t,i);return r.syncErrorThrowable=!1,r}}]),n}(T),A=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s,a;b(this,n),(s=t.call(this))._parentSubscriber=e;var c=m(s);return u(i)?a=i:i&&(a=i.next,r=i.error,o=i.complete,i!==k&&(u((c=Object.create(i)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(m(s)))),s._context=c,s._next=a,s._error=r,s._complete=o,s}return w(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=p.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):y(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;y(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw n;y(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return p.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(y(i),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(D),x="function"==typeof Symbol&&Symbol.observable||"@@observable";function R(e){return e}var P,z=((P=function(){function e(t){b(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return w(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var i=this.operator,r=function(e,t,n){if(e){if(e instanceof D)return e;if(e[O])return e[O]()}return e||t||n?new D(e,t,n):new D(k)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||p.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),p.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){p.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,r=t.isStopped;if(n||r)return!1;e=i&&i instanceof D?i:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=L(t))(function(t,i){var r;r=n.subscribe(function(t){try{e(t)}catch(n){i(n),r&&r.unsubscribe()}},i,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:x,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(i=t).length?R:1===i.length?i[0]:function(e){return i.reduce(function(e,t){return t(e)},e)})(this);var i}},{key:"toPromise",value:function(e){var t=this;return new(e=L(e))(function(e,n){var i;t.subscribe(function(e){return i=e},function(e){return n(e)},function(){return e(i)})})}}]),e}()).create=function(e){return new P(e)},P);function L(e){if(e||(e=p.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var N,F=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),U=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).subject=e,r.subscriber=i,r.closed=!1,r}return w(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(T),G=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e)).destination=e,i}return n}(D),V=((N=function(e){d(n,e);var t=g(n);function n(){var e;return b(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return w(n,[{key:O,value:function(){return new G(this)}},{key:"lift",value:function(e){var t=new j(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new F;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)}},{key:"error",value:function(e){if(this.closed)throw new F;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new F;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new F;return f(_(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new F;return this.hasError?(e.error(this.thrownError),T.EMPTY):this.isStopped?(e.complete(),T.EMPTY):(this.observers.push(e),new U(this,e))}},{key:"asObservable",value:function(){var e=new z;return e.source=this,e}}]),n}(z)).create=function(e,t){return new j(e,t)},N),j=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).destination=e,r.source=i,r}return w(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):T.EMPTY}}]),n}(V);function B(e){return e&&"function"==typeof e.schedule}var H=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this)).parent=e,o.outerValue=i,o.outerIndex=r,o.index=0,o}return w(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(D),q=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}};var W="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",K=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Y(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var $=function(e){if(e&&"function"==typeof e[x])return n=e,function(e){var t=n[x]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(K(e))return q(e);if(Y(e))return function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,y),t}}(e);if(e&&"function"==typeof e[W])return t=e,function(e){for(var n=t[W]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,i=S(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(i," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function Z(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new H(e,n,i);if(!r.closed)return t instanceof z?t.subscribe(r):$(t)(r)}var X=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"notifyNext",value:function(e,t,n,i,r){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(D);function J(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Q(e,t))}}var Q=function(){function e(t,n){b(this,e),this.project=t,this.thisArg=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new ee(e,this.project,this.thisArg))}}]),e}(),ee=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e)).project=i,o.count=0,o.thisArg=r||m(o),o}return w(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(D);function te(e,t){return new z(function(n){var i=new T,r=0;return i.add(t.schedule(function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function ne(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[x]}(e))return function(e,t){return new z(function(n){var i=new T;return i.add(t.schedule(function(){var r=e[x]();i.add(r.subscribe({next:function(e){i.add(t.schedule(function(){return n.next(e)}))},error:function(e){i.add(t.schedule(function(){return n.error(e)}))},complete:function(){i.add(t.schedule(function(){return n.complete()}))}}))})),i})}(e,t);if(Y(e))return function(e,t){return new z(function(n){var i=new T;return i.add(t.schedule(function(){return e.then(function(e){i.add(t.schedule(function(){n.next(e),i.add(t.schedule(function(){return n.complete()}))}))},function(e){i.add(t.schedule(function(){return n.error(e)}))})})),i})}(e,t);if(K(e))return te(e,t);if(function(e){return e&&"function"==typeof e[W]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new z(function(n){var i,r=new T;return r.add(function(){i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(function(){i=e[W](),r.add(t.schedule(function(){if(!n.closed){var e,t;try{var r=i.next();e=r.value,t=r.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof z?e:new z($(e))}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(i){return i.pipe(ie(function(n,i){return ne(e(n,i)).pipe(J(function(e,r){return t(n,e,i,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new re(e,n))})}var re=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;b(this,e),this.project=t,this.concurrent=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new oe(e,this.project,this.concurrent))}}]),e}(),oe=function(e){d(n,e);var t=g(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return b(this,n),(r=t.call(this,e)).project=i,r.concurrent=o,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return w(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var i=new H(this,t,n),r=this.destination;r.add(i);var o=Z(this,e,void 0,void 0,i);o!==i&&r.add(o)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,i,r){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(X);function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return ie(R,e)}function ae(e,t){return t?te(e,t):new z(q(e))}function ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return B(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof o&&(i=t.pop()),null===r&&1===t.length&&t[0]instanceof z?t[0]:se(i)(ae(t,r))}function ce(){return function(e){return e.lift(new he(e))}}var le,he=function(){function e(t){b(this,e),this.connectable=t}return w(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var i=new fe(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}]),e}(),fe=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).connectable=i,r}return w(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null}}]),n}(D),de=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).source=e,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return w(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new T).add(this.source.subscribe(new ge(this.getSubject(),this))),e.closed&&(this._connection=null,e=T.EMPTY)),e}},{key:"refCount",value:function(){return ce()(this)}}]),n}(z),pe={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(le=de.prototype)._subscribe},_isComplete:{value:le._isComplete,writable:!0},getSubject:{value:le.getSubject},connect:{value:le.connect},refCount:{value:le.refCount}},ge=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).connectable=i,r}return w(n,[{key:"_error",value:function(e){this._unsubscribe(),f(_(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),f(_(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(G);function ve(){return new V}function me(){return function(e){return ce()((t=ve,function(e){var n;n="function"==typeof t?t:function(){return t};var i=Object.create(e,pe);return i.source=e,i.subjectFactory=n,i})(e));var t}}function ye(e){for(var t in e)if(e[t]===ye)return t;throw Error("Could not find renamed property on target object.")}function _e(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function be(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(be).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ke(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var we=ye({__forward_ref__:ye});function Ce(e){return e.__forward_ref__=Ce,e.toString=function(){return be(this())},e}function Se(e){return Ee(e)?e():e}function Ee(e){return"function"==typeof e&&e.hasOwnProperty(we)&&e.__forward_ref__===Ce}var Ie=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,i))).code=e,r}return n}(l(Error));function Te(e){return"string"==typeof e?e:null==e?"":String(e)}function Me(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Te(e)}function Oe(e,t){var n=t?" in ".concat(t):"";throw new Ie("201","No provider for ".concat(Me(e)," found").concat(n))}function De(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ae(e){return{providers:e.providers||[],imports:e.imports||[]}}function xe(e){return Re(e,Le)||Re(e,Fe)}function Re(e,t){return e.hasOwnProperty(t)?e[t]:null}function Pe(e){return e&&(e.hasOwnProperty(Ne)||e.hasOwnProperty(Ue))?e[Ne]:null}var ze,Le=ye({"\u0275prov":ye}),Ne=ye({"\u0275inj":ye}),Fe=ye({ngInjectableDef:ye}),Ue=ye({ngInjectorDef:ye}),Ge=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function Ve(e){var t=ze;return ze=e,t}function je(e,t,n){var i=xe(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Ge.Optional?null:void 0!==t?t:void Oe(be(e),"Injector")}function Be(e){return{toString:e}.toString()}var He=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),qe=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),We="undefined"!=typeof globalThis&&globalThis,Ke="undefined"!=typeof window&&window,Ye="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$e="undefined"!=typeof global&&global,Ze=We||$e||Ke||Ye,Xe={},Je=[],Qe=ye({"\u0275cmp":ye}),et=ye({"\u0275dir":ye}),tt=ye({"\u0275pipe":ye}),nt=ye({"\u0275mod":ye}),it=ye({"\u0275loc":ye}),rt=ye({"\u0275fac":ye}),ot=ye({__NG_ELEMENT_ID__:ye}),st=0;function at(e){return Be(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===He.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Je,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||qe.Emulated,id:"c",styles:e.styles||Je,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,r=e.features,o=e.pipes;return n.id+=st++,n.inputs=ft(e.inputs,t),n.outputs=ft(e.outputs),r&&r.forEach(function(e){return e(n)}),n.directiveDefs=i?function(){return("function"==typeof i?i():i).map(ut)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(ct)}:null,n})}function ut(e){return gt(e)||function(e){return e[et]||null}(e)}function ct(e){return function(e){return e[tt]||null}(e)}var lt={};function ht(e){var t={type:e.type,bootstrap:e.bootstrap||Je,declarations:e.declarations||Je,imports:e.imports||Je,exports:e.exports||Je,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&Be(function(){lt[e.id]=e.type}),t}function ft(e,t){if(null==e)return Xe;var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}var dt=at;function pt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function gt(e){return e[Qe]||null}function vt(e,t){var n=e[nt]||null;if(!n&&!0===t)throw new Error("Type ".concat(be(e)," does not have '\u0275mod' property."));return n}function mt(e){return Array.isArray(e)&&"object"==typeof e[1]}function yt(e){return Array.isArray(e)&&!0===e[1]}function _t(e){return 0!=(8&e.flags)}function bt(e){return 2==(2&e.flags)}function kt(e){return 1==(1&e.flags)}function wt(e){return null!==e.template}function Ct(e,t){return e.hasOwnProperty(rt)?e[rt]:null}var St,Et=function(){function e(t,n,i){b(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=i}return w(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function It(){return Tt}function Tt(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ot),Mt}function Mt(){var e=Dt(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===Xe)e.previous=t;else for(var i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Ot(e,t,n,i){var r=Dt(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Xe,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Et(u&&u.currentValue,t,s===Xe),e[i]=t}function Dt(e){return e.__ngSimpleChanges__||null}function At(){return void 0!==St?St:"undefined"!=typeof document?document:void 0}function xt(e){return!!e.listen}It.ngInherit=!0;var Rt={createRenderer:function(e,t){return At()}};function Pt(e){for(;Array.isArray(e);)e=e[0];return e}function zt(e,t){return Pt(t[e])}function Lt(e,t){return Pt(t[e.index])}function Nt(e,t){return e.data[t]}function Ft(e,t){return e[t]}function Ut(e,t){var n=t[e];return mt(n)?n:n[0]}function Gt(e){return 4==(4&e[2])}function Vt(e){return 128==(128&e[2])}function jt(e,t){return null==t?null:e[t]}function Bt(e){e[18]=0}function Ht(e,t){e[5]+=t;for(var n=e,i=e[3];null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}var qt={lFrame:gn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Wt(){return qt.bindingsEnabled}function Kt(){return qt.lFrame.lView}function Yt(){return qt.lFrame.tView}function $t(e){return qt.lFrame.contextLView=e,e[8]}function Zt(){for(var e=Xt();null!==e&&64===e.type;)e=e.parent;return e}function Xt(){return qt.lFrame.currentTNode}function Jt(e,t){var n=qt.lFrame;n.currentTNode=e,n.isParent=t}function Qt(){return qt.lFrame.isParent}function en(){qt.lFrame.isParent=!1}function tn(){return qt.isInCheckNoChangesMode}function nn(e){qt.isInCheckNoChangesMode=e}function rn(){var e=qt.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function on(){return qt.lFrame.bindingIndex++}function sn(e){var t=qt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function an(e){qt.lFrame.currentDirectiveIndex=e}function un(e){var t=qt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function cn(){return qt.lFrame.currentQueryIndex}function ln(e){qt.lFrame.currentQueryIndex=e}function hn(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function fn(e,t,n){if(n&Ge.SkipSelf){for(var i=t,r=e;!(null!==(i=i.parent)||n&Ge.Host||(i=hn(r),null===i)||(r=r[15],10&i.type)););if(null===i)return!1;t=i,e=r}var o=qt.lFrame=pn();return o.currentTNode=t,o.lView=e,!0}function dn(e){var t=pn(),n=e[1];qt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function pn(){var e=qt.lFrame,t=null===e?null:e.child;return null===t?gn(e):t}function gn(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function vn(){var e=qt.lFrame;return qt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var mn=vn;function yn(){var e=vn();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function _n(){return qt.lFrame.selectedIndex}function bn(e){qt.lFrame.selectedIndex=e}function kn(){var e=qt.lFrame;return Nt(e.tView,e.selectedIndex)}function wn(){qt.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Cn(e,t){for(var n=t.directiveStart,i=t.directiveEnd;n<i;n++){var r=e.data[n].type.prototype,o=r.ngAfterContentInit,s=r.ngAfterContentChecked,a=r.ngAfterViewInit,u=r.ngAfterViewChecked,c=r.ngOnDestroy;o&&(e.contentHooks||(e.contentHooks=[])).push(-n,o),s&&((e.contentHooks||(e.contentHooks=[])).push(n,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,s)),a&&(e.viewHooks||(e.viewHooks=[])).push(-n,a),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Sn(e,t,n){Tn(e,t,3,n)}function En(e,t,n,i){(3&e[2])===n&&Tn(e,t,n,i)}function In(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Tn(e,t,n,i){for(var r=null!=i?i:-1,o=t.length-1,s=0,a=void 0!==i?65535&e[18]:0;a<o;a++)if("number"==typeof t[a+1]){if(s=t[a],null!=i&&s>=i)break}else t[a]<0&&(e[18]+=65536),(s<r||-1==r)&&(Mn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Mn(e,t,n,i){var r=n[i]<0,o=n[i+1],s=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}var On=function e(t,n,i){b(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i};function Dn(e,t,n){for(var i=xt(e),r=0;r<n.length;){var o=n[r];if("number"==typeof o){if(0!==o)break;r++;var s=n[r++],a=n[r++],u=n[r++];i?e.setAttribute(t,a,u,s):t.setAttributeNS(s,a,u)}else{var c=o,l=n[++r];xn(c)?i&&e.setProperty(t,c,l):i?e.setAttribute(t,c,l):t.setAttribute(c,l),r++}}return r}function An(e){return 3===e||4===e||6===e}function xn(e){return 64===e.charCodeAt(0)}function Rn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,i=0;i<t.length;i++){var r=t[i];"number"==typeof r?n=r:0===n||Pn(e,n,r,null,-1===n||2===n?t[++i]:null)}return e}function Pn(e,t,n,i,r){var o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){var a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){var u=e[o];if("number"==typeof u)break;if(u===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function zn(e){return-1!==e}function Ln(e){return 32767&e}function Nn(e,t){for(var n=e>>16,i=t;n>0;)i=i[15],n--;return i}var Fn=!0;function Un(e){var t=Fn;return Fn=e,t}var Gn=0;function Vn(e,t){var n=Bn(e,t);if(-1!==n)return n;var i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,jn(i.data,e),jn(t,null),jn(i.blueprint,null));var r=Hn(e,t),o=e.injectorIndex;if(zn(r))for(var s=Ln(r),a=Nn(r,t),u=a[1].data,c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c];return t[o+8]=r,o}function jn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Bn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Hn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,i=null,r=t;null!==r;){var o=r[1],s=o.type;if(null===(i=2===s?o.declTNode:1===s?r[6]:null))return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function qn(e,t,n){!function(e,t,n){var i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(ot)&&(i=n[ot]),null==i&&(i=n[ot]=Gn++);var r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function Wn(e,t,n){if(n&Ge.Optional)return e;Oe(t,"NodeInjector")}function Kn(e,t,n,i){if(n&Ge.Optional&&void 0===i&&(i=null),0==(n&(Ge.Self|Ge.Host))){var r=e[9],o=Ve(void 0);try{return r?r.get(t,i,n&Ge.Optional):je(t,i,n&Ge.Optional)}finally{Ve(o)}}return Wn(i,t,n)}function Yn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ge.Default,r=arguments.length>4?arguments[4]:void 0;if(null!==e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ot)?e[ot]:void 0;return"number"==typeof t?t>=0?255&t:Zn:t}(n);if("function"==typeof o){if(!fn(t,e,i))return i&Ge.Host?Wn(r,n,i):Kn(t,n,i,r);try{var s=o(i);if(null!=s||i&Ge.Optional)return s;Oe(n)}finally{mn()}}else if("number"==typeof o){var a=null,u=Bn(e,t),c=-1,l=i&Ge.Host?t[16][6]:null;for((-1===u||i&Ge.SkipSelf)&&(-1!==(c=-1===u?Hn(e,t):t[u+8])&&ti(i,!1)?(a=t[1],u=Ln(c),t=Nn(c,t)):u=-1);-1!==u;){var h=t[1];if(ei(o,u,h.data)){var f=Xn(u,t,n,a,i,l);if(f!==$n)return f}-1!==(c=t[u+8])&&ti(i,t[1].data[u+8]===l)&&ei(o,u,t)?(a=h,u=Ln(c),t=Nn(c,t)):u=-1}}}return Kn(t,n,i,r)}var $n={};function Zn(){return new ni(Zt(),Kt())}function Xn(e,t,n,i,r,o){var s=t[1],a=s.data[e+8],u=Jn(a,s,n,null==i?bt(a)&&Fn:i!=s&&0!=(3&a.type),r&Ge.Host&&o===a);return null!==u?Qn(t,s,u,a):$n}function Jn(e,t,n,i,r){for(var o=e.providerIndexes,s=t.data,a=1048575&o,u=e.directiveStart,c=o>>20,l=r?a+c:e.directiveEnd,h=i?a:a+c;h<l;h++){var f=s[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(r){var d=s[u];if(d&&wt(d)&&d.type===n)return u}return null}function Qn(e,t,n,i){var r=e[n],o=t.data;if(r instanceof On){var s=r;s.resolving&&function(e,t){throw new Ie("200","Circular dependency in DI detected for ".concat(e))}(Me(o[n]));var a=Un(s.canSeeViewProviders);s.resolving=!0;var u=s.injectImpl?Ve(s.injectImpl):null;fn(e,i,Ge.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){var i=t.type.prototype,r=i.ngOnChanges,o=i.ngOnInit,s=i.ngDoCheck;if(r){var a=Tt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,o[n],t)}finally{null!==u&&Ve(u),Un(a),s.resolving=!1,mn()}}return r}function ei(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function ti(e,t){return!(e&Ge.Self||e&Ge.Host&&t)}var ni=function(){function e(t,n){b(this,e),this._tNode=t,this._lView=n}return w(e,[{key:"get",value:function(e,t){return Yn(this._tNode,this._lView,e,void 0,t)}}]),e}();function ii(e){return Be(function(){for(var t=e.prototype.constructor,n=t[rt]||ri(t),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;r&&r!==i;){var o=r[rt]||ri(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return function(e){return new e}})}function ri(e){return Ee(e)?function(){var t=ri(Se(e));return t&&t()}:Ct(e)}function oi(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var i=n.length,r=0;r<i;){var o=n[r];if(An(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}return null}(Zt(),e)}function si(e,t,n){return Be(function(){var i=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof r)return i.apply(this,t),this;var o=h(r,t);return s.annotation=o,s;function s(e,t,n){for(var i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(o),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}var ai=function(){function e(t,n){b(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=De({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return w(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),ui=new ai("AnalyzeForEntryComponents"),ci=Function;function li(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),li(i,t)):t!==e&&t.push(i)}return t}function hi(e,t){e.forEach(function(e){return Array.isArray(e)?hi(e,t):t(e)})}function fi(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function di(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function pi(e,t){for(var n=[],i=0;i<e;i++)n.push(t);return n}function gi(e,t,n){var i=mi(e,t);return i>=0?e[1|i]=n:function(e,t,n,i){var r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i=~i,t,n),i}function vi(e,t){var n=mi(e,t);if(n>=0)return e[1|n]}function mi(e,t){return function(e,t,n){for(var i=0,r=e.length>>1;r!==i;){var o=i+(r-i>>1),s=e[o<<1];if(t===s)return o<<1;s>t?r=o:i=o+1}return~(r<<1)}(e,t)}var yi,_i={},bi=/\n/gm,ki=ye({provide:String,useValue:ye});function wi(e){var t=yi;return yi=e,t}function Ci(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge.Default;if(void 0===yi)throw new Error("inject() must be called from an injection context");return null===yi?je(e,void 0,t):yi.get(e,t&Ge.Optional?null:void 0,t)}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge.Default;return(ze||Ci)(Se(e),t)}var Ei=Si;function Ii(e){for(var t=[],n=0;n<e.length;n++){var i=Se(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");for(var r=void 0,o=Ge.Default,s=0;s<i.length;s++){var a=i[s],u=a.__NG_DI_FLAG__;"number"==typeof u?-1===u?r=a.token:o|=u:r=a}t.push(Si(r,o))}else t.push(Si(i))}return t}function Ti(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}var Mi,Oi,Di=Ti(si("Inject",function(e){return{token:e}}),-1),Ai=Ti(si("Optional"),8),xi=Ti(si("SkipSelf"),4);function Ri(e){var t;return(null===(t=function(){if(void 0===Mi&&(Mi=null,Ze.trustedTypes))try{Mi=Ze.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return Mi}())||void 0===t?void 0:t.createHTML(e))||e}function Pi(e){var t;return(null===(t=function(){if(void 0===Oi&&(Oi=null,Ze.trustedTypes))try{Oi=Ze.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return Oi}())||void 0===t?void 0:t.createHTML(e))||e}var zi=function(){function e(t){b(this,e),this.changingThisBreaksApplicationSecurity=t}return w(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),Li=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(zi),Ni=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(zi),Fi=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(zi),Ui=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(zi),Gi=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(zi);function Vi(e){return e instanceof zi?e.changingThisBreaksApplicationSecurity:e}function ji(e,t){var n=Bi(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function Bi(e){return e instanceof zi&&e.getTypeName()||null}var Hi=function(){function e(t){b(this,e),this.inertDocumentHelper=t}return w(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(Ri(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(n){return null}}}]),e}(),qi=function(){function e(t){if(b(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var i=this.inertDocument.createElement("body");n.appendChild(i)}}return w(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ri(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=Ri(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var i=t.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||e.removeAttribute(i)}for(var r=e.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}]),e}(),Wi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ki=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yi(e){return(e=String(e)).match(Wi)||e.match(Ki)?e:"unsafe:"+e}function $i(e){var t,n={},i=a(e.split(","));try{for(i.s();!(t=i.n()).done;){n[t.value]=!0}}catch(r){i.e(r)}finally{i.f()}return n}function Zi(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0,o=n;r<o.length;r++){var s=o[r];for(var a in s)s.hasOwnProperty(a)&&(e[a]=!0)}return e}var Xi,Ji=$i("area,br,col,hr,img,wbr"),Qi=$i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),er=$i("rp,rt"),tr=Zi(er,Qi),nr=Zi(Ji,Zi(Qi,$i("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zi(er,$i("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),ir=$i("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=$i("srcset"),or=Zi(ir,rr,$i("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$i("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sr=$i("script,style,template"),ar=function(){function e(){b(this,e),this.sanitizedSomething=!1,this.buf=[]}return w(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!nr.hasOwnProperty(t))return this.sanitizedSomething=!0,!sr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,i=e.attributes,r=0;r<i.length;r++){var o=i.item(r),s=o.name,a=s.toLowerCase();if(or.hasOwnProperty(a)){var u=o.value;ir[a]&&(u=Yi(u)),rr[a]&&(n=u,u=(n=String(n)).split(",").map(function(e){return Yi(e.trim())}).join(", ")),this.buf.push(" ",s,'="',lr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();nr.hasOwnProperty(t)&&!Ji.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(lr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cr=/([^\#-~ |!])/g;function lr(e){return e.replace(/&/g,"&amp;").replace(ur,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(cr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hr(e,t){var n=null;try{Xi=Xi||function(e){var t=new qi(e);return function(){try{return!!(new window.DOMParser).parseFromString(Ri(""),"text/html")}catch(e){return!1}}()?new Hi(t):t}(e);var i=t?String(t):"";n=Xi.getInertBodyElement(i);var r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Xi.getInertBodyElement(i)}while(i!==o);return Ri((new ar).sanitizeChildren(fr(n)||n))}finally{if(n)for(var s=fr(n)||n;s.firstChild;)s.removeChild(s.firstChild)}}function fr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var dr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function pr(e){var t=vr();return t?Pi(t.sanitize(dr.HTML,e)||""):ji(e,"HTML")?Pi(Vi(e)):hr(At(),Te(e))}function gr(e){var t=vr();return t?t.sanitize(dr.URL,e)||"":ji(e,"URL")?Vi(e):Yi(Te(e))}function vr(){var e=Kt();return e&&e[12]}function mr(e,t){e.__ngContext__=t}function yr(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function _r(e){return e.ngDebugContext}function br(e){return e.ngOriginalError}function kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.error.apply(e,n)}var wr=function(){function e(){b(this,e),this._console=console}return w(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e.ngErrorLogger||kr}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?_r(e)?_r(e):this._findContext(br(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=br(e);t&&br(t);)t=br(t);return t}}]),e}(),Cr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ze);function Sr(e){return e instanceof Function?e():e}var Er=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function Ir(e,t){return(void 0)(e,t)}function Tr(e){var t=e[3];return yt(t)?t[3]:t}function Mr(e){return Dr(e[13])}function Or(e){return Dr(e[4])}function Dr(e){for(;null!==e&&!yt(e);)e=e[4];return e}function Ar(e,t,n,i,r){if(null!=i){var o,s=!1;yt(i)?o=i:mt(i)&&(s=!0,i=i[0]);var a=Pt(i);0===e&&null!==n?null==r?Ur(t,n,a):Fr(t,n,a,r||null,!0):1===e&&null!==n?Fr(t,n,a,r||null,!0):2===e?function(e,t,n){var i=Vr(e,t);i&&function(e,t,n,i){xt(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,i,r){var o=n[7];o!==Pt(n)&&Ar(t,e,i,o,r);for(var s=10;s<n.length;s++){var a=n[s];$r(a[1],a,e,t,i,o)}}(t,e,o,n,r)}}function xr(e,t,n){return xt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Rr(e,t){var n=e[9],i=n.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,Ht(r,-1)),n.splice(i,1)}function Pr(e,t){if(!(e.length<=10)){var n,i=10+t,r=e[i];if(r){var o=r[17];null!==o&&o!==e&&Rr(o,r),t>0&&(e[i-1][4]=r[4]);var s=di(e,10+t);$r(r[1],n=r,n[11],2,null,null),n[0]=null,n[6]=null;var a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function zr(e,t){if(!(256&t[2])){var n=t[11];xt(n)&&n.destroyNode&&$r(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Lr(e[1],e);for(;t;){var n=null;if(mt(t))n=t[13];else{var i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)mt(t)&&Lr(t[1],t),t=t[3];null===t&&(t=e),mt(t)&&Lr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Lr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var i=0;i<n.length;i+=2){var r=t[n[i]];if(!(r instanceof On)){var o=n[i+1];if(Array.isArray(o))for(var s=0;s<o.length;s+=2){var a=r[o[s]],u=o[s+1];try{u.call(a)}finally{}}else try{o.call(r)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,i=t[7],r=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var s=n[o+1],a="function"==typeof s?s(t):Pt(t[s]),u=i[r=n[o+2]],c=n[o+3];"boolean"==typeof c?a.removeEventListener(n[o],u,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),o+=2}else{var l=i[r=n[o+1]];n[o].call(l)}if(null!==i){for(var h=r+1;h<i.length;h++)(0,i[h])();t[7]=null}}(e,t),1===t[1].type&&xt(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&yt(t[3])){n!==t[3]&&Rr(n,t);var i=t[19];null!==i&&i.detachView(e)}}}function Nr(e,t,n){return function(e,t,n){for(var i=t;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){var r=e.data[i.directiveStart].encapsulation;if(r===qe.None||r===qe.Emulated)return null}return Lt(i,n)}(e,t.parent,n)}function Fr(e,t,n,i,r){xt(e)?e.insertBefore(t,n,i,r):t.insertBefore(n,i,r)}function Ur(e,t,n){xt(e)?e.appendChild(t,n):t.appendChild(n)}function Gr(e,t,n,i,r){null!==i?Fr(e,t,n,i,r):Ur(e,t,n)}function Vr(e,t){return xt(e)?e.parentNode(t):t.parentNode}function jr(e,t,n){return Br(e,t,n)}var Br=function(e,t,n){return 40&e.type?Lt(e,n):null};function Hr(e,t,n,i){var r=Nr(e,i,t),o=t[11],s=jr(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(var a=0;a<n.length;a++)Gr(o,r,n[a],s,!1);else Gr(o,r,n,s,!1)}function qr(e,t){if(null!==t){var n=t.type;if(3&n)return Lt(t,e);if(4&n)return Kr(-1,e[t.index]);if(8&n){var i=t.child;if(null!==i)return qr(e,i);var r=e[t.index];return yt(r)?Kr(-1,r):Pt(r)}if(32&n)return Ir(t,e)()||Pt(e[t.index]);var o=Wr(e,t);return null!==o?Array.isArray(o)?o[0]:qr(Tr(e[16]),o):qr(e,t.next)}return null}function Wr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Kr(e,t){var n=10+e+1;if(n<t.length){var i=t[n],r=i[1].firstChild;if(null!==r)return qr(i,r)}return t[7]}function Yr(e,t,n,i,r,o,s){for(;null!=n;){var a=i[n.index],u=n.type;if(s&&0===t&&(a&&mr(Pt(a),i),n.flags|=4),64!=(64&n.flags))if(8&u)Yr(e,t,n.child,i,r,o,!1),Ar(t,e,r,a,o);else if(32&u){for(var c=Ir(n,i),l=void 0;l=c();)Ar(t,e,r,l,o);Ar(t,e,r,a,o)}else 16&u?Zr(e,t,i,n,r,o):Ar(t,e,r,a,o);n=s?n.projectionNext:n.next}}function $r(e,t,n,i,r,o){Yr(n,i,e.firstChild,t,r,o,!1)}function Zr(e,t,n,i,r,o){var s=n[16],a=s[6].projection[i.projection];if(Array.isArray(a))for(var u=0;u<a.length;u++)Ar(t,e,r,a[u],o);else Yr(e,t,a,s[3],r,o,!0)}function Xr(e,t,n){xt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Jr(e,t,n){xt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Qr(e,t,n){for(var i=e.length;;){var r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){var o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}function eo(e,t,n){for(var i=0;i<e.length;){var r=e[i++];if(n&&"class"===r){if(-1!==Qr((r=e[i]).toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function to(e){return 4===e.type&&"ng-template"!==e.value}function no(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function io(e,t,n){for(var i=4,r=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(An(e[t]))return t;return e.length}(r),s=!1,a=0;a<t.length;a++){var u=t[a];if("number"!=typeof u){if(!s)if(4&i){if(i=2|1&i,""!==u&&!no(e,u,n)||""===u&&1===t.length){if(ro(i))return!1;s=!0}}else{var c=8&i?u:t[++a];if(8&i&&null!==e.attrs){if(!eo(e.attrs,c,n)){if(ro(i))return!1;s=!0}continue}var l=oo(8&i?"class":u,r,to(e),n);if(-1===l){if(ro(i))return!1;s=!0;continue}if(""!==c){var h;h=l>o?"":r[l+1].toLowerCase();var f=8&i?h:null;if(f&&-1!==Qr(f,c,0)||2&i&&c!==h){if(ro(i))return!1;s=!0}}}}else{if(!s&&!ro(i)&&!ro(u))return!1;if(s&&ro(u))continue;s=!1,i=u|1&i}}return ro(i)||s}function ro(e){return 0==(1&e)}function oo(e,t,n,i){if(null===t)return-1;var r=0;if(i||!n){for(var o=!1;r<t.length;){var s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){for(var a=t[++r];"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function so(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;i<t.length;i++)if(io(e,t[i],n))return!0;return!1}function ao(e,t){e:for(var n=0;n<t.length;n++){var i=t[n];if(e.length===i.length){for(var r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function uo(e,t){return e?":not("+t.trim()+")":t}function co(e){for(var t=e[0],n=1,i=2,r="",o=!1;n<e.length;){var s=e[n];if("string"==typeof s)if(2&i){var a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""===r||ro(s)||(t+=uo(o,r),r=""),i=s,o=o||!ro(i);n++}return""!==r&&(t+=uo(o,r)),t}var lo={};function ho(e){fo(Yt(),Kt(),_n()+e,tn())}function fo(e,t,n,i){if(!i)if(3==(3&t[2])){var r=e.preOrderCheckHooks;null!==r&&Sn(t,r,n)}else{var o=e.preOrderHooks;null!==o&&En(t,o,0,n)}bn(n)}function po(e,t){return e<<17|t<<2}function go(e){return e>>17&32767}function vo(e){return 2|e}function mo(e){return(131068&e)>>2}function yo(e,t){return-131069&e|t<<2}function _o(e){return 1|e}function bo(e,t){var n=e.contentQueries;if(null!==n)for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1];if(-1!==o){var s=e.data[o];ln(r),s.contentQueries(2,t[o],o)}}}function ko(e,t,n,i,r,o,s,a,u,c){var l=t.blueprint.slice();return l[0]=r,l[2]=140|i,Bt(l),l[3]=l[15]=e,l[8]=n,l[10]=s||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function wo(e,t,n,i,r){var o,s,a=e.data[t];if(null===a)a=function(e,t,n,i,r){var o=Xt(),s=Qt(),a=e.data[t]=function(e,t,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(e,t,n,i,r),qt.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=i,a.attrs=r;var u=(o=qt.lFrame,s=o.currentTNode,o.isParent?s:s.parent);a.injectorIndex=null===u?-1:u.injectorIndex}return Jt(a,!0),a}function Co(e,t,n,i){if(0===n)return-1;for(var r=t.length,o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function So(e,t,n){dn(t);try{var i=e.viewQuery;null!==i&&es(1,i,n);var r=e.template;null!==r&&To(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&bo(e,t),e.staticViewQueries&&es(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)$o(e,t[n])}(t,o)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),s}finally{t[2]&=-5,yn()}}function Eo(e,t,n,i){var r=t[2];if(256!=(256&r)){dn(t);var o=tn();try{Bt(t),qt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&To(e,t,n,2,i);var s=3==(3&r);if(!o)if(s){var a=e.preOrderCheckHooks;null!==a&&Sn(t,a,null)}else{var u=e.preOrderHooks;null!==u&&En(t,u,0,null),In(t,0)}if(function(e){for(var t=Mr(e);null!==t;t=Or(t))if(t[2])for(var n=t[9],i=0;i<n.length;i++){var r=n[i],o=r[3];0==(1024&r[2])&&Ht(o,1),r[2]|=1024}}(t),function(e){for(var t=Mr(e);null!==t;t=Or(t))for(var n=10;n<t.length;n++){var i=t[n],r=i[1];Vt(i)&&Eo(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&bo(e,t),!o)if(s){var c=e.contentCheckHooks;null!==c&&Sn(t,c)}else{var l=e.contentHooks;null!==l&&En(t,l,1),In(t,1)}!function(e,t){var n,i,r,o=e.hostBindingOpCodes;if(null!==o)try{for(var s=0;s<o.length;s++){var a=o[s];if(a<0)bn(~a);else{var u=a,c=o[++s],l=o[++s];n=c,i=u,r=void 0,(r=qt.lFrame).bindingIndex=r.bindingRootIndex=n,an(i),l(2,t[u])}}}finally{bn(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Ko(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&es(2,f,i),!o)if(s){var d=e.viewCheckHooks;null!==d&&Sn(t,d)}else{var p=e.viewHooks;null!==p&&En(t,p,2),In(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ht(t[3],-1))}finally{yn()}}}function Io(e,t,n,i){var r=t[10],o=!tn(),s=Gt(t);try{o&&!s&&r.begin&&r.begin(),s&&So(e,t,i),Eo(e,t,n,i)}finally{o&&!s&&r.end&&r.end()}}function To(e,t,n,i,r){var o=_n(),s=2&i;try{bn(-1),s&&t.length>20&&fo(e,t,20,tn()),n(i,r)}finally{bn(o)}}function Mo(e,t,n){if(_t(t))for(var i=t.directiveEnd,r=t.directiveStart;r<i;r++){var o=e.data[r];o.contentQueries&&o.contentQueries(1,n[r],r)}}function Oo(e,t,n){Wt()&&(function(e,t,n,i){var r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Vn(n,t),mr(i,t);for(var s=n.initialInputs,a=r;a<o;a++){var u=e.data[a],c=wt(u);c&&Bo(t,n,u);var l=Qn(t,e,a,n);mr(l,t),null!==s&&Ho(0,a-r,l,u,0,s),c&&(Ut(n.index,t)[8]=l)}}(e,t,n,Lt(n,t)),128==(128&n.flags)&&function(e,t,n){var i=n.directiveStart,r=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{bn(o);for(var a=i;a<r;a++){var u=e.data[a],c=t[a];an(a),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||Fo(u,c)}}finally{bn(-1),an(s)}}(e,t,n))}function Do(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt,i=t.localNames;if(null!==i)for(var r=t.index+1,o=0;o<i.length;o+=2){var s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}function Ao(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=xo(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function xo(e,t,n,i,r,o,s,a,u,c){var l=20+i,h=l+r,f=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i<e?null:lo);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ro(e,t,n,i){var r=ns(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&is(e).push(i,r.length-1))}function Po(e,t,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function zo(e,t,n,i,r,o,s,a){var u,c=Lt(t,n),l=t.inputs;!a&&null!=l&&(u=l[i])?(ss(e,n,u,i,r),bt(t)&&function(e,t){var n=Ut(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(i=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.value||"",i):r,xt(o)?o.setProperty(c,i,r):xn(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function Lo(e,t,n,i){var r=!1;if(Wt()){var o=function(e,t,n){var i=e.directiveRegistry,r=null;if(i)for(var o=0;o<i.length;o++){var s=i[o];so(n,s.selectors,!1)&&(r||(r=[]),qn(Vn(n,t),e,s.type),wt(s)?(Uo(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),s=null===i?null:{"":-1};if(null!==o){r=!0,Vo(n,e.data.length,o.length);for(var a=0;a<o.length;a++){var u=o[a];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=Co(e,t,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Rn(n.mergedAttrs,d.hostAttrs),jo(e,n,t,h,d),Go(h,d,s),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,i=e.data,r=t.attrs,o=[],s=null,a=null,u=t.directiveStart;u<n;u++){var c=i[u],l=c.inputs,h=null===r||to(t)?null:qo(l,r);o.push(h),s=Po(l,u,s),a=Po(c.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n)}s&&function(e,t,n){if(t)for(var i=e.localNames=[],r=0;r<t.length;r+=2){var o=n[t[r+1]];if(null==o)throw new Ie("301","Export of name '".concat(t[r+1],"' not found!"));i.push(t[r],o)}}(n,i,s)}return n.mergedAttrs=Rn(n.mergedAttrs,n.attrs),r}function No(e,t,n,i,r,o){var s=o.hostBindings;if(s){var a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);var u=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(i,r,s)}}function Fo(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Uo(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Go(e,t,n){if(n){if(t.exportAs)for(var i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;wt(t)&&(n[""]=e)}}function Vo(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function jo(e,t,n,i,r){e.data[i]=r;var o=r.factory||(r.factory=Ct(r.type)),s=new On(o,wt(r),null);e.blueprint[i]=s,n[i]=s,No(e,t,0,i,Co(e,n,r.hostVars,lo),r)}function Bo(e,t,n){var i=Lt(t,e),r=Ao(n),o=e[10],s=Zo(e,ko(e,r,null,n.onPush?64:16,i,t,o,o.createRenderer(i,n),null,null));e[t.index]=s}function Ho(e,t,n,i,r,o){var s=o[t];if(null!==s)for(var a=i.setInput,u=0;u<s.length;){var c=s[u++],l=s[u++],h=s[u++];null!==a?i.setInput(n,h,c,l):n[l]=h}}function qo(e,t){for(var n=null,i=0;i<t.length;){var r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Wo(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function Ko(e,t){var n=Ut(t,e);if(Vt(n)){var i=n[1];80&n[2]?Eo(i,n,i.template,n[8]):n[5]>0&&Yo(n)}}function Yo(e){for(var t=Mr(e);null!==t;t=Or(t))for(var n=10;n<t.length;n++){var i=t[n];if(1024&i[2]){var r=i[1];Eo(r,i,r.template,i[8])}else i[5]>0&&Yo(i)}var o=e[1].components;if(null!==o)for(var s=0;s<o.length;s++){var a=Ut(o[s],e);Vt(a)&&a[5]>0&&Yo(a)}}function $o(e,t){var n=Ut(t,e),i=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),So(i,n,n[8])}function Zo(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Xo(e){for(;e;){e[2]|=64;var t=Tr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Jo(e,t,n){var i=t[10];i.begin&&i.begin();try{Eo(e,t,e.template,n)}catch(r){throw os(t,r),r}finally{i.end&&i.end()}}function Qo(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],i=yr(n),r=i[1];Io(r,i,r.template,n)}}(e[8])}function es(e,t,n){ln(0),t(e,n)}var ts=Promise.resolve(null);function ns(e){return e[7]||(e[7]=[])}function is(e){return e.cleanup||(e.cleanup=[])}function rs(e,t,n){return(null===e||wt(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function os(e,t){var n=e[9],i=n?n.get(wr,null):null;i&&i.handleError(t)}function ss(e,t,n,i,r){for(var o=0;o<n.length;){var s=n[o++],a=n[o++],u=t[s],c=e.data[s];null!==c.setInput?c.setInput(u,r,i,a):u[a]=r}}function as(e,t,n){var i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];"number"==typeof a?o=a:1==o?r=ke(r,a):2==o&&(i=ke(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}var us,cs=new ai("INJECTOR",-1),ls=function(){function e(){b(this,e)}return w(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_i;if(t===_i){var n=new Error("NullInjectorError: No provider for ".concat(be(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),hs=new ai("Set Injector scope."),fs={},ds={};function ps(){return void 0===us&&(us=new ls),us}function gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return new vs(e,n,t||ps(),i)}var vs=function(){function e(t,n,i){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;b(this,e),this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var s=[];n&&hi(n,function(e){return r.processProvider(e,t,n)}),hi([t],function(e){return r.processInjectorType(e,[],s)}),this.records.set(cs,_s(void 0,this));var a=this.records.get(hs);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof t?null:be(t))}return w(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge.Default;this.assertNotDestroyed();var i,r=wi(this);try{if(!(n&Ge.SkipSelf)){var o=this.records.get(e);if(void 0===o){var s=("function"==typeof(i=e)||"object"==typeof i&&i instanceof ai)&&xe(e);o=s&&this.injectableDefInScope(s)?_s(ms(e),fs):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&Ge.Self?ps():this.parent).get(e,t=n&Ge.Optional&&t===_i?null:t)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(be(e)),r)throw a;return function(e,t,n,i){var r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var r=be(t);if(Array.isArray(t))r=t.map(be).join(" -> ");else if("object"==typeof t){var o=[];for(var s in t)if(t.hasOwnProperty(s)){var a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):be(a)))}r="{".concat(o.join(", "),"}")}return"".concat(n).concat(i?"("+i+")":"","[").concat(r,"]: ").concat(e.replace(bi,"\n  "))}("\n"+e.message,r,"R3InjectorError",i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(a,e,0,this.source)}throw a}finally{wi(r)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(be(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var i=this;if(!(e=Se(e)))return!1;var r=Pe(e),o=null==r&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==n.indexOf(s);if(void 0!==o&&(r=Pe(o)),null==r)return!1;if(null!=r.imports&&!a){var u;n.push(s);try{hi(r.imports,function(e){i.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))})}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,r=t.providers;hi(r,function(e){return i.processProvider(e,n,r||Je)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(s);var h=Ct(s)||function(){return new s};this.records.set(s,_s(h,fs));var f=r.providers;if(null!=f&&!a){var d=e;hi(f,function(e){return i.processProvider(e,d,f)})}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var i=ks(e=Se(e))?e:Se(e&&e.provide),r=function(e,t,n){return bs(e)?_s(void 0,e.useValue):_s(ys(e),fs)}(e);if(ks(e)||!0!==e.multi)this.records.get(i);else{var o=this.records.get(i);o||((o=_s(void 0,fs,!0)).factory=function(){return Ii(o.multi)},this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,r)}},{key:"hydrate",value:function(e,t){var n;return t.value===fs&&(t.value=ds,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=Se(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function ms(e){var t=xe(e),n=null!==t?t.factory:Ct(e);if(null!==n)return n;if(e instanceof ai)throw new Error("Token ".concat(be(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=pi(t,"?");throw new Error("Can't resolve all parameters for ".concat(be(e),": (").concat(n.join(", "),")."))}var i=function(e){var t=e&&(e[Le]||e[Fe]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==i?function(){return i.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function ys(e,t,n){var i,r;if(ks(e)){var s=Se(e);return Ct(s)||ms(s)}if(bs(e))i=function(){return Se(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,o(Ii(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return Si(Se(e.useExisting))};else{var a=Se(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ct(a)||ms(a);i=function(){return h(a,o(Ii(e.deps)))}}return i}function _s(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function bs(e){return null!==e&&"object"==typeof e&&ki in e}function ks(e){return"function"==typeof e}var ws=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,r=gs(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)},Cs=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?ws(e,t,""):ws(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=_i,e.NULL=new ls,e.\u0275prov=De({token:e,providedIn:"any",factory:function(){return Si(cs)}}),e.__NG_ELEMENT_ID__=-1,e}();function Ss(e,t){Cn(yr(e)[1],Zt())}function Es(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,i=[e];t;){var r=void 0;if(wt(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(n){i.push(r);var o=e;o.inputs=Is(e.inputs),o.declaredInputs=Is(e.declaredInputs),o.outputs=Is(e.outputs);var s=r.hostBindings;s&&Os(e,s);var a=r.viewQuery,u=r.contentQueries;if(a&&Ts(e,a),u&&Ms(e,u),_e(e.inputs,r.inputs),_e(e.declaredInputs,r.declaredInputs),_e(e.outputs,r.outputs),wt(r)&&r.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(r.data.animation)}}var l=r.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===Es&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,i=e.length-1;i>=0;i--){var r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Rn(r.hostAttrs,n=Rn(n,r.hostAttrs))}}(i)}function Is(e){return e===Xe?{}:e===Je?[]:e}function Ts(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,i){t(e,i),n(e,i)}:t}function Ms(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,i,r){t(e,i,r),n(e,i,r)}:t}function Os(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,i){t(e,i),n(e,i)}:t}var Ds=null;function As(){if(!Ds){var e=Ze.Symbol;if(e&&e.iterator)Ds=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Ds=i)}}return Ds}var xs=function(){function e(t){b(this,e),this.wrapped=t}return w(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Rs(e){return!!Ps(e)&&(Array.isArray(e)||!(e instanceof Map)&&As()in e)}function Ps(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function zs(e,t,n){return e[t]=n}function Ls(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ns(e,t,n,i){var r=Kt();return Ls(r,on(),t)&&(Yt(),function(e,t,n,i,r,o){var s=Lt(e,t);!function(e,t,n,i,r,o,s){if(null==o)xt(e)?e.removeAttribute(t,r,n):t.removeAttribute(r);else{var a=null==s?Te(o):s(o,i||"",r);xt(e)?e.setAttribute(t,r,a,n):n?t.setAttributeNS(n,r,a):t.setAttribute(r,a)}}(t[11],s,o,e.value,n,i,r)}(kn(),r,e,t,n,i)),Ns}function Fs(e,t,n,i){return Ls(e,on(),n)?t+Te(n)+i:lo}function Us(e,t,n,i,r,o,s,a){var u=Kt(),c=Yt(),l=e+20,h=c.firstCreatePass?function(e,t,n,i,r,o,s,a,u){var c=t.consts,l=wo(t,e,4,s||null,jt(c,a));Lo(t,n,l,jt(c,u)),Cn(t,l);var h=l.tViews=xo(2,l,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,i,r,o,s):c.data[l];Jt(h,!1);var f=u[11].createComment("");Hr(c,u,f,h),mr(f,u),Zo(u,u[l]=Wo(f,u,f,h)),kt(h)&&Oo(c,u,h),null!=s&&Do(u,h,a)}function Gs(e){return Ft(qt.lFrame.contextLView,20+e)}function Vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge.Default,n=Kt();return null===n?Si(e,t):Yn(Zt(),n,Se(e),t)}function js(e,t,n){var i=Kt();return Ls(i,on(),t)&&zo(Yt(),kn(),i,e,t,i[11],n,!1),js}function Bs(e,t,n,i,r){var o=r?"class":"style";ss(e,n,t.inputs[o],o,i)}function Hs(e,t,n,i){var r=Kt(),o=Yt(),s=20+e,a=r[11],u=r[s]=xr(a,t,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,i,r,o,s){var a=t.consts,u=wo(t,e,2,r,jt(a,o));return Lo(t,n,u,jt(a,s)),null!==u.attrs&&as(u,u.attrs,!1),null!==u.mergedAttrs&&as(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,r,0,t,n,i):o.data[s];Jt(c,!0);var l=c.mergedAttrs;null!==l&&Dn(a,u,l);var h=c.classes;null!==h&&Jr(a,u,h);var f=c.styles;null!==f&&Xr(a,u,f),64!=(64&c.flags)&&Hr(o,r,u,c),0===qt.lFrame.elementDepthCount&&mr(u,r),qt.lFrame.elementDepthCount++,kt(c)&&(Oo(o,r,c),Mo(o,c,r)),null!==i&&Do(r,c)}function qs(){var e=Zt();Qt()?en():Jt(e=e.parent,!1);var t=e;qt.lFrame.elementDepthCount--;var n=Yt();n.firstCreatePass&&(Cn(n,e),_t(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Bs(n,t,Kt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Bs(n,t,Kt(),t.stylesWithoutHost,!1)}function Ws(e,t,n,i){Hs(e,t,n,i),qs()}function Ks(e,t,n){var i=Kt(),r=Yt(),o=e+20,s=r.firstCreatePass?function(e,t,n,i,r){var o=t.consts,s=jt(o,i),a=wo(t,e,8,"ng-container",s);return null!==s&&as(a,s,!0),Lo(t,n,a,jt(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,i,t,n):r.data[o];Jt(s,!0);var a=i[o]=i[11].createComment("");Hr(r,i,a,s),mr(a,i),kt(s)&&(Oo(r,i,s),Mo(r,s,i)),null!=n&&Do(i,s)}function Ys(){var e=Zt(),t=Yt();Qt()?en():Jt(e=e.parent,!1),t.firstCreatePass&&(Cn(t,e),_t(e)&&t.queries.elementEnd(e))}function $s(){return Kt()}function Zs(e){return!!e&&"function"==typeof e.then}function Xs(e){return!!e&&"function"==typeof e.subscribe}var Js=Xs;function Qs(e,t,n,i){var r=Kt(),o=Yt(),s=Zt();return ta(o,r,r[11],s,e,t,!!n,i),Qs}function ea(e,t){var n=Zt(),i=Kt(),r=Yt();return ta(r,i,rs(un(r.data),n,i),n,e,t,!1),ea}function ta(e,t,n,i,r,o,s,a){var u=kt(i),c=e.firstCreatePass&&is(e),l=ns(t),h=!0;if(3&i.type||a){var f=Lt(i,t),d=a?a(f):f,p=l.length,g=a?function(e){return a(Pt(e[i.index]))}:i.index;if(xt(n)){var v=null;if(!a&&u&&(v=function(e,t,n,i){var r=e.cleanup;if(null!=r)for(var o=0;o<r.length-1;o+=2){var s=r[o];if(s===n&&r[o+1]===i){var a=t[7],u=r[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,h=!1;else{o=ia(i,t,0,o,!1);var m=n.listen(d,r,o);l.push(o,m),c&&c.push(r,g,p,p+1)}}else o=ia(i,t,0,o,!0),d.addEventListener(r,o,s),l.push(o),c&&c.push(r,g,p,s)}else o=ia(i,t,0,o,!1);var y,_=i.outputs;if(h&&null!==_&&(y=_[r])){var b=y.length;if(b)for(var k=0;k<b;k+=2){var w=t[y[k]][y[k+1]].subscribe(o),C=l.length;l.push(o,w),c&&c.push(r,i.index,C,-(C+1))}}}function na(e,t,n,i){try{return!1!==n(i)}catch(r){return os(e,r),!1}}function ia(e,t,n,i,r){return function n(o){if(o===Function)return i;var s=2&e.flags?Ut(e.index,t):t;0==(32&t[2])&&Xo(s);for(var a=na(t,0,i,o),u=n.__ngNextListenerFn__;u;)a=na(t,0,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(qt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,qt.lFrame.contextLView))[8]}(e)}function oa(e,t){for(var n=null,i=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),r=0;r<t.length;r++){var o=t[r];if("*"!==o){if(null===i?so(e,o,!0):ao(i,o))return r}else n=r}return n}function sa(e){var t=Kt()[16][6];if(!t.projection)for(var n=t.projection=pi(e?e.length:1,null),i=n.slice(),r=t.child;null!==r;){var o=e?oa(r,e):0;null!==o&&(i[o]?i[o].projectionNext=r:n[o]=r,i[o]=r),r=r.next}}function aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=Kt(),r=Yt(),o=wo(r,20+e,16,null,n||null);null===o.projection&&(o.projection=t),en(),64!=(64&o.flags)&&function(e,t,n){Zr(t[11],0,t,n,Nr(e,n,t),jr(n.parent||t[6],n,t))}(r,i,o)}function ua(e,t,n,i,r){for(var o=e[n+1],s=null===t,a=i?go(o):mo(o),u=!1;0!==a&&(!1===u||s);){var c=e[a+1];ca(e[a],t)&&(u=!0,e[a+1]=i?_o(c):vo(c)),a=i?go(c):mo(c)}u&&(e[n+1]=i?vo(o):_o(o))}function ca(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&mi(e,t)>=0}var la={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ha(e){return e.substring(la.key,la.keyEnd)}function fa(e){return e.substring(la.value,la.valueEnd)}function da(e,t){var n=la.textEnd;return n===t?-1:(t=la.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,la.key=t,n),va(e,t,n))}function pa(e,t){var n=la.textEnd,i=la.key=va(e,t,n);return n===i?-1:(i=la.keyEnd=function(e,t,n){for(var i;t<n&&(45===(i=e.charCodeAt(t))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)t++;return t}(e,i,n),i=ma(e,i,n),i=la.value=va(e,i,n),i=la.valueEnd=function(e,t,n){for(var i=-1,r=-1,o=-1,s=t,a=s;s<n;){var u=e.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=ya(e,u,s,n):t===s-4&&85===o&&82===r&&76===i&&40===u?a=s=ya(e,41,s,n):u>32&&(a=s),o=r,r=i,i=-33&u}return a}(e,i,n),ma(e,i,n))}function ga(e){la.key=0,la.keyEnd=0,la.value=0,la.valueEnd=0,la.textEnd=e.length}function va(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function ma(e,t,n,i){return(t=va(e,t,n))<n&&t++,t}function ya(e,t,n,i){for(var r=-1,o=n;o<i;){var s=e.charCodeAt(o++);if(s==t&&92!==r)return o;r=92==s&&92===r?0:s}throw new Error}function _a(e,t,n){return Sa(e,t,n,!1),_a}function ba(e,t){return Sa(e,t,null,!0),ba}function ka(e,t){for(var n=function(e){return ga(e),pa(e,va(e,0,la.textEnd))}(t);n>=0;n=pa(t,n))Da(e,ha(t),fa(t))}function wa(e){Ea(gi,Ca,e,!0)}function Ca(e,t){for(var n=function(e){return ga(e),da(e,va(e,0,la.textEnd))}(t);n>=0;n=da(t,n))gi(e,ha(t),!0)}function Sa(e,t,n,i){var r=Kt(),o=Yt(),s=sn(2);o.firstUpdatePass&&Ta(o,e,s,i),t!==lo&&Ls(r,s,t)&&Aa(o,o.data[_n()],r,r[11],e,r[s+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=be(Vi(e)))),e}(t,n),i,s)}function Ea(e,t,n,i){var r=Yt(),o=sn(2);r.firstUpdatePass&&Ta(r,null,o,i);var s=Kt();if(n!==lo&&Ls(s,o,n)){var a=r.data[_n()];if(Pa(a,i)&&!Ia(r,o)){var u=i?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=ke(u,n||"")),Bs(r,a,s,n,i)}else!function(e,t,n,i,r,o,s,a){r===lo&&(r=Je);for(var u=0,c=0,l=0<r.length?r[0]:null,h=0<o.length?o[0]:null;null!==l||null!==h;){var f=u<r.length?r[u+1]:void 0,d=c<o.length?o[c+1]:void 0,p=void 0,g=null;l===h?(u+=2,c+=2,f!==d&&(g=h,p=d)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=d),null!==g&&Aa(e,t,n,i,g,p,s,a),l=u<r.length?r[u]:null,h=c<o.length?o[c]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function(e,t,n){if(null==n||""===n)return Je;var i=[],r=Vi(n);if(Array.isArray(r))for(var o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(var s in r)r.hasOwnProperty(s)&&e(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,o)}}function Ia(e,t){return t>=e.expandoStartIndex}function Ta(e,t,n,i){var r=e.data;if(null===r[n+1]){var o=r[_n()],s=Ia(e,n);Pa(o,i)&&null===t&&!s&&(t=!1),t=function(e,t,n,i){var r=un(e),o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=Oa(n=Ma(null,e,t,n,i),t.attrs,i),o=null);else{var s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=Ma(r,e,t,n,i),null===o){var a=function(e,t,n){var i=n?t.classBindings:t.styleBindings;if(0!==mo(i))return e[go(i)]}(e,t,i);void 0!==a&&Array.isArray(a)&&function(e,t,n,i){e[go(n?t.classBindings:t.styleBindings)]=i}(e,t,i,a=Oa(a=Ma(null,e,t,a[1],i),t.attrs,i))}else o=function(e,t,n){for(var i,r=t.directiveEnd,o=1+t.directiveStylingLast;o<r;o++)i=Oa(i,e[o].hostAttrs,n);return Oa(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function(e,t,n,i,r,o){var s=o?t.classBindings:t.styleBindings,a=go(s),u=mo(s);e[i]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||mi(h,c)>0)&&(l=!0)}else c=n;if(r)if(0!==u){var f=go(e[a+1]);e[i+1]=po(f,a),0!==f&&(e[f+1]=yo(e[f+1],i)),e[a+1]=131071&e[a+1]|i<<17}else e[i+1]=po(a,0),0!==a&&(e[a+1]=yo(e[a+1],i)),a=i;else e[i+1]=po(u,0),0===a?a=i:e[u+1]=yo(e[u+1],i),u=i;l&&(e[i+1]=vo(e[i+1])),ua(e,c,i,!0),ua(e,c,i,!1),function(e,t,n,i,r){var o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&mi(o,t)>=0&&(n[i+1]=_o(n[i+1]))}(t,c,e,i,o),s=po(a,u),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}function Ma(e,t,n,i,r){var o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=Oa(i,(o=t[a]).hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function Oa(e,t,n){var i=n?1:2,r=-1;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),gi(e,s,!!n||t[++o]))}return void 0===e?null:e}function Da(e,t,n){gi(e,t,Vi(n))}function Aa(e,t,n,i,r,o,s,a){if(3&t.type){var u=e.data,c=u[a+1];Ra(1==(1&c)?xa(u,t,n,r,mo(c),s):void 0)||(Ra(o)||2==(2&c)&&(o=xa(u,null,n,r,a,s)),function(e,t,n,i,r){var o=xt(e);if(t)r?o?e.addClass(n,i):n.classList.add(i):o?e.removeClass(n,i):n.classList.remove(i);else{var s=-1===i.indexOf("-")?void 0:Er.DashCase;if(null==r)o?e.removeStyle(n,i,s):n.style.removeProperty(i);else{var a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),s|=Er.Important),o?e.setStyle(n,i,r,s):n.style.setProperty(i,r,a?"important":"")}}}(i,s,zt(_n(),n),r,o))}}function xa(e,t,n,i,r,o){for(var s,a=null===t;r>0;){var u=e[r],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[r+1];f===lo&&(f=h?Je:void 0);var d=h?vi(f,i):l===i?f:void 0;if(c&&!Ra(d)&&(d=vi(u,i)),Ra(d)&&(s=d,a))return s;var p=e[r+1];r=a?go(p):mo(p)}if(null!==t){var g=o?t.residualClasses:t.residualStyles;null!=g&&(s=vi(g,i))}return s}function Ra(e){return void 0!==e}function Pa(e,t){return 0!=(e.flags&(t?16:32))}function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Kt(),i=Yt(),r=e+20,o=i.firstCreatePass?wo(i,r,1,t,null):i.data[r],s=n[r]=function(e,t){return xt(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Hr(i,n,s,o),Jt(o,!1)}function La(e){return Na("",e,""),La}function Na(e,t,n){var i=Kt(),r=Fs(i,e,t,n);return r!==lo&&function(e,t,n){var i=zt(t,e);!function(e,t,n){xt(e)?e.setValue(t,n):t.textContent=n}(e[11],i,n)}(i,_n(),r),Na}function Fa(e,t,n){var i=Kt();return Ls(i,on(),t)&&zo(Yt(),kn(),i,e,t,i[11],n,!0),Fa}function Ua(e,t,n){var i=Kt();if(Ls(i,on(),t)){var r=Yt(),o=kn();zo(r,o,i,e,t,rs(un(r.data),o,i),n,!0)}return Ua}var Ga=void 0,Va=["en",[["a","p"],["AM","PM"],Ga],[["AM","PM"],Ga,Ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ga,"{1} 'at' {0}",Ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],ja={};function Ba(e){return e in ja||(ja[e]=Ze.ng&&Ze.ng.common&&Ze.ng.common.locales&&Ze.ng.common.locales[e]),ja[e]}var Ha=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});function qa(e){var t;null==(t=e)&&function(e,t,n,i){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined"," [Expected=> null != ").concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function Wa(e,t,n,i,r){if(e=Se(e),Array.isArray(e))for(var o=0;o<e.length;o++)Wa(e[o],t,n,i,r);else{var s=Yt(),a=Kt(),u=ks(e)?e:Se(e.provide),c=ys(e),l=Zt(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(ks(e)||!e.multi){var p=new On(c,r,Vs),g=$a(u,t,r?h:h+d,f);-1===g?(qn(Vn(l,a),s,u),Ka(s,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(p),a.push(p)):(n[g]=p,a[g]=p)}else{var v=$a(u,t,h+d,f),m=$a(u,t,h,h+d),y=v>=0&&n[v],_=m>=0&&n[m];if(r&&!_||!r&&!y){qn(Vn(l,a),s,u);var b=function(e,t,n,i,r){var o=new On(e,n,Vs);return o.multi=[],o.index=t,o.componentProviders=0,Ya(o,r,i&&!n),o}(r?Xa:Za,n.length,r,i,c);!r&&_&&(n[m].providerFactory=b),Ka(s,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(b),a.push(b)}else Ka(s,e,v>-1?v:m,Ya(n[r?m:v],c,!r&&i));!r&&i&&_&&n[m].componentProviders++}}}function Ka(e,t,n,i){var r=ks(t);if(r||t.useClass){var o=(t.useClass||t).prototype.ngOnDestroy;if(o){var s=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){var a=s.indexOf(n);-1===a?s.push(n,[i,o]):s[a+1].push(i,o)}else s.push(n,o)}}}function Ya(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function $a(e,t,n,i){for(var r=n;r<i;r++)if(t[r]===e)return r;return-1}function Za(e,t,n,i){return Ja(this.multi,[])}function Xa(e,t,n,i){var r,o=this.multi;if(this.providerFactory){var s=this.providerFactory.componentProviders,a=Qn(n,n[1],this.providerFactory.index,i);Ja(o,r=a.slice(0,s));for(var u=s;u<a.length;u++)r.push(a[u])}else Ja(o,r=[]);return r}function Ja(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Qa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,i){return function(e,t,n){var i=Yt();if(i.firstCreatePass){var r=wt(e);Wa(n,i.data,i.blueprint,r,!0),Wa(t,i.data,i.blueprint,r,!1)}}(n,i?i(e):e,t)}}}var eu=function e(){b(this,e)},tu=function(){function e(){b(this,e)}return w(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(be(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),nu=function(){var e=function e(){b(this,e)};return e.NULL=new tu,e}();function iu(){}function ru(e,t){return new su(Lt(e,t))}var ou=function(){return ru(Zt(),Kt())},su=function(){var e=function e(t){b(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=ou,e}();function au(e){return e instanceof su?e.nativeElement:e}var uu=function e(){b(this,e)},cu=function(){var e=function e(){b(this,e)};return e.__NG_ELEMENT_ID__=function(){return lu()},e}(),lu=function(){var e=Kt(),t=Ut(Zt().index,e);return function(e){return e[11]}(mt(t)?t:e)},hu=function(){var e=function e(){b(this,e)};return e.\u0275prov=De({token:e,providedIn:"root",factory:function(){return null}}),e}(),fu=new function e(t){b(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("12.0.1"),du=function(){function e(){b(this,e)}return w(e,[{key:"supports",value:function(e){return Rs(e)}},{key:"create",value:function(e){return new gu(e)}}]),e}(),pu=function(e,t){return t},gu=function(){function e(t){b(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pu}return w(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,i=0,r=null;t||n;){var o=!n||t&&t.currentIndex<_u(n,i,r)?t:n,s=_u(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{r||(r=[]);var u=s-i,c=a-i;if(u!=c){for(var l=0;l<u;l++){var h=l<r.length?r[l]:r[l]=0,f=h+l;c<=f&&f<u&&(r[l]=h+1)}r[o.previousIndex]=c-u}}s!==a&&e(o,s,a)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Rs(e))throw new Error("Error trying to diff '".concat(be(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,i,r,o=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)i=e[a],r=this._trackByFn(a,i),null!==o&&Object.is(o.trackById,r)?(s&&(o=this._verifyReinsertion(o,i,r,a)),Object.is(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,a),s=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var i,r=e[As()]();!(i=r.next()).done;)t(i.value)}(e,function(e){r=t._trackByFn(n,e),null!==o&&Object.is(o.trackById,r)?(s&&(o=t._verifyReinsertion(o,e,r,n)),Object.is(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,r,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,i){var r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):e=this._addAfter(new vu(t,n),r,i),e}},{key:"_verifyReinsertion",value:function(e,t,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new yu),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),vu=function e(t,n){b(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},mu=function(){function e(){b(this,e),this._head=null,this._tail=null}return w(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),yu=function(){function e(){b(this,e),this.map=new Map}return w(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new mu,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function _u(e,t,n){var i=e.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+t+r}var bu=function(){function e(){b(this,e)}return w(e,[{key:"supports",value:function(e){return e instanceof Map||Ps(e)}},{key:"create",value:function(){return new ku}}]),e}(),ku=function(){function e(){b(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return w(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Ps(e)))throw new Error("Error trying to diff '".concat(be(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,i){if(n&&n.key===i)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var r=t._getOrCreateRecordForKey(i,e);n=t._insertBeforeOrAppend(n,r)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new wu(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),wu=function e(t){b(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function Cu(){return new Su([new du])}var Su=function(){var e=function(){function e(t){b(this,e),this.factories=t}return w(e,[{key:"find",value:function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var i=n.factories.slice();t=t.concat(i)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Cu())},deps:[[e,new xi,new Ai]]}}}]),e}();return e.\u0275prov=De({token:e,providedIn:"root",factory:Cu}),e}();function Eu(){return new Iu([new bu])}var Iu=function(){var e=function(){function e(t){b(this,e),this.factories=t}return w(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var i=n.factories.slice();t=t.concat(i)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Eu())},deps:[[e,new xi,new Ai]]}}}]),e}();return e.\u0275prov=De({token:e,providedIn:"root",factory:Eu}),e}();function Tu(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var s=t[n.index];if(null!==s&&i.push(Pt(s)),yt(s))for(var a=10;a<s.length;a++){var u=s[a],c=u[1].firstChild;null!==c&&Tu(u[1],u,c,i)}var l=n.type;if(8&l)Tu(e,t,n.child,i);else if(32&l)for(var h=Ir(n,t),f=void 0;f=h();)i.push(f);else if(16&l){var d=Wr(t,n);if(Array.isArray(d))i.push.apply(i,o(d));else{var p=Tr(t[16]);Tu(p[1],p,d,i,!0)}}n=r?n.projectionNext:n.next}return i}var Mu,Ou=function(){function e(t,n){b(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return w(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return Tu(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(yt(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Pr(e,n),di(t,n))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Ro(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){Xo(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Jo(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){nn(!0);try{Jo(e,t,n)}finally{nn(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,$r(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Du=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e))._view=e,i}return w(n,[{key:"detectChanges",value:function(){Qo(this._view)}},{key:"checkNoChanges",value:function(){!function(e){nn(!0);try{Qo(e)}finally{nn(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Ou),Au=function(e){return function(e,t,n){if(bt(e)&&!n){var i=Ut(e.index,t);return new Ou(i,i)}return 47&e.type?new Ou(t[16],t):null}(Zt(),Kt(),16==(16&e))},xu=function(){var e=function e(){b(this,e)};return e.__NG_ELEMENT_ID__=Au,e}(),Ru=[new bu],Pu=new Su([new du]),zu=new Iu(Ru),Lu=((Mu=function e(){b(this,e)}).__NG_ELEMENT_ID__=function(){return Fu(Zt(),Kt())},Mu),Nu=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this))._declarationLView=e,o._declarationTContainer=i,o.elementRef=r,o}return w(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=ko(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),So(t,n,e),new Ou(n)}}]),n}(Lu);function Fu(e,t){return 4&e.type?new Nu(t,e,ru(e,t)):null}var Uu=function e(){b(this,e)},Gu=function e(){b(this,e)},Vu=function(){return Wu(Zt(),Kt())},ju=function(){var e=function e(){b(this,e)};return e.__NG_ELEMENT_ID__=Vu,e}(),Bu=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this))._lContainer=e,o._hostTNode=i,o._hostLView=r,o}return w(n,[{key:"element",get:function(){return ru(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new ni(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Hn(this._hostTNode,this._hostLView);if(zn(e)){var t=Nn(e,this._hostLView),n=Ln(e);return new ni(t[1].data[n+8],t)}return new ni(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=Hu(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var i=e.createEmbeddedView(t||{});return this.insert(i,n),i}},{key:"createComponent",value:function(e,t,n,i,r){var o=n||this.parentInjector;if(!r&&null==e.ngModule&&o){var s=o.get(Uu,null);s&&(r=s)}var a=e.create(o,i,void 0,r);return this.insert(a.hostView,t),a}},{key:"insert",value:function(e,t){var i=e._lView,r=i[1];if(yt(i[3])){var o=this.indexOf(e);if(-1!==o)this.detach(o);else{var s=i[3],a=new n(s,s[6],s[3]);a.detach(a.indexOf(e))}}var u=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,i){var r=10+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-10?(t[4]=n[r],fi(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;var s=t[17];null!==s&&n!==s&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);var a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,i,c,u);var l=Kr(u,c),h=i[11],f=Vr(h,c[7]);return null!==f&&function(e,t,n,i,r,o){i[0]=r,i[6]=t,$r(e,i,n,1,r,o)}(r,c[6],h,i,f,l),e.attachToViewContainerRef(),fi(qu(c),u,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=Hu(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=Pr(this._lContainer,t);n&&(di(qu(this._lContainer),t),zr(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=Pr(this._lContainer,t);return n&&null!=di(qu(this._lContainer),t)?new Ou(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(ju);function Hu(e){return e[8]}function qu(e){return e[8]||(e[8]=[])}function Wu(e,t){var n,i=t[e.index];if(yt(i))n=i;else{var r;if(8&e.type)r=Pt(i);else{var o=t[11];r=o.createComment("");var s=Lt(e,t);Fr(o,Vr(o,s),r,function(e,t){return xt(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=Wo(i,t,r,e),Zo(t,n)}return new Bu(n,e,t)}var Ku={},Yu=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this)).ngModule=e,i}return w(n,[{key:"resolveComponentFactory",value:function(e){var t=gt(e);return new Xu(t,this.ngModule)}}]),n}(nu);function $u(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Zu=new ai("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Cr}}),Xu=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).componentDef=e,r.ngModule=i,r.componentType=e.type,r.selector=e.selectors.map(co).join(","),r.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],r.isBoundToModule=!!i,r}return w(n,[{key:"inputs",get:function(){return $u(this.componentDef.inputs)}},{key:"outputs",get:function(){return $u(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,i){var r,o,s=(i=i||this.ngModule)?function(e,t){return{get:function(n,i,r){var o=e.get(n,Ku,r);return o!==Ku||i===Ku?o:t.get(n,i,r)}}}(e,i.injector):e,a=s.get(uu,Rt),u=s.get(hu,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(xt(e))return e.selectRootElement(t,n===qe.ShadowDom);var i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(c,n,this.componentDef.encapsulation):xr(a.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:Cr,clean:ts,playerHandler:null,flags:0},p=xo(0,null,null,1,0,null,null,null,null,null),g=ko(null,p,d,f,null,null,a,c,u,s);dn(g);try{var v=function(e,t,n,i,r,o){var s=n[1];n[20]=e;var a=wo(s,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(as(a,u,!0),null!==e&&(Dn(r,e,u),null!==a.classes&&Jr(r,e,a.classes),null!==a.styles&&Xr(r,e,a.styles)));var c=i.createRenderer(e,t),l=ko(n,Ao(t),null,t.onPush?64:16,n[20],a,i,c,null,null);return s.firstCreatePass&&(qn(Vn(a,n),s,t.type),Uo(s,a),Vo(a,n.length,1)),Zo(n,l),n[20]=l}(h,this.componentDef,g,a,c);if(h)if(n)Dn(c,h,["ng-version",fu.full]);else{var m=function(e){for(var t=[],n=[],i=1,r=2;i<e.length;){var o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!ro(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,_=m.classes;y&&Dn(c,h,y),_&&_.length>0&&Jr(c,h,_.join(" "))}if(o=Nt(p,20),void 0!==t)for(var b=o.projection=[],k=0;k<this.ngContentSelectors.length;k++){var w=t[k];b.push(null!=w?Array.from(w):null)}r=function(e,t,n,i,r){var o=n[1],s=function(e,t,n){var i=Zt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),jo(e,i,t,Co(e,t,1,null),n));var r=Qn(t,e,i.directiveStart,i);mr(r,t);var o=Lt(i,t);return o&&mr(o,t),r}(o,n,t);if(i.components.push(s),e[8]=s,r&&r.forEach(function(e){return e(s,t)}),t.contentQueries){var a=Zt();t.contentQueries(1,s,a.directiveStart)}var u=Zt();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(bn(u.index),No(n[1],u,0,u.directiveStart,u.directiveEnd,t),Fo(t,s)),s}(v,this.componentDef,g,d,[Ss]),So(p,g,null)}finally{yn()}return new Ju(this.componentType,r,ru(o,g),g,o)}}]),n}(eu),Ju=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s){var a;return b(this,n),(a=t.call(this)).location=r,a._rootLView=o,a._tNode=s,a.instance=i,a.hostView=a.changeDetectorRef=new Du(o),a.componentType=e,a}return w(n,[{key:"injector",get:function(){return new ni(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return function e(){b(this,e)}}()),Qu=new Map,ec=function(e){d(n,e);var t=g(n);function n(e,i){var r;b(this,n),(r=t.call(this))._parent=i,r._bootstrapComponents=[],r.injector=m(r),r.destroyCbs=[],r.componentFactoryResolver=new Yu(m(r));var o=vt(e),s=e[it]||null;return s&&qa(s),r._bootstrapComponents=Sr(o.bootstrap),r._r3Injector=gs(e,i,[{provide:Uu,useValue:m(r)},{provide:nu,useValue:r.componentFactoryResolver}],be(e)),r._r3Injector._resolveInjectorDefTypes(),r.instance=r.get(e),r}return w(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge.Default;return e===Cs||e===Uu||e===cs?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Uu),tc=function(e){d(n,e);var t=g(n);function n(e){var i,r,o;return b(this,n),(i=t.call(this)).moduleType=e,null!==vt(e)&&(r=e,o=new Set,function e(t){var n=vt(t,!0),i=n.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(be(t)," vs ").concat(be(t.name)))}(i,Qu.get(i),t),Qu.set(i,t));var r,s=a(Sr(n.imports));try{for(s.s();!(r=s.n()).done;){var u=r.value;o.has(u)||(o.add(u),e(u))}}catch(c){s.e(c)}finally{s.f()}}(r)),i}return w(n,[{key:"create",value:function(e){return new ec(this.moduleType,e)}}]),n}(Gu);function nc(e,t,n){var i=rn()+e,r=Kt();return r[i]===lo?zs(r,i,n?t.call(n):t()):function(e,t){return e[t]}(r,i)}function ic(e,t,n,i){return oc(Kt(),rn(),e,t,n,i)}function rc(e,t){var n=e[t];return n===lo?void 0:n}function oc(e,t,n,i,r,o){var s=t+n;return Ls(e,s,r)?zs(e,s+1,o?i.call(o,r):i(r)):rc(e,s+1)}function sc(e,t){var n,i=Yt(),r=e+20;i.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var i=t[n];if(e===i.name)return i}throw new Ie("302","The pipe '".concat(e,"' could not be found!"))}(t,i.pipeRegistry),i.data[r]=n,n.onDestroy&&(i.destroyHooks||(i.destroyHooks=[])).push(r,n.onDestroy)):n=i.data[r];var o=n.factory||(n.factory=Ct(n.type)),s=Ve(Vs);try{var a=Un(!1),u=o();return Un(a),function(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(i,Kt(),r,u),u}finally{Ve(s)}}function ac(e,t,n){var i=e+20,r=Kt(),o=Ft(r,i);return function(e,t){return xs.isWrapped(t)&&(t=xs.unwrap(t),e[qt.lFrame.bindingIndex]=lo),t}(r,function(e,t){return e[1].data[t].pure}(r,i)?oc(r,rn(),t,o.transform,n,o):o.transform(n))}function uc(e){return function(t){setTimeout(e,void 0,t)}}var cc=function(e){d(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return b(this,n),(e=t.call(this)).__isAsync=i,e}return w(n,[{key:"emit",value:function(e){f(_(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,i){var r,o,s,a=e,u=t||function(){return null},c=i;if(e&&"object"==typeof e){var l=e;a=null===(r=l.next)||void 0===r?void 0:r.bind(l),u=null===(o=l.error)||void 0===o?void 0:o.bind(l),c=null===(s=l.complete)||void 0===s?void 0:s.bind(l)}this.__isAsync&&(u=uc(u),a&&(a=uc(a)),c&&(c=uc(c)));var h=f(_(n.prototype),"subscribe",this).call(this,{next:a,error:u,complete:c});return e instanceof T&&e.add(h),h}}]),n}(V);function lc(){return this._results[As()]()}var hc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];b(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=As(),i=e.prototype;i[n]||(i[n]=lc)}return w(e,[{key:"changes",get:function(){return this._changes||(this._changes=new cc)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){this.dirty=!1;var n=li(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),fc=function(){function e(t){b(this,e),this.queryList=t,this.matches=null}return w(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),dc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];b(this,e),this.queries=t}return w(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[],o=0;o<i;o++){var s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new e(r)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Tc(e,t).matches&&this.queries[t].setDirty()}}]),e}(),pc=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;b(this,e),this.predicate=t,this.flags=n,this.read=i},gc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];b(this,e),this.queries=t}return w(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,i=0;i<this.length;i++){var r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),vc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;b(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return w(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var i=0;i<n.length;i++){var r=n[i];this.matchTNodeWithReadOption(e,t,mc(t,r)),this.matchTNodeWithReadOption(e,t,Jn(t,e,r,!1,!1))}else n===Lu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Jn(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var i=this.metadata.read;if(null!==i)if(i===su||i===ju||i===Lu&&4&t.type)this.addMatch(t.index,-2);else{var r=Jn(t,e,i,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function mc(e,t){var n=e.localNames;if(null!==n)for(var i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function yc(e,t,n,i){return-1===n?function(e,t){return 11&e.type?ru(e,t):4&e.type?Fu(e,t):null}(t,e):-2===n?function(e,t,n){return n===su?ru(t,e):n===Lu?Fu(t,e):n===ju?Wu(t,e):void 0}(e,t,i):Qn(e,e[1],n,t)}function _c(e,t,n,i){var r=t[19].queries[i];if(null===r.matches){for(var o=e.data,s=n.matches,a=[],u=0;u<s.length;u+=2){var c=s[u];a.push(c<0?null:yc(t,o[c],s[u+1],n.metadata.read))}r.matches=a}return r.matches}function bc(e,t,n,i){var r=e.queries.getByIndex(n),o=r.matches;if(null!==o)for(var s=_c(e,t,r,n),a=0;a<o.length;a+=2){var u=o[a];if(u>0)i.push(s[a/2]);else{for(var c=o[a+1],l=t[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&bc(f[1],f,c,i)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var g=d[p];bc(g[1],g,c,i)}}}return i}function kc(e){var t=Kt(),n=Yt(),i=cn();ln(i+1);var r=Tc(n,i);if(e.dirty&&Gt(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{var o=r.crossesNgTemplate?bc(n,t,i,[]):_c(n,t,r,i);e.reset(o,au),e.notifyOnChanges()}return!0}return!1}function wc(e,t,n){var i=Yt();i.firstCreatePass&&(Ic(i,new pc(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),Ec(i,Kt(),t)}function Cc(e,t,n,i){var r=Yt();if(r.firstCreatePass){var o=Zt();Ic(r,new pc(t,n,i),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}Ec(r,Kt(),n)}function Sc(){return e=Kt(),t=cn(),e[19].queries[t].queryList;var e,t}function Ec(e,t,n){var i=new hc(4==(4&n));Ro(e,t,i,i.destroy),null===t[19]&&(t[19]=new dc),t[19].queries.push(new fc(i))}function Ic(e,t,n){null===e.queries&&(e.queries=new gc),e.queries.track(new vc(t,n))}function Tc(e,t){return e.queries.getByIndex(t)}function Mc(e,t){return Fu(e,t)}var Oc=new ai("Application Initializer"),Dc=function(){var e=function(){function e(t){var n=this;b(this,e),this.appInits=t,this.resolve=iu,this.reject=iu,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return w(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var i=function(n){var i=e.appInits[n]();if(Zs(i))t.push(i);else if(Js(i)){var r=new Promise(function(e,t){i.subscribe({complete:e,error:t})});t.push(r)}},r=0;r<this.appInits.length;r++)i(r);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Oc,8))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Ac=new ai("AppId"),xc={provide:Ac,useFactory:function(){return"".concat(Rc()).concat(Rc()).concat(Rc())},deps:[]};function Rc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Pc=new ai("Platform Initializer"),zc=new ai("Platform ID"),Lc=new ai("appBootstrapListener"),Nc=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Fc=new ai("LocaleId"),Uc=new ai("DefaultCurrencyCode"),Gc=function e(t,n){b(this,e),this.ngModuleFactory=t,this.componentFactories=n},Vc=function(e){return new tc(e)},jc=Vc,Bc=function(e){return Promise.resolve(Vc(e))},Hc=function(e){var t=Vc(e),n=Sr(vt(e).declarations).reduce(function(e,t){var n=gt(t);return n&&e.push(new Xu(n)),e},[]);return new Gc(t,n)},qc=Hc,Wc=function(e){return Promise.resolve(Hc(e))},Kc=function(){var e=function(){function e(){b(this,e),this.compileModuleSync=jc,this.compileModuleAsync=Bc,this.compileModuleAndAllComponentsSync=qc,this.compileModuleAndAllComponentsAsync=Wc}return w(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Yc=Promise.resolve(0);function $c(e){"undefined"==typeof Zone?Yc.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Zc=function(){function e(t){var n,i,r=t.enableLongStackTrace,o=void 0!==r&&r,s=t.shouldCoalesceEventChangeDetection,a=void 0!==s&&s,u=t.shouldCoalesceRunChangeDetection,c=void 0!==u&&u;if(b(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cc(!1),this.onMicrotaskEmpty=new cc(!1),this.onStable=new cc(!1),this.onError=new cc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!c&&a,this.shouldCoalesceRunChangeDetection=c,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Ze.requestAnimationFrame,t=Ze.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,i=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ze,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,Qc(e),e.isCheckStableRunning=!0,Jc(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),Qc(e))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,r,o,s,a){try{return el(n),e.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&i(),tl(n)}},onInvoke:function(e,t,r,o,s,a,u){try{return el(n),e.invoke(r,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&i(),tl(n)}},onHasTask:function(e,t,i,r){e.hasTask(i,r),t===i&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,Qc(n),Jc(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,t,i,r){return e.handleError(i,r),n.runOutsideAngular(function(){return n.onError.emit(r)}),!1}})}return w(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,i){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,e,Xc,iu,iu);try{return r.runTask(o,t,n)}finally{r.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),Xc={};function Jc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Qc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function el(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tl(e){e._nesting--,Jc(e)}var nl,il=function(){function e(){b(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cc,this.onMicrotaskEmpty=new cc,this.onStable=new cc,this.onError=new cc}return w(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,i){return e.apply(t,n)}}]),e}(),rl=function(){var e=function(){function e(t){var n=this;b(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return w(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Zc.assertNotInAngularZone(),$c(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())$c(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var i=this,r=-1;t&&t>0&&(r=setTimeout(function(){i._callbacks=i._callbacks.filter(function(e){return e.timeoutId!==r}),e(i._didWork,i.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Zc))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),ol=function(){var e=function(){function e(){b(this,e),this._applications=new Map,sl.addToWindow(this)}return w(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return sl.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),sl=new(function(){function e(){b(this,e)}return w(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),al=!0,ul=!1;function cl(){return ul=!0,al}var ll=new ai("AllowMultipleToken"),hl=function e(t,n){b(this,e),this.name=t,this.token=n};function fl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i="Platform: ".concat(t),r=new ai(i);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=dl();if(!o||o.injector.get(ll,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{var s=n.concat(t).concat({provide:r,useValue:!0},{provide:hs,useValue:"platform"});!function(e){if(nl&&!nl.destroyed&&!nl.injector.get(ll,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");nl=e.get(pl);var t=e.get(Pc,null);t&&t.forEach(function(e){return e()})}(Cs.create({providers:s,name:i}))}return function(e){var t=dl();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function dl(){return nl&&!nl.destroyed?nl:null}var pl=function(){var e=function(){function e(t){b(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return w(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,i,r=this,o=(n=t?t.ngZone:void 0,i={ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1},"noop"===n?new il:("zone.js"===n?void 0:n)||new Zc({enableLongStackTrace:cl(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)})),s=[{provide:Zc,useValue:o}];return o.run(function(){var t=Cs.create({providers:s,parent:r.injector,name:e.moduleType.name}),n=e.create(t),i=n.injector.get(wr,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(function(){var e=o.onError.subscribe({next:function(e){i.handleError(e)}});n.onDestroy(function(){yl(r._modules,n),e.unsubscribe()})}),function(e,t,i){try{var o=((s=n.injector.get(Dc)).runInitializers(),s.donePromise.then(function(){return qa(n.injector.get(Fc,"en-US")||"en-US"),r._moduleDoBootstrap(n),n}));return Zs(o)?o.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):o}catch(a){throw t.runOutsideAngular(function(){return e.handleError(a)}),a}var s}(i,o)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=gl({},n);return function(e,t,n){var i=new tc(n);return Promise.resolve(i)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,i)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(ml);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(be(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Cs))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}();function gl(e,t){return Array.isArray(t)?t.reduce(gl,e):Object.assign(Object.assign({},e),t)}var vl,ml=((vl=function(){function e(t,n,i,r,o){var s=this;b(this,e),this._zone=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var a=new z(function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){e.next(s._stable),e.complete()})}),u=new z(function(e){var t;s._zone.runOutsideAngular(function(){t=s._zone.onStable.subscribe(function(){Zc.assertNotInAngularZone(),$c(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Zc.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=ue(a,u.pipe(me()))}return w(e,[{key:"bootstrap",value:function(e,t){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof eu?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var r=n.isBoundToModule?void 0:this._injector.get(Uu),o=n.create(Cs.NULL,[],t||n.selector,r),s=o.location.nativeElement,a=o.injector.get(rl,null),u=a&&o.injector.get(ol);return a&&u&&u.registerApplication(s,a),o.onDestroy(function(){i.detachView(o.hostView),yl(i.components,o),u&&u.unregisterApplication(s)}),this._loadComponent(o),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=a(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(i){n.e(i)}finally{n.f()}}catch(r){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(r)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;yl(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Lc,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||vl)(Si(Zc),Si(Cs),Si(wr),Si(nu),Si(Dc))},vl.\u0275prov=De({token:vl,factory:vl.\u0275fac}),vl);function yl(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var _l=function e(){b(this,e)},bl=function e(){b(this,e)},kl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},wl=function(){var e=function(){function e(t,n){b(this,e),this._compiler=t,this._config=n||kl}return w(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,i=n(e.split("#"),2),r=i[0],o=i[1];return void 0===o&&(o="default"),s(8255)(r).then(function(e){return e[o]}).then(function(e){return Cl(e,r,o)}).then(function(e){return t._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var t=n(e.split("#"),2),i=t[0],r=t[1],o="NgFactory";return void 0===r&&(r="default",o=""),s(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[r+o]}).then(function(e){return Cl(e,i,r)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Kc),Si(bl,8))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}();function Cl(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Sl=fl(null,"core",[{provide:zc,useValue:"unknown"},{provide:pl,deps:[Cs]},{provide:ol,deps:[]},{provide:Nc,deps:[]}]),El=[{provide:ml,useClass:ml,deps:[Zc,Cs,wr,nu,Dc]},{provide:Zu,deps:[Zc],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Dc,useClass:Dc,deps:[[new Ai,Oc]]},{provide:Kc,useClass:Kc,deps:[]},xc,{provide:Su,useFactory:function(){return Pu},deps:[]},{provide:Iu,useFactory:function(){return zu},deps:[]},{provide:Fc,useFactory:function(e){return qa(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new Di(Fc),new Ai,new xi]]},{provide:Uc,useValue:"USD"}],Il=function(){var e=function e(t){b(this,e)};return e.\u0275fac=function(t){return new(t||e)(Si(ml))},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:El}),e}(),Tl=null;function Ml(){return Tl}var Ol=new ai("DocumentToken"),Dl=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({factory:Al,token:e,providedIn:"platform"}),e}();function Al(){return Si(Rl)}var xl=new ai("Location Initialized"),Rl=function(){var e=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this))._doc=e,i._init(),i}return w(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return Ml().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=Ml().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=Ml().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){Pl()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Pl()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(Dl);return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({factory:zl,token:e,providedIn:"platform"}),e}();function Pl(){return!!window.history.pushState}function zl(){return new Rl(Si(Ol))}function Ll(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Nl(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Fl(e){return e&&"?"!==e[0]?"?"+e:e}var Ul=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({factory:Gl,token:e,providedIn:"root"}),e}();function Gl(e){var t=Si(Ol).location;return new jl(Si(Dl),t&&t.origin||"")}var Vl=new ai("appBaseHref"),jl=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;if(b(this,n),(r=t.call(this))._platformLocation=e,r._removeListenerFns=[],null==i&&(i=r._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=i,v(r)}return w(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return Ll(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Fl(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+Fl(i));this._platformLocation.pushState(e,t,r)}},{key:"replaceState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+Fl(i));this._platformLocation.replaceState(e,t,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(Ul);return e.\u0275fac=function(t){return new(t||e)(Si(Dl),Si(Vl,8))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Bl=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this))._platformLocation=e,r._baseHref="",r._removeListenerFns=[],null!=i&&(r._baseHref=i),r}return w(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=Ll(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+Fl(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}},{key:"replaceState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+Fl(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(Ul);return e.\u0275fac=function(t){return new(t||e)(Si(Dl),Si(Vl,8))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Hl=function(){var e=function(){function e(t,n){var i=this;b(this,e),this._subject=new cc,this._urlChangeListeners=[],this._platformStrategy=t;var r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Nl(Wl(r)),this._platformStrategy.onPopState(function(e){i._subject.emit({url:i.path(!0),pop:!0,state:e.state,type:e.type})})}return w(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Fl(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Wl(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Fl(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Fl(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Ul),Si(Dl))},e.normalizeQueryParams=Fl,e.joinWithSlash=Ll,e.stripTrailingSlash=Nl,e.\u0275prov=De({factory:ql,token:e,providedIn:"root"}),e}();function ql(){return new Hl(Si(Ul),Si(Dl))}function Wl(e){return e.replace(/\/index.html$/,"")}var Kl=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Yl=function e(){b(this,e)},$l=function(){var e=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this)).locale=e,i}return w(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Ba(t);if(n)return n;var i=t.split("-")[0];if(n=Ba(i))return n;if("en"===i)return Va;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[Ha.PluralCase]}(t||this.locale)(e)){case Kl.Zero:return"zero";case Kl.One:return"one";case Kl.Two:return"two";case Kl.Few:return"few";case Kl.Many:return"many";default:return"other"}}}]),n}(Yl);return e.\u0275fac=function(t){return new(t||e)(Si(Fc))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}();function Zl(e,t){t=encodeURIComponent(t);var i,r=a(e.split(";"));try{for(r.s();!(i=r.n()).done;){var o=i.value,s=o.indexOf("="),u=n(-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===t)return decodeURIComponent(l)}}catch(h){r.e(h)}finally{r.f()}return null}var Xl=function(){var e=function(){function e(t,n,i,r){b(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=i,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return w(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Rs(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(be(e.item)));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(Su),Vs(Iu),Vs(su),Vs(cu))},e.\u0275dir=dt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e}(),Jl=function(){function e(t,n,i,r){b(this,e),this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}return w(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),Ql=function(){var e=function(){function e(t,n,i){b(this,e),this._viewContainer=t,this._template=n,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return w(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(i){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation(function(e,i,r){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new Jl(null,t._ngForOf,-1,-1),null===r?void 0:r),s=new eh(e,o);n.push(s)}else if(null==r)t._viewContainer.remove(null===i?void 0:i);else if(null!==i){var a=t._viewContainer.get(i);t._viewContainer.move(a,r);var u=new eh(e,a);n.push(u)}});for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);for(var r=0,o=this._viewContainer.length;r<o;r++){var s=this._viewContainer.get(r);s.context.index=r,s.context.count=o,s.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ju),Vs(Lu),Vs(Su))},e.\u0275dir=dt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),eh=function e(t,n){b(this,e),this.record=t,this.view=n},th=function(){var e=function(){function e(t,n){b(this,e),this._viewContainer=t,this._context=new nh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return w(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){ih("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){ih("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ju),Vs(Lu))},e.\u0275dir=dt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),nh=function e(){b(this,e),this.$implicit=null,this.ngIf=null};function ih(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(be(t),"'."))}var rh=function(){function e(t,n){b(this,e),this._viewContainerRef=t,this._templateRef=n,this._created=!1}return w(e,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}]),e}(),oh=function(){var e=function(){function e(){b(this,e),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return w(e,[{key:"ngSwitch",set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}},{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}},{key:"_matchCase",value:function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}},{key:"_updateDefaultCases",value:function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=dt({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e}(),sh=function(){var e=function(){function e(t,n,i){b(this,e),this.ngSwitch=i,i._addCase(),this._view=new rh(t,n)}return w(e,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ju),Vs(Lu),Vs(oh,9))},e.\u0275dir=dt({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e}(),ah=function(){var e=function e(t,n,i){b(this,e),i._addDefault(new rh(t,n))};return e.\u0275fac=function(t){return new(t||e)(Vs(ju),Vs(Lu),Vs(oh,9))},e.\u0275dir=dt({type:e,selectors:[["","ngSwitchDefault",""]]}),e}(),uh=function(){var e=function(){function e(t,n,i){b(this,e),this._ngEl=t,this._differs=n,this._renderer=i,this._ngStyle=null,this._differ=null}return w(e,[{key:"ngStyle",set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}},{key:"ngDoCheck",value:function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}},{key:"_setStyle",value:function(e,t){var i=n(e.split("."),2),r=i[0],o=i[1];null!=(t=null!=t&&o?"".concat(t).concat(o):t)?this._renderer.setStyle(this._ngEl.nativeElement,r,t):this._renderer.removeStyle(this._ngEl.nativeElement,r)}},{key:"_applyChanges",value:function(e){var t=this;e.forEachRemovedItem(function(e){return t._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return t._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._setStyle(e.key,e.currentValue)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(Iu),Vs(cu))},e.\u0275dir=dt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e}(),ch=function(){var e=function(){function e(t){b(this,e),this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return w(e,[{key:"ngOnChanges",value:function(e){if(e.ngTemplateOutlet){var t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ju))},e.\u0275dir=dt({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[It]}),e}(),lh=function(){function e(){b(this,e)}return w(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),hh=new(function(){function e(){b(this,e)}return w(e,[{key:"createSubscription",value:function(e,t){return e.then(t,function(e){throw e})}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),fh=new lh,dh=function(){var e=function(){function e(t){b(this,e),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return w(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})}},{key:"_selectStrategy",value:function(t){if(Zs(t))return hh;if(Xs(t))return fh;throw Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(be(e),"'"))}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu,16))},e.\u0275pipe=pt({name:"async",type:e,pure:!1}),e}(),ph=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[{provide:Yl,useClass:$l}]}),e}(),gh=function(){var e=function e(){b(this,e)};return e.\u0275prov=De({token:e,providedIn:"root",factory:function(){return new vh(Si(Ol),window)}}),e}(),vh=function(){function e(t,n){b(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return w(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;r;){var o=r.shadowRoot;if(o){var s=o.getElementById(t)||o.querySelector('[name="'.concat(t,'"]'));if(s)return s}r=i.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=mh(this.window.history)||mh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(t){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),e}();function mh(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var yh,_h=function e(){b(this,e)},bh=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=(kh=kh||document.querySelector("base"))?kh.getAttribute("href"):null;return null==t?null:function(e){(yh=yh||document.createElement("a")).setAttribute("href",e);var t=yh.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){kh=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return Zl(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,Tl||(Tl=e)}}]),n}(function(e){d(n,e);var t=g(n);function n(){var e;return b(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return n}(function(){return function e(){b(this,e)}}())),kh=null,wh=new ai("TRANSITION_ID"),Ch=[{provide:Oc,useFactory:function(e,t,n){return function(){n.get(Dc).donePromise.then(function(){var n=Ml();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(function(t){return t.getAttribute("ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[wh,Ol,Cs],multi:!0}],Sh=function(){function e(){b(this,e)}return w(e,[{key:"addToWindow",value:function(e){Ze.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},Ze.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Ze.getAllAngularRootElements=function(){return e.getAllRootElements()},Ze.frameworkStabilizers||(Ze.frameworkStabilizers=[]),Ze.frameworkStabilizers.push(function(e){var t=Ze.getAllAngularTestabilities(),n=t.length,i=!1,r=function(t){i=i||t,0==--n&&e(i)};t.forEach(function(e){e.whenStable(r)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var i=e.getTestability(t);return null!=i?i:n?Ml().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,sl=t}}]),e}(),Eh=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Ih=new ai("EventManagerPlugins"),Th=function(){var e=function(){function e(t,n){var i=this;b(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=i}),this._plugins=t.slice().reverse()}return w(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(e))return this._eventNameToPlugin.set(e,r),r}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Ih),Si(Zc))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Mh=function(){function e(t){b(this,e),this._doc=t}return w(e,[{key:"addGlobalEventListener",value:function(e,t,n){var i=Ml().getGlobalEventTarget(this._doc,e);if(!i)throw new Error("Unsupported event target ".concat(i," for event ").concat(t));return this.addEventListener(i,t,n)}}]),e}(),Oh=function(){var e=function(){function e(){b(this,e),this._stylesSet=new Set}return w(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Dh=function(){var e=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this))._doc=e,i._hostNodes=new Map,i._hostNodes.set(e.head,[]),i}return w(n,[{key:"_addStylesToHost",value:function(e,t,n){var i=this;e.forEach(function(e){var r=i._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(Ah),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,i){t._addStylesToHost(e,i,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(Ah)})}}]),n}(Oh);return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}();function Ah(e){Ml().remove(e)}var xh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rh=/%COMP%/g;function Ph(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?Ph(e,r,n):(r=r.replace(Rh,e),n.push(r))}return n}function zh(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Lh=function(){var e=function(){function e(t,n,i){b(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Nh(t)}return w(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case qe.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Fh(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case qe.ShadowDom:return new Uh(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var i=Ph(t.id,t.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Th),Si(Dh),Si(Ac))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Nh=function(){function e(t){b(this,e),this.eventManager=t,this.data=Object.create(null)}return w(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(xh[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,i){if(i){t=i+":"+t;var r=xh[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var i=xh[n];i?e.removeAttributeNS(i,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,i){i&(Er.DashCase|Er.Important)?e.style.setProperty(t,n,i&Er.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&Er.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zh(n)):this.eventManager.addEventListener(e,t,zh(n))}}]),e}(),Fh=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;b(this,n),(s=t.call(this,e)).component=r;var a=Ph(o+"-"+r.id,r.styles,[]);return i.addStyles(a),s.contentAttr="_ngcontent-%COMP%".replace(Rh,o+"-"+r.id),s.hostAttr="_nghost-%COMP%".replace(Rh,o+"-"+r.id),s}return w(n,[{key:"applyToHost",value:function(e){f(_(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var i=f(_(n.prototype),"createElement",this).call(this,e,t);return f(_(n.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),n}(Nh),Uh=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;b(this,n),(s=t.call(this,e)).sharedStylesHost=i,s.hostEl=r,s.shadowRoot=r.attachShadow({mode:"open"}),s.sharedStylesHost.addHost(s.shadowRoot);for(var a=Ph(o.id,o.styles,[]),u=0;u<a.length;u++){var c=document.createElement("style");c.textContent=a[u],s.shadowRoot.appendChild(c)}return s}return w(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return f(_(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,i){return f(_(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,i)}},{key:"removeChild",value:function(e,t){return f(_(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(f(_(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(Nh),Gh=function(){var e=function(e){d(n,e);var t=g(n);function n(e){return b(this,n),t.call(this,e)}return w(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var i=this;return e.addEventListener(t,n,!1),function(){return i.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(Mh);return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Vh=["alt","control","meta","shift"],jh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hh={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},qh=function(){var e=function(e){d(n,e);var t=g(n);function n(e){return b(this,n),t.call(this,e)}return w(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,i){var r=n.parseEventName(t),o=n.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Ml().onAndCancel(e,r.domEventName,o)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),i=t.shift();if(0===t.length||"keydown"!==i&&"keyup"!==i)return null;var r=n._normalizeKey(t.pop()),o="";if(Vh.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")}),o+=r,0!=t.length||0===r.length)return null;var s={};return s.domEventName=i,s.fullKey=o,s}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Bh.hasOwnProperty(t)&&(t=Bh[t]))}return jh[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Vh.forEach(function(i){i!=n&&(0,Hh[i])(e)&&(t+=i+".")}),t+=n}},{key:"eventCallback",value:function(e,t,i){return function(r){n.getEventFullKey(r)===e&&i.runGuarded(function(){return t(r)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(Mh);return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Wh=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({factory:function(){return Si(Yh)},token:e,providedIn:"root"}),e}();function Kh(e){return new Yh(e.get(Ol))}var Yh=function(){var e=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this))._doc=e,i}return w(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case dr.NONE:return t;case dr.HTML:return ji(t,"HTML")?Vi(t):hr(this._doc,String(t)).toString();case dr.STYLE:return ji(t,"Style")?Vi(t):t;case dr.SCRIPT:if(ji(t,"Script"))return Vi(t);throw new Error("unsafe value used in a script context");case dr.URL:return Bi(t),ji(t,"URL")?Vi(t):Yi(String(t));case dr.RESOURCE_URL:if(ji(t,"ResourceURL"))return Vi(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return new Li(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new Ni(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new Fi(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new Ui(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new Gi(e)}}]),n}(Wh);return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({factory:function(){return Kh(Si(cs))},token:e,providedIn:"root"}),e}(),$h=fl(Sl,"browser",[{provide:zc,useValue:"browser"},{provide:Pc,useValue:function(){bh.makeCurrent(),Sh.init()},multi:!0},{provide:Ol,useFactory:function(){return function(e){St=e}(document),document},deps:[]}]),Zh=[[],{provide:hs,useValue:"root"},{provide:wr,useFactory:function(){return new wr},deps:[]},{provide:Ih,useClass:Gh,multi:!0,deps:[Ol,Zc,zc]},{provide:Ih,useClass:qh,multi:!0,deps:[Ol]},[],{provide:Lh,useClass:Lh,deps:[Th,Dh,Ac]},{provide:uu,useExisting:Lh},{provide:Oh,useExisting:Dh},{provide:Dh,useClass:Dh,deps:[Ol]},{provide:rl,useClass:rl,deps:[Zc]},{provide:Th,useClass:Th,deps:[Ih,Zc]},{provide:_h,useClass:Eh,deps:[]},[]],Xh=function(){var e=function(){function e(t){if(b(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return w(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Ac,useValue:t.appId},{provide:wh,useExisting:Ac},Ch]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(e,12))},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:Zh,imports:[ph,Il]}),e}();function Jh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return B(i)?(t.pop(),te(t,i)):ae(t)}"undefined"!=typeof window&&window;var Qh=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this))._value=e,i}return w(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=f(_(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new F;return this._value}},{key:"next",value:function(e){f(_(n.prototype),"next",this).call(this,this._value=e)}}]),n}(V),ef={};function tf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=null,r=null;return B(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&C(t[0])&&(t=t[0]),ae(t,r).lift(new nf(i))}var nf=function(){function e(t){b(this,e),this.resultSelector=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new rf(e,this.resultSelector))}}]),e}(),rf=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).resultSelector=i,r.active=0,r.values=[],r.observables=[],r}return w(n,[{key:"_next",value:function(e){this.values.push(ef),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var i=e[n];this.add(Z(this,i,i,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,i,r){var o=this.values,s=this.toRespond?o[n]===ef?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(X),of=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}();function sf(){return se(1)(Jh.apply(void 0,arguments))}var af=new z(function(e){return e.complete()});function uf(e){return e?function(e){return new z(function(t){return e.schedule(function(){return t.complete()})})}(e):af}function cf(e){return new z(function(t){var n;try{n=e()}catch(i){return void t.error(i)}return(n?ne(n):uf()).subscribe(t)})}function lf(e,t){return"function"==typeof t?function(n){return n.pipe(lf(function(n,i){return ne(e(n,i)).pipe(J(function(e,r){return t(n,e,i,r)}))}))}:function(t){return t.lift(new hf(e))}}var hf=function(){function e(t){b(this,e),this.project=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new ff(e,this.project))}}]),e}(),ff=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).project=i,r.index=0,r}return w(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var i=this.innerSubscription;i&&i.unsubscribe();var r=new H(this,t,n),o=this.destination;o.add(r),this.innerSubscription=Z(this,e,void 0,void 0,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||f(_(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&f(_(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,i,r){this.destination.next(t)}}]),n}(X),df=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function pf(e){return function(t){return 0===e?uf():t.lift(new gf(e))}}var gf=function(){function e(t){if(b(this,e),this.total=t,this.total<0)throw new df}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new vf(e,this.total))}}]),e}(),vf=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).total=i,r.count=0,r}return w(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(D);function mf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return B(i)?(t.pop(),function(e){return sf(t,e,i)}):function(e){return sf(t,e)}}function yf(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new _f(e,t,n))}}var _f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];b(this,e),this.accumulator=t,this.seed=n,this.hasSeed=i}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new bf(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),bf=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,e)).accumulator=i,s._seed=r,s.hasSeed=o,s.index=0,s}return w(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=t,this.destination.next(t)}}]),n}(D);function kf(e,t){return function(n){return n.lift(new wf(e,t))}}var wf=function(){function e(t,n){b(this,e),this.predicate=t,this.thisArg=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Cf(e,this.predicate,this.thisArg))}}]),e}(),Cf=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e)).predicate=i,o.thisArg=r,o.count=0,o}return w(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(D);function Sf(e){return function(t){var n=new Ef(e),i=t.lift(n);return n.caught=i}}var Ef=function(){function e(t){b(this,e),this.selector=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new If(e,this.selector,this.caught))}}]),e}(),If=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e)).selector=i,o.caught=r,o}return w(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(o){return void f(_(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var i=new H(this,void 0,void 0);this.add(i);var r=Z(this,t,void 0,void 0,i);r!==i&&this.add(r)}}}]),n}(X);function Tf(e,t){return ie(e,t,1)}function Mf(e){return function(t){return 0===e?uf():t.lift(new Of(e))}}var Of=function(){function e(t){if(b(this,e),this.total=t,this.total<0)throw new df}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Df(e,this.total))}}]),e}(),Df=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).total=i,r.ring=new Array,r.count=0,r}return w(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var o=t++%n;e.next(i[o])}e.complete()}}]),n}(D);function Af(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pf;return function(t){return t.lift(new xf(e))}}var xf=function(){function e(t){b(this,e),this.errorFactory=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Rf(e,this.errorFactory))}}]),e}(),Rf=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).errorFactory=i,r.hasValue=!1,r}return w(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(D);function Pf(){return new of}function zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Lf(e))}}var Lf=function(){function e(t){b(this,e),this.defaultValue=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Nf(e,this.defaultValue))}}]),e}(),Nf=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).defaultValue=i,r.isEmpty=!0,r}return w(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(D);function Ff(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?kf(function(t,n){return e(t,n,i)}):R,pf(1),n?zf(t):Af(function(){return new of}))}}function Uf(){}function Gf(e,t,n){return function(i){return i.lift(new Vf(e,t,n))}}var Vf=function(){function e(t,n,i){b(this,e),this.nextOrObserver=t,this.error=n,this.complete=i}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new jf(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),jf=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,e))._tapNext=Uf,s._tapError=Uf,s._tapComplete=Uf,s._tapError=r||Uf,s._tapComplete=o||Uf,u(i)?(s._context=m(s),s._tapNext=i):i&&(s._context=i,s._tapNext=i.next||Uf,s._tapError=i.error||Uf,s._tapComplete=i.complete||Uf),s}return w(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(D);function Bf(e){return function(t){return t.lift(new Hf(e))}}var Hf=function(){function e(t){b(this,e),this.callback=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new qf(e,this.callback))}}]),e}(),qf=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).add(new T(i)),r}return n}(D),Wf=function e(t,n){b(this,e),this.id=t,this.url=n},Kf=function(e){d(n,e);var t=g(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b(this,n),(r=t.call(this,e,i)).navigationTrigger=o,r.restoredState=s,r}return w(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Wf),Yf=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e,i)).urlAfterRedirects=r,o}return w(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Wf),$f=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e,i)).reason=r,o}return w(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Wf),Zf=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e,i)).error=r,o}return w(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Wf),Xf=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,e,i)).urlAfterRedirects=r,s.state=o,s}return w(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Wf),Jf=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,e,i)).urlAfterRedirects=r,s.state=o,s}return w(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Wf),Qf=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s){var a;return b(this,n),(a=t.call(this,e,i)).urlAfterRedirects=r,a.state=o,a.shouldActivate=s,a}return w(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Wf),ed=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,e,i)).urlAfterRedirects=r,s.state=o,s}return w(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Wf),td=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,e,i)).urlAfterRedirects=r,s.state=o,s}return w(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Wf),nd=function(){function e(t){b(this,e),this.route=t}return w(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),id=function(){function e(t){b(this,e),this.route=t}return w(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),rd=function(){function e(t){b(this,e),this.snapshot=t}return w(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),od=function(){function e(t){b(this,e),this.snapshot=t}return w(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),sd=function(){function e(t){b(this,e),this.snapshot=t}return w(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),ad=function(){function e(t){b(this,e),this.snapshot=t}return w(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),ud=function(){function e(t,n,i){b(this,e),this.routerEvent=t,this.position=n,this.anchor=i}return w(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),cd=function(){function e(t){b(this,e),this.params=t||{}}return w(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function ld(e){return new cd(e)}function hd(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function fd(e,t,n){var i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;for(var r={},o=0;o<i.length;o++){var s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function dd(e,t){var n,i=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!i||!r||i.length!=r.length)return!1;for(var o=0;o<i.length;o++)if(!pd(e[n=i[o]],t[n]))return!1;return!0}function pd(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=o(e).sort(),i=o(t).sort();return n.every(function(e,t){return i[t]===e})}return e===t}function gd(e){return Array.prototype.concat.apply([],e)}function vd(e){return e.length>0?e[e.length-1]:null}function md(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function yd(e){return Js(e)?e:Zs(e)?ne(Promise.resolve(e)):Jh(e)}var _d={exact:function e(t,n,i){if(!Md(t.segments,n.segments))return!1;if(!Sd(t.segments,n.segments,i))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r],i))return!1}return!0},subset:wd},bd={exact:function(e,t){return dd(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return pd(e[n],t[n])})},ignored:function(){return!0}};function kd(e,t,n){return _d[n.paths](e.root,t.root,n.matrixParams)&&bd[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function wd(e,t,n){return Cd(e,t,t.segments,n)}function Cd(e,t,n,i){if(e.segments.length>n.length){var r=e.segments.slice(0,n.length);return!!Md(r,n)&&!t.hasChildren()&&!!Sd(r,n,i)}if(e.segments.length===n.length){if(!Md(e.segments,n))return!1;if(!Sd(e.segments,n,i))return!1;for(var o in t.children){if(!e.children[o])return!1;if(!wd(e.children[o],t.children[o],i))return!1}return!0}var s=n.slice(0,e.segments.length),a=n.slice(e.segments.length);return!!Md(e.segments,s)&&!!Sd(e.segments,s,i)&&!!e.children.primary&&Cd(e.children.primary,t,a,i)}function Sd(e,t,n){return t.every(function(t,i){return bd[n](e[i].parameters,t.parameters)})}var Ed=function(){function e(t,n,i){b(this,e),this.root=t,this.queryParams=n,this.fragment=i}return w(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Ad.serialize(this)}}]),e}(),Id=function(){function e(t,n){var i=this;b(this,e),this.segments=t,this.children=n,this.parent=null,md(n,function(e,t){return e.parent=i})}return w(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return xd(this)}}]),e}(),Td=function(){function e(t,n){b(this,e),this.path=t,this.parameters=n}return w(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=ld(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Ud(this)}}]),e}();function Md(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var Od=function e(){b(this,e)},Dd=function(){function e(){b(this,e)}return w(e,[{key:"parse",value:function(e){var t=new Hd(e);return new Ed(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,i;return"/".concat(Rd(e.root,!0)).concat((n=e.queryParams,i=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(t){return"".concat(zd(e),"=").concat(zd(t))}).join("&"):"".concat(zd(e),"=").concat(zd(t))}),i.length?"?".concat(i.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),Ad=new Dd;function xd(e){return e.segments.map(function(e){return Ud(e)}).join("/")}function Rd(e,t){if(!e.hasChildren())return xd(e);if(t){var n=e.children.primary?Rd(e.children.primary,!1):"",i=[];return md(e.children,function(e,t){"primary"!==t&&i.push("".concat(t,":").concat(Rd(e,!1)))}),i.length>0?"".concat(n,"(").concat(i.join("//"),")"):n}var r=function(e,t){var n=[];return md(e.children,function(e,i){"primary"===i&&(n=n.concat(t(e,i)))}),md(e.children,function(e,i){"primary"!==i&&(n=n.concat(t(e,i)))}),n}(e,function(t,n){return"primary"===n?[Rd(e.children.primary,!1)]:["".concat(n,":").concat(Rd(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children.primary?"".concat(xd(e),"/").concat(r[0]):"".concat(xd(e),"/(").concat(r.join("//"),")")}function Pd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zd(e){return Pd(e).replace(/%3B/gi,";")}function Ld(e){return Pd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nd(e){return decodeURIComponent(e)}function Fd(e){return Nd(e.replace(/\+/g,"%20"))}function Ud(e){return"".concat(Ld(e.path)).concat((t=e.parameters,Object.keys(t).map(function(e){return";".concat(Ld(e),"=").concat(Ld(t[e]))}).join("")));var t}var Gd=/^[^\/()?;=#]+/;function Vd(e){var t=e.match(Gd);return t?t[0]:""}var jd=/^[^=?&#]+/,Bd=/^[^?&#]+/,Hd=function(){function e(t){b(this,e),this.url=t,this.remaining=t}return w(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Id([],{}):new Id([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Id(e,t)),n}},{key:"parseSegment",value:function(){var e=Vd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Td(Nd(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Vd(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var i=Vd(this.remaining);i&&(n=i,this.capture(n))}e[Nd(t)]=Nd(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(jd);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var i=function(e){var t=e.match(Bd);return t?t[0]:""}(this.remaining);i&&(n=i,this.capture(n))}var r=Fd(t),o=Fd(n);if(e.hasOwnProperty(r)){var s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Vd(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error("Cannot parse url '".concat(this.url,"'"));var r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r="primary");var o=this.parseChildren();t[r]=1===Object.keys(o).length?o.primary:new Id([],o),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),qd=function(){function e(t){b(this,e),this._root=t}return w(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Wd(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=Wd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Kd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return Kd(e,this._root).map(function(e){return e.value})}}]),e}();function Wd(e,t){if(e===t.value)return t;var n,i=a(t.children);try{for(i.s();!(n=i.n()).done;){var r=Wd(e,n.value);if(r)return r}}catch(o){i.e(o)}finally{i.f()}return null}function Kd(e,t){if(e===t.value)return[t];var n,i=a(t.children);try{for(i.s();!(n=i.n()).done;){var r=Kd(e,n.value);if(r.length)return r.unshift(t),r}}catch(o){i.e(o)}finally{i.f()}return[]}var Yd=function(){function e(t,n){b(this,e),this.value=t,this.children=n}return w(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function $d(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var Zd=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).snapshot=i,np(m(r),e),r}return w(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(qd);function Xd(e,t){var n=function(e,t){var n=new ep([],{},{},"",{},"primary",t,null,e.root,-1,{});return new tp("",new Yd(n,[]))}(e,t),i=new Qh([new Td("",{})]),r=new Qh({}),o=new Qh({}),s=new Qh({}),a=new Qh(""),u=new Jd(i,r,s,a,o,"primary",t,n.root);return u.snapshot=n.root,new Zd(new Yd(u,[]),n)}var Jd=function(){function e(t,n,i,r,o,s,a,u){b(this,e),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=u}return w(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(J(function(e){return ld(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(J(function(e){return ld(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function Qd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,i=0;if("always"!==t)for(i=n.length-1;i>=1;){var r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(i))}var ep=function(){function e(t,n,i,r,o,s,a,u,c,l,h){b(this,e),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return w(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=ld(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),tp=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,i)).url=e,np(m(r),i),r}return w(n,[{key:"toString",value:function(){return ip(this._root)}}]),n}(qd);function np(e,t){t.value._routerState=e,t.children.forEach(function(t){return np(e,t)})}function ip(e){var t=e.children.length>0?" { ".concat(e.children.map(ip).join(", ")," } "):"";return"".concat(e.value).concat(t)}function rp(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,dd(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),dd(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!dd(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),dd(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function op(e,t){var n,i;return dd(e.params,t.params)&&Md(n=e.url,i=t.url)&&n.every(function(e,t){return dd(e.parameters,i[t].parameters)})&&!(!e.parent!=!t.parent)&&(!e.parent||op(e.parent,t.parent))}function sp(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var i=n.value;i._futureSnapshot=t.value;var r=function(e,t,n){return t.children.map(function(t){var i,r=a(n.children);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(e.shouldReuseRoute(t.value,o.value.snapshot))return sp(e,t,o)}}catch(s){r.e(s)}finally{r.f()}return sp(e,t)})}(e,t,n);return new Yd(i,r)}if(e.shouldAttach(t.value)){var o=e.retrieve(t.value);if(null!==o){var s=o.route;return ap(t,s),s}}var u,c=new Jd(new Qh((u=t.value).url),new Qh(u.params),new Qh(u.queryParams),new Qh(u.fragment),new Qh(u.data),u.outlet,u.component,u),l=t.children.map(function(t){return sp(e,t)});return new Yd(c,l)}function ap(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)ap(e.children[n],t.children[n])}function up(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function cp(e){return"object"==typeof e&&null!=e&&e.outlets}function lp(e,t,n,i,r){var o={};return i&&md(i,function(e,t){o[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new Ed(n.root===e?t:hp(n.root,e,t),o,r)}function hp(e,t,n){var i={};return md(e.children,function(e,r){i[r]=e===t?n:hp(e,t,n)}),new Id(e.segments,i)}var fp=function(){function e(t,n,i){if(b(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&up(i[0]))throw new Error("Root segment cannot have matrix parameters");var r=i.find(cp);if(r&&r!==vd(i))throw new Error("{outlets:{}} has to be the last command")}return w(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),dp=function e(t,n,i){b(this,e),this.segmentGroup=t,this.processChildren=n,this.index=i};function pp(e,t,n){if(e||(e=new Id([],{})),0===e.segments.length&&e.hasChildren())return gp(e,t,n);var i=function(e,t,n){for(var i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};r<e.segments.length;){if(i>=n.length)return o;var s=e.segments[r],a=n[i];if(cp(a))break;var u="".concat(a),c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!_p(u,c,s))return o;i+=2}else{if(!_p(u,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){var o=new Id(e.segments.slice(0,i.pathIndex),{});return o.children.primary=new Id(e.segments.slice(i.pathIndex),e.children),gp(o,0,r)}return i.match&&0===r.length?new Id(e.segments,{}):i.match&&!e.hasChildren()?vp(e,t,n):i.match?gp(e,0,r):vp(e,t,n)}function gp(e,t,n){if(0===n.length)return new Id(e.segments,{});var i=function(e){return cp(e[0])?e[0].outlets:{primary:e}}(n),r={};return md(i,function(n,i){"string"==typeof n&&(n=[n]),null!==n&&(r[i]=pp(e.children[i],t,n))}),md(e.children,function(e,t){void 0===i[t]&&(r[t]=e)}),new Id(e.segments,r)}function vp(e,t,n){for(var i=e.segments.slice(0,t),r=0;r<n.length;){var o=n[r];if(cp(o)){var s=mp(o.outlets);return new Id(i,s)}if(0===r&&up(n[0]))i.push(new Td(e.segments[t].path,yp(n[0]))),r++;else{var a=cp(o)?o.outlets.primary:"".concat(o),u=r<n.length-1?n[r+1]:null;a&&u&&up(u)?(i.push(new Td(a,yp(u))),r+=2):(i.push(new Td(a,{})),r++)}}return new Id(i,{})}function mp(e){var t={};return md(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=vp(new Id([],{}),0,e))}),t}function yp(e){var t={};return md(e,function(e,n){return t[n]="".concat(e)}),t}function _p(e,t,n){return e==n.path&&dd(t,n.parameters)}var bp=function(){function e(t,n,i,r){b(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}return w(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),rp(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var i=this,r=$d(t);e.children.forEach(function(e){var t=e.value.outlet;i.deactivateRoutes(e,r[t],n),delete r[t]}),md(r,function(e,t){i.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var i=e.value,r=t?t.value:null;if(i===r)if(i.component){var o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var i=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:r})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,r=$d(e),o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];this.deactivateRouteAndItsChildren(r[a],i)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var i=this,r=$d(t);e.children.forEach(function(e){i.activateRoutes(e,r[e.value.outlet],n),i.forwardEvent(new ad(e.value.snapshot))}),e.children.length&&this.forwardEvent(new od(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var i=e.value,r=t?t.value:null;if(rp(i),i===r)if(i.component){var o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(i.component){var s=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){var a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),kp(a.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),c=u?u.module.componentFactoryResolver:null;s.attachRef=null,s.route=i,s.resolver=c,s.outlet&&s.outlet.activateWith(i,c),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function kp(e){rp(e.value),e.children.forEach(kp)}var wp=function e(t,n){b(this,e),this.routes=t,this.module=n};function Cp(e){return"function"==typeof e}function Sp(e){return e instanceof Ed}var Ep=Symbol("INITIAL_VALUE");function Ip(){return lf(function(e){return tf(e.map(function(e){return e.pipe(pf(1),mf(Ep))})).pipe(yf(function(e,t){var n=!1;return t.reduce(function(e,i,r){if(e!==Ep)return e;if(i===Ep&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||Sp(i))return i}return e},e)},Ep),kf(function(e){return e!==Ep}),J(function(e){return Sp(e)?e:!0===e}),pf(1))})}var Tp=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Ws(0,"router-outlet")},directives:function(){return[Cg]},encapsulation:2}),e}();function Mp(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var i=e[n];Op(i,Dp(t,i))}}function Op(e,t){e.children&&Mp(e.children,t)}function Dp(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Ap(e){var t=e.children&&e.children.map(Ap),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Tp),n}function xp(e){return e.outlet||"primary"}function Rp(e,t){var n=e.filter(function(e){return xp(e)===t});return n.push.apply(n,o(e.filter(function(e){return xp(e)!==t}))),n}var Pp={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function zp(e,t,n){var i;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Pp):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var r=(t.matcher||fd)(n,e,t);if(!r)return Object.assign({},Pp);var o={};md(r.posParams,function(e,t){o[t]=e.path});var s=r.consumed.length>0?Object.assign(Object.assign({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function Lp(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return Np(e,t,n)&&"primary"!==xp(n)})}(e,n,i)){var o=new Id(t,function(e,t,n,i){var r={};r.primary=i,i._sourceSegment=e,i._segmentIndexShift=t.length;var o,s=a(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(""===u.path&&"primary"!==xp(u)){var c=new Id([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,r[xp(u)]=c}}}catch(l){s.e(l)}finally{s.f()}return r}(e,t,i,new Id(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return Np(e,t,n)})}(e,n,i)){var s=new Id(e.segments,function(e,t,n,i,r,o){var s,u={},c=a(i);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Np(e,n,l)&&!r[xp(l)]){var h=new Id([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===o?e.segments.length:t.length,u[xp(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},r),u)}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}var u=new Id(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function Np(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Fp(e,t,n,i){return!!(xp(e)===i||"primary"!==i&&Np(t,n,e))&&("**"===e.path||zp(t,e,n).matched)}function Up(e,t,n){return 0===t.length&&!e.children[n]}var Gp=function e(t){b(this,e),this.segmentGroup=t||null},Vp=function e(t){b(this,e),this.urlTree=t};function jp(e){return new z(function(t){return t.error(new Gp(e))})}function Bp(e){return new z(function(t){return t.error(new Vp(e))})}function Hp(e){return new z(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var qp=function(){function e(t,n,i,r,o){b(this,e),this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(Uu)}return w(e,[{key:"apply",value:function(){var e=this,t=Lp(this.urlTree.root,[],[],this.config).segmentGroup,n=new Id(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe(J(function(t){return e.createUrlTree(Wp(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(Sf(function(t){if(t instanceof Vp)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Gp)throw e.noMatchError(t);throw t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(J(function(n){return t.createUrlTree(Wp(n),e.queryParams,e.fragment)})).pipe(Sf(function(e){if(e instanceof Gp)throw t.noMatchError(e);throw e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var i=e.segments.length>0?new Id([],{primary:e}):e;return new Ed(i,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(J(function(e){return new Id([],e)})):this.expandSegment(e,n,t,n.segments,i,!0)}},{key:"expandChildren",value:function(e,t,n){for(var i=this,r=[],o=0,s=Object.keys(n.children);o<s.length;o++){var a=s[o];"primary"===a?r.unshift(a):r.push(a)}return ne(r).pipe(Tf(function(r){var o=n.children[r],s=Rp(t,r);return i.expandSegmentGroup(e,s,o,r).pipe(J(function(e){return{segment:e,outlet:r}}))}),yf(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?kf(function(t,n){return e(t,n,i)}):R,Mf(1),n?zf(t):Af(function(){return new of}))}}())}},{key:"expandSegment",value:function(e,t,n,i,r,o){var s=this;return ne(n).pipe(Tf(function(a){return s.expandSegmentAgainstRoute(e,t,n,a,i,r,o).pipe(Sf(function(e){if(e instanceof Gp)return Jh(null);throw e}))}),Ff(function(e){return!!e}),Sf(function(e,n){if(e instanceof of||"EmptyError"===e.name){if(Up(t,i,r))return Jh(new Id([],{}));throw new Gp(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,i,r,o,s){return Fp(i,t,r,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o):jp(t):jp(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,i){var r=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Bp(o):this.lineralizeSegments(n,o).pipe(ie(function(n){var o=new Id(n,{});return r.expandSegment(e,o,t,n,i,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,i,r,o){var s=this,a=zp(t,i,r),u=a.matched,c=a.consumedSegments,l=a.lastChild,h=a.positionalParamSegments;if(!u)return jp(t);var f=this.applyRedirectCommands(c,i.redirectTo,h);return i.redirectTo.startsWith("/")?Bp(f):this.lineralizeSegments(i,f).pipe(ie(function(i){return s.expandSegment(e,t,n,i.concat(r.slice(l)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,i,r){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?Jh(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe(J(function(e){return n._loadedConfig=e,new Id(i,{})})):Jh(new Id(i,{}));var s=zp(t,n,i),a=s.matched,u=s.consumedSegments,c=s.lastChild;if(!a)return jp(t);var l=i.slice(c);return this.getChildConfig(e,n,i).pipe(ie(function(e){var i=e.module,s=e.routes,a=Lp(t,u,l,s),c=a.segmentGroup,h=a.slicedSegments,f=new Id(c.segments,c.children);if(0===h.length&&f.hasChildren())return o.expandChildren(i,s,f).pipe(J(function(e){return new Id(u,e)}));if(0===s.length&&0===h.length)return Jh(new Id(u,{}));var d=xp(n)===r;return o.expandSegment(i,f,s,h,d?"primary":r,!0).pipe(J(function(e){return new Id(u.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var i=this;return t.children?Jh(new wp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Jh(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(ie(function(n){return n?i.configLoader.load(e.injector,t).pipe(J(function(e){return t._loadedConfig=e,e})):function(e){return new z(function(t){return t.error(hd("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):Jh(new wp([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var i=this,r=t.canLoad;return r&&0!==r.length?Jh(r.map(function(i){var r,o=e.get(i);if(function(e){return e&&Cp(e.canLoad)}(o))r=o.canLoad(t,n);else{if(!Cp(o))throw new Error("Invalid CanLoad guard");r=o(t,n)}return yd(r)})).pipe(Ip(),Gf(function(e){if(Sp(e)){var t=hd('Redirecting to "'.concat(i.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),J(function(e){return!0===e})):Jh(!0)}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],i=t.root;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Jh(n);if(i.numberOfChildren>1||!i.children.primary)return Hp(e.redirectTo);i=i.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,i){var r=this.createSegmentGroup(e,t.root,n,i);return new Ed(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return md(e,function(e,i){if("string"==typeof e&&e.startsWith(":")){var r=e.substring(1);n[i]=t[r]}else n[i]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,i){var r=this,o=this.createSegments(e,t.segments,n,i),s={};return md(t.children,function(t,o){s[o]=r.createSegmentGroup(e,t,n,i)}),new Id(o,s)}},{key:"createSegments",value:function(e,t,n,i){var r=this;return t.map(function(t){return t.path.startsWith(":")?r.findPosParam(e,t,i):r.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var i=n[t.path.substring(1)];if(!i)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return i}},{key:"findOrReturn",value:function(e,t){var n,i=0,r=a(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.path===e.path)return t.splice(i),o;i++}}catch(s){r.e(s)}finally{r.f()}return e}}]),e}();function Wp(e){for(var t={},n=0,i=Object.keys(e.children);n<i.length;n++){var r=i[n],o=Wp(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new Id(e.segments.concat(t.segments),t.children)}return e}(new Id(e.segments,t))}var Kp=function e(t){b(this,e),this.path=t,this.route=this.path[this.path.length-1]},Yp=function e(t,n){b(this,e),this.component=t,this.route=n};function $p(e,t,n){var i=e._root;return Xp(i,t?t._root:null,n,[i.value])}function Zp(e,t,n){var i=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function Xp(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=$d(t);return e.children.forEach(function(e){!function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Md(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Md(e.url,t.url)||!dd(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!op(e,t)||!dd(e.queryParams,t.queryParams);case"paramsChange":default:return!op(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Kp(i)):(o.data=s.data,o._resolvedData=s._resolvedData),Xp(e,t,o.component?a?a.children:null:n,i,r),u&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Yp(a.outlet.component,s))}else s&&Jp(t,a,r),r.canActivateChecks.push(new Kp(i)),Xp(e,null,o.component?a?a.children:null:n,i,r)}(e,o[e.value.outlet],n,i.concat([e.value]),r),delete o[e.value.outlet]}),md(o,function(e,t){return Jp(e,n.getContext(t),r)}),r}function Jp(e,t,n){var i=$d(e),r=e.value;md(i,function(e,i){Jp(e,r.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new Yp(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}var Qp=function e(){b(this,e)};function eg(e){return new z(function(t){return t.error(e)})}var tg=function(){function e(t,n,i,r,o,s){b(this,e),this.rootComponentType=t,this.config=n,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}return w(e,[{key:"recognize",value:function(){var e=Lp(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;var n=new ep([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Yd(n,t),r=new tp(this.url,i);return this.inheritParamsAndData(r._root),r}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,i=Qd(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],i=0,r=Object.keys(t.children);i<r.length;i++){var s=r[i],a=t.children[s],u=Rp(e,s),c=this.processSegmentGroup(u,a,s);if(null===c)return null;n.push.apply(n,o(c))}var l=ng(n);return l.sort(function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)}),l}},{key:"processSegment",value:function(e,t,n,i){var r,o=a(e);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=this.processSegmentAgainstRoute(s,t,n,i);if(null!==u)return u}}catch(c){o.e(c)}finally{o.f()}return Up(t,n,i)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,i){if(e.redirectTo||!Fp(e,t,n,i))return null;var r,o=[],s=[];if("**"===e.path){var a=n.length>0?vd(n).parameters:{};r=new ep(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,og(e),xp(e),e.component,e,ig(t),rg(t)+n.length,sg(e))}else{var u=zp(t,e,n);if(!u.matched)return null;o=u.consumedSegments,s=n.slice(u.lastChild),r=new ep(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,og(e),xp(e),e.component,e,ig(t),rg(t)+o.length,sg(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Lp(t,o,s,c.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new Yd(r,d)]}if(0===c.length&&0===f.length)return[new Yd(r,[])];var p=xp(e)===i,g=this.processSegment(c,h,f,p?"primary":i);return null===g?null:[new Yd(r,g)]}}]),e}();function ng(e){var t,n=[],i=new Set,r=a(e);try{var s=function(){var e,r=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(r))return n.push(r),"continue";var s=n.find(function(e){return r.value.routeConfig===e.value.routeConfig});void 0!==s?((e=s.children).push.apply(e,o(r.children)),i.add(s)):n.push(r)};for(r.s();!(t=r.n()).done;)s()}catch(f){r.e(f)}finally{r.f()}var u,c=a(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=ng(l.children);n.push(new Yd(l.value,h))}}catch(f){c.e(f)}finally{c.f()}return n.filter(function(e){return!i.has(e)})}function ig(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function rg(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function og(e){return e.data||{}}function sg(e){return e.resolve||{}}function ag(e){return lf(function(t){var n=e(t);return n?ne(n).pipe(J(function(){return t})):Jh(t)})}var ug=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(function(){function e(){b(this,e)}return w(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),cg=new ai("ROUTES"),lg=function(){function e(t,n,i,r){b(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=i,this.onLoadEndListener=r}return w(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var i=this.loadModuleFactory(t.loadChildren).pipe(J(function(i){n.onLoadEndListener&&n.onLoadEndListener(t);var r=i.create(e);return new wp(gd(r.injector.get(cg,void 0,Ge.Self|Ge.Optional)).map(Ap),r)}),Sf(function(e){throw t._loader$=void 0,e}));return t._loader$=new de(i,function(){return new V}).pipe(ce()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?ne(this.loader.load(e)):yd(e()).pipe(ie(function(e){return e instanceof Gu?Jh(e):ne(t.compiler.compileModuleAsync(e))}))}}]),e}(),hg=function e(){b(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new fg,this.attachRef=null},fg=function(){function e(){b(this,e),this.contexts=new Map}return w(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new hg,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),dg=function(){function e(){b(this,e)}return w(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function pg(e){throw e}function gg(e,t,n){return t.parse("/")}function vg(e,t){return Jh(null)}var mg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_g=function(){var e=function(){function e(t,n,i,r,o,s,a,u){var c=this;b(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=i,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new V,this.errorHandler=pg,this.malformedUriErrorHandler=gg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vg,afterPreactivation:vg},this.urlHandlingStrategy=new dg,this.routeReuseStrategy=new ug,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(Uu),this.console=o.get(Nc);var l=o.get(Zc);this.isNgZoneEnabled=l instanceof Zc&&Zc.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ed(new Id([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new lg(s,a,function(e){return c.triggerEvent(new nd(e))},function(e){return c.triggerEvent(new id(e))}),this.routerState=Xd(this.currentUrlTree,this.rootComponentType),this.transitions=new Qh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return w(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(kf(function(e){return 0!==e.id}),J(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),lf(function(e){var i,r,o,s=!1,a=!1;return Jh(e).pipe(Gf(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lf(function(e){var i=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||i)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Jh(e).pipe(lf(function(e){var i=t.transitions.getValue();return n.next(new Kf(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),i!==t.transitions.getValue()?af:Promise.resolve(e)}),function(e,t,n,i){return lf(function(r){return function(e,t,n,i,r){return new qp(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe(J(function(e){return Object.assign(Object.assign({},r),{urlAfterRedirects:e})}))})}(t.ngModule.injector,t.configLoader,t.urlSerializer,t.config),Gf(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,i,r,o){return ie(function(i){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var s=new tg(e,t,n,i,r,o).recognize();return null===s?eg(new Qp):Jh(s)}catch(a){return eg(a)}}(e,n,i.urlAfterRedirects,(s=i.urlAfterRedirects,t.serializeUrl(s)),r,o).pipe(J(function(e){return Object.assign(Object.assign({},i),{targetSnapshot:e})}));var s})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Gf(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects);var i=new Xf(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(i)}));if(i&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var r=e.id,o=e.extractedUrl,s=e.source,a=e.restoredState,u=e.extras,c=new Kf(r,t.serializeUrl(o),s,a);n.next(c);var l=Xd(o,t.rootComponentType).snapshot;return Jh(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:o,extras:Object.assign(Object.assign({},u),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),af}),ag(function(e){var n=e.targetSnapshot,i=e.id,r=e.extractedUrl,o=e.rawUrl,s=e.extras,a=s.skipLocationChange,u=s.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:i,appliedUrlTree:r,rawUrlTree:o,skipLocationChange:!!a,replaceUrl:!!u})}),Gf(function(e){var n=new Jf(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),J(function(e){return Object.assign(Object.assign({},e),{guards:$p(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return ie(function(n){var i=n.targetSnapshot,r=n.currentSnapshot,o=n.guards,s=o.canActivateChecks,a=o.canDeactivateChecks;return 0===a.length&&0===s.length?Jh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,i){return ne(e).pipe(ie(function(e){return function(e,t,n,i,r){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Jh(o.map(function(o){var s,a=Zp(o,t,r);if(function(e){return e&&Cp(e.canDeactivate)}(a))s=yd(a.canDeactivate(e,t,n,i));else{if(!Cp(a))throw new Error("Invalid CanDeactivate guard");s=yd(a(e,t,n,i))}return s.pipe(Ff())})).pipe(Ip()):Jh(!0)}(e.component,e.route,n,t,i)}),Ff(function(e){return!0!==e},!0))}(a,i,r,e).pipe(ie(function(n){return n&&"boolean"==typeof n?function(e,t,n,i){return ne(t).pipe(Tf(function(t){return sf(function(e,t){return null!==e&&t&&t(new rd(e)),Jh(!0)}(t.route.parent,i),function(e,t){return null!==e&&t&&t(new sd(e)),Jh(!0)}(t.route,i),function(e,t,n){var i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return cf(function(){return Jh(t.guards.map(function(r){var o,s=Zp(r,t.node,n);if(function(e){return e&&Cp(e.canActivateChild)}(s))o=yd(s.canActivateChild(i,e));else{if(!Cp(s))throw new Error("Invalid CanActivateChild guard");o=yd(s(i,e))}return o.pipe(Ff())})).pipe(Ip())})});return Jh(r).pipe(Ip())}(e,t.path,n),function(e,t,n){var i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?Jh(i.map(function(i){return cf(function(){var r,o=Zp(i,t,n);if(function(e){return e&&Cp(e.canActivate)}(o))r=yd(o.canActivate(t,e));else{if(!Cp(o))throw new Error("Invalid CanActivate guard");r=yd(o(t,e))}return r.pipe(Ff())})})).pipe(Ip()):Jh(!0)}(e,t.route,n))}),Ff(function(e){return!0!==e},!0))}(i,s,e,t):Jh(n)}),J(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),Gf(function(e){if(Sp(e.guardsResult)){var n=hd('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var i=new Qf(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(i)}),kf(function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var i=new $f(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(i),e.resolve(!1),!1}return!0}),ag(function(e){if(e.guards.canActivateChecks.length)return Jh(e).pipe(Gf(function(e){var n=new ed(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),lf(function(e){var i,r,o=!1;return Jh(e).pipe((i=t.paramsInheritanceStrategy,r=t.ngModule.injector,ie(function(e){var t=e.targetSnapshot,n=e.guards.canActivateChecks;if(!n.length)return Jh(e);var o=0;return ne(n).pipe(Tf(function(e){return function(e,t,n,i){return function(e,t,n,i){var r=Object.keys(e);if(0===r.length)return Jh({});var o={};return ne(r).pipe(ie(function(r){return function(e,t,n,i){var r=Zp(e,t,i);return yd(r.resolve?r.resolve(t,n):r(t,n))}(e[r],t,n,i).pipe(Gf(function(e){o[r]=e}))}),Mf(1),ie(function(){return Object.keys(o).length===r.length?Jh(o):af}))}(e._resolve,e,t,i).pipe(J(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Qd(e,n).resolve),null}))}(e.route,t,i,r)}),Gf(function(){return o++}),Mf(1),ie(function(t){return o===n.length?Jh(e):af}))})),Gf({next:function(){return o=!0},complete:function(){if(!o){var i=new $f(e.id,t.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");n.next(i),e.resolve(!1)}}}))}),Gf(function(e){var n=new td(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),ag(function(e){var n=e.targetSnapshot,i=e.id,r=e.extractedUrl,o=e.rawUrl,s=e.extras,a=s.skipLocationChange,u=s.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:i,appliedUrlTree:r,rawUrlTree:o,skipLocationChange:!!a,replaceUrl:!!u})}),J(function(e){var n=function(e,t,n){var i=sp(e,t._root,n?n._root:void 0);return new Zd(i,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),Gf(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)}),(i=t.rootContexts,r=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},J(function(e){return new bp(r,e.targetRouterState,e.currentRouterState,o).activate(i),e})),Gf({next:function(){s=!0},complete:function(){s=!0}}),Bf(function(){if(!s&&!a){t.resetUrlToCurrentUrlTree();var i=new $f(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(i),e.resolve(!1)}t.currentNavigation=null}),Sf(function(i){if(a=!0,(u=i)&&u.ngNavigationCancelingError){var r=Sp(i.url);r||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var o=new $f(e.id,t.serializeUrl(e.extractedUrl),i.message);n.next(o),r?setTimeout(function(){var n=t.urlHandlingStrategy.merge(i.url,t.rawUrlTree);t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var s=new Zf(e.id,t.serializeUrl(e.extractedUrl),i);n.next(s);try{e.resolve(t.errorHandler(i))}catch(c){e.reject(c)}}var u;return af}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,i=n.state,r=n.urlTree,o={replaceUrl:!0};if(i){var s=Object.assign({},i);delete s.navigationId,0!==Object.keys(s).length&&(o.state=s)}e.scheduleNavigation(r,t,i,o)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){Mp(e),this.config=e.map(Ap),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,i=t.queryParams,r=t.fragment,s=t.queryParamsHandling,a=t.preserveFragment,u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:r,l=null;switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,i,r){if(0===n.length)return lp(t.root,t.root,t,i,r);var s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new fp(!0,0,e);var t=0,n=!1,i=e.reduce(function(e,i,r){if("object"==typeof i&&null!=i){if(i.outlets){var s={};return md(i.outlets,function(e,t){s[t]="string"==typeof e?e.split("/"):e}),[].concat(o(e),[{outlets:s}])}if(i.segmentPath)return[].concat(o(e),[i.segmentPath])}return"string"!=typeof i?[].concat(o(e),[i]):0===r?(i.split("/").forEach(function(i,r){0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))}),e):[].concat(o(e),[i])},[]);return new fp(n,t,i)}(n);if(s.toRoot())return lp(t.root,new Id([],{}),t,i,r);var a=function(e,t,n){if(e.isAbsolute)return new dp(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var i=n.snapshot._urlSegment;return new dp(i,i===t.root,0)}var r=up(e.commands[0])?0:1;return function(e,t,n){for(var i=e,r=t,o=n;o>r;){if(o-=r,!(i=i.parent))throw new Error("Invalid number of '../'");r=i.segments.length}return new dp(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),u=a.processChildren?gp(a.segmentGroup,a.index,s.commands):pp(a.segmentGroup,a.index,s.commands);return lp(a.segmentGroup,u,t,i,r)}(u,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=Sp(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},mg):!1===t?Object.assign({},yg):t,Sp(e))return kd(this.currentUrlTree,e,n);var i=this.parseUrl(e);return kd(this.currentUrlTree,i,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var i=e[n];return null!=i&&(t[n]=i),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new Yf(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(e,t,n,i,r){if(this.disposed)return Promise.resolve(!1);var o,s,a,u=this.getTransition(),c="imperative"!==t&&"imperative"===(null==u?void 0:u.source),l=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===e.toString();if(c&&l)return Promise.resolve(!0);r?(o=r.resolve,s=r.reject,a=r.promise):a=new Promise(function(e,t){o=e,s=t});var h=++this.navigationId;return this.setTransition({id:h,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t,n,i){var r=this.urlSerializer.serialize(e);i=i||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(ci),Si(Od),Si(fg),Si(Hl),Si(Cs),Si(_l),Si(Kc),Si(void 0))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),bg=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.router=t,this.route=n,this.commands=[],this.onChanges=new V,null==i&&r.setAttribute(o.nativeElement,"tabindex","0")}return w(e,[{key:"ngOnChanges",value:function(e){this.onChanges.next(this)}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"onClick",value:function(){var e={skipLocationChange:wg(this.skipLocationChange),replaceUrl:wg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wg(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(_g),Vs(Jd),oi("tabindex"),Vs(cu),Vs(su))},e.\u0275dir=dt({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&Qs("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[It]}),e}(),kg=function(){var e=function(){function e(t,n,i){var r=this;b(this,e),this.router=t,this.route=n,this.locationStrategy=i,this.commands=[],this.onChanges=new V,this.subscription=t.events.subscribe(function(e){e instanceof Yf&&r.updateTargetUrlAndHref()})}return w(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,i,r){if(0!==e||t||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var o={skipLocationChange:wg(this.skipLocationChange),replaceUrl:wg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wg(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(_g),Vs(Jd),Vs(Ul))},e.\u0275dir=dt({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Qs("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(Fa("href",t.href,gr),Ns("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[It]}),e}();function wg(e){return""===e||!!e}var Cg=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.parentContexts=t,this.location=n,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new cc,this.deactivateEvents=new cc,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}return w(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Sg(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(fg),Vs(ju),Vs(nu),oi("name"),Vs(xu))},e.\u0275dir=dt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),Sg=function(){function e(t,n,i){b(this,e),this.route=t,this.childContexts=n,this.parent=i}return w(e,[{key:"get",value:function(e,t){return e===Jd?this.route:e===fg?this.childContexts:this.parent.get(e,t)}}]),e}(),Eg=function e(){b(this,e)},Ig=function(){function e(){b(this,e)}return w(e,[{key:"preload",value:function(e,t){return Jh(null)}}]),e}(),Tg=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=new lg(n,i,function(e){return t.triggerEvent(new nd(e))},function(e){return t.triggerEvent(new id(e))})}return w(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(kf(function(e){return e instanceof Yf}),Tf(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(Uu);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,i=[],r=a(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;i.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(e,o)):o.children&&i.push(this.processRoutes(e,o.children))}}catch(u){r.e(u)}finally{r.f()}return ne(i).pipe(se(),J(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?Jh(t._loadedConfig):n.loader.load(e.injector,t)).pipe(ie(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(_g),Si(_l),Si(Kc),Si(Cs),Si(Eg))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Mg=function(){var e=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(this,e),this.router=t,this.viewportScroller=n,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}return w(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Kf?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yf&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof ud&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new ud(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(_g),Si(gh),Si(void 0))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Og=new ai("ROUTER_CONFIGURATION"),Dg=new ai("ROUTER_FORROOT_GUARD"),Ag=[Hl,{provide:Od,useClass:Dd},{provide:_g,useFactory:function(e,t,n,i,r,o,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new _g(null,e,t,n,i,r,o,gd(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Od,fg,Hl,Cs,_l,Kc,cg,Og,[function(){return function e(){b(this,e)}}(),new Ai],[function(){return function e(){b(this,e)}}(),new Ai]]},fg,{provide:Jd,useFactory:function(e){return e.routerState.root},deps:[_g]},{provide:_l,useClass:wl},Tg,Ig,function(){function e(){b(this,e)}return w(e,[{key:"preload",value:function(e,t){return t().pipe(Sf(function(){return Jh(null)}))}}]),e}(),{provide:Og,useValue:{enableTracing:!1}}];function xg(){return new hl("Router",_g)}var Rg=function(){var e=function(){function e(t,n){b(this,e)}return w(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Ag,Ng(t),{provide:Dg,useFactory:Lg,deps:[[_g,new Ai,new xi]]},{provide:Og,useValue:n||{}},{provide:Ul,useFactory:zg,deps:[Dl,[new Di(Vl),new Ai],Og]},{provide:Mg,useFactory:Pg,deps:[_g,gh,Og]},{provide:Eg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ig},{provide:hl,multi:!0,useFactory:xg},[Fg,{provide:Oc,multi:!0,useFactory:Ug,deps:[Fg]},{provide:Vg,useFactory:Gg,deps:[Fg]},{provide:Lc,multi:!0,useExisting:Vg}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Ng(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Dg,8),Si(_g,8))},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}();function Pg(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Mg(e,t,n)}function zg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Bl(e,t):new jl(e,t)}function Lg(e){return"guarded"}function Ng(e){return[{provide:ui,multi:!0,useValue:e},{provide:cg,multi:!0,useValue:e}]}var Fg=function(){var e=function(){function e(t){b(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new V}return w(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(xl,Promise.resolve(null)).then(function(){var t=null,n=new Promise(function(e){return t=e}),i=e.injector.get(_g),r=e.injector.get(Og);return"disabled"===r.initialNavigation?(i.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(i.hooks.afterPreactivation=function(){return e.initNavigation?Jh(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},i.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Og),n=this.injector.get(Tg),i=this.injector.get(Mg),r=this.injector.get(_g),o=this.injector.get(ml);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||r.initialNavigation(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Cs))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}();function Ug(e){return e.appInitializer.bind(e)}function Gg(e){return e.bootstrapListener.bind(e)}var Vg=new ai("Router Initializer"),jg=[],Bg=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[Rg.forRoot(jg,{relativeLinkResolution:"legacy"})],Rg]}),e}(),Hg=s(6354);function qg(e){return{SDKAppID:1400440675,userSig:new Hg(1400440675,"6b4ede60d47a82d913c91658b6fbb4a537a7c83da8d210c1112c48a24e76e5f2",604800).genTestUserSig(e)}}var Wg=function(){function e(){b(this,e)}return w(e,[{key:"attach",value:function(e){return this._attachedHost=e,e.attach(this)}},{key:"detach",value:function(){var e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}}]),e}(),Kg=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this)).component=e,s.viewContainerRef=i,s.injector=r,s.componentFactoryResolver=o,s}return n}(Wg),Yg=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this)).templateRef=e,o.viewContainerRef=i,o.context=r,o}return w(n,[{key:"origin",get:function(){return this.templateRef.elementRef}},{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=t,f(_(n.prototype),"attach",this).call(this,e)}},{key:"detach",value:function(){return this.context=void 0,f(_(n.prototype),"detach",this).call(this)}}]),n}(Wg),$g=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this)).element=e instanceof su?e.nativeElement:e,i}return n}(Wg),Zg=function(){function e(){b(this,e),this._isDisposed=!1,this.attachDomPortal=null}return w(e,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(e){return e instanceof Kg?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Yg?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof $g?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),e}(),Xg=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s){var a,u;return b(this,n),(u=t.call(this)).outletElement=e,u._componentFactoryResolver=i,u._appRef=r,u._defaultInjector=o,u.attachDomPortal=function(e){var t=e.element,i=u._document.createComment("dom-portal");t.parentNode.insertBefore(i,t),u.outletElement.appendChild(t),u._attachedPortal=e,f((a=m(u),_(n.prototype)),"setDisposeFn",a).call(a,function(){i.parentNode&&i.parentNode.replaceChild(t,i)})},u._document=s,u}return w(n,[{key:"attachComponentPortal",value:function(e){var t,n=this,i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(function(){return t.destroy()})):(t=i.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn(function(){n._appRef.detachView(t.hostView),t.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}},{key:"attachTemplatePortal",value:function(e){var t=this,n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(function(e){return t.outletElement.appendChild(e)}),i.detectChanges(),this.setDisposeFn(function(){var e=n.indexOf(i);-1!==e&&n.remove(e)}),this._attachedPortal=e,i}},{key:"dispose",value:function(){f(_(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),n}(Zg),Jg=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r){var o,s;return b(this,n),(s=t.call(this))._componentFactoryResolver=e,s._viewContainerRef=i,s._isInitialized=!1,s.attached=new cc,s.attachDomPortal=function(e){var t=e.element,i=s._document.createComment("dom-portal");e.setAttachedHost(m(s)),t.parentNode.insertBefore(i,t),s._getRootNode().appendChild(t),s._attachedPortal=e,f((o=m(s),_(n.prototype)),"setDisposeFn",o).call(o,function(){i.parentNode&&i.parentNode.replaceChild(t,i)})},s._document=r,s}return w(n,[{key:"portal",get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&f(_(n.prototype),"detach",this).call(this),e&&f(_(n.prototype),"attach",this).call(this,e),this._attachedPortal=e)}},{key:"attachedRef",get:function(){return this._attachedRef}},{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){f(_(n.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(e){e.setAttachedHost(this);var t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r=t.createComponent(i,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),f(_(n.prototype),"setDisposeFn",this).call(this,function(){return r.destroy()}),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}},{key:"attachTemplatePortal",value:function(e){var t=this;e.setAttachedHost(this);var i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return f(_(n.prototype),"setDisposeFn",this).call(this,function(){return t._viewContainerRef.clear()}),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}},{key:"_getRootNode",value:function(){var e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}]),n}(Zg);return e.\u0275fac=function(t){return new(t||e)(Vs(nu),Vs(ju),Vs(Ol))},e.\u0275dir=dt({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Es]}),e}(),Qg=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}();function ev(e){return function(t){return t.lift(new tv(e))}}var tv=function(){function e(t){b(this,e),this.notifier=t}return w(e,[{key:"call",value:function(e,t){var n=new nv(e),i=Z(n,this.notifier);return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}]),e}(),nv=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e)).seenValue=!1,i}return w(n,[{key:"notifyNext",value:function(e,t,n,i,r){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(X);function iv(e){return null!=e&&"false"!="".concat(e)}function rv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ov(e)?Number(e):t}function ov(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function sv(e){return Array.isArray(e)?e:[e]}function av(e){return null==e?"":"string"==typeof e?e:"".concat(e,"px")}function uv(e){return e instanceof su?e.nativeElement:e}function cv(e,t,n,i){return u(n)&&(i=n,n=void 0),i?cv(e,t,n).pipe(J(function(e){return C(e)?i.apply(void 0,o(e)):i(e)})):new z(function(i){lv(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}function lv(e,t,n,i,r){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,n,r),o=function(){return s.removeEventListener(t,n,r)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,n),o=function(){return u.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)lv(e[c],t,n,i,r)}i.add(o)}var hv=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r.pending=!1,r}return w(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,i=!1;try{this.work(e)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){d(n,e);var t=g(n);function n(e,i){return b(this,n),t.call(this)}return w(n,[{key:"schedule",value:function(e){return this}}]),n}(T)),fv=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r}return w(n,[{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0?f(_(n.prototype),"requestAsyncId",this).call(this,e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))}},{key:"recycleAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==i&&i>0||null===i&&this.delay>0)return f(_(n.prototype),"recycleAsyncId",this).call(this,e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}]),n}(hv),dv=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;b(this,e),this.SchedulerAction=t,this.now=n}return w(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),pv=function(e){d(n,e);var t=g(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dv.now;return b(this,n),(i=t.call(this,e,function(){return n.delegate&&n.delegate!==m(i)?n.delegate.now():r()})).actions=[],i.active=!1,i.scheduled=void 0,i}return w(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,i):f(_(n.prototype),"schedule",this).call(this,e,t,i)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(dv),gv=new(function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(pv))(fv),vv=1,mv=Promise.resolve(),yv={};function _v(e){return e in yv&&(delete yv[e],!0)}var bv=function(e){var t=vv++;return yv[t]=!0,mv.then(function(){return _v(t)&&e()}),t},kv=function(e){_v(e)},wv=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r}return w(n,[{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0?f(_(n.prototype),"requestAsyncId",this).call(this,e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=bv(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==i&&i>0||null===i&&this.delay>0)return f(_(n.prototype),"recycleAsyncId",this).call(this,e,t,i);0===e.actions.length&&(kv(t),e.scheduled=void 0)}}]),n}(hv),Cv=new(function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(pv))(wv);function Sv(e){return!!e&&(e instanceof z||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function Ev(e,t){return function(n){return n.lift(new Iv(e,t))}}var Iv=function(){function e(t,n){b(this,e),this.compare=t,this.keySelector=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Tv(e,this.compare,this.keySelector))}}]),e}(),Tv=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e)).keySelector=r,o.hasKey=!1,"function"==typeof i&&(o.compare=i),o}return w(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(r){return this.destination.error(r)}var i=!1;if(this.hasKey)try{i=(0,this.compare)(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}]),n}(D),Mv=new pv(hv),Ov=function(){function e(t){b(this,e),this.durationSelector=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Dv(e,this.durationSelector))}}]),e}(),Dv=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).durationSelector=i,r.hasValue=!1,r}return w(n,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(i){return this.destination.error(i)}var n=Z(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(e,t,n,i){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(X);function Av(e){return!C(e)&&e-parseFloat(e)+1>=0}function xv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=-1;return Av(t)?i=Number(t)<1?1:Number(t):B(t)&&(n=t),B(n)||(n=Mv),new z(function(t){var r=Av(e)?e:+e-n.now();return n.schedule(Rv,r,{index:0,period:i,subscriber:t})})}function Rv(e){var t=e.index,n=e.period,i=e.subscriber;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}function Pv(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mv;return t=function(){return xv(e,n)},function(e){return e.lift(new Ov(t))}}var zv,Lv=function(){function e(){b(this,e)}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Nv(e))}}]),e}(),Nv=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e)).hasPrev=!1,i}return w(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(D),Fv=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r}return w(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?f(_(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?f(_(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0||null===i&&this.delay>0?f(_(n.prototype),"requestAsyncId",this).call(this,e,t,i):e.flush(this)}}]),n}(hv),Uv=new(function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(pv))(Fv),Gv=function(){var e=function(){function e(t,n,i){b(this,e),this.kind=t,this.value=n,this.error=i,this.hasValue="N"===t}return w(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Jh(this.value);case"E":return e=this.error,new z(function(t){return t.error(e)});case"C":return uf()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Vv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b(this,e),this.scheduler=t,this.delay=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new jv(e,this.scheduler,this.delay))}}]),e}(),jv=function(e){d(n,e);var t=g(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return b(this,n),(r=t.call(this,e)).scheduler=i,r.delay=o,r}return w(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new Bv(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(Gv.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(Gv.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(Gv.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(D),Bv=function e(t,n){b(this,e),this.notification=t,this.destination=n},Hv=function(e){d(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return b(this,n),(e=t.call(this)).scheduler=o,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=i<1?1:i,e._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return w(n,[{key:"nextInfiniteTimeWindow",value:function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),f(_(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this._events.push(new qv(this._getNow(),e)),this._trimBufferThenGetEvents(),f(_(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;if(this.closed)throw new F;if(this.isStopped||this.hasError?t=T.EMPTY:(this.observers.push(e),t=new U(this,e)),r&&e.add(e=new jv(e,r)),n)for(var s=0;s<o&&!e.closed;s++)e.next(i[s]);else for(var a=0;a<o&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Uv).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i}}]),n}(V),qv=function e(t,n){b(this,e),this.time=t,this.value=n};try{zv="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(bL){zv=!1}var Wv,Kv,Yv,$v,Zv,Xv=((Zv=function e(t){b(this,e),this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zv)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(e){return new(e||Zv)(Si(zc))},Zv.\u0275prov=De({factory:function(){return new Zv(Si(zc))},token:Zv,providedIn:"root"}),Zv),Jv=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}();function Qv(e){return function(){if(null==Wv&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Wv=!0}}))}finally{Wv=Wv||!1}return Wv}()?e:!!e.capture}function em(){if(null==Yv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Yv=!1;if("scrollBehavior"in document.documentElement.style)Yv=!0;else{var e=Element.prototype.scrollTo;Yv=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Yv}function tm(){if("object"!=typeof document||!document)return 0;if(null==Kv){var e=document.createElement("div"),t=e.style;e.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";var n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",e.appendChild(n),document.body.appendChild(e),Kv=0,0===e.scrollLeft&&(e.scrollLeft=1,Kv=0===e.scrollLeft?1:2),e.parentNode.removeChild(e)}return Kv}function nm(e){if(function(){if(null==$v){var e="undefined"!=typeof document?document.head:null;$v=!(!e||!e.createShadowRoot&&!e.attachShadow)}return $v}()){var t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}var im=new ai("cdk-dir-doc",{providedIn:"root",factory:function(){return Ei(Ol)}}),rm=function(){var e=function(){function e(t){if(b(this,e),this.value="ltr",this.change=new cc,t){var n=t.documentElement?t.documentElement.dir:null,i=(t.body?t.body.dir:null)||n;this.value="ltr"===i||"rtl"===i?i:"ltr"}}return w(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(im,8))},e.\u0275prov=De({factory:function(){return new e(Si(im,8))},token:e,providedIn:"root"}),e}(),om=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),sm=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this))._data=e,i}return w(n,[{key:"connect",value:function(){return Sv(this._data)?this._data:Jh(this._data)}},{key:"disconnect",value:function(){}}]),n}(function(){return function e(){b(this,e)}}()),am=function(){function e(){b(this,e),this.viewCacheSize=20,this._viewCache=[]}return w(e,[{key:"applyChanges",value:function(e,t,n,i,r){var o=this;e.forEachOperation(function(e,s,a){var u,c;null==e.previousIndex?c=(u=o._insertView(function(){return n(e,s,a)},a,t,i(e)))?1:0:null==a?(o._detachAndCacheView(s,t),c=3):(u=o._moveView(s,a,t,i(e)),c=2),r&&r({context:null==u?void 0:u.context,operation:c,record:e})})}},{key:"detach",value:function(){var e,t=a(this._viewCache);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._viewCache=[]}},{key:"_insertView",value:function(e,t,n,i){var r=this._insertViewFromCache(t,n);if(!r){var o=e();return n.createEmbeddedView(o.templateRef,o.context,o.index)}r.context.$implicit=i}},{key:"_detachAndCacheView",value:function(e,t){var n=t.detach(e);this._maybeCacheView(n,t)}},{key:"_moveView",value:function(e,t,n,i){var r=n.get(e);return n.move(r,t),r.context.$implicit=i,r}},{key:"_maybeCacheView",value:function(e,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{var n=t.indexOf(e);-1===n?e.destroy():t.remove(n)}}},{key:"_insertViewFromCache",value:function(e,t){var n=this._viewCache.pop();return n&&t.insert(n,e),n||null}}]),e}(),um=new ai("_ViewRepeater"),cm=["contentWrapper"],lm=["*"],hm=new ai("VIRTUAL_SCROLL_STRATEGY"),fm=function(){function e(t,n,i){b(this,e),this._scrolledIndexChange=new V,this.scrolledIndexChange=this._scrolledIndexChange.pipe(Ev()),this._viewport=null,this._itemSize=t,this._minBufferPx=n,this._maxBufferPx=i}return w(e,[{key:"attach",value:function(e){this._viewport=e,this._updateTotalContentSize(),this._updateRenderedRange()}},{key:"detach",value:function(){this._scrolledIndexChange.complete(),this._viewport=null}},{key:"updateItemAndBufferSize",value:function(e,t,n){this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}},{key:"onContentScrolled",value:function(){this._updateRenderedRange()}},{key:"onDataLengthChanged",value:function(){this._updateTotalContentSize(),this._updateRenderedRange()}},{key:"onContentRendered",value:function(){}},{key:"onRenderedOffsetChanged",value:function(){}},{key:"scrollToIndex",value:function(e,t){this._viewport&&this._viewport.scrollToOffset(e*this._itemSize,t)}},{key:"_updateTotalContentSize",value:function(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}},{key:"_updateRenderedRange",value:function(){if(this._viewport){var e=this._viewport.getRenderedRange(),t={start:e.start,end:e.end},n=this._viewport.getViewportSize(),i=this._viewport.getDataLength(),r=this._viewport.measureScrollOffset(),o=this._itemSize>0?r/this._itemSize:0;if(t.end>i){var s=Math.ceil(n/this._itemSize),a=Math.max(0,Math.min(o,i-s));o!=a&&(o=a,r=a*this._itemSize,t.start=Math.floor(o)),t.end=Math.max(0,Math.min(i,t.start+s))}var u=r-t.start*this._itemSize;if(u<this._minBufferPx&&0!=t.start){var c=Math.ceil((this._maxBufferPx-u)/this._itemSize);t.start=Math.max(0,t.start-c),t.end=Math.min(i,Math.ceil(o+(n+this._minBufferPx)/this._itemSize))}else{var l=t.end*this._itemSize-(r+n);if(l<this._minBufferPx&&t.end!=i){var h=Math.ceil((this._maxBufferPx-l)/this._itemSize);h>0&&(t.end=Math.min(i,t.end+h),t.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(t),this._viewport.setRenderedContentOffset(this._itemSize*t.start),this._scrolledIndexChange.next(Math.floor(o))}}}]),e}();function dm(e){return e._scrollStrategy}var pm=function(){var e=function(){function e(){b(this,e),this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new fm(this.itemSize,this.minBufferPx,this.maxBufferPx)}return w(e,[{key:"itemSize",get:function(){return this._itemSize},set:function(e){this._itemSize=rv(e)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=rv(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=rv(e)}},{key:"ngOnChanges",value:function(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=dt({type:e,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[Qa([{provide:hm,useFactory:dm,deps:[Ce(function(){return e})]}]),It]}),e}(),gm=function(){var e=function(){function e(t,n,i){b(this,e),this._ngZone=t,this._platform=n,this._scrolled=new V,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}return w(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(function(){return t._scrolled.next(e)}))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new z(function(n){e._globalSubscription||e._addGlobalListener();var i=t>0?e._scrolled.pipe(Pv(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){i.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):Jh()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(t,n){return e.deregister(n)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(kf(function(e){return!e||n.indexOf(e)>-1}))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach(function(i,r){t._scrollableContainsElement(r,e)&&n.push(r)}),n}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(e,t){var n=uv(t),i=e.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return cv(e._getWindow().document,"scroll").subscribe(function(){return e._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Zc),Si(Xv),Si(Ol,8))},e.\u0275prov=De({factory:function(){return new e(Si(Zc),Si(Xv),Si(Ol,8))},token:e,providedIn:"root"}),e}(),vm=function(){var e=function(){function e(t,n,i,r){var o=this;b(this,e),this.elementRef=t,this.scrollDispatcher=n,this.ngZone=i,this.dir=r,this._destroyed=new V,this._elementScrolled=new z(function(e){return o.ngZone.runOutsideAngular(function(){return cv(o.elementRef.nativeElement,"scroll").pipe(ev(o._destroyed)).subscribe(e)})})}return w(e,[{key:"ngOnInit",value:function(){this.scrollDispatcher.register(this)}},{key:"ngOnDestroy",value:function(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}},{key:"elementScrolled",value:function(){return this._elementScrolled}},{key:"getElementRef",value:function(){return this.elementRef}},{key:"scrollTo",value:function(e){var t=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=n?e.end:e.start),null==e.right&&(e.right=n?e.start:e.end),null!=e.bottom&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),n&&0!=tm()?(null!=e.left&&(e.right=t.scrollWidth-t.clientWidth-e.left),2==tm()?e.left=e.right:1==tm()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}},{key:"_applyScrollToOptions",value:function(e){var t=this.elementRef.nativeElement;em()?t.scrollTo(e):(null!=e.top&&(t.scrollTop=e.top),null!=e.left&&(t.scrollLeft=e.left))}},{key:"measureScrollOffset",value:function(e){var t=this.elementRef.nativeElement;if("top"==e)return t.scrollTop;if("bottom"==e)return t.scrollHeight-t.clientHeight-t.scrollTop;var n=this.dir&&"rtl"==this.dir.value;return"start"==e?e=n?"right":"left":"end"==e&&(e=n?"left":"right"),n&&2==tm()?"left"==e?t.scrollWidth-t.clientWidth-t.scrollLeft:t.scrollLeft:n&&1==tm()?"left"==e?t.scrollLeft+t.scrollWidth-t.clientWidth:-t.scrollLeft:"left"==e?t.scrollLeft:t.scrollWidth-t.clientWidth-t.scrollLeft}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(gm),Vs(Zc),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),e}(),mm=function(){var e=function(){function e(t,n,i){var r=this;b(this,e),this._platform=t,this._change=new V,this._changeListener=function(e){r._change.next(e)},this._document=i,n.runOutsideAngular(function(){if(t.isBrowser){var e=r._getWindow();e.addEventListener("resize",r._changeListener),e.addEventListener("orientationchange",r._changeListener)}r.change().subscribe(function(){return r._updateViewportSize()})})}return w(e,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,i=t.height;return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+n,height:i,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=this._document,t=this._getWindow(),n=e.documentElement,i=n.getBoundingClientRect();return{top:-i.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-i.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(Pv(e)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Xv),Si(Zc),Si(Ol,8))},e.\u0275prov=De({factory:function(){return new e(Si(Xv),Si(Zc),Si(Ol,8))},token:e,providedIn:"root"}),e}(),ym="undefined"!=typeof requestAnimationFrame?gv:Cv,_m=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s,a,u){var c;return b(this,n),(c=t.call(this,e,a,r,s)).elementRef=e,c._changeDetectorRef=i,c._scrollStrategy=o,c._detachedSubject=new V,c._renderedRangeSubject=new V,c._orientation="vertical",c.scrolledIndexChange=new z(function(e){return c._scrollStrategy.scrolledIndexChange.subscribe(function(t){return Promise.resolve().then(function(){return c.ngZone.run(function(){return e.next(t)})})})}),c.renderedRangeStream=c._renderedRangeSubject,c._totalContentSize=0,c._totalContentWidth="",c._totalContentHeight="",c._renderedRange={start:0,end:0},c._dataLength=0,c._viewportSize=0,c._renderedContentOffset=0,c._renderedContentOffsetNeedsRewrite=!1,c._isChangeDetectionPending=!1,c._runAfterChangeDetection=[],c._viewportChanges=T.EMPTY,c._viewportChanges=u.change().subscribe(function(){c.checkViewportSize()}),c}return w(n,[{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}},{key:"ngOnInit",value:function(){var e=this;f(_(n.prototype),"ngOnInit",this).call(this),this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){e._measureViewportSize(),e._scrollStrategy.attach(e),e.elementScrolled().pipe(mf(null),Pv(0,ym)).subscribe(function(){return e._scrollStrategy.onContentScrolled()}),e._markChangeDetectionNeeded()})})}},{key:"ngOnDestroy",value:function(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),f(_(n.prototype),"ngOnDestroy",this).call(this)}},{key:"attach",value:function(e){var t=this;this.ngZone.runOutsideAngular(function(){t._forOf=e,t._forOf.dataStream.pipe(ev(t._detachedSubject)).subscribe(function(e){var n=e.length;n!==t._dataLength&&(t._dataLength=n,t._scrollStrategy.onDataLengthChanged()),t._doChangeDetection()})})}},{key:"detach",value:function(){this._forOf=null,this._detachedSubject.next()}},{key:"getDataLength",value:function(){return this._dataLength}},{key:"getViewportSize",value:function(){return this._viewportSize}},{key:"getRenderedRange",value:function(){return this._renderedRange}},{key:"setTotalContentSize",value:function(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}},{key:"setRenderedRange",value:function(e){var t,n,i=this;((t=this._renderedRange).start!=(n=e).start||t.end!=n.end)&&(this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(function(){return i._scrollStrategy.onContentRendered()}))}},{key:"getOffsetToRenderedContentStart",value:function(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}},{key:"setRenderedContentOffset",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"to-start",i="horizontal"==this.orientation,r=i?"X":"Y",o="translate".concat(r,"(").concat(Number((i&&this.dir&&"rtl"==this.dir.value?-1:1)*e),"px)");this._renderedContentOffset=e,"to-end"===n&&(o+=" translate".concat(r,"(-100%)"),this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=o&&(this._renderedContentTransform=o,this._markChangeDetectionNeeded(function(){t._renderedContentOffsetNeedsRewrite?(t._renderedContentOffset-=t.measureRenderedContentSize(),t._renderedContentOffsetNeedsRewrite=!1,t.setRenderedContentOffset(t._renderedContentOffset)):t._scrollStrategy.onRenderedOffsetChanged()}))}},{key:"scrollToOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n={behavior:t};"horizontal"===this.orientation?n.start=e:n.top=e,this.scrollTo(n)}},{key:"scrollToIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";this._scrollStrategy.scrollToIndex(e,t)}},{key:"measureScrollOffset",value:function(e){return f(_(n.prototype),"measureScrollOffset",this).call(this,e||("horizontal"===this.orientation?"start":"top"))}},{key:"measureRenderedContentSize",value:function(){var e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}},{key:"measureRangeSize",value:function(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}},{key:"checkViewportSize",value:function(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}},{key:"_measureViewportSize",value:function(){var e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}},{key:"_markChangeDetectionNeeded",value:function(e){var t=this;e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){t._doChangeDetection()})}))}},{key:"_doChangeDetection",value:function(){var e=this;this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(function(){return e._changeDetectorRef.markForCheck()});var t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];var n,i=a(t);try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(r){i.e(r)}finally{i.f()}}},{key:"_calculateSpacerSize",value:function(){this._totalContentHeight="horizontal"===this.orientation?"":"".concat(this._totalContentSize,"px"),this._totalContentWidth="horizontal"===this.orientation?"".concat(this._totalContentSize,"px"):""}}]),n}(vm);return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(xu),Vs(Zc),Vs(hm,8),Vs(rm,8),Vs(gm),Vs(mm))},e.\u0275cmp=at({type:e,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,t){var n;(1&e&&wc(cm,7),2&e)&&(kc(n=Sc())&&(t._contentWrapper=n.first))},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,t){2&e&&ba("cdk-virtual-scroll-orientation-horizontal","horizontal"===t.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==t.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[Qa([{provide:vm,useExisting:e}]),Es],ngContentSelectors:lm,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,t){1&e&&(sa(),Hs(0,"div",0,1),aa(2),qs(),Ws(3,"div",2)),2&e&&(ho(3),_a("width",t._totalContentWidth)("height",t._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),e}();function bm(e,t,n){if(!n.getBoundingClientRect)return 0;var i=n.getBoundingClientRect();return"horizontal"===e?"start"===t?i.left:i.right:"start"===t?i.top:i.bottom}var km=function(){var e=function(){function e(t,i,r,o,s,a){var u=this;b(this,e),this._viewContainerRef=t,this._template=i,this._differs=r,this._viewRepeater=o,this._viewport=s,this.viewChange=new V,this._dataSourceChanges=new V,this.dataStream=this._dataSourceChanges.pipe(mf(null),function(e){return e.lift(new Lv)},lf(function(e){var t=n(e,2),i=t[0],r=t[1];return u._changeDataSource(i,r)}),function(e,t,n){var i;return i={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},function(e){return e.lift(function(e){var t,n,i=e.bufferSize,r=void 0===i?Number.POSITIVE_INFINITY:i,o=e.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,a=e.refCount,u=e.scheduler,c=0,l=!1,h=!1;return function(e){c++,t&&!l||(l=!1,t=new Hv(r,s,u),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}));var i=t.subscribe(this);this.add(function(){c--,i.unsubscribe(),n&&!h&&a&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(i))}}()),this._differ=null,this._needsUpdate=!1,this._destroyed=new V,this.dataStream.subscribe(function(e){u._data=e,u._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(ev(this._destroyed)).subscribe(function(e){u._renderedRange=e,a.run(function(){return u.viewChange.next(u._renderedRange)}),u._onRenderedDataChange()}),this._viewport.attach(this)}return w(e,[{key:"cdkVirtualForOf",get:function(){return this._cdkVirtualForOf},set:function(e){this._cdkVirtualForOf=e,function(e){return e&&"function"==typeof e.connect}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new sm(Sv(e)?e:Array.from(e||[])))}},{key:"cdkVirtualForTrackBy",get:function(){return this._cdkVirtualForTrackBy},set:function(e){var t=this;this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?function(n,i){return e(n+(t._renderedRange?t._renderedRange.start:0),i)}:void 0}},{key:"cdkVirtualForTemplate",set:function(e){e&&(this._needsUpdate=!0,this._template=e)}},{key:"cdkVirtualForTemplateCacheSize",get:function(){return this._viewRepeater.viewCacheSize},set:function(e){this._viewRepeater.viewCacheSize=rv(e)}},{key:"measureRangeSize",value:function(e,t){if(e.start>=e.end)return 0;for(var n,i,r=e.start-this._renderedRange.start,o=e.end-e.start,s=0;s<o;s++){var a=this._viewContainerRef.get(s+r);if(a&&a.rootNodes.length){n=i=a.rootNodes[0];break}}for(var u=o-1;u>-1;u--){var c=this._viewContainerRef.get(u+r);if(c&&c.rootNodes.length){i=c.rootNodes[c.rootNodes.length-1];break}}return n&&i?bm(t,"end",i)-bm(t,"start",n):0}},{key:"ngDoCheck",value:function(){if(this._differ&&this._needsUpdate){var e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}},{key:"ngOnDestroy",value:function(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}},{key:"_onRenderedDataChange",value:function(){var e=this;this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create(function(t,n){return e.cdkVirtualForTrackBy?e.cdkVirtualForTrackBy(t,n):n})),this._needsUpdate=!0)}},{key:"_changeDataSource",value:function(e,t){return e&&e.disconnect(this),this._needsUpdate=!0,t?t.connect(this):Jh()}},{key:"_updateContext",value:function(){for(var e=this._data.length,t=this._viewContainerRef.length;t--;){var n=this._viewContainerRef.get(t);n.context.index=this._renderedRange.start+t,n.context.count=e,this._updateComputedContextProperties(n.context),n.detectChanges()}}},{key:"_applyChanges",value:function(e){var t=this;this._viewRepeater.applyChanges(e,this._viewContainerRef,function(e,n,i){return t._getEmbeddedViewArgs(e,i)},function(e){return e.item}),e.forEachIdentityChange(function(e){t._viewContainerRef.get(e.currentIndex).context.$implicit=e.item});for(var n=this._data.length,i=this._viewContainerRef.length;i--;){var r=this._viewContainerRef.get(i);r.context.index=this._renderedRange.start+i,r.context.count=n,this._updateComputedContextProperties(r.context)}}},{key:"_updateComputedContextProperties",value:function(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}},{key:"_getEmbeddedViewArgs",value:function(e,t){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:t}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ju),Vs(Lu),Vs(Su),Vs(um),Vs(_m,4),Vs(Zc))},e.\u0275dir=dt({type:e,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[Qa([{provide:um,useClass:am}])]}),e}(),wm=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),Cm=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,Jv,wm],om,wm]}),e}(),Sm=function(){function e(t,n){b(this,e),this.predicate=t,this.inclusive=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new Em(e,this.predicate,this.inclusive))}}]),e}(),Em=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e)).predicate=i,o.inclusive=r,o.index=0,o}return w(n,[{key:"_next",value:function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(e,t)}},{key:"nextOrComplete",value:function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}]),n}(D);function Im(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.length?n.some(function(t){return e[t]}):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var Tm=em(),Mm=function(){function e(t,n){b(this,e),this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return w(e,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=av(-this._previousScrollPosition.left),e.style.top=av(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var e=this._document.documentElement,t=e.style,n=this._document.body.style,i=t.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Tm&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Tm&&(t.scrollBehavior=i,n.scrollBehavior=r)}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}]),e}(),Om=function(){function e(t,n,i,r){var o=this;b(this,e),this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run(function(){return o._overlayRef.detach()})}}return w(e,[{key:"attach",value:function(e){this._overlayRef=e}},{key:"enable",value:function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),Dm=function(){function e(){b(this,e)}return w(e,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),e}();function Am(e,t){return t.some(function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right})}function xm(e,t){return t.some(function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right})}var Rm=function(){function e(t,n,i,r){b(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}return w(e,[{key:"attach",value:function(e){this._overlayRef=e}},{key:"enable",value:function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),n=e._viewportRuler.getViewportSize(),i=n.width,r=n.height;Am(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(e.disable(),e._ngZone.run(function(){return e._overlayRef.detach()}))}}))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),Pm=function(){var e=function e(t,n,i,r){var o=this;b(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this.noop=function(){return new Dm},this.close=function(e){return new Om(o._scrollDispatcher,o._ngZone,o._viewportRuler,e)},this.block=function(){return new Mm(o._viewportRuler,o._document)},this.reposition=function(e){return new Rm(o._scrollDispatcher,o._viewportRuler,o._ngZone,e)},this._document=r};return e.\u0275fac=function(t){return new(t||e)(Si(gm),Si(mm),Si(Zc),Si(Ol))},e.\u0275prov=De({factory:function(){return new e(Si(gm),Si(mm),Si(Zc),Si(Ol))},token:e,providedIn:"root"}),e}(),zm=function e(t){if(b(this,e),this.scrollStrategy=new Dm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t)for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];void 0!==t[r]&&(this[r]=t[r])}},Lm=function e(t,n,i,r,o){b(this,e),this.offsetX=i,this.offsetY=r,this.panelClass=o,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},Nm=function e(t,n){b(this,e),this.connectionPair=t,this.scrollableViewProperties=n},Fm=function(){var e=function(){function e(t){b(this,e),this._attachedOverlays=[],this._document=t}return w(e,[{key:"ngOnDestroy",value:function(){this.detach()}},{key:"add",value:function(e){this.remove(e),this._attachedOverlays.push(e)}},{key:"remove",value:function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({factory:function(){return new e(Si(Ol))},token:e,providedIn:"root"}),e}(),Um=function(){var e=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e))._keydownListener=function(e){for(var t=i._attachedOverlays,n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}},i}return w(n,[{key:"add",value:function(e){f(_(n.prototype),"add",this).call(this,e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),n}(Fm);return e.\u0275fac=function(t){return new(t||e)(Si(Ol))},e.\u0275prov=De({factory:function(){return new e(Si(Ol))},token:e,providedIn:"root"}),e}(),Gm=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e))._platform=i,r._cursorStyleIsSet=!1,r._clickListener=function(e){for(var t=e.composedPath?e.composedPath()[0]:e.target,n=r._attachedOverlays.slice(),i=n.length-1;i>-1;i--){var o=n[i];if(!(o._outsidePointerEvents.observers.length<1)&&o.hasAttached()){if(o.overlayElement.contains(t))break;o._outsidePointerEvents.next(e)}}},r}return w(n,[{key:"add",value:function(e){if(f(_(n.prototype),"add",this).call(this,e),!this._isAttached){var t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}},{key:"detach",value:function(){if(this._isAttached){var e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}]),n}(Fm);return e.\u0275fac=function(t){return new(t||e)(Si(Ol),Si(Xv))},e.\u0275prov=De({factory:function(){return new e(Si(Ol),Si(Xv))},token:e,providedIn:"root"}),e}(),Vm=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),jm=function(){var e=function(){function e(t,n){b(this,e),this._platform=n,this._document=t}return w(e,[{key:"ngOnDestroy",value:function(){var e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){if(this._platform.isBrowser||Vm)for(var e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]'),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);var n=this._document.createElement("div");n.classList.add("cdk-overlay-container"),Vm?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Ol),Si(Xv))},e.\u0275prov=De({factory:function(){return new e(Si(Ol),Si(Xv))},token:e,providedIn:"root"}),e}(),Bm=function(){function e(t,n,i,r,o,s,a,u,c){var l=this;b(this,e),this._portalOutlet=t,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=u,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new V,this._attachments=new V,this._detachments=new V,this._locationChanges=T.EMPTY,this._backdropClickHandler=function(e){return l._backdropClick.next(e)},this._keydownEvents=new V,this._outsidePointerEvents=new V,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}return w(e,[{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}},{key:"attach",value:function(e){var t=this,n=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(pf(1)).subscribe(function(){t.hasAttached()&&t.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(function(){return t.dispose()})),this._outsideClickDispatcher.add(this),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}}},{key:"dispose",value:function(){var e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick}},{key:"attachments",value:function(){return this._attachments}},{key:"detachments",value:function(){return this._detachments}},{key:"keydownEvents",value:function(){return this._keydownEvents}},{key:"outsidePointerEvents",value:function(){return this._outsidePointerEvents}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}},{key:"setDirection",value:function(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}},{key:"addPanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!0)}},{key:"removePanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!1)}},{key:"getDirection",value:function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}},{key:"updateScrollStrategy",value:function(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var e=this._pane.style;e.width=av(this._config.width),e.height=av(this._config.height),e.minWidth=av(this._config.minWidth),e.minHeight=av(this._config.minHeight),e.maxWidth=av(this._config.maxWidth),e.maxHeight=av(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(e){this._pane.style.pointerEvents=e?"":"none"}},{key:"_attachBackdrop",value:function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var e,t=this,n=this._backdropElement;if(n){var i=function i(){n&&(n.removeEventListener("click",t._backdropClickHandler),n.removeEventListener("transitionend",i),n.parentNode&&n.parentNode.removeChild(n)),t._backdropElement==n&&(t._backdropElement=null),t._config.backdropClass&&t._toggleClasses(n,t._config.backdropClass,!1),clearTimeout(e)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(function(){n.addEventListener("transitionend",i)}),n.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(function(){return setTimeout(i,500)})}}},{key:"_toggleClasses",value:function(e,t,n){var i=e.classList;sv(t).forEach(function(e){e&&(n?i.add(e):i.remove(e))})}},{key:"_detachContentWhenStable",value:function(){var e=this;this._ngZone.runOutsideAngular(function(){var t=e._ngZone.onStable.pipe(ev(ue(e._attachments,e._detachments))).subscribe(function(){e._pane&&e._host&&0!==e._pane.children.length||(e._pane&&e._config.panelClass&&e._toggleClasses(e._pane,e._config.panelClass,!1),e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),t.unsubscribe())})})}},{key:"_disposeScrollStrategy",value:function(){var e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}]),e}(),Hm=/([A-Za-z%]+)$/,qm=function(){function e(t,n,i,r,o){b(this,e),this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new V,this._resizeSubscription=T.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}return w(e,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(e){var t=this;this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){t._isInitialRender=!0,t.apply()})}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var e,t,n=this._originRect,i=this._overlayRect,r=this._viewportRect,o=[],s=a(this._preferredPositions);try{for(s.s();!(t=s.n()).done;){var u=t.value,c=this._getOriginPoint(n,u),l=this._getOverlayPoint(c,i,u),h=this._getOverlayFit(l,i,r,u);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,c);this._canFitWithFlexibleDimensions(h,l,r)?o.push({position:u,origin:c,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(c,u)}):(!e||e.overlayFit.visibleArea<h.visibleArea)&&(e={overlayFit:h,overlayPoint:l,originPoint:c,position:u,overlayRect:i})}}catch(y){s.e(y)}finally{s.f()}if(o.length){var f,d=null,p=-1,g=a(o);try{for(g.s();!(f=g.n()).done;){var v=f.value,m=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);m>p&&(p=m,d=v)}}catch(y){g.e(y)}finally{g.f()}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&Wm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}},{key:"withScrollableContainers",value:function(e){return this._scrollables=e,this}},{key:"withPositions",value:function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(e){return this._viewportMargin=e,this}},{key:"withFlexibleDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=e,this}},{key:"withGrowAfterOpen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=e,this}},{key:"withPush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=e,this}},{key:"withLockedPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=e,this}},{key:"setOrigin",value:function(e){return this._origin=e,this}},{key:"withDefaultOffsetX",value:function(e){return this._offsetX=e,this}},{key:"withDefaultOffsetY",value:function(e){return this._offsetY=e,this}},{key:"withTransformOriginOn",value:function(e){return this._transformOriginSelector=e,this}},{key:"_getOriginPoint",value:function(e,t){var n;if("center"==t.originX)n=e.left+e.width/2;else{var i=this._isRtl()?e.right:e.left,r=this._isRtl()?e.left:e.right;n="start"==t.originX?i:r}return{x:n,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}},{key:"_getOverlayPoint",value:function(e,t,n){var i,r;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+i,y:e.y+r}}},{key:"_getOverlayFit",value:function(e,t,n,i){var r=Ym(t),o=e.x,s=e.y,a=this._getOffset(i,"x"),u=this._getOffset(i,"y");a&&(o+=a),u&&(s+=u);var c=0-s,l=s+r.height-n.height,h=this._subtractOverflows(r.width,0-o,o+r.width-n.width),f=this._subtractOverflows(r.height,c,l),d=h*f;return{visibleArea:d,isCompletelyWithinViewport:r.width*r.height===d,fitsInViewportVertically:f===r.height,fitsInViewportHorizontally:h==r.width}}},{key:"_canFitWithFlexibleDimensions",value:function(e,t,n){if(this._hasFlexibleDimensions){var i=n.bottom-t.y,r=n.right-t.x,o=Km(this._overlayRef.getConfig().minHeight),s=Km(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=s&&s<=r;return(e.fitsInViewportVertically||null!=o&&o<=i)&&a}return!1}},{key:"_pushOverlayOnScreen",value:function(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};var i,r,o=Ym(t),s=this._viewportRect,a=Math.max(e.x+o.width-s.width,0),u=Math.max(e.y+o.height-s.height,0),c=Math.max(s.top-n.top-e.y,0),l=Math.max(s.left-n.left-e.x,0);return i=o.width<=s.width?l||-a:e.x<this._viewportMargin?s.left-n.left-e.x:0,r=o.height<=s.height?c||-u:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:i,y:r},{x:e.x+i,y:e.y+r}}},{key:"_applyPosition",value:function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){var n=this._getScrollVisibility(),i=new Nm(e,n);this._positionChanges.next(i)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(e){if(this._transformOriginSelector){var t,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var r=0;r<n.length;r++)n[r].style.transformOrigin="".concat(t," ").concat(i)}}},{key:"_calculateBoundingBoxRect",value:function(e,t){var n,i,r,o,s,a,u=this._viewportRect,c=this._isRtl();if("top"===t.overlayY)i=e.y,n=u.height-i+this._viewportMargin;else if("bottom"===t.overlayY)r=u.height-e.y+2*this._viewportMargin,n=u.height-r+this._viewportMargin;else{var l=Math.min(u.bottom-e.y+u.top,e.y),h=this._lastBoundingBoxSize.height;n=2*l,i=e.y-l,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(i=e.y-h/2)}if("end"===t.overlayX&&!c||"start"===t.overlayX&&c)a=u.width-e.x+this._viewportMargin,o=e.x-this._viewportMargin;else if("start"===t.overlayX&&!c||"end"===t.overlayX&&c)s=e.x,o=u.right-e.x;else{var f=Math.min(u.right-e.x+u.left,e.x),d=this._lastBoundingBoxSize.width;o=2*f,s=e.x-f,o>d&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.x-d/2)}return{top:i,left:s,bottom:r,right:a,width:o,height:n}}},{key:"_setBoundingBoxStyles",value:function(e,t){var n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{var r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=av(n.height),i.top=av(n.top),i.bottom=av(n.bottom),i.width=av(n.width),i.left=av(n.left),i.right=av(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(i.maxHeight=av(r)),o&&(i.maxWidth=av(o))}this._lastBoundingBoxSize=n,Wm(this._boundingBox.style,i)}},{key:"_resetBoundingBoxStyles",value:function(){Wm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){Wm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(e,t){var n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){var s=this._viewportRuler.getViewportScrollPosition();Wm(n,this._getExactOverlayY(t,e,s)),Wm(n,this._getExactOverlayX(t,e,s))}else n.position="static";var a="",u=this._getOffset(t,"x"),c=this._getOffset(t,"y");u&&(a+="translateX(".concat(u,"px) ")),c&&(a+="translateY(".concat(c,"px)")),n.transform=a.trim(),o.maxHeight&&(i?n.maxHeight=av(o.maxHeight):r&&(n.maxHeight="")),o.maxWidth&&(i?n.maxWidth=av(o.maxWidth):r&&(n.maxWidth="")),Wm(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(e,t,n){var i={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));var o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=o,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=av(r.y),i}},{key:"_getExactOverlayX",value:function(e,t,n){var i={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),"right"===(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?i.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":i.left=av(r.x),i}},{key:"_getScrollVisibility",value:function(){var e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(function(e){return e.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:xm(e,n),isOriginOutsideView:Am(e,n),isOverlayClipped:xm(t,n),isOverlayOutsideView:Am(t,n)}}},{key:"_subtractOverflows",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(function(e,t){return e-Math.max(t,0)},e)}},{key:"_getNarrowedViewportRect",value:function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}},{key:"_validatePositions",value:function(){}},{key:"_addPanelClasses",value:function(e){var t=this;this._pane&&sv(e).forEach(function(e){""!==e&&-1===t._appliedPanelClasses.indexOf(e)&&(t._appliedPanelClasses.push(e),t._pane.classList.add(e))})}},{key:"_clearPanelClasses",value:function(){var e=this;this._pane&&(this._appliedPanelClasses.forEach(function(t){e._pane.classList.remove(t)}),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var e=this._origin;if(e instanceof su)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();var t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}]),e}();function Wm(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Km(e){if("number"!=typeof e&&null!=e){var t=n(e.split(Hm),2),i=t[0],r=t[1];return r&&"px"!==r?null:parseFloat(i)}return e||null}function Ym(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}var $m,Zm=function(){function e(t,n,i,r,o,s,a){b(this,e),this._preferredPositions=[],this._positionStrategy=new qm(i,r,o,s,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n),this.onPositionChange=this._positionStrategy.positionChanges}return w(e,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(e){this._positionStrategy.withScrollableContainers(e)}},{key:"withFallbackPosition",value:function(e,t,n,i){var r=new Lm(e,t,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}},{key:"withOffsetX",value:function(e){return this._positionStrategy.withDefaultOffsetX(e),this}},{key:"withOffsetY",value:function(e){return this._positionStrategy.withDefaultOffsetY(e),this}},{key:"withLockedPosition",value:function(e){return this._positionStrategy.withLockedPosition(e),this}},{key:"withPositions",value:function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(e){return this._positionStrategy.setOrigin(e),this}}]),e}(),Xm=function(){function e(){b(this,e),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return w(e,[{key:"attach",value:function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}},{key:"left",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}},{key:"right",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}},{key:"width",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}},{key:"centerHorizontally",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(e),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(e),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),i=n.width,r=n.height,o=n.maxWidth,s=n.maxHeight,a=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==r&&"100vh"!==r||s&&"100%"!==s&&"100vh"!==s);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=u?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}}]),e}(),Jm=function(){var e=function(){function e(t,n,i,r){b(this,e),this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=r}return w(e,[{key:"global",value:function(){return new Xm}},{key:"connectedTo",value:function(e,t,n){return new Zm(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(e){return new qm(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(mm),Si(Ol),Si(Xv),Si(jm))},e.\u0275prov=De({factory:function(){return new e(Si(mm),Si(Ol),Si(Xv),Si(jm))},token:e,providedIn:"root"}),e}(),Qm=0,ey=function(){var e=function(){function e(t,n,i,r,o,s,a,u,c,l,h){b(this,e),this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=i,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=s,this._ngZone=a,this._document=u,this._directionality=c,this._location=l,this._outsideClickDispatcher=h}return w(e,[{key:"create",value:function(e){var t=this._createHostElement(),n=this._createPaneElement(t),i=this._createPortalOutlet(n),r=new zm(e);return r.direction=r.direction||this._directionality.value,new Bm(i,t,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-"+Qm++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}},{key:"_createHostElement",value:function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}},{key:"_createPortalOutlet",value:function(e){return this._appRef||(this._appRef=this._injector.get(ml)),new Xg(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Pm),Si(jm),Si(nu),Si(Jm),Si(Um),Si(Cs),Si(Zc),Si(Ol),Si(rm),Si(Hl),Si(Gm))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),ty=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ny=new ai("cdk-connected-overlay-scroll-strategy"),iy=function(){var e=function e(t){b(this,e),this.elementRef=t};return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275dir=dt({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e}(),ry=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=T.EMPTY,this._attachSubscription=T.EMPTY,this._detachSubscription=T.EMPTY,this._positionSubscription=T.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new cc,this.positionChange=new cc,this.attach=new cc,this.detach=new cc,this.overlayKeydown=new cc,this.overlayOutsideClick=new cc,this._templatePortal=new Yg(n,i),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}return w(e,[{key:"offsetX",get:function(){return this._offsetX},set:function(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"offsetY",get:function(){return this._offsetY},set:function(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=iv(e)}},{key:"lockPosition",get:function(){return this._lockPosition},set:function(e){this._lockPosition=iv(e)}},{key:"flexibleDimensions",get:function(){return this._flexibleDimensions},set:function(e){this._flexibleDimensions=iv(e)}},{key:"growAfterOpen",get:function(){return this._growAfterOpen},set:function(e){this._growAfterOpen=iv(e)}},{key:"push",get:function(){return this._push},set:function(e){this._push=iv(e)}},{key:"overlayRef",get:function(){return this._overlayRef}},{key:"dir",get:function(){return this._dir?this._dir.value:"ltr"}},{key:"ngOnDestroy",value:function(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}},{key:"ngOnChanges",value:function(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}},{key:"_createOverlay",value:function(){var e=this;this.positions&&this.positions.length||(this.positions=ty);var t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(function(){return e.attach.emit()}),this._detachSubscription=t.detachments().subscribe(function(){return e.detach.emit()}),t.keydownEvents().subscribe(function(t){e.overlayKeydown.next(t),27!==t.keyCode||e.disableClose||Im(t)||(t.preventDefault(),e._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(function(t){e.overlayOutsideClick.next(t)})}},{key:"_buildConfig",value:function(){var e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new zm({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}},{key:"_updatePositionStrategy",value:function(e){var t=this,n=this.positions.map(function(e){return{originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY,panelClass:e.panelClass||void 0}});return e.setOrigin(this.origin.elementRef).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}},{key:"_createPositionStrategy",value:function(){var e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}},{key:"_attachOverlay",value:function(){var e=this;this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(function(t){e.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return n.lift(new Sm(e,t))}}(function(){return e.positionChange.observers.length>0})).subscribe(function(t){e.positionChange.emit(t),0===e.positionChange.observers.length&&e._positionSubscription.unsubscribe()}))}},{key:"_detachOverlay",value:function(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ey),Vs(Lu),Vs(ju),Vs(ny),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[It]}),e}(),oy={provide:ny,deps:[ey],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},sy=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[ey,oy],imports:[[om,Qg,Cm],Cm]}),e}(),ay=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),uy=new Set,cy=function(){var e=function(){function e(t){b(this,e),this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ly}return w(e,[{key:"matchMedia",value:function(e){return this._platform.WEBKIT&&function(e){if(!uy.has(e))try{$m||(($m=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild($m)),$m.sheet&&($m.sheet.insertRule("@media ".concat(e," {.fx-query-test{ }}"),0),uy.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Xv))},e.\u0275prov=De({factory:function(){return new e(Si(Xv))},token:e,providedIn:"root"}),e}();function ly(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var hy=function(){},fy=function(){var e=function(){function e(t,n){var i=this;b(this,e),this.ngZone=t,this.rendererFactory2=n,this.resizeSource$=new V,this.listeners=0,this.disposeHandle=hy,this.handler=function(){i.ngZone.run(function(){i.resizeSource$.next()})},this.renderer=this.rendererFactory2.createRenderer(null,null)}return w(e,[{key:"subscribe",value:function(){var e=this;return this.registerListener(),this.resizeSource$.pipe(Pv(16),Bf(function(){return e.unregisterListener()}))}},{key:"unsubscribe",value:function(){this.unregisterListener()}},{key:"registerListener",value:function(){var e=this;0===this.listeners&&this.ngZone.runOutsideAngular(function(){e.disposeHandle=e.renderer.listen("window","resize",e.handler)}),this.listeners+=1}},{key:"unregisterListener",value:function(){this.listeners-=1,0===this.listeners&&(this.disposeHandle(),this.disposeHandle=hy)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Zc),Si(uu))},e.\u0275prov=De({factory:function(){return new e(Si(Zc),Si(uu))},token:e,providedIn:"root"}),e}();new Map;var dy=function(){var e=function(){function e(){b(this,e),this._singletonRegistry=new Map}return w(e,[{key:"singletonRegistry",get:function(){return this._singletonRegistry}},{key:"registerSingletonWithKey",value:function(e,t){var n=this.singletonRegistry.has(e),i=n?this.singletonRegistry.get(e):this.withNewTarget(t);n||this.singletonRegistry.set(e,i)}},{key:"getSingletonWithKey",value:function(e){return this.singletonRegistry.has(e)?this.singletonRegistry.get(e).target:null}},{key:"withNewTarget",value:function(e){return{target:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({factory:function(){return new e},token:e,providedIn:"root"}),e}(),py=function(e){return e.xxl="xxl",e.xl="xl",e.lg="lg",e.md="md",e.sm="sm",e.xs="xs",e}({}),gy={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},vy=function(){var e=function(){function e(t,n){b(this,e),this.resizeService=t,this.mediaMatcher=n,this.resizeService.subscribe().subscribe(function(){})}return w(e,[{key:"subscribe",value:function(e,t){var n=this;if(t){var i=function(){return n.matchMedia(e,!0)};return this.resizeService.subscribe().pipe(J(i),mf(i()),Ev(function(e,t){return e[0]===t[0]}),J(function(e){return e[1]}))}var r=function(){return n.matchMedia(e)};return this.resizeService.subscribe().pipe(J(r),mf(r()),Ev())}},{key:"matchMedia",value:function(e,t){var n=this,i=py.md,r={};return Object.keys(e).map(function(e){var t=e,o=n.mediaMatcher.matchMedia(gy[t]).matches;r[e]=o,o&&(i=t)}),t?[i,r]:i}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(fy),Si(cy))},e.\u0275prov=De({factory:function(){return new e(Si(fy),Si(cy))},token:e,providedIn:"root"}),e}(),my={};function yy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];cl()&&(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce(function(e,t){return e+t.toString()},"");return!my[i]&&(my[i]=!0,!0)}).apply(void 0,n)&&e.apply(void 0,n)}var _y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yy.apply(void 0,[function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=console).warn.apply(e,["[NG-ZORRO]:"].concat(n))}].concat(t))},by=function(){for(var e=(new Error).stack,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return yy.apply(void 0,[function(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=console).warn.apply(t,["[NG-ZORRO]:","deprecated:"].concat(i,[e]))}].concat(n))};function ky(e){return null!=e}function wy(e){return iv(e)}function Cy(e,t){return function(n,i,r){var o="$$__".concat(i);return Object.prototype.hasOwnProperty.call(n,o)&&_y('The prop "'.concat(o,'" is already exist, it will be overrided by ').concat(e," decorator.")),Object.defineProperty(n,o,{configurable:!0,writable:!0}),{get:function(){return r&&r.get?r.get.bind(this)():this[o]},set:function(e){r&&r.set&&r.set.bind(this)(t(e)),this[o]=t(e)}}}}function Sy(){return Cy("InputBoolean",wy)}function Ey(e){return!!e&&"function"==typeof e.then&&"function"==typeof e.catch}"undefined"!=typeof window&&window;var Iy=function(){var e=function(){function e(t,n){b(this,e),this.viewContainer=t,this.templateRef=n,this.embeddedViewRef=null,this.context=new Ty,this.nzStringTemplateOutletContext=null,this.nzStringTemplateOutlet=null}return w(e,[{key:"recreateView",value:function(){this.viewContainer.clear();var e=this.nzStringTemplateOutlet instanceof Lu;this.embeddedViewRef=this.viewContainer.createEmbeddedView(e?this.nzStringTemplateOutlet:this.templateRef,e?this.nzStringTemplateOutletContext:this.context)}},{key:"updateContext",value:function(){var e=this.nzStringTemplateOutlet instanceof Lu?this.nzStringTemplateOutletContext:this.context,t=this.embeddedViewRef.context;if(e)for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];t[r]=e[r]}}},{key:"ngOnChanges",value:function(e){var t=e.nzStringTemplateOutletContext,n=e.nzStringTemplateOutlet;n&&(this.context.$implicit=n.currentValue),function(){var e=!1;if(n)if(n.firstChange)e=!0;else{var i=n.currentValue instanceof Lu;e=n.previousValue instanceof Lu||i}return t&&function(e){var t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){var i,r=a(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(-1===t.indexOf(o))return!0}}catch(s){r.e(s)}finally{r.f()}return!1}return!0}(t)||e}()?this.recreateView():this.updateContext()}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(ju),Vs(Lu))},e.\u0275dir=dt({type:e,selectors:[["","nzStringTemplateOutlet",""]],inputs:{nzStringTemplateOutletContext:"nzStringTemplateOutletContext",nzStringTemplateOutlet:"nzStringTemplateOutlet"},exportAs:["nzStringTemplateOutlet"],features:[It]}),e}(),Ty=function e(){b(this,e)},My=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[ph]]}),e}();function Oy(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function Dy(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Ay(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((i=i.apply(e,t||[])).next())})}function xy(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Ry(e){return Math.min(1,Math.max(0,e))}function Py(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function zy(e){return e<=1?100*Number(e)+"%":e}function Ly(e){return 1===e.length?"0"+e:String(e)}function Ny(e,t,n){e=xy(e,255),t=xy(t,255),n=xy(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),o=0,s=0,a=(i+r)/2;if(i===r)s=0,o=0;else{var u=i-r;switch(s=a>.5?u/(2-i-r):u/(i+r),i){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:o,s:s,l:a}}function Fy(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Uy(e,t,n){e=xy(e,255),t=xy(t,255),n=xy(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),o=0,s=i,a=i-r,u=0===i?0:a/i;if(i===r)o=0;else{switch(i){case e:o=(t-n)/a+(t<n?6:0);break;case t:o=(n-e)/a+2;break;case n:o=(e-t)/a+4}o/=6}return{h:o,s:u,v:s}}function Gy(e,t,n,i){var r=[Ly(Math.round(e).toString(16)),Ly(Math.round(t).toString(16)),Ly(Math.round(n).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Vy(e){return jy(e)/255}function jy(e){return parseInt(e,16)}var By={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Hy="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",qy="[\\s|\\(]+("+Hy+")[,|\\s]+("+Hy+")[,|\\s]+("+Hy+")\\s*\\)?",Wy="[\\s|\\(]+("+Hy+")[,|\\s]+("+Hy+")[,|\\s]+("+Hy+")[,|\\s]+("+Hy+")\\s*\\)?",Ky={CSS_UNIT:new RegExp(Hy),rgb:new RegExp("rgb"+qy),rgba:new RegExp("rgba"+Wy),hsl:new RegExp("hsl"+qy),hsla:new RegExp("hsla"+Wy),hsv:new RegExp("hsv"+qy),hsva:new RegExp("hsva"+Wy),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Yy(e){return Boolean(Ky.CSS_UNIT.exec(String(e)))}var $y=function(){function e(t,n){var i;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var r=function(e){var t,n,i={r:0,g:0,b:0},r=1,o=null,s=null,a=null,u=!1,c=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(By[e])e=By[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=Ky.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Ky.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Ky.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Ky.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Ky.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Ky.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Ky.hex8.exec(e))?{r:jy(n[1]),g:jy(n[2]),b:jy(n[3]),a:Vy(n[4]),format:t?"name":"hex8"}:(n=Ky.hex6.exec(e))?{r:jy(n[1]),g:jy(n[2]),b:jy(n[3]),format:t?"name":"hex"}:(n=Ky.hex4.exec(e))?{r:jy(n[1]+n[1]),g:jy(n[2]+n[2]),b:jy(n[3]+n[3]),a:Vy(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=Ky.hex3.exec(e))&&{r:jy(n[1]+n[1]),g:jy(n[2]+n[2]),b:jy(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(Yy(e.r)&&Yy(e.g)&&Yy(e.b)?(t=e.g,n=e.b,i={r:255*xy(e.r,255),g:255*xy(t,255),b:255*xy(n,255)},u=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):Yy(e.h)&&Yy(e.s)&&Yy(e.v)?(o=zy(e.s),s=zy(e.v),i=function(e,t,n){e=6*xy(e,360),t=xy(t,100),n=xy(n,100);var i=Math.floor(e),r=e-i,o=n*(1-t),s=n*(1-r*t),a=n*(1-(1-r)*t),u=i%6;return{r:255*[n,s,o,o,a,n][u],g:255*[a,n,n,s,o,o][u],b:255*[o,o,a,n,n,s][u]}}(e.h,o,s),u=!0,c="hsv"):Yy(e.h)&&Yy(e.s)&&Yy(e.l)&&(o=zy(e.s),a=zy(e.l),i=function(e,t,n){var i,r,o;if(e=xy(e,360),t=xy(t,100),n=xy(n,100),0===t)r=n,o=n,i=n;else{var s=n<.5?n*(1+t):n+t-n*t,a=2*n-s;i=Fy(a,s,e+1/3),r=Fy(a,s,e),o=Fy(a,s,e-1/3)}return{r:255*i,g:255*r,b:255*o}}(e.h,o,a),u=!0,c="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=Py(r),{ok:u,format:e.format||c,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:r}}(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(i=n.format)&&void 0!==i?i:r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,i=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=Py(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=Uy(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Uy(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.v);return 1===this.a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var e=Ny(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Ny(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.l);return 1===this.a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this.roundA+")"},e.prototype.toHex=function(e){return void 0===e&&(e=!1),Gy(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,i,r){var o,s=[Ly(Math.round(e).toString(16)),Ly(Math.round(t).toString(16)),Ly(Math.round(n).toString(16)),Ly((o=i,Math.round(255*parseFloat(o)).toString(16)))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb("+e+", "+t+", "+n+")":"rgba("+e+", "+t+", "+n+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var e=function(e){return Math.round(100*xy(e,255))+"%"};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*xy(e,255))};return 1===this.a?"rgb("+e(this.r)+"%, "+e(this.g)+"%, "+e(this.b)+"%)":"rgba("+e(this.r)+"%, "+e(this.g)+"%, "+e(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+Gy(this.r,this.g,this.b,!1),t=0,n=Object.entries(By);t<n.length;t++){var i=n[t];if(e===i[1])return i[0]}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var n=!1;return t||!(this.a<1&&this.a>=0)||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Ry(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Ry(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Ry(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Ry(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var i=this.toRgb(),r=new e(t).toRgb(),o=n/100;return new e({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var i=this.toHsl(),r=360/n,o=[this];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(new e(i));return o},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),i=n.h,r=n.s,o=n.v,s=[],a=1/t;t--;)s.push(new e({h:i,s:r,v:o})),o=(o+a)%1;return s},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),i=new e(t).toRgb();return new e({r:i.r+(n.r-i.r)*n.a,g:i.g+(n.g-i.g)*n.a,b:i.b+(n.b-i.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),i=n.h,r=[this],o=360/t,s=1;s<t;s++)r.push(new e({h:(i+s*o)%360,s:n.s,l:n.l}));return r},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Zy=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Xy(e,t,n){var i;return(i=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?i+=360:i>=360&&(i-=360),i}function Jy(e,t,n){return 0===e.h&&0===e.s?e.s:((i=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(i=1),n&&5===t&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2)));var i}function Qy(e,t,n){var i;return(i=n?e.v+.05*t:e.v-.15*t)>1&&(i=1),Number(i.toFixed(2))}function e_(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=new $y(e),r=5;r>0;r-=1){var o=i.toHsv(),s=new $y({h:Xy(o,r,!0),s:Jy(o,r,!0),v:Qy(o,r,!0)}).toHexString();n.push(s)}n.push(i.toHexString());for(var a=1;a<=4;a+=1){var u=i.toHsv(),c=new $y({h:Xy(u,a),s:Jy(u,a),v:Qy(u,a)}).toHexString();n.push(c)}return"dark"===t.theme?Zy.map(function(e){var i=e.index,r=e.opacity;return new $y(t.backgroundColor||"#141414").mix(n[i],100*r).toHexString()}):n}var t_={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},n_={},i_={};Object.keys(t_).forEach(function(e){n_[e]=e_(t_[e]),n_[e].primary=n_[e][5],i_[e]=e_(t_[e],{theme:"dark",backgroundColor:"#141414"}),i_[e].primary=i_[e][5]});var r_=function e(){b(this,e)},o_=function e(){b(this,e)},s_=function(){function e(t){var n=this;b(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach(function(e){var t=e.indexOf(":");if(t>0){var i=e.slice(0,t),r=i.toLowerCase(),o=e.slice(t+1).trim();n.maybeSetNormalizedName(i,r),n.headers.has(r)?n.headers.get(r).push(o):n.headers.set(r,[o])}})}:function(){n.headers=new Map,Object.keys(t).forEach(function(e){var i=t[e],r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(n.headers.set(r,i),n.maybeSetNormalizedName(e,r))})}:this.headers=new Map}return w(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var i=("a"===e.op?this.headers.get(t):void 0)||[];i.push.apply(i,o(n)),this.headers.set(t,i);break;case"d":var r=e.value;if(r){var s=this.headers.get(t);if(!s)return;0===(s=s.filter(function(e){return-1===r.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})}}]),e}(),a_=function(){function e(){b(this,e)}return w(e,[{key:"encodeKey",value:function(e){return u_(e)}},{key:"encodeValue",value:function(e){return u_(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function u_(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function c_(e){return"".concat(e)}var l_=function(){function e(){var t,i,r,o=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b(this,e),this.updates=null,this.cloneFrom=null,this.encoder=s.encoder||new a_,s.fromString){if(s.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=s.fromString,i=this.encoder,r=new Map,t.length>0&&t.replace(/^\?/,"").split("&").forEach(function(e){var t=e.indexOf("="),o=n(-1==t?[i.decodeKey(e),""]:[i.decodeKey(e.slice(0,t)),i.decodeValue(e.slice(t+1))],2),s=o[0],a=o[1],u=r.get(s)||[];u.push(a),r.set(s,u)}),r)}else s.fromObject?(this.map=new Map,Object.keys(s.fromObject).forEach(function(e){var t=s.fromObject[e];o.map.set(e,Array.isArray(t)?t:[t])})):this.map=null}return w(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"appendAll",value:function(e){var t=[];return Object.keys(e).forEach(function(n){var i=e[n];Array.isArray(i)?i.forEach(function(e){t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:i,op:"a"})}),this.clone(t)}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).filter(function(e){return""!==e}).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(c_(t.value)),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var i=e.map.get(t.param)||[],r=i.indexOf(c_(t.value));-1!==r&&i.splice(r,1),i.length>0?e.map.set(t.param,i):e.map.delete(t.param)}}),this.cloneFrom=this.updates=null)}}]),e}(),h_=function(){function e(){b(this,e),this.map=new Map}return w(e,[{key:"set",value:function(e,t){return this.map.set(e,t),this}},{key:"get",value:function(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}},{key:"delete",value:function(e){return this.map.delete(e),this}},{key:"keys",value:function(){return this.map.keys()}}]),e}();function f_(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function d_(e){return"undefined"!=typeof Blob&&e instanceof Blob}function p_(e){return"undefined"!=typeof FormData&&e instanceof FormData}var g_=function(){function e(t,n,i,r){var o;if(b(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new s_),this.context||(this.context=new h_),this.params){var s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{var a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new l_,this.urlWithParams=n}return w(e,[{key:"serializeBody",value:function(){return null===this.body?null:f_(this.body)||d_(this.body)||p_(this.body)||"string"==typeof this.body?this.body:this.body instanceof l_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||p_(this.body)?null:d_(this.body)?this.body.type||null:f_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof l_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,a=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,u=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,c=n.headers||this.headers,l=n.params||this.params,h=null!==(t=n.context)&&void 0!==t?t:this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce(function(e,t){return e.set(t,n.setHeaders[t])},c)),n.setParams&&(l=Object.keys(n.setParams).reduce(function(e,t){return e.set(t,n.setParams[t])},l)),new e(i,r,s,{params:l,headers:c,context:h,reportProgress:u,responseType:o,withCredentials:a})}}]),e}(),v_=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),m_=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";b(this,e),this.headers=t.headers||new s_,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},y_=function(e){d(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(this,n),(e=t.call(this,i)).type=v_.ResponseHeader,e}return w(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(m_),__=function(e){d(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(this,n),(e=t.call(this,i)).type=v_.Response,e.body=void 0!==i.body?i.body:null,e}return w(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(m_),b_=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",i.ok=!1,i.message=i.status>=200&&i.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),i.error=e.error||null,i}return n}(m_);function k_(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var w_=function(){var e=function(){function e(t){b(this,e),this.handler=t}return w(e,[{key:"request",value:function(e,t){var n,i,r,o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e instanceof g_?n=e:(i=s.headers instanceof s_?s.headers:new s_(s.headers),s.params&&(r=s.params instanceof l_?s.params:new l_({fromObject:s.params})),n=new g_(e,t,void 0!==s.body?s.body:null,{headers:i,context:s.context,params:r,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials}));var a=Jh(n).pipe(Tf(function(e){return o.handler.handle(e)}));if(e instanceof g_||"events"===s.observe)return a;var u=a.pipe(kf(function(e){return e instanceof __}));switch(s.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(J(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return u.pipe(J(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return u.pipe(J(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return u.pipe(J(function(e){return e.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(s.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new l_).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,k_(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,k_(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,k_(n,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(r_))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),C_=function(){function e(t,n){b(this,e),this.next=t,this.interceptor=n}return w(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),S_=new ai("HTTP_INTERCEPTORS"),E_=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),I_=/^\)\]\}',?\n/,T_=function(){var e=function(){function e(t){b(this,e),this.xhrFactory=t}return w(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new z(function(n){var i=t.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach(function(e,t){return i.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var r=e.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(e.responseType){var o=e.responseType.toLowerCase();i.responseType="json"!==o?o:"text"}var s=e.serializeBody(),a=null,u=function(){if(null!==a)return a;var t=1223===i.status?204:i.status,n=i.statusText||"OK",r=new s_(i.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||e.url;return a=new y_({headers:r,status:t,statusText:n,url:o})},c=function(){var t=u(),r=t.headers,o=t.status,s=t.statusText,a=t.url,c=null;204!==o&&(c=void 0===i.response?i.responseText:i.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===e.responseType&&"string"==typeof c){var h=c;c=c.replace(I_,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new __({body:c,headers:r,status:o,statusText:s,url:a||void 0})),n.complete()):n.error(new b_({error:c,headers:r,status:o,statusText:s,url:a||void 0}))},l=function(e){var t=u().url,r=new b_({error:e,status:i.status||0,statusText:i.statusText||"Unknown Error",url:t||void 0});n.error(r)},h=!1,f=function(t){h||(n.next(u()),h=!0);var r={type:v_.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(r.total=t.total),"text"===e.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},d=function(e){var t={type:v_.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),e.reportProgress&&(i.addEventListener("progress",f),null!==s&&i.upload&&i.upload.addEventListener("progress",d)),i.send(s),n.next({type:v_.Sent}),function(){i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),e.reportProgress&&(i.removeEventListener("progress",f),null!==s&&i.upload&&i.upload.removeEventListener("progress",d)),i.readyState!==i.DONE&&i.abort()}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(_h))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),M_=new ai("XSRF_COOKIE_NAME"),O_=new ai("XSRF_HEADER_NAME"),D_=function e(){b(this,e)},A_=function(){var e=function(){function e(t,n,i){b(this,e),this.doc=t,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return w(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zl(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Ol),Si(zc),Si(M_))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),x_=function(){var e=function(){function e(t,n){b(this,e),this.tokenService=t,this.headerName=n}return w(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(D_),Si(O_))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),R_=function(){var e=function(){function e(t,n){b(this,e),this.backend=t,this.injector=n,this.chain=null}return w(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(S_,[]);this.chain=t.reduceRight(function(e,t){return new C_(e,t)},this.backend)}return this.chain.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(o_),Si(Cs))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),P_=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:x_,useClass:E_}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:M_,useValue:t.cookieName}:[],t.headerName?{provide:O_,useValue:t.headerName}:[]]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[x_,{provide:S_,useExisting:x_,multi:!0},{provide:D_,useClass:A_},{provide:M_,useValue:"XSRF-TOKEN"},{provide:O_,useValue:"X-XSRF-TOKEN"}]}),e}(),z_=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[w_,{provide:r_,useClass:R_},T_,{provide:o_,useExisting:T_}],imports:[[P_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e}();function L_(e){cl()&&console.warn("[@ant-design/icons-angular]: ".concat(e,"."))}function N_(e){return e_(e)[0]}function F_(e,t){switch(t){case"fill":return"".concat(e,"-fill");case"outline":return"".concat(e,"-o");case"twotone":return"".concat(e,"-twotone");case void 0:return e;default:throw new Error('[@ant-design/icons-angular]:Theme "'.concat(t,'" is not a recognized theme!'))}}function U_(e){return"object"==typeof e&&"string"==typeof e.name&&("string"==typeof e.theme||void 0===e.theme)&&"string"==typeof e.icon}function G_(e){var t=e.split(":");switch(t.length){case 1:return[e,""];case 2:return[t[1],t[0]];default:throw new Error("[@ant-design/icons-angular]:The icon type ".concat(e," is not valid!"))}}function V_(){return new Error("[@ant-design/icons-angular]:<svg> tag not found.")}var j_=function(){var e=function(){function e(t,n,i,r){b(this,e),this._rendererFactory=t,this._handler=n,this._document=i,this.sanitizer=r,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._enableJsonpLoading=!1,this._jsonpIconLoad$=new V,this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new w_(this._handler))}return w(e,[{key:"twoToneColor",get:function(){return Object.assign({},this._twoToneColorPalette)},set:function(e){var t=e.primaryColor,n=e.secondaryColor;this._twoToneColorPalette.primaryColor=t,this._twoToneColorPalette.secondaryColor=n||N_(t)}},{key:"useJsonpLoading",value:function(){var e=this;this._enableJsonpLoading?L_("You are already using jsonp loading."):(this._enableJsonpLoading=!0,window.__ant_icon_load=function(t){e._jsonpIconLoad$.next(t)})}},{key:"changeAssetsSource",value:function(e){this._assetsUrlRoot=e.endsWith("/")?e:e+"/"}},{key:"addIcon",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){e._svgDefinitions.set(F_(t.name,t.theme),t)})}},{key:"addIconLiteral",value:function(e,t){var i=n(G_(e),2);i[0];if(!i[1])throw new Error('[@ant-design/icons-angular]:Type should have a namespace. Try "namespace:'.concat(name,'".'));this.addIcon({name:e,icon:t})}},{key:"clear",value:function(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}},{key:"getRenderedContent",value:function(e,t){var n=this,i=U_(e)?e:this._svgDefinitions.get(e)||null;return(i?Jh(i):this._loadIconDynamically(e)).pipe(J(function(i){if(!i)throw function(e){return new Error("[@ant-design/icons-angular]:the icon ".concat(e," does not exist or is not registered."))}(e);return n._loadSVGFromCacheOrCreateNew(i,t)}))}},{key:"getCachedIcons",value:function(){return this._svgDefinitions}},{key:"_loadIconDynamically",value:function(e){var t=this;if(!this._http&&!this._enableJsonpLoading)return Jh((console.error('[@ant-design/icons-angular]: you need to import "HttpClientModule" to use dynamic importing..'),null));var i,r,o,s=this._inProgressFetches.get(e);if(!s){var a=n(G_(e),2),u=a[0],c=a[1],l=c?{name:e,icon:""}:(r=u.split("-"),o="o"===(i=r.splice(r.length-1,1)[0])?"outline":i,{name:r.join("-"),theme:o,icon:""}),h=(c?"".concat(this._assetsUrlRoot,"assets/").concat(c,"/").concat(u):"".concat(this._assetsUrlRoot,"assets/").concat(l.theme,"/").concat(l.name))+(this._enableJsonpLoading?".js":".svg"),f=this.sanitizer.sanitize(dr.URL,h);if(!f)throw function(e){return new Error('[@ant-design/icons-angular]:The url "'.concat(e,'" is unsafe.'))}(h);s=(this._enableJsonpLoading?this._loadIconDynamicallyWithJsonp(l,f):this._http.get(f,{responseType:"text"}).pipe(J(function(e){return Object.assign(Object.assign({},l),{icon:e})}))).pipe(Gf(function(e){return t.addIcon(e)}),Bf(function(){return t._inProgressFetches.delete(e)}),Sf(function(){return Jh(null)}),me()),this._inProgressFetches.set(e,s)}return s}},{key:"_loadIconDynamicallyWithJsonp",value:function(e,t){var n=this;return new z(function(i){var r=n._document.createElement("script"),o=setTimeout(function(){s(),i.error(new Error("[@ant-design/icons-angular]:Importing timeout error."))},6e3);function s(){r.parentNode.removeChild(r),clearTimeout(o)}r.src=t,n._document.body.appendChild(r),n._jsonpIconLoad$.pipe(kf(function(t){return t.name===e.name&&t.theme===e.theme}),pf(1)).subscribe(function(e){i.next(e),s()})})}},{key:"_loadSVGFromCacheOrCreateNew",value:function(e,t){var n,i=t||this._twoToneColorPalette.primaryColor,r=N_(i)||this._twoToneColorPalette.secondaryColor,o="twotone"===e.theme?function(e,t,n,i){return"".concat(F_(e,t),"-").concat(n,"-").concat(i)}(e.name,e.theme,i,r):void 0===e.theme?e.name:F_(e.name,e.theme),s=this._svgRenderedDefinitions.get(o);return s?n=s.icon:(n=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(""!==G_(e.name)[1]?e.icon:e.icon.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')),"twotone"===e.theme,i,r)),this._svgRenderedDefinitions.set(o,Object.assign(Object.assign({},e),{icon:n}))),function(e){return e.cloneNode(!0)}(n)}},{key:"_createSVGElementFromString",value:function(e){var t=this._document.createElement("div");t.innerHTML=e;var n=t.querySelector("svg");if(!n)throw V_;return n}},{key:"_setSVGAttribute",value:function(e){return this._renderer.setAttribute(e,"width","1em"),this._renderer.setAttribute(e,"height","1em"),e}},{key:"_colorizeSVGIcon",value:function(e,t,n,i){if(t)for(var r=e.childNodes,o=r.length,s=0;s<o;s++){var a=r[s];"secondaryColor"===a.getAttribute("fill")?this._renderer.setAttribute(a,"fill",i):this._renderer.setAttribute(a,"fill",n)}return this._renderer.setAttribute(e,"fill","currentColor"),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(uu),Si(o_,8),Si(Ol,8),Si(Wh))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),B_=function(){var e=function(){function e(t,n,i){b(this,e),this._iconService=t,this._elementRef=n,this._renderer=i}return w(e,[{key:"ngOnChanges",value:function(e){(e.type||e.theme||e.twoToneColor)&&this._changeIcon()}},{key:"_changeIcon",value:function(){var e=this;return new Promise(function(t){if(e.type){var n=e._getSelfRenderMeta();e._iconService.getRenderedContent(e._parseIconType(e.type,e.theme),e.twoToneColor).subscribe(function(i){var r,o;r=n,o=e._getSelfRenderMeta(),r.type===o.type&&r.theme===o.theme&&r.twoToneColor===o.twoToneColor?(e._setSVGElement(i),t(i)):t(null)})}else e._clearSVGElement(),t(null)})}},{key:"_getSelfRenderMeta",value:function(){return{type:this.type,theme:this.theme,twoToneColor:this.twoToneColor}}},{key:"_parseIconType",value:function(e,t){if(U_(e))return e;var i=n(G_(e),2),r=i[0];return i[1]?e:function(e){return e.endsWith("-fill")||e.endsWith("-o")||e.endsWith("-twotone")}(r)?(t&&L_("'type' ".concat(r," already gets a theme inside so 'theme' ").concat(t," would be ignored")),r):F_(r,t||this._iconService.defaultTheme)}},{key:"_setSVGElement",value:function(e){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,e)}},{key:"_clearSVGElement",value:function(){for(var e,t=this._elementRef.nativeElement,n=t.childNodes,i=n.length-1;i>=0;i--){var r=n[i];"svg"===(null===(e=r.tagName)||void 0===e?void 0:e.toLowerCase())&&this._renderer.removeChild(t,r)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(j_),Vs(su),Vs(cu))},e.\u0275dir=dt({type:e,selectors:[["","antIcon",""]],inputs:{type:"type",theme:"theme",twoToneColor:"twoToneColor"},features:[It]}),e}();function H_(e){return function(t){return t.lift(new q_(e))}}var q_=function(){function e(t){b(this,e),this.value=t}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new W_(e,this.value))}}]),e}(),W_=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this,e)).value=i,r}return w(n,[{key:"_next",value:function(e){this.destination.next(this.value)}}]),n}(D),K_=new ai("nz-config"),Y_=function(e){return void 0!==e},$_=function(){var e=function(){function e(t){b(this,e),this.configUpdated$=new V,this.config=t||{}}return w(e,[{key:"getConfigForComponent",value:function(e){return this.config[e]}},{key:"getConfigChangeEventForComponent",value:function(e){return this.configUpdated$.pipe(kf(function(t){return t===e}),H_(void 0))}},{key:"set",value:function(e,t){this.config[e]=Object.assign(Object.assign({},this.config[e]),t),this.configUpdated$.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(K_,8))},e.\u0275prov=De({factory:function(){return new e(Si(K_,8))},token:e,providedIn:"root"}),e}();function Z_(){return function(e,t,n){var i="$$__assignedValue__".concat(t);return Object.defineProperty(e,i,{configurable:!0,writable:!0,enumerable:!1}),{get:function(){var e=(null==n?void 0:n.get)?n.get.bind(this)():this[i];if(((this.assignmentCount||{})[t]||0)>1&&Y_(e))return e;var r=(this.nzConfigService.getConfigForComponent(this._nzModuleName)||{})[t];return Y_(r)?r:e},set:function(e){this.assignmentCount=this.assignmentCount||{},this.assignmentCount[t]=(this.assignmentCount[t]||0)+1,(null==n?void 0:n.set)?n.set.bind(this)(e):this[i]=e},configurable:!0,enumerable:!0}}}var X_={name:"star",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z" /></svg>'},J_=[{name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"calendar",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z" /></svg>'},{name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"check-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z" /></svg>'},{name:"check-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" /><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"check",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" /></svg>'},{name:"clock-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z" /></svg>'},{name:"close-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z" /><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"close-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z" /></svg>'},{name:"close",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z" /></svg>'},{name:"copy",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" /></svg>'},{name:"double-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" /></svg>'},{name:"double-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" /></svg>'},{name:"down",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z" /></svg>'},{name:"edit",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" /></svg>'},{name:"ellipsis",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"exclamation-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"exclamation-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z" /></svg>'},{name:"eye",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z" /></svg>'},{name:"file",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z" /></svg>'},{name:"file",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z" /></svg>'},{name:"filter",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z" /></svg>'},{name:"info-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"info-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z" /></svg>'},{name:"left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z" /></svg>'},{name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z" /></svg>'},{name:"paper-clip",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z" /></svg>'},{name:"question-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z" /></svg>'},{name:"right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" /></svg>'},{name:"rotate-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z" /><path d="M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z" /></svg>'},{name:"rotate-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z" /><path d="M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z" /></svg>'},X_,{name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" /></svg>'},X_,{name:"upload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'},{name:"vertical-align-top",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z" /></svg>'},{name:"up",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z" /></svg>'},{name:"swap-right",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z" /></svg>'},{name:"zoom-in",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'},{name:"zoom-out",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'}],Q_=new ai("nz_icons");new ai("nz_icon_default_twotone_color");var eb=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,s,a,u){var c,l;return b(this,n),(l=t.call(this,e,s,a,i)).nzConfigService=r,l.configUpdated$=new V,l.iconfontCache=new Set,l.onConfigChange(),(c=l).addIcon.apply(c,J_.concat(o(u||[]))),l.configDefaultTwotoneColor(),l.configDefaultTheme(),l}return w(n,[{key:"normalizeSvgElement",value:function(e){e.getAttribute("viewBox")||this._renderer.setAttribute(e,"viewBox","0 0 1024 1024"),e.getAttribute("width")&&e.getAttribute("height")||(this._renderer.setAttribute(e,"width","1em"),this._renderer.setAttribute(e,"height","1em")),e.getAttribute("fill")||this._renderer.setAttribute(e,"fill","currentColor")}},{key:"fetchFromIconfont",value:function(e){var t=e.scriptUrl;if(this._document&&!this.iconfontCache.has(t)){var n=this._renderer.createElement("script");this._renderer.setAttribute(n,"src",t),this._renderer.setAttribute(n,"data-namespace",t.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,n),this.iconfontCache.add(t)}}},{key:"createIconfontIcon",value:function(e){return this._createSVGElementFromString('<svg><use xlink:href="'.concat(e,'"></svg>'))}},{key:"onConfigChange",value:function(){var e=this;this.nzConfigService.getConfigChangeEventForComponent("icon").subscribe(function(){e.configDefaultTwotoneColor(),e.configDefaultTheme(),e.configUpdated$.next()})}},{key:"configDefaultTheme",value:function(){var e=this.getConfig();this.defaultTheme=e.nzTheme||"outline"}},{key:"configDefaultTwotoneColor",value:function(){var e=this.getConfig().nzTwotoneColor||"#1890ff",t="#1890ff";e&&(e.startsWith("#")?t=e:_y("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:t}}},{key:"getConfig",value:function(){return this.nzConfigService.getConfigForComponent("icon")||{}}}]),n}(j_);return e.\u0275fac=function(t){return new(t||e)(Si(uu),Si(Wh),Si($_),Si(o_,8),Si(Ol,8),Si(Q_,8))},e.\u0275prov=De({factory:function(){return new e(Si(uu),Si(Wh),Si($_),Si(o_,8),Si(Ol,8),Si(Q_,8))},token:e,providedIn:"root"}),e}(),tb=new ai("nz_icons_patch"),nb=function(){var e=function(){function e(t,n){b(this,e),this.extraIcons=t,this.rootIconService=n,this.patched=!1}return w(e,[{key:"doPatch",value:function(){var e=this;this.patched||(this.extraIcons.forEach(function(t){return e.rootIconService.addIcon(t)}),this.patched=!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(tb,2),Si(eb))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),ib=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this,i,e,r)).iconService=i,s.renderer=r,s.cacheClassName=null,s.nzRotate=0,s.spin=!1,o&&o.doPatch(),s.el=e.nativeElement,s}return w(n,[{key:"nzSpin",set:function(e){this.spin=e}},{key:"nzType",set:function(e){this.type=e}},{key:"nzTheme",set:function(e){this.theme=e}},{key:"nzTwotoneColor",set:function(e){this.twoToneColor=e}},{key:"nzIconfont",set:function(e){this.iconfont=e}},{key:"ngOnChanges",value:function(e){var t=e.nzType,n=e.nzTwotoneColor,i=e.nzSpin,r=e.nzTheme,o=e.nzRotate;t||n||i||r?this.changeIcon2():o?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon("#".concat(this.iconfont)))}},{key:"ngOnInit",value:function(){this.renderer.setAttribute(this.el,"class","anticon ".concat(this.el.className).trim())}},{key:"ngAfterContentChecked",value:function(){if(!this.type){var e=this.el.children,t=e.length;if(!this.type&&e.length)for(;t--;){var n=e[t];"svg"===n.tagName.toLowerCase()&&this.iconService.normalizeSvgElement(n)}}}},{key:"changeIcon2",value:function(){var e=this;this.setClassName(),this._changeIcon().then(function(t){t&&(e.setSVGData(t),e.handleSpin(t),e.handleRotate(t))})}},{key:"handleSpin",value:function(e){this.spin||"loading"===this.type?this.renderer.addClass(e,"anticon-spin"):this.renderer.removeClass(e,"anticon-spin")}},{key:"handleRotate",value:function(e){this.nzRotate?this.renderer.setAttribute(e,"style","transform: rotate(".concat(this.nzRotate,"deg)")):this.renderer.removeAttribute(e,"style")}},{key:"setClassName",value:function(){this.cacheClassName&&this.renderer.removeClass(this.el,this.cacheClassName),this.cacheClassName="anticon-".concat(this.type),this.renderer.addClass(this.el,this.cacheClassName)}},{key:"setSVGData",value:function(e){this.renderer.setAttribute(e,"data-icon",this.type),this.renderer.setAttribute(e,"aria-hidden","true")}}]),n}(B_);return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(eb),Vs(cu),Vs(nb,8))},e.\u0275dir=dt({type:e,selectors:[["","nz-icon",""]],hostVars:2,hostBindings:function(e,t){2&e&&ba("anticon",!0)},inputs:{nzRotate:"nzRotate",nzSpin:"nzSpin",nzType:"nzType",nzTheme:"nzTheme",nzTwotoneColor:"nzTwotoneColor",nzIconfont:"nzIconfont"},exportAs:["nzIcon"],features:[Es,It]}),Oy([Sy(),Dy("design:type",Boolean),Dy("design:paramtypes",[Boolean])],e.prototype,"nzSpin",null),e}(),rb=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:Q_,useValue:t}]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[nb,{provide:tb,useValue:t}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[Jv]]}),e}(),ob=function e(){b(this,e)};function sb(e,t){return{type:7,name:e,definitions:t,options:{}}}function ab(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function ub(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function cb(e){return{type:6,styles:e,offset:null}}function lb(e,t,n){return{type:0,name:e,styles:t,options:n}}function hb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:e,animation:t,options:n}}function fb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:11,selector:e,animation:t,options:n}}function db(e,t){return{type:12,timings:e,animation:t}}function pb(e){Promise.resolve(null).then(e)}var gb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}return w(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;pb(function(){return e._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(e){this._position=this.totalTime?e*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),vb=function(){function e(t){var n=this;b(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var i=0,r=0,o=0,s=this.players.length;0==s?pb(function(){return n._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++i==s&&n._onFinish()}),e.onDestroy(function(){++r==s&&n._onDestroy()}),e.onStart(function(){++o==s&&n._onStart()})}),this.totalTime=this.players.reduce(function(e,t){return Math.max(e,t.totalTime)},0)}return w(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(e){return e.init()})}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})}},{key:"pause",value:function(){this.players.forEach(function(e){return e.pause()})}},{key:"restart",value:function(){this.players.forEach(function(e){return e.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach(function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}},{key:"getPosition",value:function(){var e=this.players.reduce(function(e,t){return null===e||t.totalTime>e.totalTime?t:e},null);return null!=e?e.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),mb=function(){var e=function e(){b(this,e)};return e.SLOW="0.3s",e.BASE="0.2s",e.FAST="0.1s",e}(),yb=function(){var e=function e(){b(this,e)};return e.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)",e.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)",e.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)",e.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)",e.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)",e.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)",e.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)",e.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)",e.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)",e.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)",e.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)",e.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)",e.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)",e.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)",e}(),_b=sb("collapseMotion",[lb("expanded",cb({height:"*"})),lb("collapsed",cb({height:0,overflow:"hidden"})),lb("hidden",cb({height:0,overflow:"hidden",borderTopWidth:"0"})),hb("expanded => collapsed",ab("150ms ".concat(yb.EASE_IN_OUT))),hb("expanded => hidden",ab("150ms ".concat(yb.EASE_IN_OUT))),hb("collapsed => expanded",ab("150ms ".concat(yb.EASE_IN_OUT))),hb("hidden => expanded",ab("150ms ".concat(yb.EASE_IN_OUT)))]),bb=(sb("treeCollapseMotion",[hb("* => *",[fb("nz-tree-node:leave,nz-tree-builtin-node:leave",[cb({overflow:"hidden"}),db(0,[ab("150ms ".concat(yb.EASE_IN_OUT),cb({height:0,opacity:0,"padding-bottom":0}))])],{optional:!0}),fb("nz-tree-node:enter,nz-tree-builtin-node:enter",[cb({overflow:"hidden",height:0,opacity:0,"padding-bottom":0}),db(0,[ab("150ms ".concat(yb.EASE_IN_OUT),cb({overflow:"hidden",height:"*",opacity:"*","padding-bottom":"*"}))])],{optional:!0})])]),sb("fadeMotion",[hb(":enter",[cb({opacity:0}),ab("".concat(mb.BASE),cb({opacity:1}))]),hb(":leave",[cb({opacity:1}),ab("".concat(mb.BASE),cb({opacity:0}))])])),kb=sb("helpMotion",[hb(":enter",[cb({opacity:0,transform:"translateY(-5px)"}),ab("".concat(mb.SLOW," ").concat(yb.EASE_IN_OUT),cb({opacity:1,transform:"translateY(0)"}))]),hb(":leave",[cb({opacity:1,transform:"translateY(0)"}),ab("".concat(mb.SLOW," ").concat(yb.EASE_IN_OUT),cb({opacity:0,transform:"translateY(-5px)"}))])]),wb=sb("moveUpMotion",[hb("* => enter",[cb({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}),ab("".concat(mb.BASE),cb({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}))]),hb("* => leave",[cb({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}),ab("".concat(mb.BASE),cb({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}))])]),Cb=(sb("notificationMotion",[lb("enterRight",cb({opacity:1,transform:"translateX(0)"})),hb("* => enterRight",[cb({opacity:0,transform:"translateX(5%)"}),ab("100ms linear")]),lb("enterLeft",cb({opacity:1,transform:"translateX(0)"})),hb("* => enterLeft",[cb({opacity:0,transform:"translateX(-5%)"}),ab("100ms linear")]),lb("leave",cb({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"})),hb("* => leave",[cb({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),ab("100ms linear")])]),"".concat(mb.BASE," ").concat(yb.EASE_OUT_QUINT)),Sb="".concat(mb.BASE," ").concat(yb.EASE_IN_QUINT),Eb=sb("slideMotion",[lb("void",cb({opacity:0,transform:"scaleY(0.8)"})),lb("enter",cb({opacity:1,transform:"scaleY(1)"})),hb("void => *",[ab(Cb)]),hb("* => void",[ab(Sb)])]),Ib=(sb("slideAlertMotion",[hb(":leave",[cb({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),ab("".concat(mb.SLOW," ").concat(yb.EASE_IN_OUT_CIRC),cb({opacity:0,transform:"scaleY(0)",transformOrigin:"0% 0%"}))])]),sb("zoomBigMotion",[hb("void => active",[cb({opacity:0,transform:"scale(0.8)"}),ab("".concat(mb.BASE," ").concat(yb.EASE_OUT_CIRC),cb({opacity:1,transform:"scale(1)"}))]),hb("active => void",[cb({opacity:1,transform:"scale(1)"}),ab("".concat(mb.BASE," ").concat(yb.EASE_IN_OUT_CIRC),cb({opacity:0,transform:"scale(0.8)"}))])])),Tb=sb("zoomBadgeMotion",[hb(":enter",[cb({opacity:0,transform:"scale(0) translate(50%, -50%)"}),ab("".concat(mb.SLOW," ").concat(yb.EASE_OUT_BACK),cb({opacity:1,transform:"scale(1) translate(50%, -50%)"}))]),hb(":leave",[cb({opacity:1,transform:"scale(1) translate(50%, -50%)"}),ab("".concat(mb.SLOW," ").concat(yb.EASE_IN_BACK),cb({opacity:0,transform:"scale(0) translate(50%, -50%)"}))])]);function Mb(e,t){if(1&e){var n=$s();Hs(0,"nz-message",2),Qs("destroyed",function(e){return $t(n),ra().remove(e.id,e.userAction)}),qs()}2&e&&js("instance",t.$implicit)}function Ob(e,t){1&e&&Ws(0,"i",10)}function Db(e,t){1&e&&Ws(0,"i",11)}function Ab(e,t){1&e&&Ws(0,"i",12)}function xb(e,t){1&e&&Ws(0,"i",13)}function Rb(e,t){1&e&&Ws(0,"i",14)}function Pb(e,t){if(1&e&&(Ks(0),Ws(1,"span",15),Ys()),2&e){var n=ra();ho(1),js("innerHTML",n.instance.content,pr)}}var zb=0,Lb=function(){var e=function(){function e(t,n){b(this,e),this.cdr=t,this.nzConfigService=n,this.instances=[],this.destroy$=new V,this.updateConfig()}return w(e,[{key:"ngOnInit",value:function(){this.subscribeConfigChange()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"create",value:function(e){var t=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[].concat(o(this.instances),[t]),this.readyInstances(),t}},{key:"remove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.instances.some(function(i,r){return i.messageId===e&&(t.instances.splice(r,1),t.instances=o(t.instances),t.onRemove(i,n),t.readyInstances(),!0)})}},{key:"removeAll",value:function(){var e=this;this.instances.forEach(function(t){return e.onRemove(t,!1)}),this.instances=[],this.readyInstances()}},{key:"onCreate",value:function(e){return e.options=this.mergeOptions(e.options),e.onClose=new V,e}},{key:"onRemove",value:function(e,t){e.onClose.next(t),e.onClose.complete()}},{key:"readyInstances",value:function(){this.cdr.detectChanges()}},{key:"mergeOptions",value:function(e){var t=this.config,n=t.nzDuration,i=t.nzAnimate,r=t.nzPauseOnHover;return Object.assign({nzDuration:n,nzAnimate:i,nzPauseOnHover:r},e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs($_))},e.\u0275dir=dt({type:e}),e}(),Nb=function(){var e=function(){function e(t){b(this,e),this.cdr=t,this.destroyed=new cc,this.animationStateChanged=new V,this.userAction=!1,this.eraseTimer=null}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(kf(function(e){return"done"===e.phaseName&&"leave"===e.toState}),pf(1)).subscribe(function(){clearTimeout(e.closeTimer),e.destroyed.next({id:e.instance.messageId,userAction:e.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}},{key:"ngOnDestroy",value:function(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}},{key:"onEnter",value:function(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}},{key:"onLeave",value:function(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}},{key:"destroy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.userAction=t,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(function(){e.closeTimer=void 0,e.destroyed.next({id:e.instance.messageId,userAction:t})},200)):this.destroyed.next({id:this.instance.messageId,userAction:t})}},{key:"initErase",value:function(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}},{key:"updateTTL",value:function(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}},{key:"startEraseTimeout",value:function(){var e=this;this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(function(){return e.destroy()},this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}},{key:"clearEraseTimeout",value:function(){null!==this.eraseTimer&&(clearTimeout(this.eraseTimer),this.eraseTimer=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu))},e.\u0275dir=dt({type:e}),e}(),Fb={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},Ub=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;b(this,n),(r=t.call(this,e,i)).destroy$=new V,r.dir="ltr",r.instances=[];var o=r.nzConfigService.getConfigForComponent("message");return r.dir=(null==o?void 0:o.nzDirection)||"ltr",r}return w(n,[{key:"subscribeConfigChange",value:function(){var e=this;this.nzConfigService.getConfigChangeEventForComponent("message").pipe(ev(this.destroy$)).subscribe(function(){e.updateConfig();var t=e.nzConfigService.getConfigForComponent("message");if(t){var n=t.nzDirection;e.dir=n||e.dir}})}},{key:"updateConfig",value:function(){this.config=Object.assign(Object.assign(Object.assign({},Fb),this.config),this.nzConfigService.getConfigForComponent("message")),this.top=av(this.config.nzTop),this.cdr.markForCheck()}}]),n}(Lb);return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs($_))},e.\u0275cmp=at({type:e,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[Es],decls:2,vars:5,consts:[[1,"ant-message"],[3,"instance","destroyed",4,"ngFor","ngForOf"],[3,"instance","destroyed"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,Mb,1,1,"nz-message",1),qs()),2&e&&(_a("top",t.top),ba("ant-message-rtl","rtl"===t.dir),ho(1),js("ngForOf",t.instances))},directives:function(){return[Ql,jb]},encapsulation:2,changeDetection:0}),e}(),Gb=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),Vb=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e,i,r)).componentPrefix="message-",o}return w(n,[{key:"success",value:function(e,t){return this.createInstance({type:"success",content:e},t)}},{key:"error",value:function(e,t){return this.createInstance({type:"error",content:e},t)}},{key:"info",value:function(e,t){return this.createInstance({type:"info",content:e},t)}},{key:"warning",value:function(e,t){return this.createInstance({type:"warning",content:e},t)}},{key:"loading",value:function(e,t){return this.createInstance({type:"loading",content:e},t)}},{key:"create",value:function(e,t,n){return this.createInstance({type:e,content:t},n)}},{key:"createInstance",value:function(e,t){return this.container=this.withContainer(Ub),this.container.create(Object.assign(Object.assign({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:t}))}}]),n}(function(){function e(t,n,i){b(this,e),this.nzSingletonService=t,this.overlay=n,this.injector=i}return w(e,[{key:"remove",value:function(e){this.container&&(e?this.container.remove(e):this.container.removeAll())}},{key:"getInstanceId",value:function(){return"".concat(this.componentPrefix,"-").concat(zb++)}},{key:"withContainer",value:function(e){var t=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(t)return t;var n=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),i=new Kg(e,null,this.injector),r=n.attach(i);return n.overlayElement.style.zIndex="1010",t||(this.container=t=r.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,t)),t}}]),e}());return e.\u0275fac=function(t){return new(t||e)(Si(dy),Si(ey),Si(Cs))},e.\u0275prov=De({factory:function(){return new e(Si(dy),Si(ey),Si(cs))},token:e,providedIn:Gb}),e}(),jb=function(){var e=function(e){d(n,e);var t=g(n);function n(e){var i;return b(this,n),(i=t.call(this,e)).destroyed=new cc,i}return n}(Nb);return e.\u0275fac=function(t){return new(t||e)(Vs(xu))},e.\u0275cmp=at({type:e,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[Es],decls:10,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content",3,"ngClass"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","info-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","loading",4,"ngSwitchCase"],[4,"nzStringTemplateOutlet"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","info-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","loading"],[3,"innerHTML"]],template:function(e,t){1&e&&(Hs(0,"div",0),Qs("@moveUpMotion.done",function(e){return t.animationStateChanged.next(e)})("mouseenter",function(){return t.onEnter()})("mouseleave",function(){return t.onLeave()}),Hs(1,"div",1),Hs(2,"div",2),Ks(3,3),Us(4,Ob,1,0,"i",4),Us(5,Db,1,0,"i",5),Us(6,Ab,1,0,"i",6),Us(7,xb,1,0,"i",7),Us(8,Rb,1,0,"i",8),Ys(),Us(9,Pb,2,1,"ng-container",9),qs(),qs(),qs()),2&e&&(js("@moveUpMotion",t.instance.state),ho(2),js("ngClass","ant-message-"+t.instance.type),ho(1),js("ngSwitch",t.instance.type),ho(1),js("ngSwitchCase","success"),ho(1),js("ngSwitchCase","info"),ho(1),js("ngSwitchCase","warning"),ho(1),js("ngSwitchCase","error"),ho(1),js("ngSwitchCase","loading"),ho(1),js("nzStringTemplateOutlet",t.instance.content))},directives:[Xl,oh,sh,Iy,ib],encapsulation:2,data:{animation:[wb]},changeDetection:0}),e}(),Bb=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sy,rb,My,Gb]]}),e}(),Hb=function(){function e(t,n){b(this,e),this.observables=t,this.project=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new qb(e,this.observables,this.project))}}]),e}(),qb=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;b(this,n),(o=t.call(this,e)).observables=i,o.project=r,o.toRespond=[];var s=i.length;o.values=new Array(s);for(var a=0;a<s;a++)o.toRespond.push(a);for(var u=0;u<s;u++){var c=i[u];o.add(Z(m(o),c,c,u))}return o}return w(n,[{key:"notifyNext",value:function(e,t,n,i,r){this.values[n]=t;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(e){if(0===this.toRespond.length){var t=[e].concat(o(this.values));this.project?this._tryProject(t):this.destination.next(t)}}},{key:"_tryProject",value:function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(X),Wb={};function Kb(e,t){if(Wb[e]=(Wb[e]||0)+1,"function"==typeof t)return Yb(e,function(){return Object.assign(Object.assign({},t.apply(void 0,arguments)),{type:e})});switch(t?t._as:"empty"){case"empty":return Yb(e,function(){return{type:e}});case"props":return Yb(e,function(t){return Object.assign(Object.assign({},t),{type:e})});default:throw new Error("Unexpected config.")}}function Yb(e,t){return Object.defineProperty(t,"type",{value:e,writable:!1})}var $b="@ngrx/store/init",Zb=function(){var e=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.call(this,{type:$b})}return w(n,[{key:"next",value:function(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===e)throw new TypeError("Actions must be objects");if(void 0===e.type)throw new TypeError("Actions must have a type property");f(_(n.prototype),"next",this).call(this,e)}},{key:"complete",value:function(){}},{key:"ngOnDestroy",value:function(){f(_(n.prototype),"complete",this).call(this)}}]),n}(Qh);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Xb=[Zb],Jb=new ai("@ngrx/store Internal Root Guard"),Qb=new ai("@ngrx/store Internal Initial State"),ek=new ai("@ngrx/store Initial State"),tk=new ai("@ngrx/store Reducer Factory"),nk=new ai("@ngrx/store Internal Reducer Factory Provider"),ik=new ai("@ngrx/store Initial Reducers"),rk=new ai("@ngrx/store Internal Initial Reducers"),ok=new ai("@ngrx/store Store Features"),sk=new ai("@ngrx/store Internal Store Reducers"),ak=new ai("@ngrx/store Internal Feature Reducers"),uk=new ai("@ngrx/store Internal Feature Configs"),ck=new ai("@ngrx/store Internal Store Features"),lk=new ai("@ngrx/store Internal Feature Reducers Token"),hk=new ai("@ngrx/store Feature Reducers"),fk=new ai("@ngrx/store User Provided Meta Reducers"),dk=new ai("@ngrx/store Meta Reducers"),pk=new ai("@ngrx/store Internal Resolved Meta Reducers"),gk=new ai("@ngrx/store User Runtime Checks Config"),vk=new ai("@ngrx/store Internal User Runtime Checks Config"),mk=new ai("@ngrx/store Internal Runtime Checks"),yk=new ai("@ngrx/store Check if Action types are unique");function _k(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(e),i={},r=0;r<n.length;r++){var o=n[r];"function"==typeof e[o]&&(i[o]=e[o])}var s=Object.keys(i);return function(e,n){e=void 0===e?t:e;for(var r=!1,o={},a=0;a<s.length;a++){var u=s[a],c=e[u],l=(0,i[u])(c,n);o[u]=l,r=r||l!==c}return r?o:e}}function bk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){if(0===t.length)return e;var n=t[t.length-1];return t.slice(0,-1).reduceRight(function(e,t){return t(e)},n(e))}}function kk(e,t){return Array.isArray(t)&&t.length>0&&(e=bk.apply(null,[].concat(o(t),[e]))),function(t,n){var i=e(t);return function(e,t){return i(e=void 0===e?n:e,t)}}}var wk=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(z),Ck=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(Zb),Sk=function(){var e=function(e){d(i,e);var n=g(i);function i(e,t,r,o){var s;return b(this,i),(s=n.call(this,o(r,t))).dispatcher=e,s.initialState=t,s.reducers=r,s.reducerFactory=o,s}return w(i,[{key:"addFeature",value:function(e){this.addFeatures([e])}},{key:"addFeatures",value:function(e){var t=e.reduce(function(e,t){var n=t.reducers,i=t.reducerFactory,r=t.metaReducers,s=t.initialState,a=t.key,u="function"==typeof n?function(e){var t=Array.isArray(e)&&e.length>0?bk.apply(void 0,o(e)):function(e){return e};return function(e,n){return e=t(e),function(t,i){return e(t=void 0===t?n:t,i)}}}(r)(n,s):kk(i,r)(n,s);return e[a]=u,e},{});this.addReducers(t)}},{key:"removeFeature",value:function(e){this.removeFeatures([e])}},{key:"removeFeatures",value:function(e){this.removeReducers(e.map(function(e){return e.key}))}},{key:"addReducer",value:function(e,n){this.addReducers(t({},e,n))}},{key:"addReducers",value:function(e){this.reducers=Object.assign(Object.assign({},this.reducers),e),this.updateReducers(Object.keys(e))}},{key:"removeReducer",value:function(e){this.removeReducers([e])}},{key:"removeReducers",value:function(e){var n=this;e.forEach(function(e){var i,r;n.reducers=(i=n.reducers,r=e,Object.keys(i).filter(function(e){return e!==r}).reduce(function(e,n){return Object.assign(e,t({},n,i[n]))},{}))}),this.updateReducers(e)}},{key:"updateReducers",value:function(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}},{key:"ngOnDestroy",value:function(){this.complete()}}]),i}(Qh);return e.\u0275fac=function(t){return new(t||e)(Si(Ck),Si(ek),Si(ik),Si(tk))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Ek=[Sk,{provide:wk,useExisting:Sk},{provide:Ck,useExisting:Zb}],Ik=function(){var e,t=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"ngOnDestroy",value:function(){this.complete()}}]),n}(V);return t.\u0275fac=function(n){return(e||(e=ii(t)))(n||t)},t.\u0275prov=De({token:t,factory:t.\u0275fac}),t}(),Tk=[Ik],Mk=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(z),Ok=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;b(this,n),s=t.call(this,o);var a=e.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Vv(e,t))}}(Uv)).pipe(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Hb(t,n))}}(i)).pipe(yf(Dk,{state:o}));return s.stateSubscription=a.subscribe(function(e){var t=e.state,n=e.action;s.next(t),r.next(n)}),s}return w(n,[{key:"ngOnDestroy",value:function(){this.stateSubscription.unsubscribe(),this.complete()}}]),n}(Qh);return e.\u0275fac=function(t){return new(t||e)(Si(Zb),Si(wk),Si(Ik),Si(ek))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e.INIT=$b,e}();function Dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:void 0},t=arguments.length>1?arguments[1]:void 0,i=n(t,2),r=i[0],o=i[1],s=e.state;return{state:o(s,r),action:r}}var Ak=[Ok,{provide:Mk,useExisting:Ok}],xk=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this)).actionsObserver=i,o.reducerManager=r,o.source=e,o}return w(n,[{key:"select",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Pk.call.apply(Pk,[null,e].concat(n))(this)}},{key:"lift",value:function(e){var t=new n(this,this.actionsObserver,this.reducerManager);return t.operator=e,t}},{key:"dispatch",value:function(e){this.actionsObserver.next(e)}},{key:"next",value:function(e){this.actionsObserver.next(e)}},{key:"error",value:function(e){this.actionsObserver.error(e)}},{key:"complete",value:function(){this.actionsObserver.complete()}},{key:"addReducer",value:function(e,t){this.reducerManager.addReducer(e,t)}},{key:"removeReducer",value:function(e){this.reducerManager.removeReducer(e)}}]),n}(z);return e.\u0275fac=function(t){return new(t||e)(Si(Mk),Si(Zb),Si(Sk))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Rk=[xk];function Pk(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return function(n){var r;if("string"==typeof e){var s=[t].concat(i).filter(Boolean);r=n.pipe((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(e){return J(function(e,t){return function(n){for(var i=n,r=0;r<t;r++){var o=i[e[r]];if(void 0===o)return;i=o}return i}}(t,i))(e)}}).apply(void 0,[e].concat(o(s))))}else{if("function"!=typeof e)throw new TypeError("Unexpected type '".concat(typeof e,"' in select operator, expected 'string' or 'function'"));r=n.pipe(J(function(n){return e(n,t)}))}return r.pipe(Ev())}}function zk(e,t){return e===t}function Lk(e,t,n){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!0;return!1}function Nk(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zk,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zk,r=null,o=null;return{memoized:function(){if(void 0!==t)return t.result;if(!r)return o=e.apply(null,arguments),r=arguments,o;if(!Lk(arguments,r,n))return o;var s=e.apply(null,arguments);return r=arguments,i(o,s)?o:(o=s,s)},reset:function(){r=null,o=null},setResult:function(e){t={result:e}},clearResult:function(){t=void 0}}}function Fk(){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stateFn:Uk};return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var a=r;if(Array.isArray(a[0])){var u=a,c=e(u),l=c[0],h=c.slice(1);a=[].concat(o(l),o(h))}var f=a.slice(0,a.length-1),d=a[a.length-1],p=f.filter(function(e){return e.release&&"function"==typeof e.release}),g=t(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.apply(null,t)}),v=Nk(function(e,t){return n.stateFn.apply(null,[e,f,t,g])});return Object.assign(v.memoized,{release:function(){v.reset(),g.reset(),p.forEach(function(e){return e.release()})},projector:g.memoized,setResult:v.setResult,clearResult:v.clearResult})}}(Nk).apply(void 0,arguments)}function Uk(e,t,n,i){if(void 0===n){var r=t.map(function(t){return t(e)});return i.memoized.apply(null,r)}var s=t.map(function(t){return t(e,n)});return i.memoized.apply(null,[].concat(o(s),[n]))}var Gk="https://ngrx.io/guide/store/configuration/runtime-checks";function Vk(e){return void 0===e}function jk(e){return null===e}function Bk(e){return Array.isArray(e)}function Hk(e){return"object"==typeof e&&null!==e}function qk(e){return"function"==typeof e}function Wk(e){Object.freeze(e);var t=qk(e);return Object.getOwnPropertyNames(e).forEach(function(n){if(!n.startsWith("\u0275")&&function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,n)&&(!t||"caller"!==n&&"callee"!==n&&"arguments"!==n)){var i=e[n];!Hk(i)&&!qk(i)||Object.isFrozen(i)||Wk(i)}}),e}function Kk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(Vk(e)||jk(e))&&0===t.length?{path:["root"],value:e}:Object.keys(e).reduce(function(n,i){if(n)return n;var r=e[i];return function(e){return qk(e)&&e.hasOwnProperty("\u0275cmp")}(r)?n:!(Vk(r)||jk(r)||function(e){return"number"==typeof e}(r)||function(e){return"boolean"==typeof e}(r)||function(e){return"string"==typeof e}(r)||Bk(r))&&(function(e){if(!function(e){return Hk(e)&&!Bk(e)}(e))return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(r)?Kk(r,[].concat(o(t),[i])):{path:[].concat(o(t),[i]),value:r})},!1)}function Yk(e,t){if(!1!==e){var n=e.path.join("."),i=new Error("Detected unserializable ".concat(t,' at "').concat(n,'". ').concat(Gk,"#strict").concat(t,"serializability"));throw i.value=e.value,i.unserializablePath=n,i}}function $k(e){return cl()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},e):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Zk(e){var t=e.strictActionSerializability,n=e.strictStateSerializability;return function(e){return t||n?function(e,t){return function(n,i){t.action(i)&&Yk(Kk(i),"action");var r=e(n,i);return t.state()&&Yk(Kk(r),"state"),r}}(e,{action:function(e){return t&&!Jk(e)},state:function(){return n}}):e}}function Xk(e){var t=e.strictActionImmutability,n=e.strictStateImmutability;return function(e){return t||n?function(e,t){return function(n,i){var r=t.action(i)?Wk(i):i,o=e(n,r);return t.state()?Wk(o):o}}(e,{action:function(e){return t&&!Jk(e)},state:function(){return n}}):e}}function Jk(e){return e.type.startsWith("@ngrx")}function Qk(e){var t=e.strictActionWithinNgZone;return function(e){return t?function(e,t){return function(n,i){if(t.action(i)&&!Zc.isInAngularZone())throw new Error("Action '".concat(i.type,"' running outside NgZone. ").concat(Gk,"#strictactionwithinngzone"));return e(n,i)}}(e,{action:function(e){return t&&!Jk(e)}}):e}}function ew(){return[{provide:yk,multi:!0,deps:[mk],useFactory:nw}]}function tw(e){return e}function nw(e){if(e.strictActionTypeUniqueness){var t=Object.entries(Wb).filter(function(e){return n(e,2)[1]>1}).map(function(e){return n(e,1)[0]});if(t.length)throw new Error("Action types are registered more than once, ".concat(t.map(function(e){return'"'.concat(e,'"')}).join(", "),". ").concat(Gk,"#strictactiontypeuniqueness"))}}var iw=function(){var e=function e(t,n,i,r,o,s){b(this,e)};return e.\u0275fac=function(t){return new(t||e)(Si(Zb),Si(wk),Si(Ik),Si(xk),Si(Jb,8),Si(yk,8))},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),rw=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.features=t,this.featureReducers=n,this.reducerManager=i;var s=t.map(function(e,t){var i=n.shift()[t];return Object.assign(Object.assign({},e),{reducers:i,initialState:cw(e.initialState)})});i.addFeatures(s)}return w(e,[{key:"ngOnDestroy",value:function(){this.reducerManager.removeFeatures(this.features)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(ck),Si(hk),Si(Sk),Si(iw),Si(yk,8))},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),ow=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"forRoot",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{ngModule:iw,providers:[{provide:Jb,useFactory:hw,deps:[[xk,new Ai,new xi]]},{provide:Qb,useValue:n.initialState},{provide:ek,useFactory:cw,deps:[Qb]},{provide:rk,useValue:e},{provide:sk,useExisting:e instanceof ai?e:rk},{provide:ik,deps:[Cs,rk,[new Di(sk)]],useFactory:sw},{provide:fk,useValue:n.metaReducers?n.metaReducers:[]},{provide:pk,deps:[dk,fk],useFactory:lw},{provide:nk,useValue:n.reducerFactory?n.reducerFactory:_k},{provide:tk,deps:[nk,pk],useFactory:kk},Xb,Ek,Tk,Ak,Rk,(t=n.runtimeChecks,[{provide:vk,useValue:t},{provide:gk,useFactory:tw,deps:[vk]},{provide:mk,deps:[gk],useFactory:$k},{provide:dk,multi:!0,deps:[mk],useFactory:Xk},{provide:dk,multi:!0,deps:[mk],useFactory:Zk},{provide:dk,multi:!0,deps:[mk],useFactory:Qk}]),ew()]}}},{key:"forFeature",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{ngModule:rw,providers:[{provide:uk,multi:!0,useValue:e instanceof Object?{}:n},{provide:ok,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:n instanceof ai||!n.reducerFactory?_k:n.reducerFactory,metaReducers:n instanceof ai||!n.metaReducers?[]:n.metaReducers,initialState:n instanceof ai||!n.initialState?void 0:n.initialState}},{provide:ck,deps:[Cs,uk,ok],useFactory:aw},{provide:ak,multi:!0,useValue:e instanceof Object?e.reducer:t},{provide:lk,multi:!0,useExisting:t instanceof ai?t:ak},{provide:hk,multi:!0,deps:[Cs,ak,[new Di(lk)]],useFactory:uw},ew()]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}();function sw(e,t){return t instanceof ai?e.get(t):t}function aw(e,t,n){return n.map(function(n,i){if(t[i]instanceof ai){var r=e.get(t[i]);return{key:n.key,reducerFactory:r.reducerFactory?r.reducerFactory:_k,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return n})}function uw(e,t){return t.map(function(t){return t instanceof ai?e.get(t):t})}function cw(e){return"function"==typeof e?e():e}function lw(e,t){return e.concat(t)}function hw(e){if(e)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function fw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{reducer:t.pop(),types:t.map(function(e){return e.type})}}function dw(e){for(var t=new Map,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=function(){var e,n=u[s],i=a(n.types);try{var r=function(){var i=e.value,r=t.get(i);t.set(i,r?function(e,t){return n.reducer(r(e,t),t)}:n.reducer)};for(i.s();!(e=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}},s=0,u=i;s<u.length;s++)o();return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments.length>1?arguments[1]:void 0,r=t.get(i.type);return r?r(n,i):n}}var pw,gw=Kb((pw={},pw.Login="[toggleIsLogin]",pw).Login,{_as:"props",_p:void 0}),vw=function(e){return e.SDKReady="[user] toggleIsSDKReady",e.updateCurrentUserProfile="[user] updateCurrentUserProfile",e.resetUser="[user] resetUser",e}({}),mw=Kb(vw.SDKReady,{_as:"props",_p:void 0}),yw=Kb(vw.updateCurrentUserProfile,{_as:"props",_p:void 0}),_w=Kb(vw.resetUser),bw=Kb("[showMessage]",{_as:"props",_p:void 0}),kw=Kb("[updateMessage]",{_as:"props",_p:void 0}),ww=Kb("[conversation] updateCurrentConversation",{_as:"props",_p:void 0}),Cw=Kb("[conversation] updateConversationList",{_as:"props",_p:void 0}),Sw=Kb("[conversation] resetCurrentConversation"),Ew=Kb("[conversation] pushCurrentMessageList",{_as:"props",_p:void 0}),Iw=Kb("[conversation] removeMessage",{_as:"props",_p:void 0}),Tw=Kb("[conversation] reset"),Mw=Kb("[conversation] checkoutConversation",{_as:"props",_p:void 0}),Ow=(Fk(function(e){return e.currentConversationID},function(e){return e.conversationID}),Fk(function(e){return e.conversation},function(e){return e})),Dw=Fk(function(e){return e.conversation.currentConversation},function(e){return e}),Aw=Fk(function(e){return e.conversation.conversationList},function(e){return e}),xw=(Fk(function(e){return e.login},function(e){return e.isLogin}),Fk(function(e){return e.message},function(e){return e})),Rw=function(e){return e.user},Pw=(Fk(Rw,function(e){return e.isSDKReady}),Fk(Rw,function(e){return e.currentUserProfile})),zw=Kb("[group] updateGroupList",{_as:"props",_p:void 0}),Lw=Kb("[group] updateCurrentMemberList",{_as:"props",_p:void 0}),Nw=Kb("[group] resetCurrentMemberList"),Fw=Fk(function(e){return e.group.groupList},function(e){return e}),Uw=Fk(function(e){return e.group.currentMemberList},function(e){return e}),Gw=s(8490),Vw=s.n(Gw),jw=s(9037),Bw=s.n(jw),Hw=new ai("config"),qw=function(e){return e.success="success",e.info="info",e.warning="warning",e.error="error",e}({}),Ww=function(e){return e.client="C2C",e.group="GROUP",e.system="@TIM#SYSTEM",e}({}),Kw=function(e){return e.GRP_WORK="Private",e.GRP_PUBLIC="Public",e.GRP_MEETING="ChatRoom",e.GRP_AVCHATROOM="AVChatRoom",e}({}),Yw={TYPES:{MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_SYSTEM:"@TIM%23SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__"},EVENT:{SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",PROFILE_UPDATED:"onProfileUpdated",BLACKLIST_UPDATED:"blacklistUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},VERSION:"2.10.2"},$w=function(){var e=function(){function e(t,n){var i=this;b(this,e),this.store=t,this.config=n,this.eventBus$=new V,this.totalUnRead=new V,this.initTim(n),this.initListener(),this.store.select(Ow).subscribe(function(e){i.conversation=e}),this.store.select(Uw).subscribe(function(e){i.currentMemberList=e})}return w(e,[{key:"login",value:function(e,t){var n=this;if(!t)throw new Error("\u8bf7\u914d\u7f6e\u7b7e\u540d\uff01");this.tim.login({userID:e,userSig:t}).then(function(e){n.eventBus$.next("login"),n.store.dispatch(gw({isLogin:!0})),n.store.dispatch(bw({msgType:qw.success,message:"\u767b\u5f55\u6210\u529f\uff01"})),!0===e.data.repeatLogin&&console.log(e.data.errorInfo)}).catch(function(e){console.warn("login error:",e)})}},{key:"logout",value:function(){var e=this;this.conversation.currentConversation.conversationID&&this.tim.setMessageRead({conversationID:this.conversation.currentConversation.conversationID}),this.tim.logout().then(function(t){e.eventBus$.next("logout"),e.store.dispatch(gw({isLogin:!1})),e.store.dispatch(_w()),e.store.dispatch(Tw()),e.store.dispatch(bw({msgType:qw.success,message:"\u5df2\u9000\u51fa\uff01"}))})}},{key:"initListener",value:function(){this.tim.on(Vw().EVENT.SDK_READY,this.onReadyStateUpdate,this),this.tim.on(Vw().EVENT.SDK_NOT_READY,this.onReadyStateUpdate,this),this.tim.on(Vw().EVENT.KICKED_OUT,this.onKickOut,this),this.tim.on(Vw().EVENT.ERROR,this.onError,this),this.tim.on(Vw().EVENT.MESSAGE_RECEIVED,this.onReceiveMessage,this),this.tim.on(Vw().EVENT.CONVERSATION_LIST_UPDATED,this.onUpdateConversationList,this),this.tim.on(Vw().EVENT.GROUP_LIST_UPDATED,this.onUpdateGroupList,this),this.tim.on(Vw().EVENT.NET_STATE_CHANGE,this.onNetStateChange,this),this.tim.on(Vw().EVENT.MESSAGE_READ_BY_PEER,this.onMessageReadByPeer,this)}},{key:"onReadyStateUpdate",value:function(e){var t=this,n=e.name===Vw().EVENT.SDK_READY;this.store.dispatch(mw({SDKReadyState:n})),n&&this.tim.getMyProfile().then(function(e){var n=e.data;t.store.dispatch(yw({profile:n}))}).catch(function(e){t.store.dispatch(bw({msgType:qw.warning,message:e.message}))})}},{key:"onKickOut",value:function(e){this.eventBus$.next("logout"),this.store.dispatch(gw({isLogin:!1})),this.store.dispatch(_w()),this.store.dispatch(Tw()),this.store.dispatch(bw({msgType:qw.warning,message:"\u7531\u4e8e\u591a\u5b9e\u4f8b\u767b\u5f55\u88ab\u8e22\u51fa\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55!"}))}},{key:"onError",value:function(e){var t=e.data;"Network Error"!==t.message&&console.log("%c error","color:red;font-size:20px;",t)}},{key:"onMessageReadByPeer",value:function(e){console.log("\u5df2\u56de\u6267",e)}},{key:"onReceiveMessage",value:function(e){var t=e.data;this.store.dispatch(Ew({message:t}))}},{key:"onUpdateConversationList",value:function(e){this.store.dispatch(Cw({conversationList:e.data}))}},{key:"onUpdateGroupList",value:function(e){this.store.dispatch(zw({groupList:e.data}))}},{key:"onNetStateChange",value:function(e){console.log("\u7f51\u7edc\u76d1\u6d4b::",e)}},{key:"checkoutConversation",value:function(e){var t=this;return this.store.dispatch(Nw()),this.conversation.currentConversation.conversationID&&this.tim.setMessageRead({conversationID:this.conversation.currentConversation.conversationID}),this.tim.setMessageRead({conversationID:e}),this.tim.getConversationProfile(e).then(function(n){return t.store.dispatch(ww({conversation:n.data.conversation})),t.getMessageList(e),n.data.conversation.type===Vw().TYPES.CONV_GROUP&&t.getGroupMemberList(n.data.conversation.groupProfile.groupID),Promise.resolve()})}},{key:"getMessageList",value:function(e){var t=this;if(this.conversation.isCompleted)this.store.dispatch(bw({msgType:qw.info,message:"\u5df2\u7ecf\u6ca1\u6709\u66f4\u591a\u7684\u5386\u53f2\u6d88\u606f\u4e86\u54e6"}));else{var n=this.conversation,i=n.nextReqMessageID,r=n.currentMessageList;this.tim.getMessageList({conversationID:e,nextReqMessageID:i,count:15}).then(function(e){t.store.dispatch(kw({nextReqMessageID:e.data.nextReqMessageID,isCompleted:e.data.isCompleted,currentMessageList:[].concat(o(e.data.messageList),o(r))}))})}}},{key:"getGroupMemberList",value:function(e){var t=this;this.tim.getGroupMemberList({groupID:e,offset:this.currentMemberList.length,count:30}).then(function(e){t.store.dispatch(Lw({currentMemberList:e.data.memberList}))})}},{key:"initTim",value:function(e){this.tim=Vw().create({SDKAppID:e.sdkAppId}),this.tim.setLogLevel(e.level||1),this.tim.registerPlugin({"tim-upload-plugin":Bw()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(xk),Si(Hw))},e.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Zw(e){var t=e.subscriber,n=e.counter,i=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}function Xw(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Jw(e,t){var n=t?"":"none";Xw(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function Qw(e,t){var n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function eC(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function tC(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}function nC(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function iC(e,t,n){var i=e.top,r=e.bottom,o=e.left,s=e.right;return n>=i&&n<=r&&t>=o&&t<=s}function rC(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function oC(e,t,n,i){var r=e.top,o=e.right,s=e.bottom,a=e.left,u=e.width*t,c=e.height*t;return i>r-c&&i<s+c&&n>a-u&&n<o+u}var sC=function(){function e(t,n){b(this,e),this._document=t,this._viewportRuler=n,this.positions=new Map}return w(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:nC(e)})})}},{key:"handleScroll",value:function(e){var t=e.target,n=this.positions.get(t);if(!n)return null;var i,r,o=t===this._document?t.documentElement:t,s=n.scrollPosition;if(t===this._document){var a=this._viewportRuler.getViewportScrollPosition();i=a.top,r=a.left}else i=t.scrollTop,r=t.scrollLeft;var u=s.top-i,c=s.left-r;return this.positions.forEach(function(e,n){e.clientRect&&t!==n&&o.contains(n)&&rC(e.clientRect,u,c)}),s.top=i,s.left=r,{top:u,left:c}}}]),e}();function aC(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(var r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===i?hC(e,t):"input"!==i&&"select"!==i&&"textarea"!==i||lC(e,t),uC("canvas",e,t,hC),uC("input, textarea, select",e,t,lC),t}function uC(e,t,n,i){var r=t.querySelectorAll(e);if(r.length)for(var o=n.querySelectorAll(e),s=0;s<r.length;s++)i(r[s],o[s])}var cC=0;function lC(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(cC++))}function hC(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(bL){}}var fC=Qv({passive:!0}),dC=Qv({passive:!1}),pC=function(){function e(t,n,i,r,o,s){var a=this;b(this,e),this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new V,this._pointerMoveSubscription=T.EMPTY,this._pointerUpSubscription=T.EMPTY,this._scrollSubscription=T.EMPTY,this._resizeSubscription=T.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new V,this.started=new V,this.released=new V,this.ended=new V,this.entered=new V,this.exited=new V,this.dropped=new V,this.moved=this._moveEvents,this._pointerDown=function(e){if(a.beforeStarted.next(),a._handles.length){var t=a._handles.find(function(t){var n=e.target;return!!n&&(n===t||t.contains(n))});!t||a._disabledHandles.has(t)||a.disabled||a._initializeDragSequence(t,e)}else a.disabled||a._initializeDragSequence(a._rootElement,e)},this._pointerMove=function(e){var t=a._getPointerPositionOnPage(e);if(a._hasStartedDragging){a._boundaryElement&&(a._previewRect&&(a._previewRect.width||a._previewRect.height)||(a._previewRect=(a._preview||a._rootElement).getBoundingClientRect())),e.preventDefault();var n=a._getConstrainedPointerPosition(t);if(a._hasMoved=!0,a._lastKnownPointerPosition=t,a._updatePointerDirectionDelta(n),a._dropContainer)a._updateActiveDropContainer(n,t);else{var i=a._activeTransform;i.x=n.x-a._pickupPositionOnPage.x+a._passiveTransform.x,i.y=n.y-a._pickupPositionOnPage.y+a._passiveTransform.y,a._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&a._rootElement instanceof SVGElement&&a._rootElement.setAttribute("transform","translate(".concat(i.x," ").concat(i.y,")"))}a._moveEvents.observers.length&&a._ngZone.run(function(){a._moveEvents.next({source:a,pointerPosition:n,event:e,distance:a._getDragDistance(n),delta:a._pointerDirectionDelta})})}else if(Math.abs(t.x-a._pickupPositionOnPage.x)+Math.abs(t.y-a._pickupPositionOnPage.y)>=a._config.dragStartThreshold){var r=Date.now()>=a._dragStartTime+a._getDragStartDelay(e),o=a._dropContainer;if(!r)return void a._endDragSequence(e);o&&(o.isDragging()||o.isReceiving())||(e.preventDefault(),a._hasStartedDragging=!0,a._ngZone.run(function(){return a._startDragSequence(e)}))}},this._pointerUp=function(e){a._endDragSequence(e)},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new sC(i,o),s.registerDragItem(this)}return w(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=iv(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(function(e){return Jw(e,t)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var t=this;this._handles=e.map(function(e){return uv(e)}),this._handles.forEach(function(e){return Jw(e,t.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(e){t._handles.indexOf(e)>-1&&n.add(e)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=uv(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",t._pointerDown,dC),n.addEventListener("touchstart",t._pointerDown,fC)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?uv(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return t._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&mC(this._rootElement),mC(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Jw(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Jw(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&mC(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&mC(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){t.ended.next({source:t,distance:t._getDragDistance(t._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(e){yC(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t=this._dropContainer;if(t){var n=this._rootElement,i=n.parentNode,r=this._preview=this._createPreviewElement(),o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(s,n),Qw(n,!1),this._document.body.appendChild(i.replaceChild(o,n)),function(e,t){return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}(this._document,a).appendChild(r),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;this._parentDragRef&&t.stopPropagation();var i=this.isDragging(),r=yC(t),o=!r&&0!==t.button,s=this._rootElement,a=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),!(i||o||a)){this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor||"",s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(function(e){n._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=nC(this._boundaryElement));var u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var c=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;Qw(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var n=t._dropContainer,i=n.getItemIndex(t),r=t._getPointerPositionOnPage(e),o=t._getDragDistance(t._getPointerPositionOnPage(e)),s=n._isOverContainer(r.x,r.y);t.ended.next({source:t,distance:o}),t.dropped.next({item:t,currentIndex:i,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:s,distance:o}),n.drop(t,i,t._initialIndex,t._initialContainer,s,o),t._dropContainer=t._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,i=e.x,r=e.y,o=t.x,s=t.y,a=this._initialContainer._getSiblingContainerFromPosition(this,i,r);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,r)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=a,n._dropContainer.enter(n,i,r,a===n._initialContainer&&a.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:a,currentIndex:a.getItemIndex(n)})}),this._dropContainer._startScrollingIfNecessary(o,s),this._dropContainer._sortItem(this,i,r,this._pointerDirectionDelta),this._preview.style.transform=gC(i-this._pickupPositionInElement.x,r-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,i=t?t.template:null;if(i&&t){var r=t.matchSize?this._rootElement.getBoundingClientRect():null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),e=_C(o,this._document),this._previewRef=o,t.matchSize?bC(e,r):e.style.transform=gC(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var s=this._rootElement;bC(e=aC(s),s.getBoundingClientRect())}return Xw(e.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),Jw(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(t){return e.classList.add(t)}):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=gC(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=tC(t,"transition-property"),i=n.find(function(e){return"transform"===e||"all"===e});if(!i)return 0;var r=n.indexOf(i),o=tC(t,"transition-duration"),s=tC(t,"transition-delay");return eC(o[r])+eC(s[r])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var i=function n(i){(!i||i.target===e._preview&&"transform"===i.propertyName)&&(e._preview.removeEventListener("transitionend",n),t(),clearTimeout(r))},r=setTimeout(i,1.5*n);e._preview.addEventListener("transitionend",i)})})}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=_C(this._placeholderRef,this._document)):e=aC(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,o=yC(t)?t.targetTouches[0]:t,s=this._getViewportScrollPosition();return{x:r.left-n.left+(o.pageX-r.left-s.left),y:r.top-n.top+(o.pageY-r.top-s.top)}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=yC(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,r=n.pageY-t.top;if(this._ownerSVGElement){var o=this._ownerSVGElement.getScreenCTM();if(o){var s=this._ownerSVGElement.createSVGPoint();return s.x=i,s.y=r,s.matrixTransform(o.inverse())}}return{x:i,y:r}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,i=n.x,r=n.y;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(i=this._pickupPositionOnPage.x),this._boundaryRect){var o=this._pickupPositionInElement,s=o.x,a=o.y,u=this._boundaryRect,c=this._previewRect,l=u.top+a,h=u.bottom-(c.height-a);i=vC(i,u.left+s,u.right-(c.width-s)),r=vC(r,l,h)}return{x:i,y:r}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-r.x),s=Math.abs(n-r.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>r.x?1:-1,r.x=t),s>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Jw(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,dC),e.removeEventListener("touchstart",this._pointerDown,fC)}},{key:"_applyRootElementTransform",value:function(e,t){var n=gC(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===r.width&&0===r.height)){var o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,u=r.bottom-i.bottom;i.width>r.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,i.height>r.height?(a>0&&(n+=a),u>0&&(n-=u)):n=0,t===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:yC(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&rC(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=nm(this._rootElement)),this._cachedShadowRoot}}]),e}();function gC(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function vC(e,t,n){return Math.max(t,Math.min(n,e))}function mC(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function yC(e){return"t"===e.type[0]}function _C(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var i=t.createElement("div");return n.forEach(function(e){return i.appendChild(e)}),i}function bC(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=gC(t.left,t.top)}function kC(e,t){return Math.max(0,Math.min(t,e))}var wC=function(){function e(t,n,i,r,o){var s=this;b(this,e),this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new V,this.entered=new V,this.exited=new V,this.dropped=new V,this.sorted=new V,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=T.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new V,this._cachedShadowRoot=null,this._startScrollInterval=function(){s._stopScrolling(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mv;return(!Av(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=Mv),new z(function(n){return n.add(t.schedule(Zw,e,{subscriber:n,counter:0,period:e})),n})}(0,gv).pipe(ev(s._stopScrollTimers)).subscribe(function(){var e=s._scrollNode,t=s.autoScrollStep;1===s._verticalScrollDirection?SC(e,-t):2===s._verticalScrollDirection&&SC(e,t),1===s._horizontalScrollDirection?EC(e,-t):2===s._horizontalScrollDirection&&EC(e,t)})},this.element=uv(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new sC(i,o)}return w(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,t,n,i){var r;this._draggingStarted(),null==i?-1===(r=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(r=this._getItemIndexFromPointerPosition(e,t,n)):r=i;var o=this._activeDraggables,s=o.indexOf(e),a=e.getPlaceholderElement(),u=o[r];if(u===e&&(u=o[r+1]),s>-1&&o.splice(s,1),u&&!this._dragDropRegistry.isDragging(u)){var c=u.getRootElement();c.parentElement.insertBefore(a,c),o.splice(r,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){var l=o[0].getRootElement();l.parentNode.insertBefore(a,l),o.unshift(e)}else uv(this.element).appendChild(a),o.push(e);a.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,i,r,o){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:r,distance:o})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(t)}),this.isDragging()&&(n.filter(function(e){return e.isDragging()}).every(function(t){return-1===e.indexOf(t)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=uv(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(o(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?CC("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(t){return t.drag===e}):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,i){if(!this.sortingDisabled&&this._clientRect&&oC(this._clientRect,.05,t,n)){var r=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,n,i);if(!(-1===o&&r.length>0)){var s="horizontal"===this._orientation,a=CC(r,function(t){return t.drag===e}),u=r[o],c=u.clientRect,l=a>o?1:-1,h=this._getItemOffsetPx(r[a].clientRect,c,l),f=this._getSiblingOffsetPx(a,r,l),d=r.slice();!function(e,t,n){var i=kC(t,e.length-1),r=kC(n,e.length-1);if(i!==r){for(var o=e[i],s=r<i?-1:1,a=i;a!==r;a+=s)e[a]=e[a+s];e[r]=o}}(r,a,o),this.sorted.next({previousIndex:a,currentIndex:o,container:this,item:e}),r.forEach(function(t,n){if(d[n]!==t){var i=t.drag===e,r=i?h:f,o=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=r,s?(o.style.transform="translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),rC(t.clientRect,0,r)):(o.style.transform="translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),rC(t.clientRect,r,0))}}),this._previousSwap.overlaps=iC(c,t,n),this._previousSwap.drag=u.drag,this._previousSwap.delta=s?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var i=this;if(!this.autoScrollDisabled){var r,o=0,s=0;if(this._parentPositions.positions.forEach(function(a,u){var c;u!==i._document&&a.clientRect&&!r&&oC(a.clientRect,.05,e,t)&&(c=n(function(e,t,n,i){var r=IC(t,i),o=TC(t,n),s=0,a=0;if(r){var u=e.scrollTop;1===r?u>0&&(s=1):e.scrollHeight-u>e.clientHeight&&(s=2)}if(o){var c=e.scrollLeft;1===o?c>0&&(a=1):e.scrollWidth-c>e.clientWidth&&(a=2)}return[s,a]}(u,a.clientRect,e,t),2),o=c[0],s=c[1],(o||s)&&(r=u))}),!o&&!s){var a=this._viewportRuler.getViewportSize(),u=a.width,c=a.height,l={width:u,height:c,top:0,right:u,bottom:c,left:0};o=IC(l,t),s=TC(l,e),r=window}!r||o===this._verticalScrollDirection&&s===this._horizontalScrollDirection&&r===this._scrollNode||(this._verticalScrollDirection=o,this._horizontalScrollDirection=s,this._scrollNode=r,(o||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=uv(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=uv(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(e){var t=e.getVisibleElement();return{drag:e,offset:0,clientRect:nC(t)}}).sort(function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=uv(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(e){var t=e.getRootElement();t&&(t.style.transform="")}),this._siblings.forEach(function(t){return t._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,r=t[e].clientRect,o=t[e+-1*n],s=r[i?"width":"height"]*n;if(o){var a=i?"left":"top",u=i?"right":"bottom";-1===n?s-=o.clientRect[a]-r[u]:s+=r[a]-o.clientRect[u]}return s}},{key:"_getItemOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,r=i?t.left-e.left:t.top-e.top;return-1===n&&(r+=i?t.width-e.width:t.height-e.height),r}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var r=n[n.length-1].clientRect;return i?e>=r.right:t>=r.bottom}var o=n[0].clientRect;return i?e<=o.left:t<=o.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,i){var r=this,o="horizontal"===this._orientation,s=CC(this._itemPositions,function(s,a,u){var c=s.drag,l=s.clientRect;if(c===e)return u.length<2;if(i){var h=o?i.x:i.y;if(c===r._previousSwap.drag&&r._previousSwap.overlaps&&h===r._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):n>=Math.floor(l.top)&&n<Math.floor(l.bottom)});return-1!==s&&this.sortPredicate(s,e,this)?s:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return null!=this._clientRect&&iC(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find(function(i){return i._canReceive(e,t,n)})}},{key:"_canReceive",value:function(e,t,n){if(!this._clientRect||!iC(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;var r=uv(this.element);return i===r||r.contains(i)}},{key:"_startReceiving",value:function(e,t){var n=this,i=this._activeSiblings;!i.has(e)&&t.every(function(e){return n.enterPredicate(e,n)||n._draggables.indexOf(e)>-1})&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach(function(e){rC(e.clientRect,n.top,n.left)}),e._itemPositions.forEach(function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=nm(uv(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,t=this._activeDraggables.filter(function(e){return e.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,t)})}}]),e}();function CC(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function SC(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function EC(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function IC(e,t){var n=e.top,i=e.bottom,r=.05*e.height;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}function TC(e,t){var n=e.left,i=e.right,r=.05*e.width;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}var MC=Qv({passive:!1,capture:!0}),OC=function(){var e=function(){function e(t,n){var i=this;b(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(e){return e.isDragging()},this.pointerMove=new V,this.pointerUp=new V,this.scroll=new V,this._preventDefaultWhileDragging=function(e){i._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=function(e){i._activeDragInstances.length>0&&(i._activeDragInstances.some(i._draggingPredicate)&&e.preventDefault(),i.pointerMove.next(e))},this._document=n}return w(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,MC)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,MC)}},{key:"startDragging",value:function(e,t){var n=this;if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){var i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:MC}),i||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:MC}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){var t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(e){return this._activeDragInstances.indexOf(e)>-1}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Zc),Si(Ol))},e.\u0275prov=De({factory:function(){return new e(Si(Zc),Si(Ol))},token:e,providedIn:"root"}),e}(),DC={dragStartThreshold:5,pointerDirectionChangeThreshold:5},AC=function(){var e=function(){function e(t,n,i,r){b(this,e),this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=r}return w(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DC;return new pC(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new wC(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Ol),Si(Zc),Si(mm),Si(OC))},e.\u0275prov=De({factory:function(){return new e(Si(Ol),Si(Zc),Si(mm),Si(OC))},token:e,providedIn:"root"}),e}(),xC=new ai("CDK_DRAG_PARENT"),RC=new ai("CDK_DRAG_CONFIG"),PC=new ai("CdkDropList"),zC=new ai("CdkDragHandle"),LC=function(){var e=function(){function e(t,n){b(this,e),this.element=t,this._stateChanges=new V,this._disabled=!1,this._parentDrag=n}return w(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=iv(e),this._stateChanges.next(this)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(xC,12))},e.\u0275dir=dt({type:e,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[Qa([{provide:zC,useExisting:e}])]}),e}(),NC=new ai("CdkDragPlaceholder"),FC=new ai("CdkDragPreview"),UC=function(){var e=function(){function e(t,n,i,r,o,s,a,u,c,l,h){var f=this;b(this,e),this.element=t,this.dropContainer=n,this._ngZone=r,this._viewContainerRef=o,this._dir=a,this._changeDetectorRef=c,this._selfHandle=l,this._parentDrag=h,this._destroyed=new V,this.started=new cc,this.released=new cc,this.ended=new cc,this.entered=new cc,this.exited=new cc,this.dropped=new cc,this.moved=new z(function(e){var t=f._dragRef.moved.pipe(J(function(e){return{source:f,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){t.unsubscribe()}}),this._dragRef=u.createDrag(t,{dragStartThreshold:s&&null!=s.dragStartThreshold?s.dragStartThreshold:5,pointerDirectionChangeThreshold:s&&null!=s.pointerDirectionChangeThreshold?s.pointerDirectionChangeThreshold:5,zIndex:null==s?void 0:s.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),s&&this._assignDefaults(s),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return w(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=iv(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.onStable.pipe(pf(1),ev(this._destroyed)).subscribe(function(){e._updateRootElement(),e._handles.changes.pipe(mf(e._handles),Gf(function(t){var n=t.filter(function(t){return t._parentDrag===e}).map(function(e){return e.element});e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)}),lf(function(e){return ue.apply(void 0,o(e.map(function(e){return e._stateChanges.pipe(mf(e))})))}),ev(e._destroyed)).subscribe(function(t){var n=e._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)}),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this);var t=e._dragInstances.indexOf(this);t>-1&&e._dragInstances.splice(t,1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var e=this.element.nativeElement,t=this.rootElementSelector?GC(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;return e?"string"==typeof e?GC(this.element.nativeElement,e):uv(e):null}},{key:"_syncInputs",value:function(t){var n=this;t.beforeStarted.subscribe(function(){if(!t.isDragging()){var e=n._dir,i=n.dragStartDelay,r=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,o=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:rv(i),t.constrainPosition=n.constrainPosition,t.previewClass=n.previewClass,t.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(o),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(pf(1)).subscribe(function(){var i,r;if(n._parentDrag)t.withParent(n._parentDrag._dragRef);else for(var o=n.element.nativeElement.parentElement;o;){if(null===(i=o.classList)||void 0===i?void 0:i.contains("cdk-drag")){t.withParent((null===(r=e._dragInstances.find(function(e){return e.element.nativeElement===o}))||void 0===r?void 0:r._dragRef)||null);break}o=o.parentElement}})}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe(function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){t.released.emit({source:t})}),e.ended.subscribe(function(e){t.ended.emit({source:t,distance:e.distance}),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:e.container.data,item:t})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance})})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,i=e.constrainPosition,r=e.previewClass,o=e.boundaryElement,s=e.draggingDisabled,a=e.rootElementSelector;this.disabled=null!=s&&s,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),r&&(this.previewClass=r),o&&(this.boundaryElement=o),a&&(this.rootElementSelector=a)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(PC,12),Vs(Ol),Vs(Zc),Vs(ju),Vs(RC,8),Vs(rm,8),Vs(AC),Vs(xu),Vs(zC,10),Vs(xC,12))},e.\u0275dir=dt({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var i;(1&e&&(Cc(n,FC,5),Cc(n,NC,5),Cc(n,zC,5)),2&e)&&(kc(i=Sc())&&(t._previewTemplate=i.first),kc(i=Sc())&&(t._placeholderTemplate=i.first),kc(i=Sc())&&(t._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&ba("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Qa([{provide:xC,useExisting:e}]),It]}),e._dragInstances=[],e}();function GC(e,t){for(var n=e.parentElement;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}var VC=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[AC],imports:[wm]}),e}();function jC(e,t){return new z(function(n){var i=e.length;if(0!==i)for(var r=new Array(i),o=0,s=0,a=function(a){var u=ne(e[a]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,s++),r[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==i&&c||(s===i&&n.next(t?t.reduce(function(e,t,n){return e[t]=r[n],e},{}):r),n.complete())}}))},u=0;u<i;u++)a(u);else n.complete()})}var BC=function(){var e=function(){function e(t,n){b(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return w(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(cu),Vs(su))},e.\u0275dir=dt({type:e}),e}(),HC=function(){var e,t=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(BC);return t.\u0275fac=function(n){return(e||(e=ii(t)))(n||t)},t.\u0275dir=dt({type:t,features:[Es]}),t}(),qC=new ai("NgValueAccessor"),WC={provide:qC,useExisting:Ce(function(){return YC}),multi:!0},KC=new ai("CompositionEventMode"),YC=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r){var o,s;return b(this,n),(o=t.call(this,e,i))._compositionMode=r,o._composing=!1,null==o._compositionMode&&(o._compositionMode=(s=Ml()?Ml().getUserAgent():"",!/android (\d+)/.test(s.toLowerCase()))),o}return w(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(BC);return e.\u0275fac=function(t){return new(t||e)(Vs(cu),Vs(su),Vs(KC,8))},e.\u0275dir=dt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Qs("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[Qa([WC]),Es]}),e}();function $C(e){return null==e||0===e.length}function ZC(e){return null!=e&&"number"==typeof e.length}var XC=new ai("NgValidators"),JC=new ai("NgAsyncValidators"),QC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,eS=function(){function e(){b(this,e)}return w(e,null,[{key:"min",value:function(e){return function(e){return function(t){if($C(t.value)||$C(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}},{key:"max",value:function(e){return function(e){return function(t){if($C(t.value)||$C(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}},{key:"required",value:function(e){return function(e){return $C(e.value)?{required:!0}:null}(e)}},{key:"requiredTrue",value:function(e){return function(e){return!0===e.value?null:{required:!0}}(e)}},{key:"email",value:function(e){return function(e){return $C(e.value)||QC.test(e.value)?null:{email:!0}}(e)}},{key:"minLength",value:function(e){return function(e){return function(t){return $C(t.value)||!ZC(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"maxLength",value:function(e){return tS(e)}},{key:"pattern",value:function(e){return function(e){return e?("string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),function(e){if($C(e.value))return null;var i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}):nS;var t,n}(e)}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){return uS(e)}},{key:"composeAsync",value:function(e){return lS(e)}}]),e}();function tS(e){return function(t){return ZC(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}}function nS(e){return null}function iS(e){return null!=e}function rS(e){var t=Zs(e)?ne(e):e;return Js(t),t}function oS(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function sS(e,t){return t.map(function(t){return t(e)})}function aS(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function uS(e){if(!e)return null;var t=e.filter(iS);return 0==t.length?null:function(e){return oS(sS(e,t))}}function cS(e){return null!=e?uS(aS(e)):null}function lS(e){if(!e)return null;var t=e.filter(iS);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var i=t[0];if(C(i))return jC(i,null);if(S(i)&&Object.getPrototypeOf(i)===Object.prototype){var r=Object.keys(i);return jC(r.map(function(e){return i[e]}),r)}}if("function"==typeof t[t.length-1]){var s=t.pop();return jC(t=1===t.length&&C(t[0])?t[0]:t,null).pipe(J(function(e){return s.apply(void 0,o(e))}))}return jC(t,null)}(sS(e,t).map(rS)).pipe(J(oS))}}function hS(e){return null!=e?lS(aS(e)):null}function fS(e,t){return null===e?[t]:Array.isArray(e)?[].concat(o(e),[t]):[e,t]}function dS(e){return e._rawValidators}function pS(e){return e._rawAsyncValidators}var gS=function(){var e=function(){function e(){b(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return w(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=cS(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hS(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=dt({type:e}),e}(),vS=function(){var e,t=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(gS);return t.\u0275fac=function(n){return(e||(e=ii(t)))(n||t)},t.\u0275dir=dt({type:t,features:[Es]}),t}(),mS=function(e){d(n,e);var t=g(n);function n(){var e;return b(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return n}(gS),yS=function(){function e(t){b(this,e),this._cd=t}return w(e,[{key:"is",value:function(e){var t,n;return!!(null===(n=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===n?void 0:n[e])}}]),e}(),_S=function(){var e=function(e){d(n,e);var t=g(n);function n(e){return b(this,n),t.call(this,e)}return n}(yS);return e.\u0275fac=function(t){return new(t||e)(Vs(mS,2))},e.\u0275dir=dt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&ba("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[Es]}),e}(),bS=function(){var e=function(e){d(n,e);var t=g(n);function n(e){return b(this,n),t.call(this,e)}return n}(yS);return e.\u0275fac=function(t){return new(t||e)(Vs(vS,10))},e.\u0275dir=dt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&ba("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[Es]}),e}();function kS(e,t){return[].concat(o(t.path),[e])}function wS(e,t){ES(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&TS(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&TS(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t)}function CS(e,t){var n=function(){};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),IS(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(function(){}))}function SS(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ES(e,t){var n=dS(e);null!==t.validator?e.setValidators(fS(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var i=pS(e);null!==t.asyncValidator?e.setAsyncValidators(fS(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);var r=function(){return e.updateValueAndValidity()};SS(t._rawValidators,r),SS(t._rawAsyncValidators,r)}function IS(e,t){var n=!1;if(null!==e){if(null!==t.validator){var i=dS(e);if(Array.isArray(i)&&i.length>0){var r=i.filter(function(e){return e!==t.validator});r.length!==i.length&&(n=!0,e.setValidators(r))}}if(null!==t.asyncValidator){var o=pS(e);if(Array.isArray(o)&&o.length>0){var s=o.filter(function(e){return e!==t.asyncValidator});s.length!==o.length&&(n=!0,e.setAsyncValidators(s))}}}var a=function(){};return SS(t._rawValidators,a),SS(t._rawAsyncValidators,a),n}function TS(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function MS(e,t){ES(e,t)}function OS(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function DS(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function AS(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===YC?n=e:Object.getPrototypeOf(e.constructor)===HC?i=e:r=e}),r||i||n||null):null;var n,i,r}function xS(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function RS(e){return(NS(e)?e.validators:e)||null}function PS(e){return Array.isArray(e)?cS(e):e||null}function zS(e,t){return(NS(t)?t.asyncValidators:e)||null}function LS(e){return Array.isArray(e)?hS(e):e||null}function NS(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var FS=function(){function e(t,n){b(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=PS(this._rawValidators),this._composedAsyncValidatorFn=LS(this._rawAsyncValidators)}return w(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=PS(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=LS(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=rS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var i=e;return t.forEach(function(e){i=i instanceof GS?i.controls.hasOwnProperty(e)?i.controls[e]:null:i instanceof VS&&i.at(e)||null}),i}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new cc,this.statusChanges=new cc}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){NS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),US=function(e){d(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return b(this,n),(e=t.call(this,RS(r),zS(o,r)))._onChange=[],e._applyFormState(i),e._setUpdateStrategy(r),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!o}),e}return w(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){xS(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){xS(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(FS),GS=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,RS(i),zS(r,i))).controls=e,o._initObservables(),o._setUpdateStrategy(i),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return w(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(i){t._throwIfControlMissing(i),t.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(i){t.controls[i]&&t.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,i){n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof US?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var i=t.controls[n];i&&e(i,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var i=n[t],r=this.controls[i];if(this.contains(i)&&e(r))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,i){return(n.enabled||e.disabled)&&(t[i]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,i){n=t(n,e,i)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(FS),VS=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,RS(i),zS(r,i))).controls=e,o._initObservables(),o._setUpdateStrategy(i),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return w(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,i){t._throwIfControlMissing(i),t.at(i).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,i){t.at(i)&&t.at(i).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,i){n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof US?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=a(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(FS),jS={provide:vS,useExisting:Ce(function(){return HS})},BS=Promise.resolve(null),HS=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).submitted=!1,r._directives=[],r.ngSubmit=new cc,r.form=new GS({},cS(e),hS(i)),r}return w(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(e){var t=this;BS.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),wS(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;BS.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),xS(t._directives,e)})}},{key:"addFormGroup",value:function(e){var t=this;BS.then(function(){var n=t._findContainer(e.path),i=new GS({});MS(i,e),n.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}},{key:"removeFormGroup",value:function(e){var t=this;BS.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;BS.then(function(){n.form.get(e.path).setValue(t)})}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,DS(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}}]),n}(vS);return e.\u0275fac=function(t){return new(t||e)(Vs(XC,10),Vs(JC,10))},e.\u0275dir=dt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Qs("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qa([jS]),Es]}),e}(),qS={provide:mS,useExisting:Ce(function(){return KS})},WS=Promise.resolve(null),KS=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this)).control=new US,s._registered=!1,s.update=new cc,s._parent=e,s._setValidators(i),s._setAsyncValidators(r),s.valueAccessor=AS(0,o),s}return w(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),OS(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?kS(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){wS(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(e){var t=this;WS.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,i=""===n||n&&"false"!==n;WS.then(function(){i&&!t.control.disabled?t.control.disable():!i&&t.control.disabled&&t.control.enable()})}}]),n}(mS);return e.\u0275fac=function(t){return new(t||e)(Vs(vS,9),Vs(XC,10),Vs(JC,10),Vs(qC,10))},e.\u0275dir=dt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qa([qS]),Es,It]}),e}(),YS=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=dt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e}(),$S=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),ZS=new ai("NgModelWithFormControlWarning"),XS={provide:mS,useExisting:Ce(function(){return JS})},JS=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o){var s;return b(this,n),(s=t.call(this))._ngModelWarningConfig=o,s.update=new cc,s._ngModelWarningSent=!1,s._setValidators(e),s._setAsyncValidators(i),s.valueAccessor=AS(0,r),s}return w(n,[{key:"isDisabled",set:function(e){}},{key:"ngOnChanges",value:function(e){if(this._isControlChanged(e)){var t=e.form.previousValue;t&&CS(t,this,!1),wS(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}OS(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.form&&CS(this.form,this,!1)}},{key:"path",get:function(){return[]}},{key:"control",get:function(){return this.form}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_isControlChanged",value:function(e){return e.hasOwnProperty("form")}}]),n}(mS);return e.\u0275fac=function(t){return new(t||e)(Vs(XC,10),Vs(JC,10),Vs(qC,10),Vs(ZS,8))},e.\u0275dir=dt({type:e,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Qa([XS]),Es,It]}),e._ngModelWarningSentOnce=!1,e}(),QS={provide:vS,useExisting:Ce(function(){return eE})},eE=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).validators=e,r.asyncValidators=i,r.submitted=!1,r._onCollectionChange=function(){return r._updateDomValue()},r.directives=[],r.form=null,r.ngSubmit=new cc,r._setValidators(e),r._setAsyncValidators(i),r}return w(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}},{key:"ngOnDestroy",value:function(){this.form&&(IS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(function(){}))}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return wS(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){CS(e.control||null,e,!1),xS(this.directives,e)}},{key:"addFormGroup",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormGroup",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormArray",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,DS(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach(function(t){var n=t.control,i=e.form.get(t.path);n!==i&&(CS(n||null,t),i instanceof US&&(wS(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_setUpFormContainer",value:function(e){var t=this.form.get(e.path);MS(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"_cleanUpFormContainer",value:function(e){if(this.form){var t=this.form.get(e.path);t&&function(e,t){return IS(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}},{key:"_updateRegistrations",value:function(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){})}},{key:"_updateValidators",value:function(){ES(this.form,this),this._oldForm&&IS(this._oldForm,this)}},{key:"_checkFormPresent",value:function(){}}]),n}(vS);return e.\u0275fac=function(t){return new(t||e)(Vs(XC,10),Vs(JC,10))},e.\u0275dir=dt({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&Qs("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qa([QS]),Es,It]}),e}(),tE={provide:mS,useExisting:Ce(function(){return nE})},nE=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s){var a;return b(this,n),(a=t.call(this))._ngModelWarningConfig=s,a._added=!1,a.update=new cc,a._ngModelWarningSent=!1,a._parent=e,a._setValidators(i),a._setAsyncValidators(r),a.valueAccessor=AS(0,o),a}return w(n,[{key:"isDisabled",set:function(e){}},{key:"ngOnChanges",value:function(e){this._added||this._setUpControl(),OS(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"path",get:function(){return kS(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"_checkParentType",value:function(){}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(mS);return e.\u0275fac=function(t){return new(t||e)(Vs(vS,13),Vs(XC,10),Vs(JC,10),Vs(qC,10),Vs(ZS,8))},e.\u0275dir=dt({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Qa([tE]),Es,It]}),e._ngModelWarningSentOnce=!1,e}(),iE={provide:XC,useExisting:Ce(function(){return rE}),multi:!0},rE=function(){var e=function(){function e(){b(this,e),this._validator=nS}return w(e,[{key:"ngOnChanges",value:function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null!=this.maxlength?this._validator(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=tS("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=dt({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Ns("maxlength",t.maxlength?t.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Qa([iE]),It]}),e}(),oE=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[$S]]}),e}(),sE=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[oE]}),e}(),aE=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:ZS,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[oE]}),e}(),uE=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"group",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._reduceControls(e),r=null,o=null;return null!=n&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(n)?(r=null!=n.validators?n.validators:null,o=null!=n.asyncValidators?n.asyncValidators:null,t=null!=n.updateOn?n.updateOn:void 0):(r=null!=n.validator?n.validator:null,o=null!=n.asyncValidator?n.asyncValidator:null)),new GS(i,{asyncValidators:o,updateOn:t,validators:r})}},{key:"control",value:function(e,t,n){return new US(e,t,n)}},{key:"array",value:function(e,t,n){var i=this,r=e.map(function(e){return i._createControl(e)});return new VS(r,t,n)}},{key:"_reduceControls",value:function(e){var t=this,n={};return Object.keys(e).forEach(function(i){n[i]=t._createControl(e[i])}),n}},{key:"_createControl",value:function(e){return e instanceof US||e instanceof GS||e instanceof VS?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({factory:function(){return new e},token:e,providedIn:aE}),e}();function cE(){return"undefined"!=typeof window&&void 0!==window.document}function lE(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hE(e){switch(e.length){case 0:return new gb;case 1:return e[0];default:return new vb(e)}}function fE(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=[],a=[],u=-1,c=null;if(i.forEach(function(e){var n=e.offset,i=n==u,l=i&&c||{};Object.keys(e).forEach(function(n){var i=n,a=e[n];if("offset"!==n)switch(i=t.normalizePropertyName(i,s),a){case"!":a=r[n];break;case"*":a=o[n];break;default:a=t.normalizeStyleValue(n,i,a,s)}l[i]=a}),i||a.push(l),c=l,u=n}),s.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(s.join(l)))}return a}function dE(e,t,n,i){switch(t){case"start":e.onStart(function(){return i(n&&pE(n,"start",e))});break;case"done":e.onDone(function(){return i(n&&pE(n,"done",e))});break;case"destroy":e.onDestroy(function(){return i(n&&pE(n,"destroy",e))})}}function pE(e,t,n){var i=n.totalTime,r=gE(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==i?e.totalTime:i,!!n.disabled),o=e._data;return null!=o&&(r._data=o),r}function gE(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function vE(e,t,n){var i;return e instanceof Map?(i=e.get(t))||e.set(t,i=n):(i=e[t])||(i=e[t]=n),i}function mE(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var yE=function(e,t){return!1},_E=function(e,t){return!1},bE=function(e,t,n){return[]},kE=lE();(kE||"undefined"!=typeof Element)&&(yE=cE()?function(e,t){for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:function(e,t){return e.contains(t)},_E=function(){if(kE||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:_E}(),bE=function(e,t,n){var i=[];if(n)for(var r=e.querySelectorAll(t),o=0;o<r.length;o++)i.push(r[o]);else{var s=e.querySelector(t);s&&i.push(s)}return i});var wE=null,CE=!1;function SE(e){wE||(wE=("undefined"!=typeof document?document.body:null)||{},CE=!!wE.style&&"WebkitAppearance"in wE.style);var t=!0;return wE.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(!(t=e in wE.style)&&CE)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in wE.style),t}var EE=_E,IE=yE,TE=bE;function ME(e){var t={};return Object.keys(e).forEach(function(n){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=e[n]}),t}var OE=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"validateStyleProperty",value:function(e){return SE(e)}},{key:"matchesElement",value:function(e,t){return EE(e,t)}},{key:"containsElement",value:function(e,t){return IE(e,t)}},{key:"query",value:function(e,t,n){return TE(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,i,r){return new gb(n,i)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),DE=function(){var e=function e(){b(this,e)};return e.NOOP=new OE,e}();function AE(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:xE(parseFloat(t[1]),t[2])}function xE(e,t){switch(t){case"s":return 1e3*e;default:return e}}function RE(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var i,r=0,o="";if("string"==typeof e){var s=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};i=xE(parseFloat(s[1]),s[2]);var a=s[3];null!=a&&(r=xE(parseFloat(a),s[4]));var u=s[5];u&&(o=u)}else i=e;if(!n){var c=!1,l=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(l,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:i,delay:r,easing:o}}(e,t,n)}function PE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function zE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var i in e)n[i]=e[i];else PE(e,n);return n}function LE(e,t,n){return n?t+":"+n+";":""}function NE(e){for(var t="",n=0;n<e.style.length;n++){var i=e.style.item(n);t+=LE(0,i,e.style.getPropertyValue(i))}for(var r in e.style)e.style.hasOwnProperty(r)&&!r.startsWith("_")&&(t+=LE(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[r]));e.setAttribute("style",t)}function FE(e,t,n){e.style&&(Object.keys(t).forEach(function(i){var r=WE(i);n&&!n.hasOwnProperty(i)&&(n[i]=e.style[r]),e.style[r]=t[i]}),lE()&&NE(e))}function UE(e,t){e.style&&(Object.keys(t).forEach(function(t){var n=WE(t);e.style[n]=""}),lE()&&NE(e))}function GE(e){return Array.isArray(e)?1==e.length?e[0]:ub(e):e}var VE=new RegExp("{{\\s*(.+?)\\s*}}","g");function jE(e){var t=[];if("string"==typeof e){for(var n;n=VE.exec(e);)t.push(n[1]);VE.lastIndex=0}return t}function BE(e,t,n){var i=e.toString(),r=i.replace(VE,function(e,i){var r=t[i];return t.hasOwnProperty(i)||(n.push("Please provide a value for the animation param ".concat(i)),r=""),r.toString()});return r==i?e:r}function HE(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var qE=/-+([a-z0-9])/g;function WE(e){return e.replace(qE,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()})}function KE(e,t){return 0===e||0===t}function YE(e,t,n){var i=Object.keys(n);if(i.length&&t.length){var r=t[0],o=[];if(i.forEach(function(e){r.hasOwnProperty(e)||o.push(e),r[e]=n[e]}),o.length)for(var s=function(){var n=t[a];o.forEach(function(t){n[t]=ZE(e,t)})},a=1;a<t.length;a++)s()}return t}function $E(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function ZE(e,t){return window.getComputedStyle(e)[t]}var XE=new Set(["true","1"]),JE=new Set(["false","0"]);function QE(e,t){var n=XE.has(e)||JE.has(e),i=XE.has(t)||JE.has(t);return function(r,o){var s="*"==e||e==r,a="*"==t||t==o;return!s&&n&&"boolean"==typeof r&&(s=r?XE.has(e):JE.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?XE.has(t):JE.has(t)),s&&a}}var eI=new RegExp("s*:selfs*,?","g");function tI(e,t,n){return new nI(e).build(t,n)}var nI=function(){function e(t){b(this,e),this._driver=t}return w(e,[{key:"build",value:function(e,t){var n=new iI(t);return this._resetContextStyleTimingState(n),$E(this,GE(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(n._resetContextStyleTimingState(t),0==e.type){var a=e,u=a.name;u.toString().split(/\s*,\s*/).forEach(function(e){a.name=e,o.push(n.visitState(a,t))}),a.name=u}else if(1==e.type){var c=n.visitTransition(e,t);i+=c.queryCount,r+=c.depCount,s.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){var r=new Set,o=i||{};if(n.styles.forEach(function(e){if(rI(e)){var t=e;Object.keys(t).forEach(function(e){jE(t[e]).forEach(function(e){o.hasOwnProperty(e)||r.add(e)})})}}),r.size){var s=HE(r.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(s.join(", ")))}}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n,i,r,o=$E(this,GE(e.animation),t);return{type:1,matchers:(n=e.expr,i=t.errors,r=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(e){return function(e,t,n){if(":"==e[0]){var i=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof i)return void t.push(i);e=i}var r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var o=r[1],s=r[2],a=r[3];t.push(QE(o,a)),"<"!=s[0]||"*"==o&&"*"==a||t.push(QE(a,o))}(e,r,i)}):r.push(n),r),animation:o,queryCount:t.queryCount,depCount:t.depCount,options:oI(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map(function(e){return $E(n,e,t)}),options:oI(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,i=t.currentTime,r=0,o=e.steps.map(function(e){t.currentTime=i;var o=$E(n,e,t);return r=Math.max(r,t.currentTime),o});return t.currentTime=r,{type:3,steps:o,options:oI(e.options)}}},{key:"visitAnimate",value:function(e,t){var n,i=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return sI(RE(e,t).duration,0,"");var i=e;if(i.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var r=sI(0,0,"");return r.dynamic=!0,r.strValue=i,r}return sI((n=n||RE(i,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;var r=e.styles?e.styles:cb({});if(5==r.type)n=this.visitKeyframes(r,t);else{var o=e.styles,s=!1;if(!o){s=!0;var a={};i.easing&&(a.easing=i.easing),o=cb(a)}t.currentTime+=i.duration+i.delay;var u=this.visitStyle(o,t);u.isEmptyStep=s,n=u}return t.currentAnimateTimings=null,{type:4,timings:i,style:n,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?"*"==e?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)}):n.push(e.styles);var i=!1,r=null;return n.forEach(function(e){if(rI(e)){var t=e,n=t.easing;if(n&&(r=n,delete t.easing),!i)for(var o in t)if(t[o].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:e.offset,containsDynamicStyles:i,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(i){if(n._driver.validateStyleProperty(i)){var s,a,u,c,l,h=t.collectedStyles[t.currentQuerySelector],f=h[i],d=!0;f&&(o!=r&&o>=f.startTime&&r<=f.endTime&&(t.errors.push('The CSS property "'.concat(i,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(r,'ms"')),d=!1),o=f.startTime),d&&(h[i]={startTime:o,endTime:r}),t.options&&(s=e[i],a=t.options,u=t.errors,c=a.params||{},(l=jE(s)).length&&l.forEach(function(e){c.hasOwnProperty(e)||u.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))}))}else t.errors.push('The provided animation property "'.concat(i,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(e,t){var n=this,i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;var r=0,o=[],s=!1,a=!1,u=0,c=e.steps.map(function(e){var i=n._makeStyleAst(e,t),c=null!=i.offset?i.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach(function(e){if(rI(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}});else if(rI(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(i.styles),l=0;return null!=c&&(r++,l=i.offset=c),a=a||l<0||l>1,s=s||l<u,u=l,o.push(l),i});a&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");var l=e.steps.length,h=0;r>0&&r<l?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(h=1/(l-1));var f=l-1,d=t.currentTime,p=t.currentAnimateTimings,g=p.duration;return c.forEach(function(e,r){var s=h>0?r==f?1:h*r:o[r],a=s*g;t.currentTime=d+p.delay+a,p.duration=a,n._validateStyleAst(e,t),e.offset=s,i.styles.push(e)}),i}},{key:"visitReference",value:function(e,t){return{type:8,animation:$E(this,GE(e.animation),t),options:oI(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:oI(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:oI(e.options)}}},{key:"visitQuery",value:function(e,t){var i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;var o=n(function(e){var t=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return t&&(e=e.replace(eI,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(e){return".ng-trigger-"+e.substr(1)}).replace(/:animating/g,".ng-animating"),t]}(e.selector),2),s=o[0],a=o[1];t.currentQuerySelector=i.length?i+" "+s:s,vE(t.collectedStyles,t.currentQuerySelector,{});var u=$E(this,GE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:u,originalSelector:e.selector,options:oI(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:RE(e.timings,t.errors,!0);return{type:12,animation:$E(this,GE(e.animation),t),timings:n,options:null}}}]),e}(),iI=function e(t){b(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function rI(e){return!Array.isArray(e)&&"object"==typeof e}function oI(e){var t;return e?(e=PE(e)).params&&(e.params=(t=e.params)?PE(t):null):e={},e}function sI(e,t,n){return{duration:e,delay:t,easing:n}}function aI(e,t,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var uI=function(){function e(){b(this,e),this._map=new Map}return w(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,i=this._map.get(e);i||this._map.set(e,i=[]),(n=i).push.apply(n,o(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),cI=new RegExp(":enter","g"),lI=new RegExp(":leave","g");function hI(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new fI).buildKeyframes(e,t,n,i,r,o,s,a,u,c)}var fI=function(){function e(){b(this,e)}return w(e,[{key:"buildKeyframes",value:function(e,t,n,i,r,o,s,a,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new uI;var l=new pI(e,t,u,i,r,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),$E(this,n,l);var h=l.timelines.filter(function(e){return e.containsAnimation()});if(h.length&&Object.keys(s).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([s],null,l.errors,a)}return h.length?h.map(function(e){return e.buildKeyframes()}):[aI(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var i=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var i=t.currentTimeline.currentTime,r=null!=n.duration?AE(n.duration):null,o=null!=n.delay?AE(n.delay):null;return 0!==r&&e.forEach(function(e){var n=t.appendInstructionToTimeline(e,r,o);i=Math.max(i,n.duration+n.delay)}),i}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),$E(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&((r=t.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=dI);var s=AE(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(function(e){return $E(n,e,r)}),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?AE(e.options.delay):0;e.steps.forEach(function(s){var a=t.createSubContext(e.options);o&&a.delayNextStep(o),$E(n,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)}),t.transformIntoNewTimeline(r),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return RE(t.params?BE(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());var r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();var r=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,i=t.currentTimeline.duration,r=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(function(e){o.forwardTime((e.offset||0)*r),o.setStyles(e.styles,e.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(i+r),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?AE(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=dI);var s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;var u=null;a.forEach(function(i,r){t.currentQueryIndex=r;var a=t.createSubContext(e.options,i);o&&a.delayNextStep(o),i===t.element&&(u=a.currentTimeline),$E(n,e.animation,a),a.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,a.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,i=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),s=o*(t.currentQueryTotal-1),a=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}var u=t.currentTimeline;a&&u.delayNextStep(a);var c=u.currentTime;$E(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}]),e}(),dI={},pI=function(){function e(t,n,i,r,o,s,a,u){b(this,e),this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new gI(this._driver,n,0),a.push(this.currentTimeline)}return w(e,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(e,t){var n=this;if(e){var i=e,r=this.options;null!=i.duration&&(r.duration=AE(i.duration)),null!=i.delay&&(r.delay=AE(i.delay));var o=i.params;if(o){var s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(function(e){t&&s.hasOwnProperty(e)||(s[e]=BE(o[e],s,n.errors))})}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach(function(e){n[e]=t[e]})}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,r=n||this.element,o=new e(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=dI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},r=new vI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(r),i}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,i,r,s){var a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(cI,"."+this._enterClassName)).replace(lI,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),a.push.apply(a,o(u))}return r||0!=a.length||s.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),a}}]),e}(),gI=function(){function e(t,n,i,r){b(this,e),this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return w(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){t._backFill[e]=t._globalTimelineStyles[e]||"*",t._currentKeyframe[e]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,i){var r=this;t&&(this._previousKeyframe.easing=t);var o=i&&i.params||{},s=function(e,t){var n,i={};return e.forEach(function(e){"*"===e?(n=n||Object.keys(t)).forEach(function(e){i[e]="*"}):zE(e,!1,i)}),i}(e,this._globalTimelineStyles);Object.keys(s).forEach(function(e){var t=BE(s[e],o,n);r._pendingStyles[e]=t,r._localTimelineStyles.hasOwnProperty(e)||(r._backFill[e]=r._globalTimelineStyles.hasOwnProperty(e)?r._globalTimelineStyles[e]:"*"),r._updateStyle(e,t)})}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){e._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])}))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach(function(n){var i=t._styleSummary[n],r=e._styleSummary[n];(!i||r.time>i.time)&&t._updateStyle(n,r.value)})}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration,r=[];this._keyframes.forEach(function(o,s){var a=zE(o,!0);Object.keys(a).forEach(function(e){var i=a[e];"!"==i?t.add(e):"*"==i&&n.add(e)}),i||(a.offset=s/e.duration),r.push(a)});var o=t.size?HE(t.values()):[],s=n.size?HE(n.values()):[];if(i){var a=r[0],u=PE(a);a.offset=0,u.offset=1,r=[a,u]}return aI(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}]),e}(),vI=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s,a){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return b(this,n),(u=t.call(this,e,i,a.delay)).element=i,u.keyframes=r,u.preStyleProps=o,u.postStyleProps=s,u._stretchStartingKeyframe=c,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return w(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,i=t.duration,r=t.easing;if(this._stretchStartingKeyframe&&n){var o=[],s=i+n,a=n/s,u=zE(e[0],!1);u.offset=0,o.push(u);var c=zE(e[0],!1);c.offset=mI(a),o.push(c);for(var l=e.length-1,h=1;h<=l;h++){var f=zE(e[h],!1);f.offset=mI((n+f.offset*i)/s),o.push(f)}i=s,n=0,r="",e=o}return aI(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}]),n}(gI);function mI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var yI,_I,bI=function e(){b(this,e)},kI=function(e){d(n,e);var t=g(n);function n(){return b(this,n),t.apply(this,arguments)}return w(n,[{key:"normalizePropertyName",value:function(e,t){return WE(e)}},{key:"normalizeStyleValue",value:function(e,t,n,i){var r="",o=n.toString().trim();if(wI[t]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{var s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&i.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return o+r}}]),n}(bI),wI=(yI="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),_I={},yI.forEach(function(e){return _I[e]=!0}),_I);function CI(e,t,n,i,r,o,s,a,u,c,l,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var SI={},EI=function(){function e(t,n,i){b(this,e),this._triggerName=t,this.ast=n,this._stateStyles=i}return w(e,[{key:"match",value:function(e,t,n,i){return function(e,t,n,i,r){return e.some(function(e){return e(t,n,i,r)})}(this.ast.matchers,e,t,n,i)}},{key:"buildStyles",value:function(e,t,n){var i=this._stateStyles["*"],r=this._stateStyles[e],o=i?i.buildStyles(t,n):{};return r?r.buildStyles(t,n):o}},{key:"build",value:function(e,t,n,i,r,o,s,a,u,c){var l=[],h=this.ast.options&&this.ast.options.params||SI,f=this.buildStyles(n,s&&s.params||SI,l),d=a&&a.params||SI,p=this.buildStyles(i,d,l),g=new Set,v=new Map,m=new Map,y="void"===i,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:hI(e,t,this.ast.animation,r,o,f,p,_,u,l),k=0;if(b.forEach(function(e){k=Math.max(e.duration+e.delay,k)}),l.length)return CI(t,this._triggerName,n,i,y,f,p,[],[],v,m,k,l);b.forEach(function(e){var n=e.element,i=vE(v,n,{});e.preStyleProps.forEach(function(e){return i[e]=!0});var r=vE(m,n,{});e.postStyleProps.forEach(function(e){return r[e]=!0}),n!==t&&g.add(n)});var w=HE(g.values());return CI(t,this._triggerName,n,i,y,f,p,b,w,v,m,k)}}]),e}(),II=function(){function e(t,n){b(this,e),this.styles=t,this.defaultParams=n}return w(e,[{key:"buildStyles",value:function(e,t){var n={},i=PE(this.defaultParams);return Object.keys(e).forEach(function(t){var n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var r=e;Object.keys(r).forEach(function(e){var o=r[e];o.length>1&&(o=BE(o,i,t)),n[e]=o})}}),n}}]),e}(),TI=function(){function e(t,n){var i=this;b(this,e),this.name=t,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(e){i.states[e.name]=new II(e.style,e.options&&e.options.params||{})}),MI(this.states,"true","1"),MI(this.states,"false","0"),n.transitions.forEach(function(e){i.transitionFactories.push(new EI(t,e,i.states))}),this.fallbackTransition=new EI(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return w(e,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(e,t,n,i){return this.transitionFactories.find(function(r){return r.match(e,t,n,i)})||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}]),e}();function MI(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var OI=new uI,DI=function(){function e(t,n,i){b(this,e),this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}return w(e,[{key:"register",value:function(e,t){var n=[],i=tI(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=i}},{key:"_buildPlayer",value:function(e,t,n){var i=e.element,r=fE(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,r,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],s=this._animations[e],a=new Map;if(s?(n=hI(this._driver,t,s,"ng-enter","ng-leave",{},{},r,OI,o)).forEach(function(e){var t=vE(a,e.element,{});e.postStyleProps.forEach(function(e){return t[e]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: ".concat(o.join("\n")));a.forEach(function(e,t){Object.keys(e).forEach(function(n){e[n]=i._driver.computeStyle(t,n,"*")})});var u=hE(n.map(function(e){var t=a.get(e.element);return i._buildPlayer(e,{},t)}));return this._playersById[e]=u,u.onDestroy(function(){return i.destroy(e)}),this.players.push(u),u}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,i){var r=gE(t,"","","");return dE(this._getPlayer(e),n,r,i),function(){}}},{key:"command",value:function(e,t,n,i){if("register"!=n)if("create"!=n){var r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,i[0]||{});else this.register(e,i[0])}}]),e}(),AI=[],xI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},RI={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},PI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";b(this,e),this.namespaceId=n;var i,r=t&&t.hasOwnProperty("value");if(this.value=null!=(i=r?t.value:t)?i:null,r){var o=PE(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return w(e,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach(function(e){null==n[e]&&(n[e]=t[e])})}}}]),e}(),zI=new PI("void"),LI=function(){function e(t,n,i){b(this,e),this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,BI(n,this._hostClassName)}return w(e,[{key:"listen",value:function(e,t,n,i){var r,o=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if("start"!=(r=n)&&"done"!=r)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var s=vE(this._elementListeners,e,[]),a={name:t,phase:n,callback:i};s.push(a);var u=vE(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(BI(e,"ng-trigger"),BI(e,"ng-trigger-"+t),u[t]=zI),function(){o._engine.afterFlush(function(){var e=s.indexOf(a);e>=0&&s.splice(e,1),o._triggers[t]||delete u[t]})}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var i=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(t),s=new FI(this.id,t,e),a=this._engine.statesByElement.get(e);a||(BI(e,"ng-trigger"),BI(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,a={}));var u=a[t],c=new PI(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a[t]=c,u||(u=zI),"void"===c.value||u.value!==c.value){var l=vE(this._engine.playersByElement,e,[]);l.forEach(function(e){e.namespaceId==i.id&&e.triggerName==t&&e.queued&&e.destroy()});var h=o.matchTransition(u.value,c.value,e,c.params),f=!1;if(!h){if(!r)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:u,toState:c,player:s,isFallbackTransition:f}),f||(BI(e,"ng-animate-queued"),s.onStart(function(){HI(e,"ng-animate-queued")})),s.onDone(function(){var t=i.players.indexOf(s);t>=0&&i.players.splice(t,1);var n=i._engine.playersByElement.get(e);if(n){var r=n.indexOf(s);r>=0&&n.splice(r,1)}}),this.players.push(s),l.push(s),s}if(!function(e,t){var n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(u.params,c.params)){var d=[],p=o.matchStyles(u.value,u.params,d),g=o.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){UE(e,p),FE(e,g)})}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(t,n){delete t[e]}),this._elementListeners.forEach(function(n,i){t._elementListeners.set(i,n.filter(function(t){return t.name!=e}))})}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this,i=this._engine.driver.query(e,".ng-trigger",!0);i.forEach(function(e){if(!e.__ng_removed){var i=n._engine.fetchNamespacesByElement(e);i.size?i.forEach(function(n){return n.triggerLeaveAnimation(e,t,!1,!0)}):n.clearElementCache(e)}}),this._engine.afterFlushAnimationsDone(function(){return i.forEach(function(e){return n.clearElementCache(e)})})}},{key:"triggerLeaveAnimation",value:function(e,t,n,i){var r=this,o=this._engine.statesByElement.get(e);if(o){var s=[];if(Object.keys(o).forEach(function(t){if(r._triggers[t]){var n=r.trigger(e,t,"void",i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&hE(s).onDone(function(){return r._engine.processLeaveNode(e)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){var r=new Set;n.forEach(function(n){var o=n.name;if(!r.has(o)){r.add(o);var s=t._triggers[o].fallbackTransition,a=i[o]||zI,u=new PI("void"),c=new FI(t.id,o,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:o,transition:s,fromState:a,toState:u,player:c,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(e,t){var n=this,i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),!this.triggerLeaveAnimation(e,t,!0)){var r=!1;if(i.totalAnimations){var o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else for(var s=e;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{var a=e.__ng_removed;a&&a!==xI||(i.afterFlush(function(){return n.clearElementCache(e)}),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}}},{key:"insertNode",value:function(e,t){BI(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach(function(i){var r=i.player;if(!r.destroyed){var o=i.element,s=t._elementListeners.get(o);s&&s.forEach(function(t){if(t.name==i.triggerName){var n=gE(o,i.triggerName,i.fromState.value,i.toState.value);n._data=e,dE(i.player,t.phase,n,t.callback)}}),r.markedForDestroy?t._engine.afterFlush(function(){r.destroy()}):n.push(i)}}),this._queue=[],n.sort(function(e,n){var i=e.transition.ast.depCount,r=n.transition.ast.depCount;return 0==i||0==r?i-r:t._engine.driver.containsElement(e.element,n.element)?1:-1})}},{key:"destroy",value:function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(function(t){return t.element===e})||t}}]),e}(),NI=function(){function e(t,n,i){b(this,e),this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return w(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach(function(t){t.players.forEach(function(t){t.queued&&e.push(t)})}),e}},{key:"createNamespace",value:function(e,t){var n=new LI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var i=!1,r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,t)){this._namespaceList.splice(r+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var i=this._fetchNamespace(e);this.afterFlush(function(){n.namespacesByHostElement.delete(i.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(i);t>=0&&n._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(function(){return i.destroy(t)})}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var i=Object.keys(n),r=0;r<i.length;r++){var o=n[i[r]].namespaceId;if(o){var s=this._fetchNamespace(o);s&&t.add(s)}}return t}},{key:"trigger",value:function(e,t,n,i){if(UI(t)){var r=this._fetchNamespace(e);if(r)return r.trigger(t,n,i),!0}return!1}},{key:"insertNode",value:function(e,t,n,i){if(UI(t)){var r=t.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;var o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){var s=this._fetchNamespace(e);s&&s.insertNode(t,n)}i&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),BI(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),HI(e,"ng-animate-disabled"))}},{key:"removeNode",value:function(e,t,n,i){if(UI(t)){var r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),n){var o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}},{key:"markElementAsRemoved",value:function(e,t,n,i){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,i,r){return UI(t)?this._fetchNamespace(e).listen(t,n,i,r):function(){}}},{key:"_buildInstruction",value:function(e,t,n,i,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,r)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,".ng-trigger",!0);n.forEach(function(e){return t.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0)).forEach(function(e){return t.finishActiveQueriedAnimationOnElement(e)})}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach(function(e){return e.finish()})}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise(function(t){if(e.players.length)return hE(e.players).onDone(function(){return t()});t()})}},{key:"processLeaveNode",value:function(e){var t=this,n=e.__ng_removed;if(n&&n.setForRemoval){if(e.__ng_removed=xI,n.namespaceId){this.destroyInnerAnimations(e);var i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(function(e){t.markElementAsDisabled(e,!1)})}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var i=0;i<this.collectedEnterElements.length;i++)BI(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{n=this._flushAnimations(r,t)}finally{for(var o=0;o<r.length;o++)r[o]()}}else for(var s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var a=this._whenQuietFns;this._whenQuietFns=[],n.length?hE(n).onDone(function(){a.forEach(function(e){return e()})}):a.forEach(function(e){return e()})}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,i=new uI,r=[],s=new Map,a=[],u=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(function(e){h.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),i=0;i<t.length;i++)h.add(t[i])});var f=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=jI(d,this.collectedEnterElements),g=new Map,v=0;p.forEach(function(e,t){var n="ng-enter"+v++;g.set(t,n),e.forEach(function(e){return BI(e,n)})});for(var m=[],y=new Set,_=new Set,b=0;b<this.collectedLeaveElements.length;b++){var k=this.collectedLeaveElements[b],w=k.__ng_removed;w&&w.setForRemoval&&(m.push(k),y.add(k),w.hasAnimation?this.driver.query(k,".ng-star-inserted",!0).forEach(function(e){return y.add(e)}):_.add(k))}var C=new Map,S=jI(d,Array.from(y));S.forEach(function(e,t){var n="ng-leave"+v++;C.set(t,n),e.forEach(function(e){return BI(e,n)})}),e.push(function(){p.forEach(function(e,t){var n=g.get(t);e.forEach(function(e){return HI(e,n)})}),S.forEach(function(e,t){var n=C.get(t);e.forEach(function(e){return HI(e,n)})}),m.forEach(function(e){n.processLeaveNode(e)})});for(var E=[],I=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(t).forEach(function(e){var t=e.player,o=e.element;if(E.push(t),n.collectedEnterElements.length){var s=o.__ng_removed;if(s&&s.setForMove)return void t.destroy()}var h=!f||!n.driver.containsElement(f,o),d=C.get(o),p=g.get(o),v=n._buildInstruction(e,i,p,d,h);if(v.errors&&v.errors.length)I.push(v);else{if(h)return t.onStart(function(){return UE(o,v.fromStyles)}),t.onDestroy(function(){return FE(o,v.toStyles)}),void r.push(t);if(e.isFallbackTransition)return t.onStart(function(){return UE(o,v.fromStyles)}),t.onDestroy(function(){return FE(o,v.toStyles)}),void r.push(t);v.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),i.append(o,v.timelines),a.push({instruction:v,player:t,element:o}),v.queriedElements.forEach(function(e){return vE(u,e,[]).push(t)}),v.preStyleProps.forEach(function(e,t){var n=Object.keys(e);if(n.length){var i=c.get(t);i||c.set(t,i=new Set),n.forEach(function(e){return i.add(e)})}}),v.postStyleProps.forEach(function(e,t){var n=Object.keys(e),i=l.get(t);i||l.set(t,i=new Set),n.forEach(function(e){return i.add(e)})})}});if(I.length){var M=[];I.forEach(function(e){M.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach(function(e){return M.push("- ".concat(e,"\n"))})}),E.forEach(function(e){return e.destroy()}),this.reportError(M)}var O=new Map,D=new Map;a.forEach(function(e){var t=e.element;i.has(t)&&(D.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,O))}),r.forEach(function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(function(e){vE(O,t,[]).push(e),e.destroy()})});var A=m.filter(function(e){return KI(e,c,l)}),x=new Map;VI(x,this.driver,_,l,"*").forEach(function(e){KI(e,c,l)&&A.push(e)});var R=new Map;p.forEach(function(e,t){VI(R,n.driver,new Set(e),c,"!")}),A.forEach(function(e){var t=x.get(e),n=R.get(e);x.set(e,Object.assign(Object.assign({},t),n))});var P=[],z=[],L={};a.forEach(function(e){var t=e.element,o=e.player,a=e.instruction;if(i.has(t)){if(h.has(t))return o.onDestroy(function(){return FE(t,a.toStyles)}),o.disabled=!0,o.overrideTotalTime(a.totalTime),void r.push(o);var u=L;if(D.size>1){for(var c=t,l=[];c=c.parentNode;){var f=D.get(c);if(f){u=f;break}l.push(c)}l.forEach(function(e){return D.set(e,u)})}var d=n._buildAnimation(o.namespaceId,a,O,s,R,x);if(o.setRealPlayer(d),u===L)P.push(o);else{var p=n.playersByElement.get(u);p&&p.length&&(o.parentPlayer=hE(p)),r.push(o)}}else UE(t,a.fromStyles),o.onDestroy(function(){return FE(t,a.toStyles)}),z.push(o),h.has(t)&&r.push(o)}),z.forEach(function(e){var t=s.get(e.element);if(t&&t.length){var n=hE(t);e.setRealPlayer(n)}}),r.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var N=0;N<m.length;N++){var F=m[N],U=F.__ng_removed;if(HI(F,"ng-leave"),!U||!U.hasAnimation){var G=[];if(u.size){var V=u.get(F);V&&V.length&&G.push.apply(G,o(V));for(var j=this.driver.query(F,".ng-animating",!0),B=0;B<j.length;B++){var H=u.get(j[B]);H&&H.length&&G.push.apply(G,o(H))}}var q=G.filter(function(e){return!e.destroyed});q.length?qI(this,F,q):this.processLeaveNode(F)}}return m.length=0,P.forEach(function(e){n.players.push(e),e.onDone(function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)}),e.play()}),P}},{key:"elementContainsData",value:function(e,t){var n=!1,i=t.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,i,r){var o=[];if(t){var s=this.playersByQueriedElement.get(e);s&&(o=s)}else{var a=this.playersByElement.get(e);if(a){var u=!r||"void"==r;a.forEach(function(e){e.queued||(u||e.triggerName==i)&&o.push(e)})}}return(n||i)&&(o=o.filter(function(e){return!(n&&n!=e.namespaceId||i&&i!=e.triggerName)})),o}},{key:"_beforeAnimationBuild",value:function(e,t,n){var i,r=this,o=t.element,s=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName,c=a(t.timelines);try{var l=function(){var e=i.value.element,a=e!==o,c=vE(n,e,[]);r._getPreviousPlayers(e,a,s,u,t.toState).forEach(function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)})};for(c.s();!(i=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}UE(o,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,i,r,o){var s=this,a=t.triggerName,u=t.element,c=[],l=new Set,h=new Set,f=t.timelines.map(function(t){var f=t.element;l.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new gb(t.duration,t.delay);var p,g,v=f!==u,m=(p=(n.get(f)||AI).map(function(e){return e.getRealPlayer()}),g=[],WI(p,g),g).filter(function(e){return!!e.element&&e.element===f}),y=r.get(f),_=o.get(f),b=fE(0,s._normalizer,0,t.keyframes,y,_),k=s._buildPlayer(t,b,m);if(t.subTimeline&&i&&h.add(f),v){var w=new FI(e,a,f);w.setRealPlayer(k),c.push(w)}return k});c.forEach(function(e){vE(s.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,t,n){var i;if(e instanceof Map){if(i=e.get(t)){if(i.length){var r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}}else if(i=e[t]){if(i.length){var o=i.indexOf(n);i.splice(o,1)}0==i.length&&delete e[t]}return i}(s.playersByQueriedElement,e.element,e)})}),l.forEach(function(e){return BI(e,"ng-animating")});var d=hE(f);return d.onDestroy(function(){l.forEach(function(e){return HI(e,"ng-animating")}),FE(u,t.toStyles)}),h.forEach(function(e){vE(i,e,[]).push(d)}),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new gb(e.duration,e.delay)}}]),e}(),FI=function(){function e(t,n,i){b(this,e),this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new gb,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return w(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(n){t._queuedCallbacks[n].forEach(function(t){return dE(e,n,void 0,t)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart(function(){return n.triggerCallback("start")}),e.onDone(function(){return t.finish()}),e.onDestroy(function(){return t.destroy()})}},{key:"_queueEvent",value:function(e,t){vE(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function UI(e){return e&&1===e.nodeType}function GI(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function VI(e,t,n,i,r){var o=[];n.forEach(function(e){return o.push(GI(e))});var s=[];i.forEach(function(n,i){var o={};n.forEach(function(e){var n=o[e]=t.computeStyle(i,e,r);n&&0!=n.length||(i.__ng_removed=RI,s.push(i))}),e.set(i,o)});var a=0;return n.forEach(function(e){return GI(e,o[a++])}),s}function jI(e,t){var n=new Map;if(e.forEach(function(e){return n.set(e,[])}),0==t.length)return n;var i=new Set(t),r=new Map;function o(e){if(!e)return 1;var t=r.get(e);if(t)return t;var s=e.parentNode;return t=n.has(s)?s:i.has(s)?1:o(s),r.set(e,t),t}return t.forEach(function(e){var t=o(e);1!==t&&n.get(t).push(e)}),n}function BI(e,t){if(e.classList)e.classList.add(t);else{var n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function HI(e,t){if(e.classList)e.classList.remove(t);else{var n=e.$$classes;n&&delete n[t]}}function qI(e,t,n){hE(n).onDone(function(){return e.processLeaveNode(t)})}function WI(e,t){for(var n=0;n<e.length;n++){var i=e[n];i instanceof vb?WI(i.players,t):t.push(i)}}function KI(e,t,n){var i=n.get(e);if(!i)return!1;var r=t.get(e);return r?i.forEach(function(e){return r.add(e)}):t.set(e,i),n.delete(e),!0}var YI=function(){function e(t,n,i){var r=this;b(this,e),this.bodyNode=t,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new NI(t,n,i),this._timelineEngine=new DI(t,n,i),this._transitionEngine.onRemovalComplete=function(e,t){return r.onRemovalComplete(e,t)}}return w(e,[{key:"registerTrigger",value:function(e,t,n,i,r){var o=e+"-"+i,s=this._triggerCache[o];if(!s){var a=[],u=tI(this._driver,r,a);if(a.length)throw new Error('The animation trigger "'.concat(i,'" has failed to build due to the following errors:\n - ').concat(a.join("\n - ")));s=function(e,t){return new TI(e,t)}(i,u),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(t,i,s)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}},{key:"onRemove",value:function(e,t,n,i){this._transitionEngine.removeNode(e,t,i||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,t,i,r){if("@"==i.charAt(0)){var o=n(mE(i),2),s=o[0],a=o[1];this._timelineEngine.command(s,t,a,r)}else this._transitionEngine.trigger(e,t,i,r)}},{key:"listen",value:function(e,t,i,r,o){if("@"==i.charAt(0)){var s=n(mE(i),2),a=s[0],u=s[1];return this._timelineEngine.listen(a,t,u,o)}return this._transitionEngine.listen(e,t,i,r,o)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),e}();function $I(e,t){var n=null,i=null;return Array.isArray(t)&&t.length?(n=XI(t[0]),t.length>1&&(i=XI(t[t.length-1]))):t&&(n=XI(t)),n||i?new ZI(e,n,i):null}var ZI=function(){var e=function(){function e(t,n,i){b(this,e),this._element=t,this._startStyles=n,this._endStyles=i,this._state=0;var r=e.initialStylesByElement.get(t);r||e.initialStylesByElement.set(t,r={}),this._initialStyles=r}return w(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&FE(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(FE(this._element,this._initialStyles),this._endStyles&&(FE(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(UE(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(UE(this._element,this._endStyles),this._endStyles=null),FE(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function XI(e){for(var t=null,n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];JI(r)&&((t=t||{})[r]=e[r])}return t}function JI(e){return"display"===e||"position"===e}var QI=function(){function e(t,n,i,r,o,s,a){var u=this;b(this,e),this._element=t,this._name=n,this._duration=i,this._delay=r,this._easing=o,this._fillMode=s,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return w(e,[{key:"apply",value:function(){var e,t,n;e=this._element,t="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=oT(e,"").trim()).length&&(function(e,t){for(var n=0;n<e.length;n++)e.charAt(n)}(n),t="".concat(n,", ").concat(t)),rT(e,"",t),iT(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){eT(this._element,this._name,"paused")}},{key:"resume",value:function(){eT(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=tT(this._element,this._name);this._position=e*this._duration,rT(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),iT(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){var n=oT(e,"").split(","),i=nT(n,t);i>=0&&(n.splice(i,1),rT(e,"",n.join(",")))}(this._element,this._name))}}]),e}();function eT(e,t,n){rT(e,"PlayState",n,tT(e,t))}function tT(e,t){var n=oT(e,"");return n.indexOf(",")>0?nT(n.split(","),t):nT([n],t)}function nT(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function iT(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function rT(e,t,n,i){var r="animation"+t;if(null!=i){var o=e.style[r];if(o.length){var s=o.split(",");s[i]=n,n=s.join(",")}}e.style[r]=n}function oT(e,t){return e.style["animation"+t]||""}var sT=function(){function e(t,n,i,r,o,s,a,u){b(this,e),this.element=t,this.keyframes=n,this.animationName=i,this._duration=r,this._delay=o,this._finalStyles=a,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+o,this._buildStyler()}return w(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new QI(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return e.finish()})}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(i){"offset"!=i&&(t[i]=n?e._finalStyles[i]:ZE(e.element,i))})}this.currentSnapshot=t}}]),e}(),aT=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this)).element=e,r._startingStyles={},r.__initialized=!1,r._styles=ME(i),r}return w(n,[{key:"init",value:function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),f(_(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),f(_(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,f(_(n.prototype),"destroy",this).call(this))}}]),n}(gb),uT=function(){function e(){b(this,e),this._count=0}return w(e,[{key:"validateStyleProperty",value:function(e){return SE(e)}},{key:"matchesElement",value:function(e,t){return EE(e,t)}},{key:"containsElement",value:function(e,t){return IE(e,t)}},{key:"query",value:function(e,t,n){return TE(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map(function(e){return ME(e)});var i="@keyframes ".concat(t," {\n"),r="";n.forEach(function(e){r=" ";var t=parseFloat(e.offset);i+="".concat(r).concat(100*t,"% {\n"),r+=" ",Object.keys(e).forEach(function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(i+="".concat(r,"animation-timing-function: ").concat(n,";\n")));default:return void(i+="".concat(r).concat(t,": ").concat(n,";\n"))}}),i+="".concat(r,"}\n")}),i+="}\n";var o=document.createElement("style");return o.textContent=i,o}},{key:"animate",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=o.filter(function(e){return e instanceof sT}),a={};KE(n,i)&&s.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return a[e]=t[e]})});var u=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach(function(e){Object.keys(e).forEach(function(n){"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=YE(e,t,a));if(0==n)return new aT(e,u);var c="gen_css_kf_"+this._count++,l=this.buildKeyframeElement(e,c,t);(function(e){var t,n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(l);var h=$I(e,t),f=new sT(e,t,c,n,i,r,u,h);return f.onDestroy(function(){var e;(e=l).parentNode.removeChild(e)}),f}}]),e}(),cT=function(){function e(t,n,i,r){b(this,e),this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}return w(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",function(){return e._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:ZE(e.element,n))}),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),lT=function(){function e(){b(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(hT().toString()),this._cssKeyframesDriver=new uT}return w(e,[{key:"validateStyleProperty",value:function(e){return SE(e)}},{key:"matchesElement",value:function(e,t){return EE(e,t)}},{key:"containsElement",value:function(e,t){return IE(e,t)}},{key:"query",value:function(e,t,n){return TE(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6?arguments[6]:void 0;if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,i,r,o);var a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);var u={},c=o.filter(function(e){return e instanceof cT});KE(n,i)&&c.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return u[e]=t[e]})});var l=$I(e,t=YE(e,t=t.map(function(e){return zE(e,!1)}),u));return new cT(e,t,a,l)}}]),e}();function hT(){return cE()&&Element.prototype.animate||{}}var fT=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this))._nextAnimationId=0,r._renderer=e.createRenderer(i.body,{id:"0",encapsulation:qe.None,styles:[],data:{animation:[]}}),r}return w(n,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?ub(e):e;return gT(this._renderer,null,t,"register",[n]),new dT(t,this._renderer)}}]),n}(ob);return e.\u0275fac=function(t){return new(t||e)(Si(uu),Si(Ol))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),dT=function(e){d(n,e);var t=g(n);function n(e,i){var r;return b(this,n),(r=t.call(this))._id=e,r._renderer=i,r}return w(n,[{key:"create",value:function(e,t){return new pT(this._id,e,t||{},this._renderer)}}]),n}(function(){return function e(){b(this,e)}}()),pT=function(){function e(t,n,i,r){b(this,e),this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}return w(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return gT(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}]),e}();function gT(e,t,n,i,r){return e.setProperty(t,"@@".concat(n,":").concat(i),r)}var vT=function(){var e=function(){function e(t,n,i){b(this,e),this.delegate=t,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return w(e,[{key:"createRenderer",value:function(e,t){var n=this,i=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var r=this._rendererCache.get(i);return r||(r=new mT("",i,this.engine),this._rendererCache.set(i,r)),r}var o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);return t.data.animation.forEach(function t(i){Array.isArray(i)?i.forEach(t):n.engine.registerTrigger(o,s,e,i.name,i)}),new yT(this,s,i,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then(function(){e._microtaskId++})}},{key:"scheduleListenerCallback",value:function(e,t,i){var r=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return t(i)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(e){var t=n(e,2);(0,t[0])(t[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,i]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(uu),Si(YI),Si(Zc))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),mT=function(){function e(t,n,i){b(this,e),this.namespaceId=t,this.delegate=n,this.engine=i,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return w(e,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,i){this.delegate.setStyle(e,t,n,i)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}}]),e}(),yT=function(e){d(i,e);var t=g(i);function i(e,n,r,o){var s;return b(this,i),(s=t.call(this,n,r,o)).factory=e,s.namespaceId=n,s}return w(i,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,i){var r,o,s=this;if("@"==t.charAt(0)){var a,u=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),c=t.substr(1),l="";return"@"!=c.charAt(0)&&(o=(r=c).indexOf("."),c=(a=n([r.substring(0,o),r.substr(o+1)],2))[0],l=a[1]),this.engine.listen(this.namespaceId,u,c,l,function(e){s.factory.scheduleListenerCallback(e._data||-1,i,e)})}return this.delegate.listen(e,t,i)}}]),i}(mT),_T=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r){return b(this,n),t.call(this,e.body,i,r)}return w(n,[{key:"ngOnDestroy",value:function(){this.flush()}}]),n}(YI);return e.\u0275fac=function(t){return new(t||e)(Si(Ol),Si(DE),Si(bI))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),bT=new ai("AnimationModuleType"),kT=[{provide:ob,useClass:fT},{provide:bI,useFactory:function(){return new kI}},{provide:YI,useClass:_T},{provide:uu,useFactory:function(e,t,n){return new vT(e,t,n)},deps:[Lh,YI,Zc]}],wT=[{provide:DE,useFactory:function(){return"function"==typeof hT()?new lT:new uT}},{provide:bT,useValue:"BrowserAnimations"}].concat(kT),CT=[{provide:DE,useClass:OE},{provide:bT,useValue:"NoopAnimations"}].concat(kT),ST=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:t.disableAnimations?CT:wT}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:wT,imports:[Xh]}),e}(),ET={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},DatePicker:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},TimePicker:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Calendar:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click sort by descend",triggerAsc:"Click sort by ascend",cancelSort:"Click to cancel sort"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"}},IT={locale:"zh-cn",Pagination:{items_per_page:"\u6761/\u9875",jump_to:"\u8df3\u81f3",jump_to_confirm:"\u786e\u5b9a",page:"\u9875",prev_page:"\u4e0a\u4e00\u9875",next_page:"\u4e0b\u4e00\u9875",prev_5:"\u5411\u524d 5 \u9875",next_5:"\u5411\u540e 5 \u9875",prev_3:"\u5411\u524d 3 \u9875",next_3:"\u5411\u540e 3 \u9875"},DatePicker:{lang:{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",yearPlaceholder:"\u8bf7\u9009\u62e9\u5e74\u4efd",quarterPlaceholder:"\u8bf7\u9009\u62e9\u5b63\u5ea6",monthPlaceholder:"\u8bf7\u9009\u62e9\u6708\u4efd",weekPlaceholder:"\u8bf7\u9009\u62e9\u5468",rangePlaceholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],rangeYearPlaceholder:["\u5f00\u59cb\u5e74\u4efd","\u7ed3\u675f\u5e74\u4efd"],rangeMonthPlaceholder:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"],rangeWeekPlaceholder:["\u5f00\u59cb\u5468","\u7ed3\u675f\u5468"],locale:"zh_CN",today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u786e\u5b9a",timeSelect:"\u9009\u62e9\u65f6\u95f4",dateSelect:"\u9009\u62e9\u65e5\u671f",weekSelect:"\u9009\u62e9\u5468",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u4e2a\u6708 (\u7ffb\u9875\u4e0a\u952e)",nextMonth:"\u4e0b\u4e2a\u6708 (\u7ffb\u9875\u4e0b\u952e)",monthSelect:"\u9009\u62e9\u6708\u4efd",yearSelect:"\u9009\u62e9\u5e74\u4efd",decadeSelect:"\u9009\u62e9\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u65f6mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u952e\u52a0\u5de6\u65b9\u5411\u952e)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u952e\u52a0\u53f3\u65b9\u5411\u952e)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7eaa",nextCentury:"\u4e0b\u4e00\u4e16\u7eaa"},timePickerLocale:{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",rangePlaceholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}},TimePicker:{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",rangePlaceholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]},Calendar:{lang:{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",yearPlaceholder:"\u8bf7\u9009\u62e9\u5e74\u4efd",quarterPlaceholder:"\u8bf7\u9009\u62e9\u5b63\u5ea6",monthPlaceholder:"\u8bf7\u9009\u62e9\u6708\u4efd",weekPlaceholder:"\u8bf7\u9009\u62e9\u5468",rangePlaceholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],rangeYearPlaceholder:["\u5f00\u59cb\u5e74\u4efd","\u7ed3\u675f\u5e74\u4efd"],rangeMonthPlaceholder:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"],rangeWeekPlaceholder:["\u5f00\u59cb\u5468","\u7ed3\u675f\u5468"],locale:"zh_CN",today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u786e\u5b9a",timeSelect:"\u9009\u62e9\u65f6\u95f4",dateSelect:"\u9009\u62e9\u65e5\u671f",weekSelect:"\u9009\u62e9\u5468",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u4e2a\u6708 (\u7ffb\u9875\u4e0a\u952e)",nextMonth:"\u4e0b\u4e2a\u6708 (\u7ffb\u9875\u4e0b\u952e)",monthSelect:"\u9009\u62e9\u6708\u4efd",yearSelect:"\u9009\u62e9\u5e74\u4efd",decadeSelect:"\u9009\u62e9\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u65f6mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u952e\u52a0\u5de6\u65b9\u5411\u952e)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u952e\u52a0\u53f3\u65b9\u5411\u952e)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7eaa",nextCentury:"\u4e0b\u4e00\u4e16\u7eaa"},timePickerLocale:{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",rangePlaceholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}},global:{placeholder:"\u8bf7\u9009\u62e9"},Table:{filterTitle:"\u7b5b\u9009",filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",filterEmptyText:"\u65e0\u7b5b\u9009\u9879",selectAll:"\u5168\u9009\u5f53\u9875",selectInvert:"\u53cd\u9009\u5f53\u9875",selectionAll:"\u5168\u9009\u6240\u6709",sortTitle:"\u6392\u5e8f",expand:"\u5c55\u5f00\u884c",collapse:"\u5173\u95ed\u884c",triggerDesc:"\u70b9\u51fb\u964d\u5e8f",triggerAsc:"\u70b9\u51fb\u5347\u5e8f",cancelSort:"\u53d6\u6d88\u6392\u5e8f"},Modal:{okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",justOkText:"\u77e5\u9053\u4e86"},Popconfirm:{cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a"},Transfer:{searchPlaceholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9",itemUnit:"\u9879",itemsUnit:"\u9879",remove:"\u5220\u9664",selectCurrent:"\u5168\u9009\u5f53\u9875",removeCurrent:"\u5220\u9664\u5f53\u9875",selectAll:"\u5168\u9009\u6240\u6709",removeAll:"\u5220\u9664\u5168\u90e8",selectInvert:"\u53cd\u9009\u5f53\u9875"},Upload:{uploading:"\u6587\u4ef6\u4e0a\u4f20\u4e2d",removeFile:"\u5220\u9664\u6587\u4ef6",uploadError:"\u4e0a\u4f20\u9519\u8bef",previewFile:"\u9884\u89c8\u6587\u4ef6",downloadFile:"\u4e0b\u8f7d\u6587\u4ef6"},Empty:{description:"\u6682\u65e0\u6570\u636e"},Icon:{icon:"\u56fe\u6807"},Text:{edit:"\u7f16\u8f91",copy:"\u590d\u5236",copied:"\u590d\u5236\u6210\u529f",expand:"\u5c55\u5f00"},PageHeader:{back:"\u8fd4\u56de"}},TT=new ai("nz-i18n"),MT=new ai("nz-date-locale"),OT=function(){var e=function(){function e(t,n){b(this,e),this._change=new Qh(this._locale),this.setLocale(t||IT),this.setDateLocale(n||null)}return w(e,[{key:"localeChange",get:function(){return this._change.asObservable()}},{key:"translate",value:function(e,t){var n=this._getObjectPath(this._locale,e);return"string"==typeof n?(t&&Object.keys(t).forEach(function(e){return n=n.replace(new RegExp("%".concat(e,"%"),"g"),t[e])}),n):e}},{key:"setLocale",value:function(e){this._locale&&this._locale.locale===e.locale||(this._locale=e,this._change.next(e))}},{key:"getLocale",value:function(){return this._locale}},{key:"getLocaleId",value:function(){return this._locale?this._locale.locale:""}},{key:"setDateLocale",value:function(e){this.dateLocale=e}},{key:"getDateLocale",value:function(){return this.dateLocale}},{key:"getLocaleData",value:function(e,t){var n=e?this._getObjectPath(this._locale,e):this._locale;return n||t||_y('Missing translations for "'.concat(e,'" in language "').concat(this._locale.locale,'".\nYou can use "NzI18nService.setLocale" as a temporary fix.\nWelcome to submit a pull request to help us optimize the translations!\nhttps://github.com/NG-ZORRO/ng-zorro-antd/blob/master/CONTRIBUTING.md')),n||t||this._getObjectPath(ET,e)||{}}},{key:"_getObjectPath",value:function(e,t){for(var n=e,i=t.split("."),r=i.length,o=0;n&&o<r;)n=n[i[o++]];return o===r?n:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(TT,8),Si(MT,8))},e.\u0275prov=De({factory:function(){return new e(Si(TT,8),Si(MT,8))},token:e,providedIn:"root"}),e}(),DT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}();new ai("date-config");var AT=function(){var e=function(){function e(t,n){b(this,e),this.elementRef=t,this.renderer=n,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}return w(e,[{key:"setHiddenAttribute",value:function(){!0===this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden",""):!1===this.hidden||null===this.hidden?this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden"):"string"==typeof this.hidden&&this.renderer.setAttribute(this.elementRef.nativeElement,"hidden",this.hidden)}},{key:"ngOnChanges",value:function(){this.setHiddenAttribute()}},{key:"ngAfterViewInit",value:function(){this.setHiddenAttribute()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu))},e.\u0275dir=dt({type:e,selectors:[["","nz-button",""],["nz-button-group"],["","nz-icon",""],["","nz-menu-item",""],["","nz-submenu",""],["nz-select-top-control"],["nz-select-placeholder"],["nz-input-group"]],inputs:{hidden:"hidden"},features:[It]}),e}(),xT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[Jv]]}),e}(),RT=function(){function e(t,n,i,r){var o=this;b(this,e),this.triggerElement=t,this.ngZone=n,this.insertExtraNode=i,this.platformId=r,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=function(e){!o.triggerElement||!o.triggerElement.getAttribute||o.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||o.triggerElement.className.indexOf("disabled")>=0||o.fadeOutWave()},this.platform=new Xv(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}return w(e,[{key:"waveAttributeName",get:function(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}},{key:"bindTriggerEvent",value:function(){var e=this;this.platform.isBrowser&&this.ngZone.runOutsideAngular(function(){e.removeTriggerEvent(),e.triggerElement&&e.triggerElement.addEventListener("click",e.clickHandler,!0)})}},{key:"removeTriggerEvent",value:function(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}},{key:"removeStyleAndExtraNode",value:function(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}},{key:"destroy",value:function(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}},{key:"fadeOutWave",value:function(){var e=this,t=this.triggerElement,n=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),Date.now()<this.lastTime+this.waveTransitionDuration||(this.isValidColor(n)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(function(){t.removeAttribute(e.waveAttributeName),e.removeStyleAndExtraNode()},this.waveTransitionDuration))}},{key:"isValidColor",value:function(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}},{key:"isNotGrey",value:function(e){var t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}},{key:"getWaveColor",value:function(e){var t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}},{key:"runTimeoutOutsideZone",value:function(e,t){this.ngZone.runOutsideAngular(function(){return setTimeout(e,t)})}}]),e}(),PT={disabled:!1},zT=new ai("nz-wave-global-options",{providedIn:"root",factory:function(){return PT}}),LT=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.ngZone=t,this.elementRef=n,this.config=i,this.animationType=r,this.platformId=o,this.nzWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}return w(e,[{key:"disabled",get:function(){return this.waveDisabled}},{key:"rendererRef",get:function(){return this.waveRenderer}},{key:"isConfigDisabled",value:function(){var e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}},{key:"ngOnDestroy",value:function(){this.waveRenderer&&this.waveRenderer.destroy()}},{key:"ngOnInit",value:function(){this.renderWaveIfEnabled()}},{key:"renderWaveIfEnabled",value:function(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new RT(this.elementRef.nativeElement,this.ngZone,this.nzWaveExtraNode,this.platformId))}},{key:"disable",value:function(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}},{key:"enable",value:function(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(Zc),Vs(su),Vs(zT,8),Vs(bT,8),Vs(zc))},e.\u0275dir=dt({type:e,selectors:[["","nz-wave",""],["button","nz-button","",3,"nzType","link",3,"nzType","text"]],inputs:{nzWaveExtraNode:"nzWaveExtraNode"},exportAs:["nzWave"]}),e}(),NT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[Jv]]}),e}(),FT=["nz-button",""];function UT(e,t){1&e&&Ws(0,"i",1)}var GT=["*"],VT=function(){var e=function(){function e(t,n,i,r,o){var s=this;b(this,e),this.elementRef=t,this.cdr=n,this.renderer=i,this.nzConfigService=r,this.directionality=o,this._nzModuleName="button",this.nzBlock=!1,this.nzGhost=!1,this.nzSearch=!1,this.nzLoading=!1,this.nzDanger=!1,this.disabled=!1,this.tabIndex=null,this.nzType=null,this.nzShape=null,this.nzSize="default",this.dir="ltr",this.destroy$=new V,this.loading$=new V,this.elementRef.nativeElement.classList.add("ant-btn"),this.nzConfigService.getConfigChangeEventForComponent("button").pipe(ev(this.destroy$)).subscribe(function(){s.cdr.markForCheck()})}return w(e,[{key:"insertSpan",value:function(e,t){e.forEach(function(e){if("#text"===e.nodeName){var n=t.createElement("span"),i=t.parentNode(e);t.insertBefore(i,n,e),t.appendChild(n,e)}})}},{key:"assertIconOnly",value:function(e,t){var n=Array.from(e.childNodes),i=n.filter(function(e){return"I"===e.nodeName}).length,r=n.every(function(e){return"#text"!==e.nodeName});n.every(function(e){return"SPAN"!==e.nodeName})&&r&&i>=1&&t.addClass(e,"ant-btn-icon-only")}},{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"ngOnChanges",value:function(e){var t=e.nzLoading,n=e.nzType;t&&this.loading$.next(this.nzLoading),"danger"===(null==n?void 0:n.currentValue)&&by("'danger' value of 'nzType' in Button is going to be removed in 12.0.0. Please use 'nzDanger' instead.")}},{key:"ngAfterViewInit",value:function(){this.assertIconOnly(this.elementRef.nativeElement,this.renderer),this.insertSpan(this.elementRef.nativeElement.childNodes,this.renderer)}},{key:"ngAfterContentInit",value:function(){var e=this;this.loading$.pipe(mf(this.nzLoading),kf(function(){return!!e.nzIconDirectiveElement}),ev(this.destroy$)).subscribe(function(t){var n=e.nzIconDirectiveElement.nativeElement;t?e.renderer.setStyle(n,"display","none"):e.renderer.removeStyle(n,"display")})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(xu),Vs(cu),Vs($_),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["button","nz-button",""],["a","nz-button",""]],contentQueries:function(e,t,n){var i;(1&e&&Cc(n,ib,5,su),2&e)&&(kc(i=Sc())&&(t.nzIconDirectiveElement=i.first))},hostVars:32,hostBindings:function(e,t){2&e&&(Ns("tabindex",t.disabled?-1:null===t.tabIndex?null:t.tabIndex)("disabled",t.disabled||null),ba("ant-btn-primary","primary"===t.nzType)("ant-btn-dashed","dashed"===t.nzType)("ant-btn-link","link"===t.nzType)("ant-btn-text","text"===t.nzType)("ant-btn-danger","danger"===t.nzType)("ant-btn-circle","circle"===t.nzShape)("ant-btn-round","round"===t.nzShape)("ant-btn-lg","large"===t.nzSize)("ant-btn-sm","small"===t.nzSize)("ant-btn-dangerous",t.nzDanger)("ant-btn-loading",t.nzLoading)("ant-btn-background-ghost",t.nzGhost)("ant-btn-block",t.nzBlock)("ant-input-search-button",t.nzSearch)("ant-btn-rtl","rtl"===t.dir))},inputs:{nzBlock:"nzBlock",nzGhost:"nzGhost",nzSearch:"nzSearch",nzLoading:"nzLoading",nzDanger:"nzDanger",disabled:"disabled",tabIndex:"tabIndex",nzType:"nzType",nzShape:"nzShape",nzSize:"nzSize"},exportAs:["nzButton"],features:[It],attrs:FT,ngContentSelectors:GT,decls:2,vars:1,consts:[["nz-icon","","nzType","loading",4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(e,t){1&e&&(sa(),Us(0,UT,1,0,"i",0),aa(1)),2&e&&js("ngIf",t.nzLoading)},directives:[th,ib,AT],encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzBlock",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzGhost",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzSearch",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzLoading",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzDanger",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"disabled",void 0),Oy([Z_(),Dy("design:type",String)],e.prototype,"nzSize",void 0),e}(),jT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,NT,rb,xT],xT,NT]}),e}(),BT=function(){var e=function(){function e(t,n,i){b(this,e),this.element=t,this.renderer=n,this.animationType=i,this.nzNoAnimation=!1}return w(e,[{key:"ngOnChanges",value:function(){this.updateClass()}},{key:"ngAfterViewInit",value:function(){this.updateClass()}},{key:"updateClass",value:function(){var e=uv(this.element);e&&(this.nzNoAnimation||"NoopAnimations"===this.animationType?this.renderer.addClass(e,"nz-animate-disabled"):this.renderer.removeClass(e,"nz-animate-disabled"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu),Vs(bT,8))},e.\u0275dir=dt({type:e,selectors:[["","nzNoAnimation",""]],inputs:{nzNoAnimation:"nzNoAnimation"},exportAs:["nzNoAnimation"],features:[It]}),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzNoAnimation",void 0),e}(),HT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[ph]]}),e}(),qT=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px",n="px";return["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","1h","vw","vh","vmin","vmax","%"].some(function(e){return e===t})&&(n=t),"number"==typeof e?"".concat(e).concat(n):"".concat(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=pt({name:"nzToCssUnit",type:e,pure:!0}),e}(),WT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[ph]]}),e}();function KT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mv;return function(n){return n.lift(new YT(e,t))}}var YT=function(){function e(t,n){b(this,e),this.dueTime=t,this.scheduler=n}return w(e,[{key:"call",value:function(e,t){return t.subscribe(new $T(e,this.dueTime,this.scheduler))}}]),e}(),$T=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e)).dueTime=i,o.scheduler=r,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return w(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ZT,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(D);function ZT(e){e.debouncedNext()}var XT=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"create",value:function(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({factory:function(){return new e},token:e,providedIn:"root"}),e}(),JT=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[XT]}),e}(),QT=function(){var e=function(){function e(t){b(this,e),this._platform=t}return w(e,[{key:"isDisabled",value:function(e){return e.hasAttribute("disabled")}},{key:"isVisible",value:function(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}},{key:"isTabbable",value:function(e){if(!this._platform.isBrowser)return!1;var t,n=function(e){try{return e.frameElement}catch(bL){return null}}((t=e).ownerDocument&&t.ownerDocument.defaultView||window);if(n){if(-1===tM(n))return!1;if(!this.isVisible(n))return!1}var i=e.nodeName.toLowerCase(),r=tM(e);return e.hasAttribute("contenteditable")?-1!==r:"iframe"!==i&&"object"!==i&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){var t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==r:"video"===i?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}},{key:"isFocusable",value:function(e,t){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||eM(e))}(e)&&!this.isDisabled(e)&&((null==t?void 0:t.ignoreVisibility)||this.isVisible(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Xv))},e.\u0275prov=De({factory:function(){return new e(Si(Xv))},token:e,providedIn:"root"}),e}();function eM(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;var t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function tM(e){if(!eM(e))return null;var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}var nM=function(){function e(t,n,i,r){var o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];b(this,e),this._element=t,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=function(){return o.focusLastTabbableElement()},this.endAnchorListener=function(){return o.focusFirstTabbableElement()},this._enabled=!0,s||this.attachAnchors()}return w(e,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}},{key:"destroy",value:function(){var e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}},{key:"attachAnchors",value:function(){var e=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular(function(){e._startAnchor||(e._startAnchor=e._createAnchor(),e._startAnchor.addEventListener("focus",e.startAnchorListener)),e._endAnchor||(e._endAnchor=e._createAnchor(),e._endAnchor.addEventListener("focus",e.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var e=this;return new Promise(function(t){e._executeOnStable(function(){return t(e.focusInitialElement())})})}},{key:"focusFirstTabbableElementWhenReady",value:function(){var e=this;return new Promise(function(t){e._executeOnStable(function(){return t(e.focusFirstTabbableElement())})})}},{key:"focusLastTabbableElementWhenReady",value:function(){var e=this;return new Promise(function(t){e._executeOnStable(function(){return t(e.focusLastTabbableElement())})})}},{key:"_getRegionBoundary",value:function(e){for(var t=this._element.querySelectorAll("[cdk-focus-region-".concat(e,"], [cdkFocusRegion").concat(e,"], [cdk-focus-").concat(e,"]")),n=0;n<t.length;n++)t[n].hasAttribute("cdk-focus-".concat(e))?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(e,"', use 'cdkFocusRegion").concat(e,"' instead. The deprecated attribute will be removed in 8.0.0."),t[n]):t[n].hasAttribute("cdk-focus-region-".concat(e))&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(e,"', use 'cdkFocusRegion").concat(e,"' instead. The deprecated attribute will be removed in 8.0.0."),t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){var t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var e=this._getRegionBoundary("start");return e&&e.focus(),!!e}},{key:"focusLastTabbableElement",value:function(){var e=this._getRegionBoundary("end");return e&&e.focus(),!!e}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var i=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(i)return i}return null}},{key:"_getLastTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=t.length-1;n>=0;n--){var i=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(i)return i}return null}},{key:"_createAnchor",value:function(){var e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}},{key:"_toggleAnchorTabIndex",value:function(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}},{key:"_executeOnStable",value:function(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(pf(1)).subscribe(e)}}]),e}(),iM=function(){var e=function(){function e(t,n,i){b(this,e),this._checker=t,this._ngZone=n,this._document=i}return w(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new nM(e,this._checker,this._ngZone,this._document,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(QT),Si(Zc),Si(Ol))},e.\u0275prov=De({factory:function(){return new e(Si(QT),Si(Zc),Si(Ol))},token:e,providedIn:"root"}),e}();"undefined"!=typeof Element&&Element;var rM=new ai("cdk-focus-monitor-default-options"),oM=Qv({passive:!0,capture:!0}),sM=function(){var e=function(){function e(t,n,i,r){var o=this;b(this,e),this._ngZone=t,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){o._lastTouchTarget=null,o._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(e){if(!o._lastTouchTarget){var t=function(e){return 0===e.buttons}(e)?"keyboard":"mouse";o._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=function(e){!function(e){var t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(e)?(null!=o._touchTimeoutId&&clearTimeout(o._touchTimeoutId),o._lastTouchTarget=aM(e),o._touchTimeoutId=setTimeout(function(){return o._lastTouchTarget=null},650)):o._lastTouchTarget||o._setOriginForCurrentEventQueue("keyboard")},this._windowFocusListener=function(){o._windowFocused=!0,o._windowFocusTimeoutId=setTimeout(function(){return o._windowFocused=!1})},this._rootNodeFocusAndBlurListener=function(e){for(var t=aM(e),n="focus"===e.type?o._onFocus:o._onBlur,i=t;i;i=i.parentElement)n.call(o,e,i)},this._document=i,this._detectionMode=(null==r?void 0:r.detectionMode)||0}return w(e,[{key:"monitor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=uv(e);if(!this._platform.isBrowser||1!==n.nodeType)return Jh(null);var i=nm(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return t&&(r.checkChildren=!0),r.subject;var o={checkChildren:t,subject:new V,rootNode:i};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}},{key:"stopMonitoring",value:function(e){var t=uv(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(e,t,i){var r=this,o=uv(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(function(e){var i=n(e,2),o=i[0],s=i[1];return r._originChanged(o,t,s)}):(this._setOriginForCurrentEventQueue(t),"function"==typeof o.focus&&o.focus(i))}},{key:"ngOnDestroy",value:function(){var e=this;this._elementInfo.forEach(function(t,n){return e.stopMonitoring(n)})}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}},{key:"_getFocusOrigin",value:function(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}},{key:"_setClasses",value:function(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}},{key:"_setOriginForCurrentEventQueue",value:function(e){var t=this;this._ngZone.runOutsideAngular(function(){t._origin=e,0===t._detectionMode&&(t._originTimeoutId=setTimeout(function(){return t._origin=null},1))})}},{key:"_wasCausedByTouch",value:function(e){var t=aM(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(e,t){var n=this._elementInfo.get(t);n&&(n.checkChildren||t===aM(e))&&this._originChanged(t,this._getFocusOrigin(e),n)}},{key:"_onBlur",value:function(e,t){var n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(e,t){this._ngZone.run(function(){return e.next(t)})}},{key:"_registerGlobalListeners",value:function(e){var t=this;if(this._platform.isBrowser){var n=e.rootNode,i=this._rootNodeFocusListenerCount.get(n)||0;i||this._ngZone.runOutsideAngular(function(){n.addEventListener("focus",t._rootNodeFocusAndBlurListener,oM),n.addEventListener("blur",t._rootNodeFocusAndBlurListener,oM)}),this._rootNodeFocusListenerCount.set(n,i+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(function(){var e=t._getDocument(),n=t._getWindow();e.addEventListener("keydown",t._documentKeydownListener,oM),e.addEventListener("mousedown",t._documentMousedownListener,oM),e.addEventListener("touchstart",t._documentTouchstartListener,oM),n.addEventListener("focus",t._windowFocusListener)})}}},{key:"_removeGlobalListeners",value:function(e){var t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){var n=this._rootNodeFocusListenerCount.get(t);n>1?this._rootNodeFocusListenerCount.set(t,n-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oM),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oM),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){var i=this._getDocument(),r=this._getWindow();i.removeEventListener("keydown",this._documentKeydownListener,oM),i.removeEventListener("mousedown",this._documentMousedownListener,oM),i.removeEventListener("touchstart",this._documentTouchstartListener,oM),r.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}},{key:"_originChanged",value:function(e,t,n){this._setClasses(e,t),this._emitOrigin(n.subject,t),this._lastFocusOrigin=t}},{key:"_getClosestElementsInfo",value:function(e){var t=[];return this._elementInfo.forEach(function(n,i){(i===e||n.checkChildren&&i.contains(e))&&t.push([i,n])}),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Zc),Si(Xv),Si(Ol,8),Si(rM,8))},e.\u0275prov=De({factory:function(){return new e(Si(Zc),Si(Xv),Si(Ol,8),Si(rM,8))},token:e,providedIn:"root"}),e}();function aM(e){return e.composedPath?e.composedPath()[0]:e.target}var uM=function(){var e=function(){function e(t,n){b(this,e),this._platform=t,this._document=n}return w(e,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);var t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");var t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(Xv),Si(Ol))},e.\u0275prov=De({factory:function(){return new e(Si(Xv),Si(Ol))},token:e,providedIn:"root"}),e}(),cM=function(){var e=function e(t){b(this,e),t._applyBodyHighContrastModeCssClasses()};return e.\u0275fac=function(t){return new(t||e)(Si(uM))},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[Jv,JT]]}),e}(),lM=["modalElement"];function hM(e,t){if(1&e){var n=$s();Hs(0,"button",16),Qs("click",function(){return $t(n),ra().onCloseClick()}),qs()}}function fM(e,t){if(1&e&&(Ks(0),Ws(1,"span",17),Ys()),2&e){var n=ra();ho(1),js("innerHTML",n.config.nzTitle,pr)}}function dM(e,t){}function pM(e,t){1&e&&Ws(0,"div",17),2&e&&js("innerHTML",ra().config.nzContent,pr)}function gM(e,t){if(1&e){var n=$s();Hs(0,"button",18),Qs("click",function(){return $t(n),ra().onCancel()}),za(1),qs()}if(2&e){var i=ra();js("nzLoading",!!i.config.nzCancelLoading)("disabled",i.config.nzCancelDisabled),Ns("cdkFocusInitial","cancel"===i.config.nzAutofocus||null),ho(1),Na(" ",i.config.nzCancelText||i.locale.cancelText," ")}}function vM(e,t){if(1&e){var n=$s();Hs(0,"button",19),Qs("click",function(){return $t(n),ra().onOk()}),za(1),qs()}if(2&e){var i=ra();js("nzType",i.config.nzOkType)("nzLoading",!!i.config.nzOkLoading)("disabled",i.config.nzOkDisabled)("nzDanger",i.config.nzOkDanger),Ns("cdkFocusInitial","ok"===i.config.nzAutofocus||null),ho(1),Na(" ",i.config.nzOkText||i.locale.okText," ")}}function mM(e,t){if(1&e){var n=$s();Hs(0,"button",9),Qs("click",function(){return $t(n),ra().onCloseClick()}),qs()}}function yM(e,t){1&e&&Ws(0,"div",10)}function _M(e,t){}function bM(e,t){1&e&&Ws(0,"div",11),2&e&&js("innerHTML",ra().config.nzContent,pr)}function kM(e,t){if(1&e){var n=$s();Hs(0,"div",12),Qs("cancelTriggered",function(){return $t(n),ra().onCloseClick()})("okTriggered",function(){return $t(n),ra().onOkClick()}),qs()}2&e&&js("modalRef",ra().modalRef)}function wM(e,t){1&e&&aa(0)}var CM=["*"],SM=["nz-modal-close",""];function EM(e,t){if(1&e&&(Ks(0),Ws(1,"i",2),Ys()),2&e){var n=t.$implicit;ho(1),js("nzType",n)}}var IM=["nz-modal-footer",""];function TM(e,t){1&e&&Ws(0,"div",5),2&e&&js("innerHTML",ra(3).config.nzFooter,pr)}function MM(e,t){if(1&e){var n=$s();Hs(0,"button",7),Qs("click",function(){var e=$t(n).$implicit;return ra(4).onButtonClick(e)}),za(1),qs()}if(2&e){var i=t.$implicit,r=ra(4);js("hidden",!r.getButtonCallableProp(i,"show"))("nzLoading",r.getButtonCallableProp(i,"loading"))("disabled",r.getButtonCallableProp(i,"disabled"))("nzType",i.type)("nzDanger",i.danger)("nzShape",i.shape)("nzSize",i.size)("nzGhost",i.ghost),ho(1),Na(" ",i.label," ")}}function OM(e,t){if(1&e&&(Ks(0),Us(1,MM,2,9,"button",6),Ys()),2&e){var n=ra(3);ho(1),js("ngForOf",n.buttons)}}function DM(e,t){if(1&e&&(Ks(0),Us(1,TM,1,1,"div",3),Us(2,OM,2,1,"ng-container",4),Ys()),2&e){var n=ra(2);ho(1),js("ngIf",!n.buttonsFooter),ho(1),js("ngIf",n.buttonsFooter)}}var AM=function(e,t){return{$implicit:e,modalRef:t}};function xM(e,t){if(1&e&&(Ks(0),Us(1,DM,3,2,"ng-container",2),Ys()),2&e){var n=ra();ho(1),js("nzStringTemplateOutlet",n.config.nzFooter)("nzStringTemplateOutletContext",(2,i=AM,r=n.config.nzComponentParams,o=n.modalRef,function(e,t,n,i,r,o,s){var a=t+2;return function(e,t,n,i){var r=Ls(e,t,n);return Ls(e,t+1,i)||r}(e,a,r,o)?zs(e,a+2,i(r,o)):rc(e,a+2)}(Kt(),rn(),0,i,r,o)))}var i,r,o}function RM(e,t){if(1&e){var n=$s();Hs(0,"button",10),Qs("click",function(){return $t(n),ra(2).onCancel()}),za(1),qs()}if(2&e){var i=ra(2);js("nzLoading",!!i.config.nzCancelLoading)("disabled",i.config.nzCancelDisabled),Ns("cdkFocusInitial","cancel"===i.config.nzAutofocus||null),ho(1),Na(" ",i.config.nzCancelText||i.locale.cancelText," ")}}function PM(e,t){if(1&e){var n=$s();Hs(0,"button",11),Qs("click",function(){return $t(n),ra(2).onOk()}),za(1),qs()}if(2&e){var i=ra(2);js("nzType",i.config.nzOkType)("nzDanger",i.config.nzOkDanger)("nzLoading",!!i.config.nzOkLoading)("disabled",i.config.nzOkDisabled),Ns("cdkFocusInitial","ok"===i.config.nzAutofocus||null),ho(1),Na(" ",i.config.nzOkText||i.locale.okText," ")}}function zM(e,t){if(1&e&&(Us(0,RM,2,4,"button",8),Us(1,PM,2,6,"button",9)),2&e){var n=ra();js("ngIf",null!==n.config.nzCancelText),ho(1),js("ngIf",null!==n.config.nzOkText)}}var LM=["nz-modal-title",""];function NM(e,t){if(1&e&&(Ks(0),Ws(1,"div",2),Ys()),2&e){var n=ra();ho(1),js("innerHTML",n.config.nzTitle,pr)}}var FM=function(){},UM=function e(){b(this,e),this.nzCentered=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzNoAnimation=!1,this.nzAutofocus="auto",this.nzKeyboard=!0,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzOkDanger=!1,this.nzModalType="default",this.nzOnCancel=FM,this.nzOnOk=FM,this.nzIconType="question-circle"},GM={modalContainer:sb("modalContainer",[lb("void, exit",cb({})),lb("enter",cb({})),hb("* => enter",ab(".24s",cb({}))),hb("* => void, * => exit",ab(".2s",cb({})))])};function VM(e,t,n){return void 0===e?void 0===t?n:t:e}function jM(e){return{nzCentered:e.nzCentered,nzMask:e.nzMask,nzMaskClosable:e.nzMaskClosable,nzClosable:e.nzClosable,nzOkLoading:e.nzOkLoading,nzOkDisabled:e.nzOkDisabled,nzCancelDisabled:e.nzCancelDisabled,nzCancelLoading:e.nzCancelLoading,nzKeyboard:e.nzKeyboard,nzNoAnimation:e.nzNoAnimation,nzContent:e.nzContent,nzComponentParams:e.nzComponentParams,nzFooter:e.nzFooter,nzZIndex:e.nzZIndex,nzWidth:e.nzWidth,nzWrapClassName:e.nzWrapClassName,nzClassName:e.nzClassName,nzStyle:e.nzStyle,nzTitle:e.nzTitle,nzCloseIcon:e.nzCloseIcon,nzMaskStyle:e.nzMaskStyle,nzBodyStyle:e.nzBodyStyle,nzOkText:e.nzOkText,nzCancelText:e.nzCancelText,nzOkType:e.nzOkType,nzOkDanger:e.nzOkDanger,nzIconType:e.nzIconType,nzModalType:e.nzModalType,nzOnOk:e.nzOnOk,nzOnCancel:e.nzOnCancel,nzAfterOpen:e.nzAfterOpen,nzAfterClose:e.nzAfterClose,nzCloseOnNavigation:e.nzCloseOnNavigation,nzAutofocus:e.nzAutofocus}}function BM(){throw Error("Attempting to attach modal content after content is already attached")}var HM=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s,a,u,c,l){var h;return b(this,n),(h=t.call(this)).elementRef=e,h.focusTrapFactory=i,h.cdr=r,h.render=o,h.overlayRef=s,h.nzConfigService=a,h.config=u,h.animationType=l,h.animationStateChanged=new cc,h.containerClick=new cc,h.cancelTriggered=new cc,h.okTriggered=new cc,h.state="enter",h.isStringContent=!1,h.dir="ltr",h.elementFocusedBeforeModalWasOpened=null,h.mouseDown=!1,h.oldMaskStyle=null,h.destroy$=new V,h.document=c,h.dir=s.getDirection(),h.isStringContent="string"==typeof u.nzContent,h.nzConfigService.getConfigChangeEventForComponent("modal").pipe(ev(h.destroy$)).subscribe(function(){h.updateMaskClassname()}),h}return w(n,[{key:"showMask",get:function(){var e=this.nzConfigService.getConfigForComponent("modal")||{};return!!VM(this.config.nzMask,e.nzMask,!0)}},{key:"maskClosable",get:function(){var e=this.nzConfigService.getConfigForComponent("modal")||{};return!!VM(this.config.nzMaskClosable,e.nzMaskClosable,!0)}},{key:"onContainerClick",value:function(e){e.target===e.currentTarget&&!this.mouseDown&&this.showMask&&this.maskClosable&&this.containerClick.emit()}},{key:"onMousedown",value:function(){this.mouseDown=!0}},{key:"onMouseup",value:function(){var e=this;this.mouseDown&&setTimeout(function(){e.mouseDown=!1})}},{key:"onCloseClick",value:function(){this.cancelTriggered.emit()}},{key:"onOkClick",value:function(){this.okTriggered.emit()}},{key:"attachComponentPortal",value:function(e){return this.portalOutlet.hasAttached()&&BM(),this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop(),this.portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this.portalOutlet.hasAttached()&&BM(),this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop(),this.portalOutlet.attachTemplatePortal(e)}},{key:"attachStringContent",value:function(){this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop()}},{key:"getNativeElement",value:function(){return this.elementRef.nativeElement}},{key:"animationDisabled",value:function(){return this.config.nzNoAnimation||"NoopAnimations"===this.animationType}},{key:"setModalTransformOrigin",value:function(){var e=this.modalElementRef.nativeElement;if(this.elementFocusedBeforeModalWasOpened){var t=this.elementFocusedBeforeModalWasOpened.getBoundingClientRect(),n=function(e){if(!e.getClientRects().length)return{top:0,left:0};var t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}}(this.elementFocusedBeforeModalWasOpened);this.render.setStyle(e,"transform-origin","".concat(n.left+t.width/2-e.offsetLeft,"px ").concat(n.top+t.height/2-e.offsetTop,"px 0px"))}}},{key:"savePreviouslyFocusedElement",value:function(){var e=this;this.focusTrap||(this.focusTrap=this.focusTrapFactory.create(this.elementRef.nativeElement)),this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement,this.elementRef.nativeElement.focus&&Promise.resolve().then(function(){return e.elementRef.nativeElement.focus()}))}},{key:"trapFocus",value:function(){var e=this.elementRef.nativeElement;if(this.config.nzAutofocus)this.focusTrap.focusInitialElementWhenReady().then();else{var t=this.document.activeElement;t===e||e.contains(t)||e.focus()}}},{key:"restoreFocus",value:function(){var e=this.elementFocusedBeforeModalWasOpened;if(e&&"function"==typeof e.focus){var t=this.document.activeElement,n=this.elementRef.nativeElement;t&&t!==this.document.body&&t!==n&&!n.contains(t)||e.focus()}this.focusTrap&&this.focusTrap.destroy()}},{key:"setEnterAnimationClass",value:function(){if(!this.animationDisabled()){this.setModalTransformOrigin();var e=this.modalElementRef.nativeElement,t=this.overlayRef.backdropElement;e.classList.add("ant-zoom-enter"),e.classList.add("ant-zoom-enter-active"),t&&(t.classList.add("ant-fade-enter"),t.classList.add("ant-fade-enter-active"))}}},{key:"setExitAnimationClass",value:function(){var e=this.modalElementRef.nativeElement;e.classList.add("ant-zoom-leave"),e.classList.add("ant-zoom-leave-active"),this.setMaskExitAnimationClass()}},{key:"setMaskExitAnimationClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.overlayRef.backdropElement;if(t){if(this.animationDisabled()||e)return void t.classList.remove("ant-modal-mask");t.classList.add("ant-fade-leave"),t.classList.add("ant-fade-leave-active")}}},{key:"cleanAnimationClass",value:function(){if(!this.animationDisabled()){var e=this.overlayRef.backdropElement,t=this.modalElementRef.nativeElement;e&&(e.classList.remove("ant-fade-enter"),e.classList.remove("ant-fade-enter-active")),t.classList.remove("ant-zoom-enter"),t.classList.remove("ant-zoom-enter-active"),t.classList.remove("ant-zoom-leave"),t.classList.remove("ant-zoom-leave-active")}}},{key:"setZIndexForBackdrop",value:function(){var e=this.overlayRef.backdropElement;e&&ky(this.config.nzZIndex)&&this.render.setStyle(e,"z-index",this.config.nzZIndex)}},{key:"bindBackdropStyle",value:function(){var e=this,t=this.overlayRef.backdropElement;if(t&&(this.oldMaskStyle&&(Object.keys(this.oldMaskStyle).forEach(function(n){e.render.removeStyle(t,n)}),this.oldMaskStyle=null),this.setZIndexForBackdrop(),"object"==typeof this.config.nzMaskStyle&&Object.keys(this.config.nzMaskStyle).length)){var n=Object.assign({},this.config.nzMaskStyle);Object.keys(n).forEach(function(i){e.render.setStyle(t,i,n[i])}),this.oldMaskStyle=n}}},{key:"updateMaskClassname",value:function(){var e=this.overlayRef.backdropElement;e&&(this.showMask?e.classList.add("ant-modal-mask"):e.classList.remove("ant-modal-mask"))}},{key:"onAnimationDone",value:function(e){"enter"===e.toState?this.trapFocus():"exit"===e.toState&&this.restoreFocus(),this.cleanAnimationClass(),this.animationStateChanged.emit(e)}},{key:"onAnimationStart",value:function(e){"enter"===e.toState?(this.setEnterAnimationClass(),this.bindBackdropStyle()):"exit"===e.toState&&this.setExitAnimationClass(),this.animationStateChanged.emit(e)}},{key:"startExitAnimation",value:function(){this.state="exit",this.cdr.markForCheck()}},{key:"ngOnDestroy",value:function(){this.setMaskExitAnimationClass(!0),this.destroy$.next(),this.destroy$.complete()}}]),n}(Zg);return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(iM),Vs(xu),Vs(cu),Vs(Bm),Vs($_),Vs(UM),Vs(void 0),Vs(String))},e.\u0275dir=dt({type:e,features:[Es]}),e}(),qM=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s,a,u,c,l,h){var f;return b(this,n),(f=t.call(this,i,r,o,s,a,u,c,l,h)).i18n=e,f.config=c,f.cancelTriggered=new cc,f.okTriggered=new cc,f.i18n.localeChange.pipe(ev(f.destroy$)).subscribe(function(){f.locale=f.i18n.getLocaleData("Modal")}),f}return w(n,[{key:"onCancel",value:function(){this.cancelTriggered.emit()}},{key:"onOk",value:function(){this.okTriggered.emit()}}]),n}(HM);return e.\u0275fac=function(t){return new(t||e)(Vs(OT),Vs(su),Vs(iM),Vs(xu),Vs(cu),Vs(Bm),Vs($_),Vs(UM),Vs(Ol,8),Vs(bT,8))},e.\u0275cmp=at({type:e,selectors:[["nz-modal-confirm-container"]],viewQuery:function(e,t){var n;(1&e&&(wc(Jg,7),wc(lM,7)),2&e)&&(kc(n=Sc())&&(t.portalOutlet=n.first),kc(n=Sc())&&(t.modalElementRef=n.first))},hostAttrs:["tabindex","-1","role","dialog"],hostVars:10,hostBindings:function(e,t){1&e&&(ea("@modalContainer.start",function(e){return t.onAnimationStart(e)})("@modalContainer.done",function(e){return t.onAnimationDone(e)}),Qs("click",function(e){return t.onContainerClick(e)})("mouseup",function(){return t.onMouseup()})),2&e&&(Ua("@.disabled",t.config.nzNoAnimation)("@modalContainer",t.state),wa(t.config.nzWrapClassName?"ant-modal-wrap "+t.config.nzWrapClassName:"ant-modal-wrap"),_a("z-index",t.config.nzZIndex),ba("ant-modal-wrap-rtl","rtl"===t.dir)("ant-modal-centered",t.config.nzCentered))},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["nzModalConfirmContainer"],features:[Es],decls:17,vars:13,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle","mousedown"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],[1,"ant-modal-confirm-body-wrapper"],[1,"ant-modal-confirm-body"],["nz-icon","",3,"nzType"],[1,"ant-modal-confirm-title"],[4,"nzStringTemplateOutlet"],[1,"ant-modal-confirm-content"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],[1,"ant-modal-confirm-btns"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzLoading","disabled","nzDanger","click",4,"ngIf"],["nz-modal-close","",3,"click"],[3,"innerHTML"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzLoading","disabled","nzDanger","click"]],template:function(e,t){1&e&&(Hs(0,"div",0,1),Qs("mousedown",function(){return t.onMousedown()}),sc(2,"nzToCssUnit"),Hs(3,"div",2),Us(4,hM,1,0,"button",3),Hs(5,"div",4),Hs(6,"div",5),Hs(7,"div",6),Ws(8,"i",7),Hs(9,"span",8),Us(10,fM,2,1,"ng-container",9),qs(),Hs(11,"div",10),Us(12,dM,0,0,"ng-template",11),Us(13,pM,1,1,"div",12),qs(),qs(),Hs(14,"div",13),Us(15,gM,2,4,"button",14),Us(16,vM,2,6,"button",15),qs(),qs(),qs(),qs(),qs()),2&e&&(_a("width",ac(2,11,null==t.config?null:t.config.nzWidth)),js("ngClass",t.config.nzClassName)("ngStyle",t.config.nzStyle),ho(4),js("ngIf",t.config.nzClosable),ho(1),js("ngStyle",t.config.nzBodyStyle),ho(3),js("nzType",t.config.nzIconType),ho(2),js("nzStringTemplateOutlet",t.config.nzTitle),ho(3),js("ngIf",t.isStringContent),ho(2),js("ngIf",null!==t.config.nzCancelText),ho(1),js("ngIf",null!==t.config.nzOkText))},directives:function(){return[Xl,uh,th,AT,ib,Iy,Jg,QM,VT,LT]},pipes:function(){return[qT]},encapsulation:2,data:{animation:[GM.modalContainer]}}),e}(),WM=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s,a,u,c,l){var h;return b(this,n),(h=t.call(this,e,i,r,o,s,a,u,c,l)).config=u,h}return n}(HM);return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(iM),Vs(xu),Vs(cu),Vs(Bm),Vs($_),Vs(UM),Vs(Ol,8),Vs(bT,8))},e.\u0275cmp=at({type:e,selectors:[["nz-modal-container"]],viewQuery:function(e,t){var n;(1&e&&(wc(Jg,7),wc(lM,7)),2&e)&&(kc(n=Sc())&&(t.portalOutlet=n.first),kc(n=Sc())&&(t.modalElementRef=n.first))},hostAttrs:["tabindex","-1","role","dialog"],hostVars:10,hostBindings:function(e,t){1&e&&(ea("@modalContainer.start",function(e){return t.onAnimationStart(e)})("@modalContainer.done",function(e){return t.onAnimationDone(e)}),Qs("click",function(e){return t.onContainerClick(e)})("mouseup",function(){return t.onMouseup()})),2&e&&(Ua("@.disabled",t.config.nzNoAnimation)("@modalContainer",t.state),wa(t.config.nzWrapClassName?"ant-modal-wrap "+t.config.nzWrapClassName:"ant-modal-wrap"),_a("z-index",t.config.nzZIndex),ba("ant-modal-wrap-rtl","rtl"===t.dir)("ant-modal-centered",t.config.nzCentered))},exportAs:["nzModalContainer"],features:[Es],decls:10,vars:11,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle","mousedown"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],["nz-modal-title","",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered",4,"ngIf"],["nz-modal-close","",3,"click"],["nz-modal-title",""],[3,"innerHTML"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered"]],template:function(e,t){1&e&&(Hs(0,"div",0,1),Qs("mousedown",function(){return t.onMousedown()}),sc(2,"nzToCssUnit"),Hs(3,"div",2),Us(4,mM,1,0,"button",3),Us(5,yM,1,0,"div",4),Hs(6,"div",5),Us(7,_M,0,0,"ng-template",6),Us(8,bM,1,1,"div",7),qs(),Us(9,kM,1,1,"div",8),qs(),qs()),2&e&&(_a("width",ac(2,9,null==t.config?null:t.config.nzWidth)),js("ngClass",t.config.nzClassName)("ngStyle",t.config.nzStyle),ho(4),js("ngIf",t.config.nzClosable),ho(1),js("ngIf",t.config.nzTitle),ho(1),js("ngStyle",t.config.nzBodyStyle),ho(2),js("ngIf",t.isStringContent),ho(1),js("ngIf",null!==t.config.nzFooter))},directives:function(){return[Xl,uh,th,Jg,QM,nO,eO]},pipes:function(){return[qT]},encapsulation:2,data:{animation:[GM.modalContainer]}}),e}(),KM=function(){function e(t,n,i){var r=this;b(this,e),this.overlayRef=t,this.config=n,this.containerInstance=i,this.componentInstance=null,this.state=0,this.afterClose=new V,this.afterOpen=new V,i.animationStateChanged.pipe(kf(function(e){return"done"===e.phaseName&&"enter"===e.toState}),pf(1)).subscribe(function(){r.afterOpen.next(),r.afterOpen.complete(),n.nzAfterOpen instanceof cc&&n.nzAfterOpen.emit()}),i.animationStateChanged.pipe(kf(function(e){return"done"===e.phaseName&&"exit"===e.toState}),pf(1)).subscribe(function(){clearTimeout(r.closeTimeout),r._finishDialogClose()}),i.containerClick.pipe(pf(1)).subscribe(function(){!r.config.nzCancelLoading&&!r.config.nzOkLoading&&r.trigger("cancel")}),t.keydownEvents().pipe(kf(function(e){return r.config.nzKeyboard&&!r.config.nzCancelLoading&&!r.config.nzOkLoading&&27===e.keyCode&&!Im(e)})).subscribe(function(e){e.preventDefault(),r.trigger("cancel")}),i.cancelTriggered.subscribe(function(){return r.trigger("cancel")}),i.okTriggered.subscribe(function(){return r.trigger("ok")}),t.detachments().subscribe(function(){r.afterClose.next(r.result),r.afterClose.complete(),n.nzAfterClose instanceof cc&&n.nzAfterClose.emit(r.result),r.componentInstance=null,r.overlayRef.dispose()})}return w(e,[{key:"getContentComponent",value:function(){return this.componentInstance}},{key:"getElement",value:function(){return this.containerInstance.getNativeElement()}},{key:"destroy",value:function(e){this.close(e)}},{key:"triggerOk",value:function(){return this.trigger("ok")}},{key:"triggerCancel",value:function(){return this.trigger("cancel")}},{key:"close",value:function(e){var t=this;this.result=e,this.containerInstance.animationStateChanged.pipe(kf(function(e){return"start"===e.phaseName}),pf(1)).subscribe(function(e){t.overlayRef.detachBackdrop(),t.closeTimeout=setTimeout(function(){t._finishDialogClose()},e.totalTime+100)}),this.containerInstance.startExitAnimation(),this.state=1}},{key:"updateConfig",value:function(e){Object.assign(this.config,e),this.containerInstance.bindBackdropStyle(),this.containerInstance.cdr.markForCheck()}},{key:"getState",value:function(){return this.state}},{key:"getConfig",value:function(){return this.config}},{key:"getBackdropElement",value:function(){return this.overlayRef.backdropElement}},{key:"trigger",value:function(e){return Ay(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={ok:this.config.nzOnOk,cancel:this.config.nzOnCancel}[e],i={ok:"nzOkLoading",cancel:"nzCancelLoading"}[e],this.config[i]){t.next=21;break}if(!(n instanceof cc)){t.next=6;break}n.emit(this.getContentComponent()),t.next=21;break;case 6:if("function"!=typeof n){t.next=21;break}if(!Ey(r=n(this.getContentComponent()))){t.next=20;break}return this.config[i]=!0,o=!1,t.prev=11,t.next=14,r;case 14:o=t.sent;case 15:return t.prev=15,this.config[i]=!1,this.closeWhitResult(o),t.finish(15);case 18:t.next=21;break;case 20:this.closeWhitResult(r);case 21:case"end":return t.stop()}},t,this,[[11,,15,18]])}))}},{key:"closeWhitResult",value:function(e){!1!==e&&this.close(e)}},{key:"_finishDialogClose",value:function(){this.state=2,this.overlayRef.dispose()}}]),e}(),YM=function(){var e=function(){function e(t,n,i,r,o){var s=this;b(this,e),this.overlay=t,this.injector=n,this.nzConfigService=i,this.parentModal=r,this.directionality=o,this.openModalsAtThisLevel=[],this.afterAllClosedAtThisLevel=new V,this.afterAllClose=cf(function(){return s.openModals.length?s._afterAllClosed:s._afterAllClosed.pipe(mf(void 0))})}return w(e,[{key:"openModals",get:function(){return this.parentModal?this.parentModal.openModals:this.openModalsAtThisLevel}},{key:"_afterAllClosed",get:function(){var e=this.parentModal;return e?e._afterAllClosed:this.afterAllClosedAtThisLevel}},{key:"create",value:function(e){return this.open(e.nzContent,e)}},{key:"closeAll",value:function(){this.closeModals(this.openModals)}},{key:"confirm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirm";return"nzFooter"in e&&_y('The Confirm-Modal doesn\'t support "nzFooter", this property will be ignored.'),"nzWidth"in e||(e.nzWidth=416),"nzMaskClosable"in e||(e.nzMaskClosable=!1),e.nzModalType="confirm",e.nzClassName="ant-modal-confirm ant-modal-confirm-".concat(t," ").concat(e.nzClassName||""),this.create(e)}},{key:"info",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(e,"info")}},{key:"success",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(e,"success")}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(e,"error")}},{key:"warning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(e,"warning")}},{key:"open",value:function(e,t){var n=this,i=function(e,t){return Object.assign(Object.assign({},t),e)}(t||{},new UM),r=this.createOverlay(i),o=this.attachModalContainer(r,i),s=this.attachModalContent(e,o,r,i);return o.modalRef=s,this.openModals.push(s),s.afterClose.subscribe(function(){return n.removeOpenModal(s)}),s}},{key:"removeOpenModal",value:function(e){var t=this.openModals.indexOf(e);t>-1&&(this.openModals.splice(t,1),this.openModals.length||this._afterAllClosed.next())}},{key:"closeModals",value:function(e){for(var t=e.length;t--;)e[t].close(),this.openModals.length||this._afterAllClosed.next()}},{key:"createOverlay",value:function(e){var t=this.nzConfigService.getConfigForComponent("modal")||{},n=new zm({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:VM(e.nzCloseOnNavigation,t.nzCloseOnNavigation,!0),direction:VM(e.nzDirection,t.nzDirection,this.directionality.value)});return VM(e.nzMask,t.nzMask,!0)&&(n.backdropClass="ant-modal-mask"),this.overlay.create(n)}},{key:"attachModalContainer",value:function(e,t){var n=Cs.create({parent:t&&t.nzViewContainerRef&&t.nzViewContainerRef.injector||this.injector,providers:[{provide:Bm,useValue:e},{provide:UM,useValue:t}]}),i=new Kg("confirm"===t.nzModalType?qM:WM,t.nzViewContainerRef,n);return e.attach(i).instance}},{key:"attachModalContent",value:function(e,t,n,i){var r=new KM(n,i,t);if(e instanceof Lu)t.attachTemplatePortal(new Yg(e,null,{$implicit:i.nzComponentParams,modalRef:r}));else if(ky(e)&&"string"!=typeof e){var o=this.createInjector(r,i),s=t.attachComponentPortal(new Kg(e,i.nzViewContainerRef,o));Object.assign(s.instance,i.nzComponentParams),r.componentInstance=s.instance}else t.attachStringContent();return r}},{key:"createInjector",value:function(e,t){return Cs.create({parent:t&&t.nzViewContainerRef&&t.nzViewContainerRef.injector||this.injector,providers:[{provide:KM,useValue:e}]})}},{key:"confirmFactory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"nzIconType"in e||(e.nzIconType={info:"info-circle",success:"check-circle",error:"close-circle",warning:"exclamation-circle"}[t]),"nzCancelText"in e||(e.nzCancelText=null),this.confirm(e,t)}},{key:"ngOnDestroy",value:function(){this.closeModals(this.openModalsAtThisLevel),this.afterAllClosedAtThisLevel.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(ey),Si(Cs),Si($_),Si(e,12),Si(rm,8))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),$M=function(){var e=function e(t){b(this,e),this.templateRef=t};return e.\u0275fac=function(t){return new(t||e)(Vs(Lu))},e.\u0275dir=dt({type:e,selectors:[["","nzModalContent",""]],exportAs:["nzModalContent"]}),e}(),ZM=function(){var e=function e(t,n){b(this,e),this.nzModalRef=t,this.templateRef=n,this.nzModalRef&&this.nzModalRef.updateConfig({nzFooter:this.templateRef})};return e.\u0275fac=function(t){return new(t||e)(Vs(KM,8),Vs(Lu))},e.\u0275dir=dt({type:e,selectors:[["","nzModalFooter",""]],exportAs:["nzModalFooter"]}),e}(),XM=function(){var e=function e(t,n){b(this,e),this.nzModalRef=t,this.templateRef=n,this.nzModalRef&&this.nzModalRef.updateConfig({nzTitle:this.templateRef})};return e.\u0275fac=function(t){return new(t||e)(Vs(KM,8),Vs(Lu))},e.\u0275dir=dt({type:e,selectors:[["","nzModalTitle",""]],exportAs:["nzModalTitle"]}),e}(),JM=function(){var e=function(){function e(t,n,i){b(this,e),this.cdr=t,this.modal=n,this.viewContainerRef=i,this.nzVisible=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzCentered=!1,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzOkDanger=!1,this.nzIconType="question-circle",this.nzModalType="default",this.nzAutofocus="auto",this.nzOnOk=new cc,this.nzOnCancel=new cc,this.nzAfterOpen=new cc,this.nzAfterClose=new cc,this.nzVisibleChange=new cc,this.modalRef=null}return w(e,[{key:"modalTitle",set:function(e){e&&this.setTitleWithTemplate(e)}},{key:"modalFooter",set:function(e){e&&this.setFooterWithTemplate(e)}},{key:"afterOpen",get:function(){return this.nzAfterOpen.asObservable()}},{key:"afterClose",get:function(){return this.nzAfterClose.asObservable()}},{key:"open",value:function(){if(this.nzVisible||(this.nzVisible=!0,this.nzVisibleChange.emit(!0)),!this.modalRef){var e=this.getConfig();this.modalRef=this.modal.create(e)}}},{key:"close",value:function(e){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(!1)),this.modalRef&&(this.modalRef.close(e),this.modalRef=null)}},{key:"destroy",value:function(e){this.close(e)}},{key:"triggerOk",value:function(){var e;null===(e=this.modalRef)||void 0===e||e.triggerOk()}},{key:"triggerCancel",value:function(){var e;null===(e=this.modalRef)||void 0===e||e.triggerCancel()}},{key:"getContentComponent",value:function(){var e;return null===(e=this.modalRef)||void 0===e?void 0:e.getContentComponent()}},{key:"getElement",value:function(){var e;return null===(e=this.modalRef)||void 0===e?void 0:e.getElement()}},{key:"getModalRef",value:function(){return this.modalRef}},{key:"setTitleWithTemplate",value:function(e){var t=this;this.nzTitle=e,this.modalRef&&Promise.resolve().then(function(){t.modalRef.updateConfig({nzTitle:t.nzTitle})})}},{key:"setFooterWithTemplate",value:function(e){var t=this;this.nzFooter=e,this.modalRef&&Promise.resolve().then(function(){t.modalRef.updateConfig({nzFooter:t.nzFooter})}),this.cdr.markForCheck()}},{key:"getConfig",value:function(){var e=jM(this);return e.nzViewContainerRef=this.viewContainerRef,this.nzContent||this.contentFromContentChild?e.nzContent=this.nzContent||this.contentFromContentChild:(e.nzContent=this.contentTemplateRef,by("Usage `<ng-content></ng-content>` is deprecated, which will be removed in 12.0.0. Please instead use `<ng-template nzModalContent></ng-template>` to declare the content of the modal.")),e}},{key:"ngOnChanges",value:function(e){var t=e.nzVisible,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["nzVisible"]);Object.keys(n).length&&this.modalRef&&this.modalRef.updateConfig(jM(this)),t&&(this.nzVisible?this.open():this.close())}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.modalRef)||void 0===e||e._finishDialogClose()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(YM),Vs(ju))},e.\u0275cmp=at({type:e,selectors:[["nz-modal"]],contentQueries:function(e,t,n){var i;(1&e&&(Cc(n,XM,7,Lu),Cc(n,ZM,7,Lu),Cc(n,$M,7,Lu)),2&e)&&(kc(i=Sc())&&(t.modalTitle=i.first),kc(i=Sc())&&(t.modalFooter=i.first),kc(i=Sc())&&(t.contentFromContentChild=i.first))},viewQuery:function(e,t){var n;(1&e&&wc(Lu,7),2&e)&&(kc(n=Sc())&&(t.contentTemplateRef=n.first))},inputs:{nzVisible:"nzVisible",nzClosable:"nzClosable",nzOkLoading:"nzOkLoading",nzOkDisabled:"nzOkDisabled",nzCancelDisabled:"nzCancelDisabled",nzCancelLoading:"nzCancelLoading",nzKeyboard:"nzKeyboard",nzNoAnimation:"nzNoAnimation",nzCentered:"nzCentered",nzZIndex:"nzZIndex",nzWidth:"nzWidth",nzCloseIcon:"nzCloseIcon",nzOkType:"nzOkType",nzOkDanger:"nzOkDanger",nzIconType:"nzIconType",nzModalType:"nzModalType",nzAutofocus:"nzAutofocus",nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel",nzTitle:"nzTitle",nzFooter:"nzFooter",nzMask:"nzMask",nzMaskClosable:"nzMaskClosable",nzCloseOnNavigation:"nzCloseOnNavigation",nzContent:"nzContent",nzComponentParams:"nzComponentParams",nzWrapClassName:"nzWrapClassName",nzClassName:"nzClassName",nzStyle:"nzStyle",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzOkText:"nzOkText",nzCancelText:"nzCancelText"},outputs:{nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel",nzAfterOpen:"nzAfterOpen",nzAfterClose:"nzAfterClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzModal"],features:[It],ngContentSelectors:CM,decls:1,vars:0,template:function(e,t){1&e&&(sa(),Us(0,wM,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzMask",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzMaskClosable",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzCloseOnNavigation",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzVisible",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzClosable",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzOkLoading",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzOkDisabled",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzCancelDisabled",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzCancelLoading",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzKeyboard",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzNoAnimation",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzCentered",void 0),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzOkDanger",void 0),e}(),QM=function(){var e=function e(t){b(this,e),this.config=t};return e.\u0275fac=function(t){return new(t||e)(Vs(UM))},e.\u0275cmp=at({type:e,selectors:[["button","nz-modal-close",""]],hostAttrs:["aria-label","Close",1,"ant-modal-close"],exportAs:["NzModalCloseBuiltin"],attrs:SM,decls:2,vars:1,consts:[[1,"ant-modal-close-x"],[4,"nzStringTemplateOutlet"],["nz-icon","",1,"ant-modal-close-icon",3,"nzType"]],template:function(e,t){1&e&&(Hs(0,"span",0),Us(1,EM,2,1,"ng-container",1),qs()),2&e&&(ho(1),js("nzStringTemplateOutlet",t.config.nzCloseIcon))},directives:[Iy,AT,ib],encapsulation:2,changeDetection:0}),e}(),eO=function(){var e=function(){function e(t,n){var i=this;b(this,e),this.i18n=t,this.config=n,this.buttonsFooter=!1,this.buttons=[],this.cancelTriggered=new cc,this.okTriggered=new cc,this.destroy$=new V,Array.isArray(n.nzFooter)&&(this.buttonsFooter=!0,this.buttons=n.nzFooter.map(tO)),this.i18n.localeChange.pipe(ev(this.destroy$)).subscribe(function(){i.locale=i.i18n.getLocaleData("Modal")})}return w(e,[{key:"onCancel",value:function(){this.cancelTriggered.emit()}},{key:"onOk",value:function(){this.okTriggered.emit()}},{key:"getButtonCallableProp",value:function(e,t){var n=e[t],i=this.modalRef.getContentComponent();return"function"==typeof n?n.apply(e,i&&[i]):n}},{key:"onButtonClick",value:function(e){if(!this.getButtonCallableProp(e,"loading")){var t=this.getButtonCallableProp(e,"onClick");e.autoLoading&&Ey(t)&&(e.loading=!0,t.then(function(){return e.loading=!1}).catch(function(){return e.loading=!1}))}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(OT),Vs(UM))},e.\u0275cmp=at({type:e,selectors:[["div","nz-modal-footer",""]],hostAttrs:[1,"ant-modal-footer"],inputs:{modalRef:"modalRef"},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["NzModalFooterBuiltin"],attrs:IM,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultFooterButtons",""],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzDanger","nzShape","nzSize","nzGhost","click",4,"ngFor","ngForOf"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzDanger","nzShape","nzSize","nzGhost","click"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzDanger","nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzDanger","nzLoading","disabled","click"]],template:function(e,t){if(1&e&&(Us(0,xM,2,5,"ng-container",0),Us(1,zM,2,2,"ng-template",null,1,Mc)),2&e){var n=Gs(2);js("ngIf",t.config.nzFooter)("ngIfElse",n)}},directives:[th,Iy,Ql,VT,LT,AT],encapsulation:2}),e}();function tO(e){return Object.assign({type:null,size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1},e)}var nO=function(){var e=function e(t){b(this,e),this.config=t};return e.\u0275fac=function(t){return new(t||e)(Vs(UM))},e.\u0275cmp=at({type:e,selectors:[["div","nz-modal-title",""]],hostAttrs:[1,"ant-modal-header"],exportAs:["NzModalTitleBuiltin"],attrs:LM,decls:2,vars:1,consts:[[1,"ant-modal-title"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,NM,2,1,"ng-container",1),qs()),2&e&&(ho(1),js("nzStringTemplateOutlet",t.config.nzTitle))},directives:[Iy],encapsulation:2,changeDetection:0}),e}(),iO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[YM],imports:[[ph,om,sy,My,Qg,DT,jT,rb,WT,HT,WT]]}),e}(),rO=function(){var e=function(){function e(t,n,i,r,o,s,a){b(this,e),this.elementRef=t,this.renderer=n,this.mediaMatcher=i,this.ngZone=r,this.platform=o,this.breakpointService=s,this.directionality=a,this.nzAlign=null,this.nzJustify=null,this.nzGutter=null,this.actualGutter$=new Hv(1),this.dir="ltr",this.destroy$=new V,this.elementRef.nativeElement.classList.add("ant-row")}return w(e,[{key:"getGutter",value:function(){var e=this,t=[null,null],n=this.nzGutter||0;return(Array.isArray(n)?n:[n,null]).forEach(function(n,i){"object"==typeof n&&null!==n?(t[i]=null,Object.keys(gy).map(function(r){var o=r;e.mediaMatcher.matchMedia(gy[o]).matches&&n[o]&&(t[i]=n[o])})):t[i]=Number(n)||null}),t}},{key:"setGutterStyle",value:function(){var e=this,t=n(this.getGutter(),2),i=t[0],r=t[1];this.actualGutter$.next([i,r]);var o=function(t,n){null!==n&&e.renderer.setStyle(e.elementRef.nativeElement,t,"-".concat(n/2,"px"))};o("margin-left",i),o("margin-right",i),o("margin-top",r),o("margin-bottom",r)}},{key:"ngOnInit",value:function(){var e,t=this;this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e}),this.setGutterStyle()}},{key:"ngOnChanges",value:function(e){e.nzGutter&&this.setGutterStyle()}},{key:"ngAfterViewInit",value:function(){var e=this;this.platform.isBrowser&&this.breakpointService.subscribe(gy).pipe(ev(this.destroy$)).subscribe(function(){e.setGutterStyle()})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu),Vs(cy),Vs(Zc),Vs(Xv),Vs(vy),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["","nz-row",""],["nz-row"],["nz-form-item"]],hostVars:18,hostBindings:function(e,t){2&e&&ba("ant-row-top","top"===t.nzAlign)("ant-row-middle","middle"===t.nzAlign)("ant-row-bottom","bottom"===t.nzAlign)("ant-row-start","start"===t.nzJustify)("ant-row-end","end"===t.nzJustify)("ant-row-center","center"===t.nzJustify)("ant-row-space-around","space-around"===t.nzJustify)("ant-row-space-between","space-between"===t.nzJustify)("ant-row-rtl","rtl"===t.dir)},inputs:{nzAlign:"nzAlign",nzJustify:"nzJustify",nzGutter:"nzGutter"},exportAs:["nzRow"],features:[It]}),e}(),oO=function(){var e=function(){function e(t,n,i,r){b(this,e),this.elementRef=t,this.nzRowDirective=n,this.renderer=i,this.directionality=r,this.classMap={},this.destroy$=new V,this.hostFlexStyle=null,this.dir="ltr",this.nzFlex=null,this.nzSpan=null,this.nzOrder=null,this.nzOffset=null,this.nzPush=null,this.nzPull=null,this.nzXs=null,this.nzSm=null,this.nzMd=null,this.nzLg=null,this.nzXl=null,this.nzXXl=null}return w(e,[{key:"setHostClassMap",value:function(){var e,n=Object.assign((t(e={"ant-col":!0},"ant-col-".concat(this.nzSpan),ky(this.nzSpan)),t(e,"ant-col-order-".concat(this.nzOrder),ky(this.nzOrder)),t(e,"ant-col-offset-".concat(this.nzOffset),ky(this.nzOffset)),t(e,"ant-col-pull-".concat(this.nzPull),ky(this.nzPull)),t(e,"ant-col-push-".concat(this.nzPush),ky(this.nzPush)),t(e,"ant-col-rtl","rtl"===this.dir),e),this.generateClass());for(var i in this.classMap)this.classMap.hasOwnProperty(i)&&this.renderer.removeClass(this.elementRef.nativeElement,i);for(var r in this.classMap=Object.assign({},n),this.classMap)this.classMap.hasOwnProperty(r)&&this.classMap[r]&&this.renderer.addClass(this.elementRef.nativeElement,r)}},{key:"setHostFlexStyle",value:function(){this.hostFlexStyle=this.parseFlex(this.nzFlex)}},{key:"parseFlex",value:function(e){return"number"==typeof e?"".concat(e," ").concat(e," auto"):"string"==typeof e&&/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}},{key:"generateClass",value:function(){var e=this,t={};return["nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"].forEach(function(n){var i=n.replace("nz","").toLowerCase();if(ky(e[n]))if("number"==typeof e[n]||"string"==typeof e[n])t["ant-col-".concat(i,"-").concat(e[n])]=!0;else{var r=e[n];["span","pull","push","offset","order"].forEach(function(e){t["ant-col-".concat(i).concat("span"===e?"-":"-".concat(e,"-")).concat(r[e])]=r&&ky(r[e])})}}),t}},{key:"ngOnInit",value:function(){var e=this;this.dir=this.directionality.value,this.directionality.change.pipe(ev(this.destroy$)).subscribe(function(t){e.dir=t,e.setHostClassMap()}),this.setHostClassMap(),this.setHostFlexStyle()}},{key:"ngOnChanges",value:function(e){this.setHostClassMap(),e.nzFlex&&this.setHostFlexStyle()}},{key:"ngAfterViewInit",value:function(){var e=this;this.nzRowDirective&&this.nzRowDirective.actualGutter$.pipe(ev(this.destroy$)).subscribe(function(t){var i=n(t,2),r=i[0],o=i[1],s=function(t,n){null!==n&&e.renderer.setStyle(e.elementRef.nativeElement,t,n/2+"px")};s("padding-left",r),s("padding-right",r),s("padding-top",o),s("padding-bottom",o)})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(rO,9),Vs(cu),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["","nz-col",""],["nz-col"],["nz-form-control"],["nz-form-label"]],hostVars:2,hostBindings:function(e,t){2&e&&_a("flex",t.hostFlexStyle)},inputs:{nzFlex:"nzFlex",nzSpan:"nzSpan",nzOrder:"nzOrder",nzOffset:"nzOffset",nzPush:"nzPush",nzPull:"nzPull",nzXs:"nzXs",nzSm:"nzSm",nzMd:"nzMd",nzLg:"nzLg",nzXl:"nzXl",nzXXl:"nzXXl"},exportAs:["nzCol"],features:[It]}),e}(),sO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,ay,Jv]]}),e}(),aO=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"],uO=function(){var e=function e(t){b(this,e),this.cdkConnectedOverlay=t,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop"};return e.\u0275fac=function(t){return new(t||e)(Vs(ry))},e.\u0275dir=dt({type:e,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],exportAs:["nzConnectedOverlay"]}),e}(),cO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),lO={top:new Lm({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new Lm({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new Lm({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new Lm({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new Lm({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new Lm({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new Lm({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new Lm({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new Lm({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new Lm({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new Lm({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new Lm({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new Lm({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new Lm({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},hO=[lO.top,lO.right,lO.bottom,lO.left];function fO(e){for(var t in lO)if(e.connectionPair.originX===lO[t].originX&&e.connectionPair.originY===lO[t].originY&&e.connectionPair.overlayX===lO[t].overlayX&&e.connectionPair.overlayY===lO[t].overlayY)return t}new Lm({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),new Lm({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"}),new Lm({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"top"});var dO=["overlay"];function pO(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.nzTitle)}}function gO(e,t){if(1&e&&(Hs(0,"div",2),Hs(1,"div",3),Hs(2,"div",4),Ws(3,"span",5),qs(),Hs(4,"div",6),Us(5,pO,2,1,"ng-container",7),qs(),qs(),qs()),2&e){var n=ra();ba("ant-tooltip-rtl","rtl"===n.dir),js("ngClass",n._classMap)("ngStyle",n.nzOverlayStyle)("@.disabled",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),ho(3),js("ngStyle",n._contentStyleMap),ho(1),js("ngStyle",n._contentStyleMap),ho(1),js("nzStringTemplateOutlet",n.nzTitle)}}var vO=function(){var e=function(){function e(t,n,i,r,o,s){b(this,e),this.elementRef=t,this.hostView=n,this.resolver=i,this.renderer=r,this.noAnimation=o,this.nzConfigService=s,this.visibleChange=new cc,this.internalVisible=!1,this.destroy$=new V,this.triggerDisposables=[]}return w(e,[{key:"_title",get:function(){return this.title||this.directiveTitle||null}},{key:"_content",get:function(){return this.content||this.directiveContent||null}},{key:"_trigger",get:function(){return void 0!==this.trigger?this.trigger:"hover"}},{key:"_placement",get:function(){var e=this.placement;return Array.isArray(e)&&e.length>0?e:"string"==typeof e&&e?[e]:["top"]}},{key:"_visible",get:function(){return(void 0!==this.visible?this.visible:this.internalVisible)||!1}},{key:"_mouseEnterDelay",get:function(){return this.mouseEnterDelay||.15}},{key:"_mouseLeaveDelay",get:function(){return this.mouseLeaveDelay||.1}},{key:"_overlayClassName",get:function(){return this.overlayClassName||null}},{key:"_overlayStyle",get:function(){return this.overlayStyle||null}},{key:"getProxyPropertyMap",value:function(){var e=this;return{noAnimation:["noAnimation",function(){return e.noAnimation}]}}},{key:"ngOnChanges",value:function(e){var t=e.trigger;t&&!t.isFirstChange()&&this.registerTriggers(),this.component&&this.updatePropertiesByChanges(e)}},{key:"ngAfterViewInit",value:function(){this.createComponent(),this.registerTriggers()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.clearTogglingTimer(),this.removeTriggerListeners()}},{key:"show",value:function(){var e;null===(e=this.component)||void 0===e||e.show()}},{key:"hide",value:function(){var e;null===(e=this.component)||void 0===e||e.hide()}},{key:"updatePosition",value:function(){this.component&&this.component.updatePosition()}},{key:"createComponent",value:function(){var e=this,t=this.hostView.createComponent(this.componentFactory);this.component=t.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),t.location.nativeElement),this.component.setOverlayOrigin({elementRef:this.origin||this.elementRef}),this.initProperties(),this.component.nzVisibleChange.pipe(Ev(),ev(this.destroy$)).subscribe(function(t){e.internalVisible=t,e.visibleChange.emit(t)})}},{key:"registerTriggers",value:function(){var e,t=this,n=this.elementRef.nativeElement,i=this.trigger;(this.removeTriggerListeners(),"hover"===i)?(this.triggerDisposables.push(this.renderer.listen(n,"mouseenter",function(){t.delayEnterLeave(!0,!0,t._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(n,"mouseleave",function(){var n;t.delayEnterLeave(!0,!1,t._mouseLeaveDelay),(null===(n=t.component)||void 0===n?void 0:n.overlay.overlayRef)&&!e&&(e=t.component.overlay.overlayRef.overlayElement,t.triggerDisposables.push(t.renderer.listen(e,"mouseenter",function(){t.delayEnterLeave(!1,!0,t._mouseEnterDelay)})),t.triggerDisposables.push(t.renderer.listen(e,"mouseleave",function(){t.delayEnterLeave(!1,!1,t._mouseLeaveDelay)})))}))):"focus"===i?(this.triggerDisposables.push(this.renderer.listen(n,"focus",function(){return t.show()})),this.triggerDisposables.push(this.renderer.listen(n,"blur",function(){return t.hide()}))):"click"===i&&this.triggerDisposables.push(this.renderer.listen(n,"click",function(e){e.preventDefault(),t.show()}))}},{key:"updatePropertiesByChanges",value:function(e){this.updatePropertiesByKeys(Object.keys(e))}},{key:"updatePropertiesByKeys",value:function(e){var t,i=this,r=Object.assign({title:["nzTitle",function(){return i._title}],directiveTitle:["nzTitle",function(){return i._title}],content:["nzContent",function(){return i._content}],directiveContent:["nzContent",function(){return i._content}],trigger:["nzTrigger",function(){return i._trigger}],placement:["nzPlacement",function(){return i._placement}],visible:["nzVisible",function(){return i._visible}],mouseEnterDelay:["nzMouseEnterDelay",function(){return i._mouseEnterDelay}],mouseLeaveDelay:["nzMouseLeaveDelay",function(){return i._mouseLeaveDelay}],overlayClassName:["nzOverlayClassName",function(){return i._overlayClassName}],overlayStyle:["nzOverlayStyle",function(){return i._overlayStyle}]},this.getProxyPropertyMap());(e||Object.keys(r).filter(function(e){return!e.startsWith("directive")})).forEach(function(e){if(r[e]){var t=n(r[e],2),o=t[0],s=t[1];i.updateComponentValue(o,s())}}),null===(t=this.component)||void 0===t||t.updateByDirective()}},{key:"initProperties",value:function(){this.updatePropertiesByKeys()}},{key:"updateComponentValue",value:function(e,t){void 0!==t&&(this.component[e]=t)}},{key:"delayEnterLeave",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.delayTimer?this.clearTogglingTimer():i>0?this.delayTimer=setTimeout(function(){n.delayTimer=void 0,t?n.show():n.hide()},1e3*i):t&&e?this.show():this.hide()}},{key:"removeTriggerListeners",value:function(){this.triggerDisposables.forEach(function(e){return e()}),this.triggerDisposables.length=0}},{key:"clearTogglingTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(ju),Vs(nu),Vs(cu),Vs(BT),Vs($_))},e.\u0275dir=dt({type:e,features:[It]}),e}(),mO=function(){var e=function(){function e(t,n,i){b(this,e),this.cdr=t,this.directionality=n,this.noAnimation=i,this.nzTitle=null,this.nzContent=null,this.nzOverlayStyle={},this.nzBackdrop=!1,this.nzVisibleChange=new V,this._visible=!1,this._trigger="hover",this.preferredPlacement="top",this.dir="ltr",this._classMap={},this._prefix="ant-tooltip",this._positions=[].concat(hO),this.destroy$=new V}return w(e,[{key:"nzVisible",get:function(){return this._visible},set:function(e){var t=wy(e);this._visible!==t&&(this._visible=t,this.nzVisibleChange.next(t))}},{key:"nzTrigger",get:function(){return this._trigger},set:function(e){this._trigger=e}},{key:"nzPlacement",set:function(e){var t=e.map(function(e){return lO[e]});this._positions=[].concat(o(t),hO)}},{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"ngOnDestroy",value:function(){this.nzVisibleChange.complete(),this.destroy$.next(),this.destroy$.complete()}},{key:"show",value:function(){this.nzVisible||(this.isEmpty()||(this.nzVisible=!0,this.nzVisibleChange.next(!0),this.cdr.detectChanges()),this.origin&&this.overlay&&this.overlay.overlayRef&&"rtl"===this.overlay.overlayRef.getDirection()&&this.overlay.overlayRef.setDirection("ltr"))}},{key:"hide",value:function(){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.next(!1),this.cdr.detectChanges())}},{key:"updateByDirective",value:function(){var e=this;this.updateStyles(),this.cdr.detectChanges(),Promise.resolve().then(function(){e.updatePosition(),e.updateVisibilityByTitle()})}},{key:"updatePosition",value:function(){this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}},{key:"onPositionChange",value:function(e){this.preferredPlacement=fO(e),this.updateStyles(),this.cdr.detectChanges()}},{key:"updateStyles",value:function(){var e;this._classMap=(t(e={},this.nzOverlayClassName,!0),t(e,"".concat(this._prefix,"-placement-").concat(this.preferredPlacement),!0),e)}},{key:"setOverlayOrigin",value:function(e){this.origin=e,this.cdr.markForCheck()}},{key:"onClickOutside",value:function(e){this.origin.elementRef.nativeElement.contains(e.target)||null===this.nzTrigger||this.hide()}},{key:"updateVisibilityByTitle",value:function(){this.isEmpty()&&this.hide()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(rm,8),Vs(BT))},e.\u0275dir=dt({type:e,viewQuery:function(e,t){var n;(1&e&&wc(dO,5),2&e)&&(kc(n=Sc())&&(t.overlay=n.first))}}),e}();function yO(e){return!(e instanceof Lu||""!==e&&ky(e))}var _O=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s){var a;return b(this,n),(a=t.call(this,e,i,r,o,s)).trigger="hover",a.placement="top",a.visibleChange=new cc,a.componentFactory=a.resolver.resolveComponentFactory(bO),a}return w(n,[{key:"getProxyPropertyMap",value:function(){var e=this;return{nzTooltipColor:["nzColor",function(){return e.nzTooltipColor}]}}}]),n}(vO);return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(ju),Vs(nu),Vs(cu),Vs(BT,9))},e.\u0275dir=dt({type:e,selectors:[["","nz-tooltip",""]],hostVars:2,hostBindings:function(e,t){2&e&&ba("ant-tooltip-open",t.visible)},inputs:{trigger:["nzTooltipTrigger","trigger"],placement:["nzTooltipPlacement","placement"],title:["nzTooltipTitle","title"],directiveTitle:["nz-tooltip","directiveTitle"],origin:["nzTooltipOrigin","origin"],visible:["nzTooltipVisible","visible"],mouseEnterDelay:["nzTooltipMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzTooltipMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzTooltipOverlayClassName","overlayClassName"],overlayStyle:["nzTooltipOverlayStyle","overlayStyle"],nzTooltipColor:"nzTooltipColor"},outputs:{visibleChange:"nzTooltipVisibleChange"},exportAs:["nzTooltip"],features:[Es]}),e}(),bO=function(){var e=function(e){d(i,e);var n=g(i);function i(e,t,r){var o;return b(this,i),(o=n.call(this,e,t,r)).noAnimation=r,o.nzTitle=null,o._contentStyleMap={},o}return w(i,[{key:"isEmpty",value:function(){return yO(this.nzTitle)}},{key:"updateStyles",value:function(){var e,n=this.nzColor&&-1!==aO.indexOf(this.nzColor);this._classMap=(t(e={},this.nzOverlayClassName,!0),t(e,"".concat(this._prefix,"-placement-").concat(this.preferredPlacement),!0),t(e,"".concat(this._prefix,"-").concat(this.nzColor),n),e),this._contentStyleMap={backgroundColor:this.nzColor&&!n?this.nzColor:null}}}]),i}(mO);return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(rm,8),Vs(BT,9))},e.\u0275cmp=at({type:e,selectors:[["nz-tooltip"]],exportAs:["nzTooltipComponent"],features:[Es],decls:2,vars:4,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayPush","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-tooltip",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-tooltip-content"],[1,"ant-tooltip-arrow"],[1,"ant-tooltip-arrow-content",3,"ngStyle"],[1,"ant-tooltip-inner",3,"ngStyle"],[4,"nzStringTemplateOutlet"]],template:function(e,t){1&e&&(Us(0,gO,6,10,"ng-template",0,1,Mc),Qs("overlayOutsideClick",function(e){return t.onClickOutside(e)})("detach",function(){return t.hide()})("positionChange",function(e){return t.onPositionChange(e)})),2&e&&js("cdkConnectedOverlayOrigin",t.origin)("cdkConnectedOverlayOpen",t._visible)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayPush",!0)},directives:[ry,uO,Xl,uh,BT,Iy],encapsulation:2,data:{animation:[Ib]},changeDetection:0}),e}(),kO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sy,My,cO,HT]]}),e}(),wO=["*"];function CO(e,t){1&e&&Ws(0,"i",6),2&e&&js("nzType",ra().iconType)}function SO(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.innerTip)}}var EO=function(e){return["ant-form-item-explain",e]},IO=function(e){return{$implicit:e}};function TO(e,t){if(1&e&&(Hs(0,"div",7),Hs(1,"div"),Us(2,SO,2,1,"ng-container",8),qs(),qs()),2&e){var n=ra();js("ngClass",ic(4,EO,"ant-form-item-explain-"+n.status)),ho(1),js("@helpMotion",void 0),ho(1),js("nzStringTemplateOutlet",n.innerTip)("nzStringTemplateOutletContext",ic(6,IO,n.validateControl))}}function MO(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.nzExtra)}}function OO(e,t){if(1&e&&(Hs(0,"div",9),Us(1,MO,2,1,"ng-container",10),qs()),2&e){var n=ra();ho(1),js("nzStringTemplateOutlet",n.nzExtra)}}function DO(e,t){if(1&e&&(Ks(0),Ws(1,"i",3),Ys()),2&e){var n=t.$implicit,i=ra(2);ho(1),js("nzType",n)("nzTheme",i.tooltipIcon.theme)}}function AO(e,t){if(1&e&&(Hs(0,"span",1),Us(1,DO,2,2,"ng-container",2),qs()),2&e){var n=ra();js("nzTooltipTitle",n.nzTooltipTitle),ho(1),js("nzStringTemplateOutlet",n.tooltipIcon.type)}}var xO={type:"question-circle",theme:"outline"},RO=function(){var e=function(){function e(t,n,i,r){var o,s=this;b(this,e),this.nzConfigService=t,this.renderer=i,this.directionality=r,this._nzModuleName="form",this.nzLayout="horizontal",this.nzNoColon=!1,this.nzAutoTips={},this.nzDisableAutoTips=!1,this.nzTooltipIcon=xO,this.dir="ltr",this.destroy$=new V,this.inputChanges$=new V,this.renderer.addClass(n.nativeElement,"ant-form"),this.dir=this.directionality.value,null===(o=this.directionality.change)||void 0===o||o.pipe(ev(this.destroy$)).subscribe(function(e){s.dir=e})}return w(e,[{key:"getInputObservable",value:function(e){return this.inputChanges$.pipe(kf(function(t){return e in t}),J(function(t){return t[e]}))}},{key:"ngOnChanges",value:function(e){this.inputChanges$.next(e)}},{key:"ngOnDestroy",value:function(){this.inputChanges$.complete(),this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($_),Vs(su),Vs(cu),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["","nz-form",""]],hostVars:8,hostBindings:function(e,t){2&e&&ba("ant-form-horizontal","horizontal"===t.nzLayout)("ant-form-vertical","vertical"===t.nzLayout)("ant-form-inline","inline"===t.nzLayout)("ant-form-rtl","rtl"===t.dir)},inputs:{nzLayout:"nzLayout",nzNoColon:"nzNoColon",nzAutoTips:"nzAutoTips",nzDisableAutoTips:"nzDisableAutoTips",nzTooltipIcon:"nzTooltipIcon"},exportAs:["nzForm"],features:[It]}),Oy([Z_(),Sy(),Dy("design:type",Boolean)],e.prototype,"nzNoColon",void 0),Oy([Z_(),Dy("design:type",Object)],e.prototype,"nzAutoTips",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisableAutoTips",void 0),Oy([Z_(),Dy("design:type",Object)],e.prototype,"nzTooltipIcon",void 0),e}(),PO=function(){var e=function(){function e(t,n,i){b(this,e),this.cdr=i,this.status=null,this.hasFeedback=!1,this.withHelpClass=!1,this.destroy$=new V,n.addClass(t.nativeElement,"ant-form-item")}return w(e,[{key:"setWithHelpViaTips",value:function(e){this.withHelpClass=e,this.cdr.markForCheck()}},{key:"setStatus",value:function(e){this.status=e,this.cdr.markForCheck()}},{key:"setHasFeedback",value:function(e){this.hasFeedback=e,this.cdr.markForCheck()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu),Vs(xu))},e.\u0275cmp=at({type:e,selectors:[["nz-form-item"]],hostVars:12,hostBindings:function(e,t){2&e&&ba("ant-form-item-has-success","success"===t.status)("ant-form-item-has-warning","warning"===t.status)("ant-form-item-has-error","error"===t.status)("ant-form-item-is-validating","validating"===t.status)("ant-form-item-has-feedback",t.hasFeedback&&t.status)("ant-form-item-with-help",t.withHelpClass)},exportAs:["nzFormItem"],ngContentSelectors:wO,decls:1,vars:0,template:function(e,t){1&e&&(sa(),aa(0))},encapsulation:2,changeDetection:0}),e}(),zO={error:"close-circle-fill",validating:"loading",success:"check-circle-fill",warning:"exclamation-circle-fill"},LO=function(){var e=function(){function e(t,n,i,r,o,s){var a,u,c=this;b(this,e),this.nzFormItemComponent=n,this.cdr=i,this.nzFormDirective=s,this._hasFeedback=!1,this.validateChanges=T.EMPTY,this.validateString=null,this.destroyed$=new V,this.status=null,this.validateControl=null,this.iconType=null,this.innerTip=null,this.nzAutoTips={},this.nzDisableAutoTips="default",r.addClass(t.nativeElement,"ant-form-item-control"),this.subscribeAutoTips(o.localeChange.pipe(Gf(function(e){return c.localeId=e.locale}))),this.subscribeAutoTips(null===(a=this.nzFormDirective)||void 0===a?void 0:a.getInputObservable("nzAutoTips")),this.subscribeAutoTips(null===(u=this.nzFormDirective)||void 0===u?void 0:u.getInputObservable("nzDisableAutoTips").pipe(kf(function(){return"default"===c.nzDisableAutoTips})))}return w(e,[{key:"disableAutoTips",get:function(){var e;return"default"!==this.nzDisableAutoTips?wy(this.nzDisableAutoTips):null===(e=this.nzFormDirective)||void 0===e?void 0:e.nzDisableAutoTips}},{key:"nzHasFeedback",get:function(){return this._hasFeedback},set:function(e){this._hasFeedback=wy(e),this.nzFormItemComponent&&this.nzFormItemComponent.setHasFeedback(this._hasFeedback)}},{key:"nzValidateStatus",set:function(e){e instanceof FS||e instanceof KS?(this.validateControl=e,this.validateString=null,this.watchControl()):e instanceof nE?(this.validateControl=e.control,this.validateString=null,this.watchControl()):(this.validateString=e,this.validateControl=null,this.setStatus())}},{key:"watchControl",value:function(){var e=this;this.validateChanges.unsubscribe(),this.validateControl&&this.validateControl.statusChanges&&(this.validateChanges=this.validateControl.statusChanges.pipe(mf(null),ev(this.destroyed$)).subscribe(function(t){e.disableAutoTips||e.updateAutoErrorTip(),e.setStatus(),e.cdr.markForCheck()}))}},{key:"setStatus",value:function(){this.status=this.getControlStatus(this.validateString),this.iconType=this.status?zO[this.status]:null,this.innerTip=this.getInnerTip(this.status),this.nzFormItemComponent&&(this.nzFormItemComponent.setWithHelpViaTips(!!this.innerTip),this.nzFormItemComponent.setStatus(this.status))}},{key:"getControlStatus",value:function(e){return"warning"===e||this.validateControlStatus("INVALID","warning")?"warning":"error"===e||this.validateControlStatus("INVALID")?"error":"validating"===e||"pending"===e||this.validateControlStatus("PENDING")?"validating":"success"===e||this.validateControlStatus("VALID")?"success":null}},{key:"validateControlStatus",value:function(e,t){if(this.validateControl){var n=this.validateControl,i=n.dirty,r=n.touched,o=n.status;return(!!i||!!r)&&(t?this.validateControl.hasError(t):o===e)}return!1}},{key:"getInnerTip",value:function(e){switch(e){case"error":return!this.disableAutoTips&&this.autoErrorTip||this.nzErrorTip||null;case"validating":return this.nzValidatingTip||null;case"success":return this.nzSuccessTip||null;case"warning":return this.nzWarningTip||null;default:return null}}},{key:"updateAutoErrorTip",value:function(){var e,t,n,i,r,o,s,a,u,c,l,h,f;if(this.validateControl){var d=this.validateControl.errors||{},p="";for(var g in d)if(d.hasOwnProperty(g)&&(p=null!==(l=null!==(s=null!==(r=null!==(t=null===(e=d[g])||void 0===e?void 0:e[this.localeId])&&void 0!==t?t:null===(i=null===(n=this.nzAutoTips)||void 0===n?void 0:n[this.localeId])||void 0===i?void 0:i[g])&&void 0!==r?r:null===(o=this.nzAutoTips.default)||void 0===o?void 0:o[g])&&void 0!==s?s:null===(c=null===(u=null===(a=this.nzFormDirective)||void 0===a?void 0:a.nzAutoTips)||void 0===u?void 0:u[this.localeId])||void 0===c?void 0:c[g])&&void 0!==l?l:null===(f=null===(h=this.nzFormDirective)||void 0===h?void 0:h.nzAutoTips.default)||void 0===f?void 0:f[g]),p)break;this.autoErrorTip=p}}},{key:"subscribeAutoTips",value:function(e){var t=this;null==e||e.pipe(ev(this.destroyed$)).subscribe(function(){t.disableAutoTips||(t.updateAutoErrorTip(),t.setStatus(),t.cdr.markForCheck())})}},{key:"ngOnChanges",value:function(e){var t=e.nzDisableAutoTips,n=e.nzAutoTips,i=e.nzSuccessTip,r=e.nzWarningTip,o=e.nzErrorTip,s=e.nzValidatingTip;t||n?(this.updateAutoErrorTip(),this.setStatus()):(i||r||o||s)&&this.setStatus()}},{key:"ngOnInit",value:function(){this.setStatus()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"ngAfterContentInit",value:function(){this.validateControl||this.validateString||(this.nzValidateStatus=this.defaultValidateControl instanceof JS?this.defaultValidateControl.control:this.defaultValidateControl)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(PO,9),Vs(xu),Vs(cu),Vs(OT),Vs(RO,8))},e.\u0275cmp=at({type:e,selectors:[["nz-form-control"]],contentQueries:function(e,t,n){var i;(1&e&&Cc(n,mS,5),2&e)&&(kc(i=Sc())&&(t.defaultValidateControl=i.first))},inputs:{nzAutoTips:"nzAutoTips",nzDisableAutoTips:"nzDisableAutoTips",nzHasFeedback:"nzHasFeedback",nzValidateStatus:"nzValidateStatus",nzSuccessTip:"nzSuccessTip",nzWarningTip:"nzWarningTip",nzErrorTip:"nzErrorTip",nzValidatingTip:"nzValidatingTip",nzExtra:"nzExtra"},exportAs:["nzFormControl"],features:[It],ngContentSelectors:wO,decls:7,vars:3,consts:[[1,"ant-form-item-control-input"],[1,"ant-form-item-control-input-content"],[1,"ant-form-item-children-icon"],["nz-icon","",3,"nzType",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","ant-form-item-extra",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"ngClass"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-form-item-extra"],[4,"nzStringTemplateOutlet"]],template:function(e,t){1&e&&(sa(),Hs(0,"div",0),Hs(1,"div",1),aa(2),qs(),Hs(3,"span",2),Us(4,CO,1,1,"i",3),qs(),qs(),Us(5,TO,3,8,"div",4),Us(6,OO,2,1,"div",5)),2&e&&(ho(4),js("ngIf",t.nzHasFeedback&&t.iconType),ho(1),js("ngIf",t.innerTip),ho(1),js("ngIf",t.nzExtra))},directives:[th,ib,Xl,Iy],encapsulation:2,data:{animation:[kb]},changeDetection:0}),e}();function NO(e){var t="string"==typeof e?{type:e}:e;return Object.assign(Object.assign({},xO),t)}var FO=function(){var e=function(){function e(t,n,i,r){var o=this;b(this,e),this.cdr=i,this.nzFormDirective=r,this.nzRequired=!1,this.noColon="default",this._tooltipIcon="default",this.destroy$=new V,n.addClass(t.nativeElement,"ant-form-item-label"),this.nzFormDirective&&(this.nzFormDirective.getInputObservable("nzNoColon").pipe(kf(function(){return"default"===o.noColon}),ev(this.destroy$)).subscribe(function(){return o.cdr.markForCheck()}),this.nzFormDirective.getInputObservable("nzTooltipIcon").pipe(kf(function(){return"default"===o._tooltipIcon}),ev(this.destroy$)).subscribe(function(){return o.cdr.markForCheck()}))}return w(e,[{key:"nzNoColon",get:function(){var e;return"default"!==this.noColon?this.noColon:null===(e=this.nzFormDirective)||void 0===e?void 0:e.nzNoColon},set:function(e){this.noColon=wy(e)}},{key:"nzTooltipIcon",set:function(e){this._tooltipIcon=NO(e)}},{key:"tooltipIcon",get:function(){var e;return"default"!==this._tooltipIcon?this._tooltipIcon:NO((null===(e=this.nzFormDirective)||void 0===e?void 0:e.nzTooltipIcon)||xO)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu),Vs(xu),Vs(RO,12))},e.\u0275cmp=at({type:e,selectors:[["nz-form-label"]],inputs:{nzRequired:"nzRequired",nzNoColon:"nzNoColon",nzTooltipIcon:"nzTooltipIcon",nzFor:"nzFor",nzTooltipTitle:"nzTooltipTitle"},exportAs:["nzFormLabel"],ngContentSelectors:wO,decls:3,vars:6,consts:[["class","ant-form-item-tooltip","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],["nz-tooltip","",1,"ant-form-item-tooltip",3,"nzTooltipTitle"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType","nzTheme"]],template:function(e,t){1&e&&(sa(),Hs(0,"label"),aa(1),Us(2,AO,2,2,"span",0),qs()),2&e&&(ba("ant-form-item-no-colon",t.nzNoColon)("ant-form-item-required",t.nzRequired),Ns("for",t.nzFor),ho(2),js("ngIf",t.nzTooltipTitle))},directives:[th,_O,Iy,ib],encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzRequired",void 0),e}(),UO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sO,rb,kO,ay,Jv,My],sO]}),e}(),GO=function(){var e=function(){function e(t,n,i,r){b(this,e),this.ngControl=t,this.directionality=r,this.nzBorderless=!1,this.nzSize="default",this._disabled=!1,this.disabled$=new V,this.dir="ltr",this.destroy$=new V,n.addClass(i.nativeElement,"ant-input")}return w(e,[{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=null!=e&&"false"!="".concat(e)}},{key:"ngOnInit",value:function(){var e,t,n=this;this.ngControl&&(null===(e=this.ngControl.statusChanges)||void 0===e||e.pipe(kf(function(){return null!==n.ngControl.disabled}),ev(this.destroy$)).subscribe(function(){n.disabled$.next(n.ngControl.disabled)})),this.dir=this.directionality.value,null===(t=this.directionality.change)||void 0===t||t.pipe(ev(this.destroy$)).subscribe(function(e){n.dir=e})}},{key:"ngOnChanges",value:function(e){e.disabled&&this.disabled$.next(this.disabled)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(mS,10),Vs(cu),Vs(su),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["input","nz-input",""],["textarea","nz-input",""]],hostVars:11,hostBindings:function(e,t){2&e&&(Ns("disabled",t.disabled||null),ba("ant-input-disabled",t.disabled)("ant-input-borderless",t.nzBorderless)("ant-input-lg","large"===t.nzSize)("ant-input-sm","small"===t.nzSize)("ant-input-rtl","rtl"===t.dir))},inputs:{nzBorderless:"nzBorderless",nzSize:"nzSize",disabled:"disabled"},exportAs:["nzInput"],features:[It]}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzBorderless",void 0),e}(),VO=function(){var e=function(){function e(t,n,i,r){b(this,e),this.elementRef=t,this.ngZone=n,this.platform=i,this.resizeService=r,this.autosize=!1,this.el=this.elementRef.nativeElement,this.maxHeight=null,this.minHeight=null,this.destroy$=new V,this.inputGap=10}return w(e,[{key:"nzAutosize",set:function(e){var t;"string"==typeof e||!0===e?this.autosize=!0:"string"!=typeof(t=e)&&"boolean"!=typeof t&&(t.maxRows||t.minRows)&&(this.autosize=!0,this.minRows=e.minRows,this.maxRows=e.maxRows,this.maxHeight=this.setMaxHeight(),this.minHeight=this.setMinHeight())}},{key:"resizeToFitContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.cacheTextareaLineHeight(),this.cachedLineHeight){var n=this.el,i=n.value;if(t||this.minRows!==this.previousMinRows||i!==this.previousValue){var r=n.placeholder;n.classList.add("nz-textarea-autosize-measuring"),n.placeholder="";var o=Math.round((n.scrollHeight-this.inputGap)/this.cachedLineHeight)*this.cachedLineHeight+this.inputGap;null!==this.maxHeight&&o>this.maxHeight&&(o=this.maxHeight),null!==this.minHeight&&o<this.minHeight&&(o=this.minHeight),n.style.height="".concat(o,"px"),n.classList.remove("nz-textarea-autosize-measuring"),n.placeholder=r,"undefined"!=typeof requestAnimationFrame&&this.ngZone.runOutsideAngular(function(){return requestAnimationFrame(function(){var t=n.selectionStart,i=n.selectionEnd;e.destroy$.isStopped||document.activeElement!==n||n.setSelectionRange(t,i)})}),this.previousValue=i,this.previousMinRows=this.minRows}}}},{key:"cacheTextareaLineHeight",value:function(){if(!(this.cachedLineHeight>=0)&&this.el.parentNode){var e=this.el.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this.el.parentNode.appendChild(e),this.cachedLineHeight=e.clientHeight-this.inputGap,this.el.parentNode.removeChild(e),this.maxHeight=this.setMaxHeight(),this.minHeight=this.setMinHeight()}}},{key:"setMinHeight",value:function(){var e=this.minRows&&this.cachedLineHeight?this.minRows*this.cachedLineHeight+this.inputGap:null;return null!==e&&(this.el.style.minHeight="".concat(e,"px")),e}},{key:"setMaxHeight",value:function(){var e=this.maxRows&&this.cachedLineHeight?this.maxRows*this.cachedLineHeight+this.inputGap:null;return null!==e&&(this.el.style.maxHeight="".concat(e,"px")),e}},{key:"noopInputHandler",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.autosize&&this.platform.isBrowser&&(this.resizeToFitContent(),this.resizeService.subscribe().pipe(ev(this.destroy$)).subscribe(function(){return e.resizeToFitContent(!0)}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngDoCheck",value:function(){this.autosize&&this.platform.isBrowser&&this.resizeToFitContent()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(Zc),Vs(Xv),Vs(fy))},e.\u0275dir=dt({type:e,selectors:[["textarea","nzAutosize",""]],hostAttrs:["rows","1"],hostBindings:function(e,t){1&e&&Qs("input",function(){return t.noopInputHandler()})},inputs:{nzAutosize:"nzAutosize"},exportAs:["nzAutosize"]}),e}(),jO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,rb,Jv,My]]}),e}(),BO=["*"],HO=["inputElement"],qO=["nz-radio",""],WO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=dt({type:e,selectors:[["","nz-radio-button",""]]}),e}(),KO=function(){var e=function(){function e(){b(this,e),this.selected$=new Hv(1),this.touched$=new V,this.disabled$=new Hv(1),this.name$=new Hv(1)}return w(e,[{key:"touch",value:function(){this.touched$.next()}},{key:"select",value:function(e){this.selected$.next(e)}},{key:"setDisabled",value:function(e){this.disabled$.next(e)}},{key:"setName",value:function(e){this.name$.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),YO=function(){var e=function(){function e(t,n,i,r){b(this,e),this.cdr=t,this.nzRadioService=n,this.elementRef=i,this.directionality=r,this.value=null,this.destroy$=new V,this.onChange=function(){},this.onTouched=function(){},this.nzDisabled=!1,this.nzButtonStyle="outline",this.nzSize="default",this.nzName=null,this.dir="ltr",this.elementRef.nativeElement.classList.add("ant-radio-group")}return w(e,[{key:"ngOnInit",value:function(){var e,t=this;this.nzRadioService.selected$.pipe(ev(this.destroy$)).subscribe(function(e){t.value!==e&&(t.value=e,t.onChange(t.value))}),this.nzRadioService.touched$.pipe(ev(this.destroy$)).subscribe(function(){Promise.resolve().then(function(){return t.onTouched()})}),null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"ngOnChanges",value:function(e){var t=e.nzDisabled,n=e.nzName;t&&this.nzRadioService.setDisabled(this.nzDisabled),n&&this.nzRadioService.setName(this.nzName)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"writeValue",value:function(e){this.value=e,this.nzRadioService.select(e),this.cdr.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,this.nzRadioService.setDisabled(e),this.cdr.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(KO),Vs(su),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["nz-radio-group"]],hostVars:8,hostBindings:function(e,t){2&e&&ba("ant-radio-group-large","large"===t.nzSize)("ant-radio-group-small","small"===t.nzSize)("ant-radio-group-solid","solid"===t.nzButtonStyle)("ant-radio-group-rtl","rtl"===t.dir)},inputs:{nzDisabled:"nzDisabled",nzButtonStyle:"nzButtonStyle",nzSize:"nzSize",nzName:"nzName"},exportAs:["nzRadioGroup"],features:[Qa([KO,{provide:qC,useExisting:Ce(function(){return e}),multi:!0}]),It],ngContentSelectors:BO,decls:1,vars:0,template:function(e,t){1&e&&(sa(),aa(0))},encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),e}(),$O=function(){var e=function(){function e(t,n,i,r,o,s){b(this,e),this.elementRef=t,this.cdr=n,this.focusMonitor=i,this.directionality=r,this.nzRadioService=o,this.nzRadioButtonDirective=s,this.isNgModel=!1,this.destroy$=new V,this.isChecked=!1,this.name=null,this.isRadioButton=!!this.nzRadioButtonDirective,this.onChange=function(){},this.onTouched=function(){},this.nzValue=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.dir="ltr"}return w(e,[{key:"onHostClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.nzDisabled||this.isChecked||(this.nzRadioService&&this.nzRadioService.select(this.nzValue),this.isNgModel&&(this.isChecked=!0,this.onChange(!0)))}},{key:"focus",value:function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}},{key:"blur",value:function(){this.inputElement.nativeElement.blur()}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,this.cdr.markForCheck()}},{key:"writeValue",value:function(e){this.isChecked=e,this.cdr.markForCheck()}},{key:"registerOnChange",value:function(e){this.isNgModel=!0,this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"ngOnInit",value:function(){var e,t=this;this.nzRadioService&&(this.nzRadioService.name$.pipe(ev(this.destroy$)).subscribe(function(e){t.name=e,t.cdr.markForCheck()}),this.nzRadioService.disabled$.pipe(ev(this.destroy$)).subscribe(function(e){t.nzDisabled=e,t.cdr.markForCheck()}),this.nzRadioService.selected$.pipe(ev(this.destroy$)).subscribe(function(e){t.isChecked=t.nzValue===e,t.cdr.markForCheck()})),this.focusMonitor.monitor(this.elementRef,!0).subscribe(function(e){e||(Promise.resolve().then(function(){return t.onTouched()}),t.nzRadioService&&t.nzRadioService.touch())}),null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"ngAfterViewInit",value:function(){this.nzAutoFocus&&this.focus()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(xu),Vs(sM),Vs(rm,8),Vs(KO,8),Vs(WO,8))},e.\u0275cmp=at({type:e,selectors:[["","nz-radio",""],["","nz-radio-button",""]],viewQuery:function(e,t){var n;(1&e&&wc(HO,5),2&e)&&(kc(n=Sc())&&(t.inputElement=n.first))},hostVars:16,hostBindings:function(e,t){1&e&&Qs("click",function(e){return t.onHostClick(e)}),2&e&&ba("ant-radio-wrapper",!t.isRadioButton)("ant-radio-button-wrapper",t.isRadioButton)("ant-radio-wrapper-checked",t.isChecked&&!t.isRadioButton)("ant-radio-button-wrapper-checked",t.isChecked&&t.isRadioButton)("ant-radio-wrapper-disabled",t.nzDisabled&&!t.isRadioButton)("ant-radio-button-wrapper-disabled",t.nzDisabled&&t.isRadioButton)("ant-radio-wrapper-rtl",!t.isRadioButton&&"rtl"===t.dir)("ant-radio-button-wrapper-rtl",t.isRadioButton&&"rtl"===t.dir)},inputs:{nzValue:"nzValue",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus"},exportAs:["nzRadio"],features:[Qa([{provide:qC,useExisting:Ce(function(){return e}),multi:!0}])],attrs:qO,ngContentSelectors:BO,decls:6,vars:24,consts:[["type","radio",3,"disabled","checked"],["inputElement",""]],template:function(e,t){1&e&&(sa(),Hs(0,"span"),Ws(1,"input",0,1),Ws(3,"span"),qs(),Hs(4,"span"),aa(5),qs()),2&e&&(ba("ant-radio",!t.isRadioButton)("ant-radio-checked",t.isChecked&&!t.isRadioButton)("ant-radio-disabled",t.nzDisabled&&!t.isRadioButton)("ant-radio-button",t.isRadioButton)("ant-radio-button-checked",t.isChecked&&t.isRadioButton)("ant-radio-button-disabled",t.nzDisabled&&t.isRadioButton),ho(1),ba("ant-radio-input",!t.isRadioButton)("ant-radio-button-input",t.isRadioButton),js("disabled",t.nzDisabled)("checked",t.isChecked),Ns("autofocus",t.nzAutoFocus?"autofocus":null)("name",t.name),ho(2),ba("ant-radio-inner",!t.isRadioButton)("ant-radio-button-inner",t.isRadioButton))},encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzAutoFocus",void 0),e}(),ZO=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sE]]}),e}();function XO(e,t){if(1&e&&(Hs(0,"label",12),za(1),qs()),2&e){var n=t.$implicit;js("nzValue",n.value),ho(1),La(n.label)}}var JO=function(){var e=function(){function e(t,n,i,r){b(this,e),this.fb=t,this.modalRef=n,this.store=i,this.timHelperService=r,this.radioOption=[{label:"\u7537",value:Yw.TYPES.GENDER_MALE},{label:"\u5973",value:Yw.TYPES.GENDER_FEMALE},{label:"\u4e0d\u663e\u793a",value:Yw.TYPES.GENDER_UNKNOWN}]}return w(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({avatar:[this.userProfile.avatar],nick:[this.userProfile.nick],gender:[this.userProfile.gender]})}},{key:"submitForm",value:function(){var e=this,t=this.form.value;if(t.avatar&&-1===t.avatar.indexOf("http"))return this.store.dispatch(bw({msgType:qw.warning,message:"\u5934\u50cf\u5e94\u8be5\u662f Url \u5730\u5740"})),void(t.avatar="");var n={};Object.keys(t).forEach(function(e){t[e]&&(n[e]=t[e])}),this.timHelperService.tim.updateMyProfile(n).then(function(){e.store.dispatch(bw({msgType:qw.success,message:"\u4fee\u6539\u6210\u529f"})),e.modalRef.destroy()}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(uE),Vs(KM),Vs(xk),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["im-edit-profile"]],inputs:{userProfile:"userProfile"},decls:25,vars:16,consts:[["nz-form","",3,"formGroup","ngSubmit"],[3,"nzSm","nzXs"],["nz-input","","formControlName","avatar","placeholder","\u5934\u50cf\u5730\u5740"],["nzFor","avatar",3,"nzSm","nzXs"],["nz-input","","formControlName","nick","placeholder","\u6635\u79f0"],["formControlName","gender"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["nz-row","","nzJustify","center"],["nzPush","8",3,"nzSpan"],["nz-button","","nzType","primary"],[3,"nzSpan"],["nz-button","","nzType","default","type","button",3,"click"],["nz-radio","",3,"nzValue"]],template:function(e,t){1&e&&(Hs(0,"form",0),Qs("ngSubmit",function(){return t.submitForm()}),Hs(1,"nz-form-item"),Hs(2,"nz-form-label",1),Hs(3,"span"),za(4,"\u5934\u50cf"),qs(),qs(),Hs(5,"nz-form-control",1),Ws(6,"input",2),qs(),qs(),Hs(7,"nz-form-item"),Hs(8,"nz-form-label",3),za(9,"\u6635\u79f0"),qs(),Hs(10,"nz-form-control",1),Ws(11,"input",4),qs(),qs(),Hs(12,"nz-form-item"),Hs(13,"nz-form-label",1),za(14,"\u6027\u522b "),qs(),Hs(15,"nz-form-control",1),Hs(16,"nz-radio-group",5),Us(17,XO,2,2,"label",6),qs(),qs(),qs(),Hs(18,"nz-form-item",7),Hs(19,"nz-form-control",8),Hs(20,"button",9),za(21,"\u786e\u5b9a"),qs(),qs(),Hs(22,"nz-form-control",10),Hs(23,"button",11),Qs("click",function(){return t.modalRef.destroy()}),za(24,"\u53d6\u6d88"),qs(),qs(),qs(),qs()),2&e&&(js("formGroup",t.form),ho(2),js("nzSm",6)("nzXs",24),ho(3),js("nzSm",14)("nzXs",24),ho(3),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(3),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(2),js("ngForOf",t.radioOption),ho(2),js("nzSpan",12),ho(3),js("nzSpan",12))},directives:[YS,bS,RO,eE,rO,PO,oO,FO,LO,GO,YC,_S,nE,YO,Ql,VT,LT,AT,$O],styles:[""],changeDetection:0}),e}();function QO(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(3);ho(1),La(n.nzTitle)}}function eD(e,t){if(1&e&&(Hs(0,"div",9),Us(1,QO,2,1,"ng-container",8),qs()),2&e){var n=ra(2);ho(1),js("nzStringTemplateOutlet",n.nzTitle)}}function tD(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.nzContent)}}function nD(e,t){if(1&e&&(Hs(0,"div",2),Hs(1,"div",3),Ws(2,"div",4),Hs(3,"div",5),Hs(4,"div"),Us(5,eD,2,1,"div",6),Hs(6,"div",7),Us(7,tD,2,1,"ng-container",8),qs(),qs(),qs(),qs(),qs()),2&e){var n=ra();ba("ant-popover-rtl","rtl"===n.dir),js("ngClass",n._classMap)("ngStyle",n.nzOverlayStyle)("@.disabled",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),ho(5),js("ngIf",n.nzTitle),ho(2),js("nzStringTemplateOutlet",n.nzContent)}}var iD=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r,o,s,a){var u;return b(this,n),(u=t.call(this,e,i,r,o,s,a)).noAnimation=s,u._nzModuleName="popover",u.trigger="hover",u.placement="top",u.nzPopoverBackdrop=!1,u.visibleChange=new cc,u.componentFactory=u.resolver.resolveComponentFactory(rD),u}return w(n,[{key:"getProxyPropertyMap",value:function(){var e=this;return Object.assign({nzPopoverBackdrop:["nzBackdrop",function(){return e.nzPopoverBackdrop}]},f(_(n.prototype),"getProxyPropertyMap",this).call(this))}}]),n}(vO);return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(ju),Vs(nu),Vs(cu),Vs(BT,9),Vs($_))},e.\u0275dir=dt({type:e,selectors:[["","nz-popover",""]],hostVars:2,hostBindings:function(e,t){2&e&&ba("ant-popover-open",t.visible)},inputs:{trigger:["nzPopoverTrigger","trigger"],placement:["nzPopoverPlacement","placement"],nzPopoverBackdrop:"nzPopoverBackdrop",title:["nzPopoverTitle","title"],content:["nzPopoverContent","content"],directiveTitle:["nz-popover","directiveTitle"],origin:["nzPopoverOrigin","origin"],visible:["nzPopoverVisible","visible"],mouseEnterDelay:["nzPopoverMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopoverMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopoverOverlayClassName","overlayClassName"],overlayStyle:["nzPopoverOverlayStyle","overlayStyle"]},outputs:{visibleChange:"nzPopoverVisibleChange"},exportAs:["nzPopover"],features:[Es]}),Oy([Z_(),Dy("design:type",Boolean)],e.prototype,"nzPopoverBackdrop",void 0),e}(),rD=function(){var e=function(e){d(n,e);var t=g(n);function n(e,i,r){var o;return b(this,n),(o=t.call(this,e,i,r)).noAnimation=r,o._prefix="ant-popover",o}return w(n,[{key:"hasBackdrop",get:function(){return"click"===this.nzTrigger&&this.nzBackdrop}},{key:"isEmpty",value:function(){return yO(this.nzTitle)&&yO(this.nzContent)}}]),n}(bO);return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(rm,8),Vs(BT,9))},e.\u0275cmp=at({type:e,selectors:[["nz-popover"]],exportAs:["nzPopoverComponent"],features:[Es],decls:2,vars:5,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-popover",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],["role","tooltip",1,"ant-popover-inner"],["class","ant-popover-title",4,"ngIf"],[1,"ant-popover-inner-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-title"]],template:function(e,t){1&e&&(Us(0,nD,8,9,"ng-template",0,1,Mc),Qs("overlayOutsideClick",function(e){return t.onClickOutside(e)})("detach",function(){return t.hide()})("positionChange",function(e){return t.onPositionChange(e)})),2&e&&js("cdkConnectedOverlayHasBackdrop",t.hasBackdrop)("cdkConnectedOverlayOrigin",t.origin)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayOpen",t._visible)("cdkConnectedOverlayPush",!0)},directives:[ry,uO,Xl,uh,BT,th,Iy],encapsulation:2,data:{animation:[Ib]},changeDetection:0}),e}(),oD=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sy,My,cO,HT,kO]]}),e}(),sD=["textEl"];function aD(e,t){1&e&&Ws(0,"i",3),2&e&&js("nzType",ra().nzIcon)}function uD(e,t){if(1&e){var n=$s();Hs(0,"img",4),Qs("error",function(e){return $t(n),ra().imgError(e)}),qs()}if(2&e){var i=ra();js("src",i.nzSrc,gr),Ns("srcset",i.nzSrcSet,gr)("alt",i.nzAlt)}}function cD(e,t){if(1&e&&(Hs(0,"span",5,6),za(2),qs()),2&e){var n=ra();js("ngStyle",n.textStyles),ho(2),La(n.nzText)}}var lD=function(){var e=function(){function e(t,n,i,r){b(this,e),this.nzConfigService=t,this.elementRef=n,this.cdr=i,this.platform=r,this._nzModuleName="avatar",this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new cc,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.textStyles={},this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement,this.elementRef.nativeElement.classList.add("ant-avatar")}return w(e,[{key:"imgError",value:function(e){this.nzError.emit(e),e.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}},{key:"ngOnChanges",value:function(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}},{key:"calcStringSize",value:function(){if(this.hasText){var e=this.textEl.nativeElement.offsetWidth,t=this.el.getBoundingClientRect().width,n=2*this.nzGap<t?2*this.nzGap:8;this.textStyles={transform:"scale(".concat(t-n<e?(t-n)/e:1,") translateX(-50%)")},this.customSize&&Object.assign(this.textStyles,{lineHeight:this.customSize}),this.cdr.detectChanges()}}},{key:"notifyCalc",value:function(){var e=this;this.platform.isBrowser&&setTimeout(function(){e.calcStringSize()})}},{key:"setSizeStyle",value:function(){this.customSize="number"==typeof this.nzSize?"".concat(this.nzSize,"px"):null,this.cdr.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($_),Vs(su),Vs(xu),Vs(Xv))},e.\u0275cmp=at({type:e,selectors:[["nz-avatar"]],viewQuery:function(e,t){var n;(1&e&&wc(sD,5),2&e)&&(kc(n=Sc())&&(t.textEl=n.first))},hostVars:20,hostBindings:function(e,t){2&e&&(_a("width",t.customSize)("height",t.customSize)("line-height",t.customSize)("font-size",t.hasIcon&&t.customSize?t.nzSize/2:null,"px"),ba("ant-avatar-lg","large"===t.nzSize)("ant-avatar-sm","small"===t.nzSize)("ant-avatar-square","square"===t.nzShape)("ant-avatar-circle","circle"===t.nzShape)("ant-avatar-icon",t.nzIcon)("ant-avatar-image",t.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[It],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(e,t){1&e&&(Us(0,aD,1,1,"i",0),Us(1,uD,1,3,"img",1),Us(2,cD,3,2,"span",2)),2&e&&(js("ngIf",t.nzIcon&&t.hasIcon),ho(1),js("ngIf",t.nzSrc&&t.hasSrc),ho(1),js("ngIf",t.nzText&&t.hasText))},directives:[th,ib,uh],encapsulation:2,changeDetection:0}),Oy([Z_(),Dy("design:type",String)],e.prototype,"nzShape",void 0),Oy([Z_(),Dy("design:type",Object)],e.prototype,"nzSize",void 0),Oy([Z_(),Cy("InputNumber",function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ov(e)?Number(e):t}(e,void 0)}),Dy("design:type",Object)],e.prototype,"nzGap",void 0),e}(),hD=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,rb,Jv]]}),e}(),fD=function(){var e=function(){function e(){b(this,e),this.shape="circle",this.size="large",this.type="C2C"}return w(e,[{key:"src",get:function(){return this._src},set:function(e){this._src=e,this.avatarSrc=/^(https:|http:|\/\/)/.test(e)?e:this.getDefaultAvatar()}},{key:"ngOnInit",value:function(){}},{key:"getDefaultAvatar",value:function(){switch(this.type){case"C2C":return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png";case"GROUP":return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-3.png";case Yw.TYPES.CONV_SYSTEM:return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACpCAMAAAHy0MbyAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJYUExURQrBYAvBYRPDZhzGbCXIcSrJdSHHbxjFaQ7CYwzBYSnJdEzSi3bcpqLnw87z3+X47uj58Ov68uz68+n58ef579/36rzu05Djt2TYmz7OghnFai/KeIHfrcPw2OP47fz+/f////P8+Nb15K7ry1vVlBrFaw7CYlDTjqrqyPP899j15YrhsxDCZFfUksDv1vr+/C7KdyzKdq3qynLbo2HXmf7//rTszhTDZo/jtk7SjCjJc7nt0fX9+THLes3y3/3//oXgsA3CYjTMe5HjuA/CY8/z4IDfrRbEaLft0GbYnO779Pb9+cLv1x3GbNL04ub575zmv5flvEDPgzDLeaXoxIzitPD79TXMfB7GbeL47F7WlhLDZavqyfj9+03SjN326YvitEbQh3jdqO/79CLHcLHrzE/TjSPHcOT47vH79rHrzUvSivf9+vn++8zy3lXUkdf15SDHblnVk+D36ybIclrVlGfZnHjdpznNf1HTjhfEadv26I3itUfRiMfx26Pow0HPhJPkuZjlvMHv1zjNfkTQhWnZnhvFa8ry3TLLepXkurbt0Gvan4LfrknRiV/Wl9X05HHbo7/v1Z3mv8jx24jhskjRiTrNf8nx3Mvy3WLXmUfQh0XQhu3681LTj9n15ljVk2XYm6/ry+H37Or68bXsz2PYmjfMfW3aoLvu0zbMfTPLe77u1S7KeErRirDrzNr253fcpkPPhSvJdafpxr3u1N736n/frPL89o7itW/boWDXl3ndqJvmvvv+/Xveqsbx2tz26fT8+BHDZD3OgYTgr4fhsQAAAKRC35oAAADIdFJOU/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8A9ppxxwAAAAlwSFlzAAAXEQAAFxEByibzPwAABVpJREFUaEPt2zuP2koUB3BaN1dCLikwols5fVb5Cim3QaxEtNomDdJKaHWbbaBASPcTUKVBShv6NNH6e2Uefxs/5u0H7NX5NXiOzwwjY+yxPR4N422MhYqEw/KFiDbiZ3UY0V7D1ThizDMiAmIcIkIURaycxlGEQCFLRvUvlDJ8/j+MP2OhTGymxoqxCDc2ioz6/mgo5hB1C39BtBZGkEFAQIiLERKiKN2xtc0ffpSkD1MsVhzxSZxgoydLlA2QKfyLmA7S4Buiaitk5RBWQ04BYTXkFBBWQ04BYTXkFA6IqyCl5AvWNGB9DVbWYW3NGWvVZGOZsb8X8i+MAiHe5rOFeYfMbcSuliQzlA3WSGUQ0fqGPAExHWRJvxFUwzk2h6gacnKIqiEnt0VYCTm5FcJKyMlVzrB1yMl9tFzTBn5ASgFxFWRc6I+YSCjDmoZGDzisq8PaKuWQR52qaTi/BKjB2jo28mZjb7k2TkRRLGv9lCcgTUdrkiQbpbZTVk5003VYH2X3lo4SQkiAN3EokhYbBNuqDFWkN6xqoTRWKmt5d2SJZhSQESQfAyohJwRa0ECSvzka0LhHmrcZGtBYI80b6usYR1kG7ARuRO1KH63d0D8GausFdfiAykbI9fAdNS0+Id2RU2cl1HCivHrQ8bgPihpuvqOSi/RxFRd4XSwyU1bEIndKUcVbym8fYplhBeNlswfWVIJuTXh35WIH7lhjvEHhAcEuRO9/ZKOrPSKEEEIIIVey+e+f8Wy8e3V4yuxuWb4AV02QCFO/rH9CvB3FLRPlbB5P6lsmWBnuBQ3VYXUwNNPg8NTPhA+o1Vr9eKb7UUgJUnt8WDFHTgDDXTkGSQHM97ncHt6ooAGN4NtctstZZHnbo74O0rxpHsgVkObtHvV1Qq+4be2G3hCndiVqV6J2pb7afUJ9HbcpYk316Xx15smAeqiuhzxPW9TWq8xQdmW9u+53J7VQ3Dc0CJgCa98KHJLd2c5tOaQ7QzUr46yoJpeNK3ndY85QyYXPcApV3KCOA9cfTZqglp1fu+7/utT9Z9NNoFJLj2s8nuBYZSxx1dKd919OTKxixLOiNC+OnnkJBdtUKzN+ALo8gub/byy2xVq6bMRKoR3WxekjllfsJw1+fl7H+pjEfHd65ztKV90did/q8hynw+lmomEIfi6mdEKr284nx02y7GlPU+4IIYQQQgghhBBisVxuNptOp4j0YpOt60/wF/MfN9nvHzt0UGH2OfTJUT9eTdMipPmt9Hhj2K4Vr6hwTYcFOuOiu3lUYZauWzZ31S3s90hD2F3vQKF4xdBudq3/3G90wFfoc+t2grYtN75Gf1/x5QEWaGJAL7YpBSah0w3C2SZWGI0HPzzoJ0+66GZ2rDuPV+tUWkyvDGKbvGOx7vbxn9UnfG+g1cDnirbdfUE7A6Hu9om62yfqbp+ou336YN1tMTjn4oFPwm5TR/U6m+flJOCKvSr8vZQA5ZlggQa8/jn7TMTU8ZpZ20ary7SLfMpiv9J2V2klsfuE3WBHfFcnMjTal32buwsKcfgbcQ463bRSfxeZ6Rpf0a2A9xtcTLo4fKn0soH3fAp6P/o4xfWw3+amPfzhetpzuR2+olv3fMp89+56HJ1F+4kCdpQTihVnuc/HB5TLDpOB75VJE9GjZKX6cow1Bx0xWkR4A+AB5ZIU58Gejq5hnnGUaxxCMdacnlC+EZP8qHwqvwyB/ZZF0xt7RSJdF4eN6Wl7PP7asoHmFNv2J5JuyVk3Wnu8yt/fKkq32Jwlq/tbflMmet/e/ZEdncZfj0Gvvw4s35ztXpkjhBBCCCGkrdHoLzv9X1u4OdoGAAAAAElFTkSuQmCC";default:return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-1.png"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["im-avatar"]],inputs:{shape:"shape",size:"size",type:"type",title:"title",src:"src"},decls:1,vars:5,consts:[[3,"nzSize","nzShape","nzSrc","nzAlt","title"]],template:function(e,t){1&e&&Ws(0,"nz-avatar",0),2&e&&js("nzSize",t.size)("nzShape",t.shape)("nzSrc",t.avatarSrc)("nzAlt",t.title)("title",t.title)},directives:[lD],styles:[""]}),e}(),dD=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"userProfile",get:function(){return this._userProfile},set:function(e){switch(this._userProfile=e,e.gender){case Yw.TYPES.GENDER_MALE:this.className="icon-male";break;case Yw.TYPES.GENDER_FEMALE:this.className="icon-female";break;default:this.className=null}}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["im-profile-card"]],inputs:{userProfile:"userProfile"},decls:7,vars:4,consts:[[1,"profile-card-wrapper"],[1,"content"],[3,"src"],[1,"basic"],[1,"nick","text-ellipsis"],[1,"iconfont"]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"div",1),Ws(2,"im-avatar",2),Hs(3,"div",3),Hs(4,"span",4),za(5),qs(),Ws(6,"span",5),qs(),qs(),qs()),2&e&&(ho(2),js("src",null==t.userProfile?null:t.userProfile.avatar),ho(3),La((null==t.userProfile?null:t.userProfile.nick)||(null==t.userProfile?null:t.userProfile.userID)),ho(1),wa(t.className))},directives:[fD],styles:[".profile-header[_ngcontent-%COMP%]{display:flex;margin-bottom:12px}.profile-card-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.basic[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:12px}.icon-male[_ngcontent-%COMP%]{color:#6391f3}.icon-female[_ngcontent-%COMP%]{color:#ff8096}.nick[_ngcontent-%COMP%]{font-size:18px;margin-right:8px;max-width:100px;display:inline-block}im-avatar[_ngcontent-%COMP%]  .avatar{width:70px;height:70px}"],changeDetection:0}),e}();function pD(e,t){if(1&e){var n=$s();Hs(0,"div",5),Hs(1,"span"),za(2,"\u5f53\u524d\u7528\u6237"),qs(),Hs(3,"i",6),Qs("click",function(){return $t(n),ra().editProfile()}),qs(),qs()}}function gD(e,t){1&e&&Ws(0,"im-profile-card",7),2&e&&js("userProfile",ra().currentUserProfile)}var vD=function(){var e=function(){function e(t,n){b(this,e),this.store=t,this.modal=n}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(Pw).subscribe(function(t){t&&(e.currentUserProfile=t)})}},{key:"editProfile",value:function(){this.modal.create({nzTitle:"\u7f16\u8f91\u8d44\u6599",nzContent:JO,nzMaskClosable:!1,nzFooter:null,nzWidth:"40%",nzStyle:{top:"20px"},nzComponentParams:{userProfile:this.currentUserProfile}})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs(YM))},e.\u0275cmp=at({type:e,selectors:[["app-my-profile"]],decls:7,vars:3,consts:[["titleTemplate",""],["contentTemplate",""],[1,"my-profile-wrapper"],["nz-button","","nz-popover","","nzType","primary","nzPopoverTrigger","click","nzPopoverPlacement","right",3,"nzPopoverTitle","nzPopoverContent"],[3,"src"],[1,"title-container"],["nz-icon","","nzType","setting","nzTheme","outline",3,"click"],[3,"userProfile"]],template:function(e,t){if(1&e&&(Us(0,pD,4,0,"ng-template",null,0,Mc),Us(2,gD,1,1,"ng-template",null,1,Mc),Hs(4,"div",2),Hs(5,"div",3),Ws(6,"im-avatar",4),qs(),qs()),2&e){var n=Gs(1),i=Gs(3);ho(5),js("nzPopoverTitle",n)("nzPopoverContent",i),ho(1),js("src",t.currentUserProfile.avatar)}},directives:[AT,iD,fD,ib,dD],styles:[".title-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}.title-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.my-profile-wrapper[_ngcontent-%COMP%]{margin:15px}.my-profile-wrapper[_ngcontent-%COMP%]   im-avatar[_ngcontent-%COMP%]{cursor:pointer}.edit-my-profile[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;cursor:pointer}"]}),e}();function mD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=e.getFullYear(),i=e.getMonth()+1,r=e.getDate();return"".concat(n).concat(t).concat(bD(i)).concat(t).concat(bD(r))}function yD(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return t?"".concat(bD(n),":").concat(bD(i),":").concat(bD(r)):"".concat(n,":").concat(bD(i))}function _D(e){return"".concat(mD(e)," ").concat(yD(e))}function bD(e){return e<10?"0".concat(e):e}function kD(e,t){if(1&e&&(Hs(0,"span",18),za(1),qs()),2&e){var n=ra();js("title",n.conversation.userProfile.nick||n.conversation.userProfile.userID),ho(1),Na(" ",n.conversation.userProfile.nick||n.conversation.userProfile.userID," ")}}function wD(e,t){if(1&e&&(Hs(0,"span",18),za(1),qs()),2&e){var n=ra();js("title",n.conversation.groupProfile.name||n.conversation.groupProfile.groupID),ho(1),Na(" ",n.conversation.groupProfile.name||n.conversation.groupProfile.groupID," ")}}function CD(e,t){1&e&&(Hs(0,"span"),za(1,"\u7cfb\u7edf\u901a\u77e5 "),qs())}function SD(e,t){if(1&e&&(Hs(0,"span",19),za(1),qs()),2&e){var n=ra();ho(1),Na(" ",n.conversation.unreadCount>99?"99+":n.conversation.unreadCount," ")}}var ED=function(e){return{choose:e}},ID=function(){var e=function(){function e(t,n){b(this,e),this.store=t,this.timHelperService=n,this.TIM=Vw()}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.profileSubscription=this.store.select(Pw).subscribe(function(t){e.currentUserProfile=t})}},{key:"selectConversation",value:function(){this.conversation.conversationID!==this.currentConversation.conversationID&&this.timHelperService.checkoutConversation(this.conversation.conversationID)}},{key:"avatarSrc",get:function(){var e,t;switch(this.conversation.type){case"GROUP":return null===(e=this.conversation.groupProfile)||void 0===e?void 0:e.avatar;case"C2C":return null===(t=this.conversation.userProfile)||void 0===t?void 0:t.avatar;default:return null}}},{key:"date",get:function(){if(!this.conversation.lastMessage||!this.conversation.lastMessage.lastTime)return"";var e=new Date(1e3*this.conversation.lastMessage.lastTime);return function(e){return e.toDateString()===(new Date).toDateString()}(e)?yD(e):mD(e)}},{key:"messageForShow",get:function(){var e;return this.conversation.lastMessage.isRevoked?this.conversation.lastMessage.fromAccount===(null===(e=this.currentUserProfile)||void 0===e?void 0:e.userID)?"\u4f60\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f":this.conversation.type===Vw().TYPES.CONV_C2C?"\u5bf9\u65b9\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f":"".concat(this.conversation.lastMessage.fromAccount,"\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f"):this.conversation.lastMessage.messageForShow}},{key:"conversationName",get:function(){return this.conversation.type===Vw().TYPES.CONV_C2C?this.conversation.userProfile.nick||this.conversation.userProfile.userID:this.conversation.type===Vw().TYPES.CONV_GROUP?this.conversation.groupProfile.name||this.conversation.groupProfile.groupID:this.conversation.type===Vw().TYPES.CONV_SYSTEM?"\u7cfb\u7edf\u901a\u77e5":""}},{key:"deleteConversation",value:function(e){var t=this;e.stopPropagation(),this.timHelperService.tim.deleteConversation(this.conversation.conversationID).then(function(){t.store.dispatch(bw({message:"\u4f1a\u8bdd\u3010".concat(t.conversationName,"\u3011\u5220\u9664\u6210\u529f!"),msgType:qw.success})),t.store.dispatch(Sw())}).catch(function(e){t.store.dispatch(bw({message:"\u4f1a\u8bdd\u3010".concat(t.conversationName,"\u3011\u5220\u9664\u5931\u8d25!, error=").concat(e.message),msgType:qw.error}))})}},{key:"ngOnDestroy",value:function(){this.profileSubscription&&this.profileSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-conversation-item"]],inputs:{currentConversation:"currentConversation",conversation:"conversation"},decls:21,vars:12,consts:[[1,"conversation-item-container",3,"ngClass","click"],[1,"close-btn"],["title","\u5220\u9664\u4f1a\u8bdd",1,"tim-icon-close",3,"click"],[1,"warp"],[3,"src","type"],[1,"content"],[1,"row-1"],[1,"name"],[1,"text-ellipsis"],[3,"title",4,"ngIf"],[4,"ngIf"],[1,"unread-count"],["class","badge",4,"ngIf"],[1,"row-2"],[1,"summary"],["v-if","conversation.lastMessage",1,"text-ellipsis"],[1,"text",3,"title"],[1,"date"],[3,"title"],[1,"badge"]],template:function(e,t){1&e&&(Hs(0,"div",0),Qs("click",function(){return t.selectConversation()}),Hs(1,"div",1),Hs(2,"span",2),Qs("click",function(e){return t.deleteConversation(e)}),qs(),qs(),Hs(3,"div",3),Ws(4,"im-avatar",4),Hs(5,"div",5),Hs(6,"div",6),Hs(7,"div",7),Hs(8,"div",8),Us(9,kD,2,2,"span",9),Us(10,wD,2,2,"span",9),Us(11,CD,2,0,"span",10),qs(),qs(),Hs(12,"div",11),Us(13,SD,2,1,"span",12),qs(),qs(),Hs(14,"div",13),Hs(15,"div",14),Hs(16,"div",15),Hs(17,"span",16),za(18),qs(),qs(),qs(),Hs(19,"div",17),za(20),qs(),qs(),qs(),qs(),qs()),2&e&&(js("ngClass",ic(10,ED,t.conversation.conversationID===t.currentConversation.conversationID)),ho(4),js("src",t.avatarSrc)("type",t.conversation.type),ho(5),js("ngIf",t.conversation.type===t.TIM.TYPES.CONV_C2C),ho(1),js("ngIf",t.conversation.type===t.TIM.TYPES.CONV_GROUP),ho(1),js("ngIf",t.conversation.type===t.TIM.TYPES.CONV_SYSTEM),ho(2),js("ngIf",t.conversation.unreadCount>0),ho(4),js("title",t.conversation.lastMessage.messageForShow),ho(1),Na(" ",t.messageForShow," "),ho(2),Na(" ",t.date," "))},directives:[Xl,fD,th],styles:[".conversation-item-container[_ngcontent-%COMP%]{padding:15px 10px;cursor:pointer;position:relative;overflow:hidden;transition:.2s}.conversation-item-container[_ngcontent-%COMP%]:hover{background-color:#404953}.conversation-item-container[_ngcontent-%COMP%]:hover   .close-btn[_ngcontent-%COMP%]{right:3px}.conversation-item-container[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:-20px;top:3px;color:#76828c;transition:all .2s ease}.conversation-item-container[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#f35f5f}.conversation-item-container[_ngcontent-%COMP%]   .warp[_ngcontent-%COMP%]{display:flex}.conversation-item-container[_ngcontent-%COMP%]   .warp[_ngcontent-%COMP%]   im-avatar[_ngcontent-%COMP%]{padding-right:10px}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;height:40px;overflow:hidden}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]{display:flex;line-height:21px}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#f7f7f8;flex:1;min-width:0}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .unread-count[_ngcontent-%COMP%]{padding-left:10px;flex-shrink:0;color:#76828c;font-size:12px}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .unread-count[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{vertical-align:bottom;background-color:#f35f5f;border-radius:10px;color:#fff;display:inline-block;font-size:12px;height:18px;max-width:40px;line-height:18px;padding:0 6px;text-align:center;white-space:nowrap}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]{display:flex;font-size:12px;padding-top:3px}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{flex:1;overflow:hidden;min-width:0;color:#a5b5c1}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .remind[_ngcontent-%COMP%]{color:#f35f5f}.conversation-item-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding-left:10px;flex-shrink:0;text-align:right;color:#76828c}.choose[_ngcontent-%COMP%]{background-color:#404953}.context-menu-button[_ngcontent-%COMP%]{padding:10px;border:2px solid #2d8cf0;border-radius:8px}"]}),e}();function TD(e,t){if(1&e&&Ws(0,"app-conversation-item",10),2&e){var n=t.$implicit;js("currentConversation",ra().currentConversation)("conversation",n)}}function MD(e,t){if(1&e){var n=$s();Hs(0,"nz-form-item"),Hs(1,"nz-form-label",11),za(2,"\u7528\u6237ID"),qs(),Hs(3,"nz-form-control",11),Hs(4,"input",12),Qs("ngModelChange",function(e){return $t(n),ra().userID=e}),qs(),qs(),qs()}if(2&e){var i=ra();ho(1),js("nzSpan",6),ho(2),js("nzSpan",14),ho(1),js("ngModel",i.userID)}}var OD=function(){var e=function(){function e(t,n){b(this,e),this.store=t,this.timHelperService=n,this.conversationList=[],this.timeout=null,this.showDialog=!1,this.userID=""}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.storeSubscription=this.store.select(Dw).subscribe(function(t){e.currentConversation=t}),this.subscription=this.store.select(Aw).subscribe(function(t){e.conversationList=t})}},{key:"add",value:function(){this.showDialog=!0}},{key:"handleOk",value:function(){"@TIM#SYSTEM"!==this.userID&&(this.timHelperService.checkoutConversation("C2C".concat(this.userID)),this.showDialog=!1),this.userID=""}},{key:"handleCancel",value:function(){this.showDialog=!1}},{key:"refresh",value:function(){var e=this;this.timHelperService.tim.getConversationList().then(function(t){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),e.store.dispatch(bw({msgType:qw.success,message:"\u5237\u65b0\u6210\u529f\uff01"}))}).catch(function(e){console.error("getConversationList error:",e)})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe(),this.storeSubscription&&this.storeSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-conversation-list"]],decls:11,vars:3,consts:[[1,"list-container"],[1,"header-bar"],["title","\u5237\u65b0\u5217\u8868",3,"click"],[1,"tim-icon-refresh"],["title","\u521b\u5efa\u4f1a\u8bdd",3,"click"],[1,"tim-icon-add"],[1,"scroll-container"],[3,"currentConversation","conversation",4,"ngFor","ngForOf"],["nzTitle","\u53d1\u8d77\u4f1a\u8bdd",3,"nzVisible","nzContent","nzVisibleChange","nzOnCancel","nzOnOk"],["content",""],[3,"currentConversation","conversation"],[3,"nzSpan"],["nz-input","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(Hs(0,"div",0),Hs(1,"div",1),Hs(2,"button",2),Qs("click",function(){return t.refresh()}),Ws(3,"i",3),qs(),Hs(4,"button",4),Qs("click",function(){return t.add()}),Ws(5,"i",5),qs(),qs(),Hs(6,"div",6),Us(7,TD,1,2,"app-conversation-item",7),qs(),qs(),Hs(8,"nz-modal",8),Qs("nzVisibleChange",function(e){return t.showDialog=e})("nzOnCancel",function(){return t.handleCancel()})("nzOnOk",function(){return t.handleOk()}),qs(),Us(9,MD,5,3,"ng-template",null,9,Mc)),2&e){var n=Gs(10);ho(7),js("ngForOf",t.conversationList),ho(1),js("nzVisible",t.showDialog)("nzContent",n)}},directives:[Ql,JM,ID,rO,PO,oO,FO,LO,GO,YC,_S,KS],styles:[".list-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex flex-direction column}.header-bar[_ngcontent-%COMP%]{flex-shrink:0;height:50px;border-bottom:1px solid #303841;padding:10px 10px 10px 20px}.header-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;display:inline-block;cursor:pointer;background:#303841;border:none;color:#76828c;box-sizing:border-box;transition:.3s;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin:0 10px 0 0;padding:0;width:30px;height:30px;line-height:34px;font-size:24px;text-align:center;white-space:nowrap;border-radius:50%;outline:0}.header-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:rotate(1turn);color:#5cadff}.header-bar[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{overflow-y:scroll;flex:1}.bottom-circle-btn[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px}.refresh[_ngcontent-%COMP%]{bottom:70px}"]}),e}(),DD=["moz","ms","webkit"],AD=function(){if("undefined"==typeof window)return function(){return 0};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);var e,t=DD.filter(function(e){return"".concat(e,"RequestAnimationFrame")in window})[0];return t?window["".concat(t,"RequestAnimationFrame")]:(e=0,function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r})}();function xD(e,t){1&e&&Ws(0,"nz-empty",6),2&e&&js("nzNotFoundImage","simple")}function RD(e,t){1&e&&Ws(0,"nz-empty",7),2&e&&js("nzNotFoundImage","simple")}function PD(e,t){1&e&&Ws(0,"nz-empty")}function zD(e,t){1&e&&(Ks(0,2),Us(1,xD,1,1,"nz-empty",3),Us(2,RD,1,1,"nz-empty",4),Us(3,PD,1,0,"nz-empty",5),Ys()),2&e&&(js("ngSwitch",ra().size),ho(1),js("ngSwitchCase","normal"),ho(1),js("ngSwitchCase","small"))}function LD(e,t){}function ND(e,t){1&e&&Us(0,LD,0,0,"ng-template",8),2&e&&js("cdkPortalOutlet",ra(2).contentPortal)}function FD(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),Na(" ",n.content," ")}}function UD(e,t){if(1&e&&(Ks(0),Us(1,ND,1,1,void 0,1),Us(2,FD,2,1,"ng-container",1),Ys()),2&e){var n=ra();ho(1),js("ngIf","string"!==n.contentType),ho(1),js("ngIf","string"===n.contentType)}}function GD(e,t){if(1&e&&(Ks(0),Ws(1,"img",5),Ys()),2&e){var n=ra(2);ho(1),js("src",n.nzNotFoundImage,gr)("alt",n.isContentString?n.nzNotFoundContent:"empty")}}function VD(e,t){if(1&e&&(Ks(0),Us(1,GD,2,2,"ng-container",4),Ys()),2&e){var n=ra();ho(1),js("nzStringTemplateOutlet",n.nzNotFoundImage)}}function jD(e,t){1&e&&Ws(0,"nz-empty-default")}function BD(e,t){1&e&&Ws(0,"nz-empty-simple")}function HD(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),Na(" ",n.isContentString?n.nzNotFoundContent:n.locale.description," ")}}function qD(e,t){if(1&e&&(Hs(0,"p",6),Us(1,HD,2,1,"ng-container",4),qs()),2&e){var n=ra();ho(1),js("nzStringTemplateOutlet",n.nzNotFoundContent)}}function WD(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),Na(" ",n.nzNotFoundFooter," ")}}function KD(e,t){if(1&e&&(Hs(0,"div",7),Us(1,WD,2,1,"ng-container",4),qs()),2&e){var n=ra();ho(1),js("nzStringTemplateOutlet",n.nzNotFoundFooter)}}var YD=new ai("nz-empty-component-name"),$D=function(){var e=function(){function e(t,n,i,r){b(this,e),this.configService=t,this.viewContainerRef=n,this.cdr=i,this.injector=r,this.contentType="string",this.size="",this.destroy$=new V}return w(e,[{key:"ngOnChanges",value:function(e){e.nzComponentName&&(this.size=function(e){switch(e){case"table":case"list":return"normal";case"select":case"tree-select":case"cascader":case"transfer":return"small";default:return""}}(e.nzComponentName.currentValue)),e.specificContent&&!e.specificContent.isFirstChange()&&(this.content=e.specificContent.currentValue,this.renderEmpty())}},{key:"ngOnInit",value:function(){this.subscribeDefaultEmptyContentChange()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"renderEmpty",value:function(){var e=this.content;if("string"==typeof e)this.contentType="string";else if(e instanceof Lu){var t={$implicit:this.nzComponentName};this.contentType="template",this.contentPortal=new Yg(e,this.viewContainerRef,t)}else if(e instanceof ci){var n=Cs.create({parent:this.injector,providers:[{provide:YD,useValue:this.nzComponentName}]});this.contentType="component",this.contentPortal=new Kg(e,this.viewContainerRef,n)}else this.contentType="string",this.contentPortal=void 0;this.cdr.detectChanges()}},{key:"subscribeDefaultEmptyContentChange",value:function(){var e=this;this.configService.getConfigChangeEventForComponent("empty").pipe(mf(!0),ev(this.destroy$)).subscribe(function(){e.content=e.specificContent||e.getUserDefaultEmptyContent(),e.renderEmpty()})}},{key:"getUserDefaultEmptyContent",value:function(){return(this.configService.getConfigForComponent("empty")||{}).nzDefaultEmptyContent}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($_),Vs(ju),Vs(xu),Vs(Cs))},e.\u0275cmp=at({type:e,selectors:[["nz-embed-empty"]],inputs:{nzComponentName:"nzComponentName",specificContent:"specificContent"},exportAs:["nzEmbedEmpty"],features:[It],decls:2,vars:2,consts:[[3,"ngSwitch",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],["class","ant-empty-normal",3,"nzNotFoundImage",4,"ngSwitchCase"],["class","ant-empty-small",3,"nzNotFoundImage",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"ant-empty-normal",3,"nzNotFoundImage"],[1,"ant-empty-small",3,"nzNotFoundImage"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(Us(0,zD,4,3,"ng-container",0),Us(1,UD,3,2,"ng-container",1)),2&e&&(js("ngIf",!t.content&&null!==t.specificContent),ho(1),js("ngIf",t.content))},directives:function(){return[th,oh,sh,ah,XD,Jg]},encapsulation:2,changeDetection:0}),e}(),ZD=["default","simple"],XD=function(){var e=function(){function e(t,n){b(this,e),this.i18n=t,this.cdr=n,this.nzNotFoundImage="default",this.isContentString=!1,this.isImageBuildIn=!0,this.destroy$=new V}return w(e,[{key:"ngOnChanges",value:function(e){var t=e.nzNotFoundContent,n=e.nzNotFoundImage;if(t&&(this.isContentString="string"==typeof t.currentValue),n){var i=n.currentValue||"default";this.isImageBuildIn=ZD.findIndex(function(e){return e===i})>-1}}},{key:"ngOnInit",value:function(){var e=this;this.i18n.localeChange.pipe(ev(this.destroy$)).subscribe(function(){e.locale=e.i18n.getLocaleData("Empty"),e.cdr.markForCheck()})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(OT),Vs(xu))},e.\u0275cmp=at({type:e,selectors:[["nz-empty"]],hostAttrs:[1,"ant-empty"],inputs:{nzNotFoundImage:"nzNotFoundImage",nzNotFoundContent:"nzNotFoundContent",nzNotFoundFooter:"nzNotFoundFooter"},exportAs:["nzEmpty"],features:[It],decls:6,vars:5,consts:[[1,"ant-empty-image"],[4,"ngIf"],["class","ant-empty-description",4,"ngIf"],["class","ant-empty-footer",4,"ngIf"],[4,"nzStringTemplateOutlet"],[3,"src","alt"],[1,"ant-empty-description"],[1,"ant-empty-footer"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,VD,2,1,"ng-container",1),Us(2,jD,1,0,"nz-empty-default",1),Us(3,BD,1,0,"nz-empty-simple",1),qs(),Us(4,qD,2,1,"p",2),Us(5,KD,2,1,"div",3)),2&e&&(ho(1),js("ngIf",!t.isImageBuildIn),ho(1),js("ngIf",t.isImageBuildIn&&"simple"!==t.nzNotFoundImage),ho(1),js("ngIf",t.isImageBuildIn&&"simple"===t.nzNotFoundImage),ho(1),js("ngIf",null!==t.nzNotFoundContent),ho(1),js("ngIf",t.nzNotFoundFooter))},directives:function(){return[th,Iy,JD,QD]},encapsulation:2,changeDetection:0}),e}(),JD=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["nz-empty-default"]],exportAs:["nzEmptyDefault"],decls:12,vars:0,consts:[["width","184","height","152","viewBox","0 0 184 152","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-default"],["fill","none","fill-rule","evenodd"],["transform","translate(24 31.67)"],["cx","67.797","cy","106.89","rx","67.797","ry","12.668",1,"ant-empty-img-default-ellipse"],["d","M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",1,"ant-empty-img-default-path-1"],["d","M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z","transform","translate(13.56)",1,"ant-empty-img-default-path-2"],["d","M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",1,"ant-empty-img-default-path-3"],["d","M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",1,"ant-empty-img-default-path-4"],["d","M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",1,"ant-empty-img-default-path-5"],["transform","translate(149.65 15.383)",1,"ant-empty-img-default-g"],["cx","20.654","cy","3.167","rx","2.849","ry","2.815"],["d","M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"]],template:function(e,t){1&e&&(wn(),Hs(0,"svg",0),Hs(1,"g",1),Hs(2,"g",2),Ws(3,"ellipse",3),Ws(4,"path",4),Ws(5,"path",5),Ws(6,"path",6),Ws(7,"path",7),qs(),Ws(8,"path",8),Hs(9,"g",9),Ws(10,"ellipse",10),Ws(11,"path",11),qs(),qs(),qs())},encapsulation:2,changeDetection:0}),e}(),QD=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["nz-empty-simple"]],exportAs:["nzEmptySimple"],decls:6,vars:0,consts:[["width","64","height","41","viewBox","0 0 64 41","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-simple"],["transform","translate(0 1)","fill","none","fill-rule","evenodd"],["cx","32","cy","33","rx","32","ry","7",1,"ant-empty-img-simple-ellipse"],["fill-rule","nonzero",1,"ant-empty-img-simple-g"],["d","M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"],["d","M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",1,"ant-empty-img-simple-path"]],template:function(e,t){1&e&&(wn(),Hs(0,"svg",0),Hs(1,"g",1),Ws(2,"ellipse",2),Hs(3,"g",3),Ws(4,"path",4),Ws(5,"path",5),qs(),qs(),qs())},encapsulation:2,changeDetection:0}),e}(),eA=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,Qg,My,DT]]}),e}(),tA=["*"];function nA(e,t){if(1&e&&(Hs(0,"div",4),Ws(1,"nz-embed-empty",5),qs()),2&e){var n=ra();ho(1),js("specificContent",n.notFoundContent)}}function iA(e,t){1&e&&Ws(0,"nz-option-item-group",9),2&e&&js("nzLabel",ra().$implicit.groupLabel)}function rA(e,t){if(1&e){var n=$s();Hs(0,"nz-option-item",10),Qs("itemHover",function(e){return $t(n),ra(2).onItemHover(e)})("itemClick",function(e){return $t(n),ra(2).onItemClick(e)}),qs()}if(2&e){var i=ra().$implicit,r=ra();js("icon",r.menuItemSelectedIcon)("customContent",i.nzCustomContent)("template",i.template)("grouped",!!i.groupLabel)("disabled",i.nzDisabled)("showState","tags"===r.mode||"multiple"===r.mode)("label",i.nzLabel)("compareWith",r.compareWith)("activatedValue",r.activatedValue)("listOfSelectedValue",r.listOfSelectedValue)("value",i.nzValue)}}function oA(e,t){1&e&&(Ks(0,6),Us(1,iA,1,1,"nz-option-item-group",7),Us(2,rA,1,11,"nz-option-item",8),Ys()),2&e&&(js("ngSwitch",t.$implicit.type),ho(1),js("ngSwitchCase","group"),ho(1),js("ngSwitchCase","item"))}function sA(e,t){}function aA(e,t){1&e&&aa(0)}var uA=["inputElement"],cA=["mirrorElement"];function lA(e,t){1&e&&Ws(0,"span",3,4)}function hA(e,t){if(1&e&&Ws(0,"nz-select-item",6),2&e){var n=ra(2);js("deletable",!1)("disabled",!1)("removeIcon",n.removeIcon)("label",n.listOfTopItem[0].nzLabel)("contentTemplateOutlet",n.customTemplate)("contentTemplateOutletContext",n.listOfTopItem[0])}}function fA(e,t){if(1&e){var n=$s();Ks(0),Hs(1,"nz-select-search",4),Qs("isComposingChange",function(e){return $t(n),ra().isComposingChange(e)})("valueChange",function(e){return $t(n),ra().onInputValueChange(e)}),qs(),Us(2,hA,1,6,"nz-select-item",5),Ys()}if(2&e){var i=ra();ho(1),js("nzId",i.nzId)("disabled",i.disabled)("value",i.inputValue)("showInput",i.showSearch)("mirrorSync",!1)("autofocus",i.autofocus)("focusTrigger",i.open),ho(1),js("ngIf",i.isShowSingleLabel)}}function dA(e,t){if(1&e){var n=$s();Hs(0,"nz-select-item",9),Qs("delete",function(){var e=$t(n).$implicit;return ra(2).onDeleteItem(e.contentTemplateOutletContext)}),qs()}if(2&e){var i=t.$implicit,r=ra(2);js("removeIcon",r.removeIcon)("label",i.nzLabel)("disabled",i.nzDisabled||r.disabled)("contentTemplateOutlet",i.contentTemplateOutlet)("deletable",!0)("contentTemplateOutletContext",i.contentTemplateOutletContext)}}function pA(e,t){if(1&e){var n=$s();Ks(0),Us(1,dA,1,6,"nz-select-item",7),Hs(2,"nz-select-search",8),Qs("isComposingChange",function(e){return $t(n),ra().isComposingChange(e)})("valueChange",function(e){return $t(n),ra().onInputValueChange(e)}),qs(),Ys()}if(2&e){var i=ra();ho(1),js("ngForOf",i.listOfSlicedItem)("ngForTrackBy",i.trackValue),ho(1),js("nzId",i.nzId)("disabled",i.disabled)("value",i.inputValue)("autofocus",i.autofocus)("showInput",!0)("mirrorSync",!0)("focusTrigger",i.open)}}function gA(e,t){1&e&&Ws(0,"nz-select-placeholder",10),2&e&&js("placeholder",ra().placeHolder)}function vA(e,t){if(1&e&&Ws(0,"nz-select-arrow",5),2&e){var n=ra();js("loading",n.nzLoading)("search",n.nzOpen&&n.nzShowSearch)("suffixIcon",n.nzSuffixIcon)}}function mA(e,t){if(1&e){var n=$s();Hs(0,"nz-select-clear",6),Qs("clear",function(){return $t(n),ra().onClearSelection()}),qs()}2&e&&js("clearIcon",ra().nzClearIcon)}function yA(e,t){if(1&e){var n=$s();Hs(0,"nz-option-container",7),Qs("keydown",function(e){return $t(n),ra().onKeyDown(e)})("itemClick",function(e){return $t(n),ra().onItemClick(e)})("scrollToBottom",function(){return $t(n),ra().nzScrollToBottom.emit()}),qs()}if(2&e){var i=ra();ba("ant-select-dropdown-placement-bottomLeft","bottom"===i.dropDownPosition)("ant-select-dropdown-placement-topLeft","top"===i.dropDownPosition),js("ngStyle",i.nzDropdownStyle)("itemSize",i.nzOptionHeightPx)("maxItemLength",i.nzOptionOverflowSize)("matchWidth",i.nzDropdownMatchSelectWidth)("@slideMotion","enter")("@.disabled",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("nzNoAnimation",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("listOfContainerItem",i.listOfContainerItem)("menuItemSelectedIcon",i.nzMenuItemSelectedIcon)("notFoundContent",i.nzNotFoundContent)("activatedValue",i.activatedValue)("listOfSelectedValue",i.listOfValue)("dropdownRender",i.nzDropdownRender)("compareWith",i.compareWith)("mode",i.nzMode)}}function _A(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra();ho(1),La(n.nzLabel)}}function bA(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra();ho(1),La(n.label)}}function kA(e,t){}function wA(e,t){if(1&e&&(Ks(0),Us(1,kA,0,0,"ng-template",3),Ys()),2&e){var n=ra();ho(1),js("ngTemplateOutlet",n.template)}}function CA(e,t){1&e&&Ws(0,"i",6)}function SA(e,t){if(1&e&&(Hs(0,"div",4),Us(1,CA,1,0,"i",5),qs()),2&e){var n=ra();ho(1),js("ngIf",!n.icon)("ngIfElse",n.icon)}}function EA(e,t){1&e&&Ws(0,"i",2)}function IA(e,t){1&e&&Ws(0,"i",7)}function TA(e,t){1&e&&Ws(0,"i",8)}function MA(e,t){if(1&e&&(Ks(0),Us(1,IA,1,0,"i",5),Us(2,TA,1,0,"i",6),Ys()),2&e){var n=ra(2);ho(1),js("ngIf",!n.search),ho(1),js("ngIf",n.search)}}function OA(e,t){if(1&e&&(Ks(0),Ws(1,"i",10),Ys()),2&e){var n=t.$implicit;ho(1),js("nzType",n)}}function DA(e,t){1&e&&Us(0,OA,2,1,"ng-container",9),2&e&&js("nzStringTemplateOutlet",ra(2).suffixIcon)}function AA(e,t){if(1&e&&(Us(0,MA,3,2,"ng-container",3),Us(1,DA,1,1,"ng-template",null,4,Mc)),2&e){var n=Gs(2);js("ngIf",!ra().suffixIcon)("ngIfElse",n)}}function xA(e,t){1&e&&Ws(0,"i",1)}function RA(e,t){if(1&e&&(Hs(0,"div",4),za(1),qs()),2&e){var n=ra(2);ho(1),La(n.label)}}function PA(e,t){1&e&&za(0),2&e&&La(ra(2).label)}function zA(e,t){if(1&e&&(Ks(0),Us(1,RA,2,1,"div",2),Us(2,PA,1,1,"ng-template",null,3,Mc),Ys()),2&e){var n=Gs(3),i=ra();ho(1),js("ngIf",i.deletable)("ngIfElse",n)}}function LA(e,t){1&e&&Ws(0,"i",7)}function NA(e,t){if(1&e){var n=$s();Hs(0,"span",5),Qs("click",function(e){return $t(n),ra().onDelete(e)}),Us(1,LA,1,0,"i",6),qs()}if(2&e){var i=ra();ho(1),js("ngIf",!i.removeIcon)("ngIfElse",i.removeIcon)}}var FA=function(e){return{$implicit:e}};function UA(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra();ho(1),Na(" ",n.placeholder," ")}}var GA=function(){var e=function(){function e(){b(this,e),this.nzLabel=null,this.changes=new V}return w(e,[{key:"ngOnChanges",value:function(){this.changes.next()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["nz-option-group"]],inputs:{nzLabel:"nzLabel"},exportAs:["nzOptionGroup"],features:[It],ngContentSelectors:tA,decls:1,vars:0,template:function(e,t){1&e&&(sa(),aa(0))},encapsulation:2,changeDetection:0}),e}(),VA=function(){var e=function(){function e(t){b(this,e),this.elementRef=t,this.notFoundContent=void 0,this.menuItemSelectedIcon=null,this.dropdownRender=null,this.activatedValue=null,this.listOfSelectedValue=[],this.mode="default",this.matchWidth=!0,this.itemSize=32,this.maxItemLength=8,this.listOfContainerItem=[],this.itemClick=new cc,this.scrollToBottom=new cc,this.scrolledIndex=0,this.elementRef.nativeElement.classList.add("ant-select-dropdown")}return w(e,[{key:"onItemClick",value:function(e){this.itemClick.emit(e)}},{key:"onItemHover",value:function(e){this.activatedValue=e}},{key:"trackValue",value:function(e,t){return t.key}},{key:"onScrolledIndexChange",value:function(e){this.scrolledIndex=e,e===this.listOfContainerItem.length-this.maxItemLength&&this.scrollToBottom.emit()}},{key:"scrollToActivatedValue",value:function(){var e=this,t=this.listOfContainerItem.findIndex(function(t){return e.compareWith(t.key,e.activatedValue)});(t<this.scrolledIndex||t>=this.scrolledIndex+this.maxItemLength)&&this.cdkVirtualScrollViewport.scrollToIndex(t||0)}},{key:"ngOnChanges",value:function(e){var t=e.listOfContainerItem,n=e.activatedValue;(t||n)&&this.scrollToActivatedValue()}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){return e.scrollToActivatedValue()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-option-container"]],viewQuery:function(e,t){var n;(1&e&&wc(_m,7),2&e)&&(kc(n=Sc())&&(t.cdkVirtualScrollViewport=n.first))},inputs:{notFoundContent:"notFoundContent",menuItemSelectedIcon:"menuItemSelectedIcon",dropdownRender:"dropdownRender",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",mode:"mode",matchWidth:"matchWidth",itemSize:"itemSize",maxItemLength:"maxItemLength",listOfContainerItem:"listOfContainerItem",compareWith:"compareWith"},outputs:{itemClick:"itemClick",scrollToBottom:"scrollToBottom"},exportAs:["nzOptionContainer"],features:[It],decls:5,vars:14,consts:[["class","ant-select-item-empty",4,"ngIf"],[3,"itemSize","maxBufferPx","minBufferPx","scrolledIndexChange"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"ngTemplateOutlet"],[1,"ant-select-item-empty"],["nzComponentName","select",3,"specificContent"],[3,"ngSwitch"],[3,"nzLabel",4,"ngSwitchCase"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick",4,"ngSwitchCase"],[3,"nzLabel"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick"]],template:function(e,t){1&e&&(Hs(0,"div"),Us(1,nA,2,1,"div",0),Hs(2,"cdk-virtual-scroll-viewport",1),Qs("scrolledIndexChange",function(e){return t.onScrolledIndexChange(e)}),Us(3,oA,3,3,"ng-template",2),qs(),Us(4,sA,0,0,"ng-template",3),qs()),2&e&&(ho(1),js("ngIf",0===t.listOfContainerItem.length),ho(1),_a("height",t.listOfContainerItem.length*t.itemSize,"px")("max-height",t.itemSize*t.maxItemLength,"px"),ba("full-width",!t.matchWidth),js("itemSize",t.itemSize)("maxBufferPx",t.itemSize*t.maxItemLength)("minBufferPx",t.itemSize*t.maxItemLength),ho(1),js("cdkVirtualForOf",t.listOfContainerItem)("cdkVirtualForTrackBy",t.trackValue)("cdkVirtualForTemplateCacheSize",0),ho(1),js("ngTemplateOutlet",t.dropdownRender))},directives:function(){return[th,_m,pm,km,ch,$D,oh,sh,KA,YA]},encapsulation:2,changeDetection:0}),e}(),jA=function(){var e=function(){function e(t){b(this,e),this.nzOptionGroupComponent=t,this.destroy$=new V,this.changes=new V,this.groupLabel=null,this.nzLabel=null,this.nzValue=null,this.nzDisabled=!1,this.nzHide=!1,this.nzCustomContent=!1}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.nzOptionGroupComponent&&this.nzOptionGroupComponent.changes.pipe(mf(!0),ev(this.destroy$)).subscribe(function(){e.groupLabel=e.nzOptionGroupComponent.nzLabel})}},{key:"ngOnChanges",value:function(){this.changes.next()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(GA,8))},e.\u0275cmp=at({type:e,selectors:[["nz-option"]],viewQuery:function(e,t){var n;(1&e&&wc(Lu,7),2&e)&&(kc(n=Sc())&&(t.template=n.first))},inputs:{nzLabel:"nzLabel",nzValue:"nzValue",nzDisabled:"nzDisabled",nzHide:"nzHide",nzCustomContent:"nzCustomContent"},exportAs:["nzOption"],features:[It],ngContentSelectors:tA,decls:1,vars:0,template:function(e,t){1&e&&(sa(),Us(0,aA,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzHide",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzCustomContent",void 0),e}(),BA=function(){var e=function(){function e(t,n,i){b(this,e),this.elementRef=t,this.renderer=n,this.focusMonitor=i,this.nzId=null,this.disabled=!1,this.mirrorSync=!1,this.showInput=!0,this.focusTrigger=!1,this.value="",this.autofocus=!1,this.valueChange=new cc,this.isComposingChange=new cc,this.elementRef.nativeElement.classList.add("ant-select-selection-search")}return w(e,[{key:"setCompositionState",value:function(e){this.isComposingChange.next(e)}},{key:"onValueChange",value:function(e){this.value=e,this.valueChange.next(e),this.mirrorSync&&this.syncMirrorWidth()}},{key:"clearInputValue",value:function(){this.inputElement.nativeElement.value="",this.onValueChange("")}},{key:"syncMirrorWidth",value:function(){var e=this.mirrorElement.nativeElement,t=this.elementRef.nativeElement,n=this.inputElement.nativeElement;this.renderer.removeStyle(t,"width"),e.innerHTML=this.renderer.createText("".concat(n.value,"&nbsp;")),this.renderer.setStyle(t,"width","".concat(e.scrollWidth,"px"))}},{key:"focus",value:function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}},{key:"blur",value:function(){this.inputElement.nativeElement.blur()}},{key:"ngOnChanges",value:function(e){var t=this.inputElement.nativeElement,n=e.focusTrigger;e.showInput&&(this.showInput?this.renderer.removeAttribute(t,"readonly"):this.renderer.setAttribute(t,"readonly","readonly")),n&&!0===n.currentValue&&!1===n.previousValue&&t.focus()}},{key:"ngAfterViewInit",value:function(){this.mirrorSync&&this.syncMirrorWidth(),this.autofocus&&this.focus()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu),Vs(sM))},e.\u0275cmp=at({type:e,selectors:[["nz-select-search"]],viewQuery:function(e,t){var n;(1&e&&(wc(uA,7),wc(cA,5)),2&e)&&(kc(n=Sc())&&(t.inputElement=n.first),kc(n=Sc())&&(t.mirrorElement=n.first))},inputs:{nzId:"nzId",disabled:"disabled",mirrorSync:"mirrorSync",showInput:"showInput",focusTrigger:"focusTrigger",value:"value",autofocus:"autofocus"},outputs:{valueChange:"valueChange",isComposingChange:"isComposingChange"},features:[Qa([{provide:KC,useValue:!1}]),It],decls:3,vars:7,consts:[["autocomplete","off",1,"ant-select-selection-search-input",3,"ngModel","disabled","ngModelChange","compositionstart","compositionend"],["inputElement",""],["class","ant-select-selection-search-mirror",4,"ngIf"],[1,"ant-select-selection-search-mirror"],["mirrorElement",""]],template:function(e,t){1&e&&(Hs(0,"input",0,1),Qs("ngModelChange",function(e){return t.onValueChange(e)})("compositionstart",function(){return t.setCompositionState(!0)})("compositionend",function(){return t.setCompositionState(!1)}),qs(),Us(2,lA,2,0,"span",2)),2&e&&(_a("opacity",t.showInput?null:0),js("ngModel",t.value)("disabled",t.disabled),Ns("id",t.nzId)("autofocus",t.autofocus?"autofocus":null),ho(2),js("ngIf",t.mirrorSync))},directives:[YC,_S,KS,th],encapsulation:2,changeDetection:0}),e}(),HA=function(){var e=function(){function e(t,n){b(this,e),this.elementRef=t,this.noAnimation=n,this.nzId=null,this.showSearch=!1,this.placeHolder=null,this.open=!1,this.maxTagCount=1/0,this.autofocus=!1,this.disabled=!1,this.mode="default",this.customTemplate=null,this.maxTagPlaceholder=null,this.removeIcon=null,this.listOfTopItem=[],this.tokenSeparators=[],this.tokenize=new cc,this.inputValueChange=new cc,this.deleteItem=new cc,this.listOfSlicedItem=[],this.isShowPlaceholder=!0,this.isShowSingleLabel=!1,this.isComposing=!1,this.inputValue=null,this.elementRef.nativeElement.classList.add("ant-select-selector")}return w(e,[{key:"onHostKeydown",value:function(e){8===e.keyCode&&"default"!==this.mode&&!e.target.value&&this.listOfTopItem.length>0&&(e.preventDefault(),this.onDeleteItem(this.listOfTopItem[this.listOfTopItem.length-1]))}},{key:"updateTemplateVariable",value:function(){var e=0===this.listOfTopItem.length;this.isShowPlaceholder=e&&!this.isComposing&&!this.inputValue,this.isShowSingleLabel=!e&&!this.isComposing&&!this.inputValue}},{key:"isComposingChange",value:function(e){this.isComposing=e,this.updateTemplateVariable()}},{key:"onInputValueChange",value:function(e){e!==this.inputValue&&(this.inputValue=e,this.updateTemplateVariable(),this.inputValueChange.emit(e),this.tokenSeparate(e,this.tokenSeparators))}},{key:"tokenSeparate",value:function(e,t){if(e&&e.length&&t.length&&"default"!==this.mode&&function(e,t){for(var n=0;n<t.length;++n)if(e.lastIndexOf(t[n])>0)return!0;return!1}(e,t)){var n=(i=e,r=new RegExp("[".concat(t.join(),"]")),s=i.split(r).filter(function(e){return e}),o(new Set(s)));this.tokenize.next(n)}var i,r,s}},{key:"clearInputValue",value:function(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.clearInputValue()}},{key:"focus",value:function(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.focus()}},{key:"blur",value:function(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.blur()}},{key:"trackValue",value:function(e,t){return t.nzValue}},{key:"onDeleteItem",value:function(e){this.disabled||e.nzDisabled||this.deleteItem.next(e)}},{key:"ngOnChanges",value:function(e){var t=this,n=e.listOfTopItem,i=e.maxTagCount,r=e.customTemplate,o=e.maxTagPlaceholder;if(n&&this.updateTemplateVariable(),n||i||r||o){var s=this.listOfTopItem.slice(0,this.maxTagCount).map(function(e){return{nzLabel:e.nzLabel,nzValue:e.nzValue,nzDisabled:e.nzDisabled,contentTemplateOutlet:t.customTemplate,contentTemplateOutletContext:e}});if(this.listOfTopItem.length>this.maxTagCount){var a="+ ".concat(this.listOfTopItem.length-this.maxTagCount," ..."),u=this.listOfTopItem.map(function(e){return e.nzValue}),c={nzLabel:a,nzValue:"$$__nz_exceeded_item",nzDisabled:!0,contentTemplateOutlet:this.maxTagPlaceholder,contentTemplateOutletContext:u.slice(this.maxTagCount)};s.push(c)}this.listOfSlicedItem=s}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(BT,9))},e.\u0275cmp=at({type:e,selectors:[["nz-select-top-control"]],viewQuery:function(e,t){var n;(1&e&&wc(BA,5),2&e)&&(kc(n=Sc())&&(t.nzSelectSearchComponent=n.first))},hostBindings:function(e,t){1&e&&Qs("keydown",function(e){return t.onHostKeydown(e)})},inputs:{nzId:"nzId",showSearch:"showSearch",placeHolder:"placeHolder",open:"open",maxTagCount:"maxTagCount",autofocus:"autofocus",disabled:"disabled",mode:"mode",customTemplate:"customTemplate",maxTagPlaceholder:"maxTagPlaceholder",removeIcon:"removeIcon",listOfTopItem:"listOfTopItem",tokenSeparators:"tokenSeparators"},outputs:{tokenize:"tokenize",inputValueChange:"inputValueChange",deleteItem:"deleteItem"},exportAs:["nzSelectTopControl"],features:[It],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"placeholder",4,"ngIf"],[3,"nzId","disabled","value","showInput","mirrorSync","autofocus","focusTrigger","isComposingChange","valueChange"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext",4,"ngIf"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzId","disabled","value","autofocus","showInput","mirrorSync","focusTrigger","isComposingChange","valueChange"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete"],[3,"placeholder"]],template:function(e,t){1&e&&(Ks(0,0),Us(1,fA,3,8,"ng-container",1),Us(2,pA,3,9,"ng-container",2),Ys(),Us(3,gA,1,1,"nz-select-placeholder",3)),2&e&&(js("ngSwitch",t.mode),ho(1),js("ngSwitchCase","default"),ho(2),js("ngIf",t.isShowPlaceholder))},directives:function(){return[oh,sh,ah,th,BA,XA,Ql,AT,JA]},encapsulation:2,changeDetection:0}),e}(),qA=function(e,t){return!(!t||!t.nzLabel)&&t.nzLabel.toString().toLowerCase().indexOf(e.toLowerCase())>-1},WA=function(){var e=function(){function e(t,n,i,r,o,s,a){b(this,e),this.nzConfigService=t,this.cdr=n,this.elementRef=i,this.platform=r,this.focusMonitor=o,this.directionality=s,this.noAnimation=a,this._nzModuleName="select",this.nzId=null,this.nzSize="default",this.nzOptionHeightPx=32,this.nzOptionOverflowSize=8,this.nzDropdownClassName=null,this.nzDropdownMatchSelectWidth=!0,this.nzDropdownStyle=null,this.nzNotFoundContent=void 0,this.nzPlaceHolder=null,this.nzMaxTagCount=1/0,this.nzDropdownRender=null,this.nzCustomTemplate=null,this.nzSuffixIcon=null,this.nzClearIcon=null,this.nzRemoveIcon=null,this.nzMenuItemSelectedIcon=null,this.nzTokenSeparators=[],this.nzMaxTagPlaceholder=null,this.nzMaxMultipleCount=1/0,this.nzMode="default",this.nzFilterOption=qA,this.compareWith=function(e,t){return e===t},this.nzAllowClear=!1,this.nzBorderless=!1,this.nzShowSearch=!1,this.nzLoading=!1,this.nzAutoFocus=!1,this.nzAutoClearSearchValue=!0,this.nzServerSearch=!1,this.nzDisabled=!1,this.nzOpen=!1,this.nzBackdrop=!1,this.nzOptions=[],this.nzOnSearch=new cc,this.nzScrollToBottom=new cc,this.nzOpenChange=new cc,this.nzBlur=new cc,this.nzFocus=new cc,this.listOfValue$=new Qh([]),this.listOfTemplateItem$=new Qh([]),this.listOfTagAndTemplateItem=[],this.searchValue="",this.isReactiveDriven=!1,this.destroy$=new V,this.onChange=function(){},this.onTouched=function(){},this.dropDownPosition="bottom",this.triggerWidth=null,this.listOfContainerItem=[],this.listOfTopItem=[],this.activatedValue=null,this.listOfValue=[],this.focused=!1,this.dir="ltr",this.elementRef.nativeElement.classList.add("ant-select")}return w(e,[{key:"nzShowArrow",get:function(){return void 0===this._nzShowArrow?"default"===this.nzMode:this._nzShowArrow},set:function(e){this._nzShowArrow=e}},{key:"generateTagItem",value:function(e){return{nzValue:e,nzLabel:e,type:"item"}}},{key:"onItemClick",value:function(e){var t=this;if(this.activatedValue=e,"default"===this.nzMode)0!==this.listOfValue.length&&this.compareWith(this.listOfValue[0],e)||this.updateListOfValue([e]),this.setOpenState(!1);else{var n=this.listOfValue.findIndex(function(n){return t.compareWith(n,e)});if(-1!==n){var i=this.listOfValue.filter(function(e,t){return t!==n});this.updateListOfValue(i)}else if(this.listOfValue.length<this.nzMaxMultipleCount){var r=[].concat(o(this.listOfValue),[e]);this.updateListOfValue(r)}this.focus(),this.nzAutoClearSearchValue&&this.clearInput()}}},{key:"onItemDelete",value:function(e){var t=this,n=this.listOfValue.filter(function(n){return!t.compareWith(n,e.nzValue)});this.updateListOfValue(n),this.clearInput()}},{key:"onHostClick",value:function(){this.nzOpen&&this.nzShowSearch||this.nzDisabled||this.setOpenState(!this.nzOpen)}},{key:"updateListOfContainerItem",value:function(){var e=this,t=this.listOfTagAndTemplateItem.filter(function(e){return!e.nzHide}).filter(function(t){return!(!e.nzServerSearch&&e.searchValue)||e.nzFilterOption(e.searchValue,t)});if("tags"===this.nzMode&&this.searchValue){var n=this.listOfTagAndTemplateItem.find(function(t){return t.nzLabel===e.searchValue});if(n)this.activatedValue=n.nzValue;else{var i=this.generateTagItem(this.searchValue);t=[i].concat(o(t)),this.activatedValue=i.nzValue}}var r=t.find(function(t){return e.compareWith(t.nzValue,e.listOfValue[0])})||t[0];this.activatedValue=r&&r.nzValue||null;var s=[];this.isReactiveDriven?s=o(new Set(this.nzOptions.filter(function(e){return e.groupLabel}).map(function(e){return e.groupLabel}))):this.listOfNzOptionGroupComponent&&(s=this.listOfNzOptionGroupComponent.map(function(e){return e.nzLabel})),s.forEach(function(e){var n=t.findIndex(function(t){return e===t.groupLabel});n>-1&&t.splice(n,0,{groupLabel:e,type:"group",key:e})}),this.listOfContainerItem=o(t),this.updateCdkConnectedOverlayPositions()}},{key:"clearInput",value:function(){this.nzSelectTopControlComponent.clearInputValue()}},{key:"updateListOfValue",value:function(e){var t,n=(t=e,"default"===this.nzMode?t.length>0?t[0]:null:t);this.value!==n&&(this.listOfValue=e,this.listOfValue$.next(e),this.value=n,this.onChange(this.value))}},{key:"onTokenSeparate",value:function(e){var t=this,n=this.listOfTagAndTemplateItem.filter(function(t){return-1!==e.findIndex(function(e){return e===t.nzLabel})}).map(function(e){return e.nzValue}).filter(function(e){return-1===t.listOfValue.findIndex(function(n){return t.compareWith(n,e)})});if("multiple"===this.nzMode)this.updateListOfValue([].concat(o(this.listOfValue),o(n)));else if("tags"===this.nzMode){var i=e.filter(function(e){return-1===t.listOfTagAndTemplateItem.findIndex(function(t){return t.nzLabel===e})});this.updateListOfValue([].concat(o(this.listOfValue),o(n),o(i)))}this.clearInput()}},{key:"onOverlayKeyDown",value:function(e){27===e.keyCode&&this.setOpenState(!1)}},{key:"onKeyDown",value:function(e){var t=this;if(!this.nzDisabled){var n=this.listOfContainerItem.filter(function(e){return"item"===e.type}).filter(function(e){return!e.nzDisabled}),i=n.findIndex(function(e){return t.compareWith(e.nzValue,t.activatedValue)});switch(e.keyCode){case 38:e.preventDefault(),this.nzOpen&&(this.activatedValue=n[i>0?i-1:n.length-1].nzValue);break;case 40:e.preventDefault(),this.nzOpen?this.activatedValue=n[i<n.length-1?i+1:0].nzValue:this.setOpenState(!0);break;case 13:e.preventDefault(),this.nzOpen?ky(this.activatedValue)&&this.onItemClick(this.activatedValue):this.setOpenState(!0);break;case 32:this.nzOpen||(this.setOpenState(!0),e.preventDefault());break;case 9:this.setOpenState(!1);break;case 27:break;default:this.nzOpen||this.setOpenState(!0)}}}},{key:"setOpenState",value:function(e){this.nzOpen!==e&&(this.nzOpen=e,this.nzOpenChange.emit(e),this.onOpenChange(),this.cdr.markForCheck())}},{key:"onOpenChange",value:function(){this.updateCdkConnectedOverlayStatus(),this.clearInput()}},{key:"onInputValueChange",value:function(e){this.searchValue=e,this.updateListOfContainerItem(),this.nzOnSearch.emit(e),this.updateCdkConnectedOverlayPositions()}},{key:"onClearSelection",value:function(){this.updateListOfValue([])}},{key:"onClickOutside",value:function(e){this.elementRef.nativeElement.contains(e.target)||this.setOpenState(!1)}},{key:"focus",value:function(){this.nzSelectTopControlComponent.focus()}},{key:"blur",value:function(){this.nzSelectTopControlComponent.blur()}},{key:"onPositionChange",value:function(e){this.dropDownPosition=e.connectionPair.originY}},{key:"updateCdkConnectedOverlayStatus",value:function(){var e=this;this.platform.isBrowser&&this.originElement.nativeElement&&AD(function(){e.triggerWidth=e.originElement.nativeElement.getBoundingClientRect().width,e.cdr.markForCheck()})}},{key:"updateCdkConnectedOverlayPositions",value:function(){var e=this;AD(function(){var t,n;null===(n=null===(t=e.cdkConnectedOverlay)||void 0===t?void 0:t.overlayRef)||void 0===n||n.updatePosition()})}},{key:"writeValue",value:function(e){var t,n=this;if(this.value!==e){this.value=e;var i=null==(t=e)?[]:"default"===n.nzMode?[t]:t;this.listOfValue=i,this.listOfValue$.next(i),this.cdr.markForCheck()}}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,e&&this.setOpenState(!1),this.cdr.markForCheck()}},{key:"ngOnChanges",value:function(e){var t=e.nzOpen,n=e.nzDisabled,i=e.nzOptions;if(t&&this.onOpenChange(),n&&this.nzDisabled&&this.setOpenState(!1),i){this.isReactiveDriven=!0;var r=(this.nzOptions||[]).map(function(e){return{template:e.label instanceof Lu?e.label:null,nzLabel:"string"==typeof e.label||"number"==typeof e.label?e.label:null,nzValue:e.value,nzDisabled:e.disabled||!1,nzHide:e.hide||!1,nzCustomContent:e.label instanceof Lu,groupLabel:e.groupLabel||null,type:"item",key:e.value}});this.listOfTemplateItem$.next(r)}}},{key:"ngOnInit",value:function(){var e,t=this;this.focusMonitor.monitor(this.elementRef,!0).pipe(ev(this.destroy$)).subscribe(function(e){e?(t.focused=!0,t.cdr.markForCheck(),t.nzFocus.emit()):(t.focused=!1,t.cdr.markForCheck(),t.nzBlur.emit(),Promise.resolve().then(function(){t.onTouched()}))}),tf([this.listOfValue$,this.listOfTemplateItem$]).pipe(ev(this.destroy$)).subscribe(function(e){var i=n(e,2),r=i[0],s=i[1],a=r.filter(function(){return"tags"===t.nzMode}).filter(function(e){return-1===s.findIndex(function(n){return t.compareWith(n.nzValue,e)})}).map(function(e){return t.listOfTopItem.find(function(n){return t.compareWith(n.nzValue,e)})||t.generateTagItem(e)});t.listOfTagAndTemplateItem=[].concat(o(s),o(a)),t.listOfTopItem=t.listOfValue.map(function(e){return[].concat(o(t.listOfTagAndTemplateItem),o(t.listOfTopItem)).find(function(n){return t.compareWith(e,n.nzValue)})}).filter(function(e){return!!e}),t.updateListOfContainerItem()}),null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.nzConfigService.getConfigChangeEventForComponent("select").pipe(ev(this.destroy$)).subscribe(function(){t.cdr.markForCheck()}),this.dir=this.directionality.value}},{key:"ngAfterContentInit",value:function(){var e=this;this.isReactiveDriven||ue(this.listOfNzOptionGroupComponent.changes,this.listOfNzOptionComponent.changes).pipe(mf(!0),lf(function(){return ue.apply(void 0,[e.listOfNzOptionComponent.changes,e.listOfNzOptionGroupComponent.changes].concat(o(e.listOfNzOptionComponent.map(function(e){return e.changes})),o(e.listOfNzOptionGroupComponent.map(function(e){return e.changes})))).pipe(mf(!0))}),ev(this.destroy$)).subscribe(function(){var t=e.listOfNzOptionComponent.toArray().map(function(e){var t=e.template,n=e.nzLabel,i=e.nzValue;return{template:t,nzLabel:n,nzValue:i,nzDisabled:e.nzDisabled,nzHide:e.nzHide,nzCustomContent:e.nzCustomContent,groupLabel:e.groupLabel,type:"item",key:i}});e.listOfTemplateItem$.next(t),e.cdr.markForCheck()})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($_),Vs(xu),Vs(su),Vs(Xv),Vs(sM),Vs(rm,8),Vs(BT,9))},e.\u0275cmp=at({type:e,selectors:[["nz-select"]],contentQueries:function(e,t,n){var i;(1&e&&(Cc(n,jA,5),Cc(n,GA,5)),2&e)&&(kc(i=Sc())&&(t.listOfNzOptionComponent=i),kc(i=Sc())&&(t.listOfNzOptionGroupComponent=i))},viewQuery:function(e,t){var n;(1&e&&(wc(iy,7,su),wc(ry,7),wc(HA,7),wc(GA,7,su),wc(HA,7,su)),2&e)&&(kc(n=Sc())&&(t.originElement=n.first),kc(n=Sc())&&(t.cdkConnectedOverlay=n.first),kc(n=Sc())&&(t.nzSelectTopControlComponent=n.first),kc(n=Sc())&&(t.nzOptionGroupComponentElement=n.first),kc(n=Sc())&&(t.nzSelectTopControlComponentElement=n.first))},hostVars:24,hostBindings:function(e,t){1&e&&Qs("click",function(){return t.onHostClick()}),2&e&&ba("ant-select-lg","large"===t.nzSize)("ant-select-sm","small"===t.nzSize)("ant-select-show-arrow",t.nzShowArrow)("ant-select-disabled",t.nzDisabled)("ant-select-show-search",(t.nzShowSearch||"default"!==t.nzMode)&&!t.nzDisabled)("ant-select-allow-clear",t.nzAllowClear)("ant-select-borderless",t.nzBorderless)("ant-select-open",t.nzOpen)("ant-select-focused",t.nzOpen||t.focused)("ant-select-single","default"===t.nzMode)("ant-select-multiple","default"!==t.nzMode)("ant-select-rtl","rtl"===t.dir)},inputs:{nzId:"nzId",nzSize:"nzSize",nzOptionHeightPx:"nzOptionHeightPx",nzOptionOverflowSize:"nzOptionOverflowSize",nzDropdownClassName:"nzDropdownClassName",nzDropdownMatchSelectWidth:"nzDropdownMatchSelectWidth",nzDropdownStyle:"nzDropdownStyle",nzNotFoundContent:"nzNotFoundContent",nzPlaceHolder:"nzPlaceHolder",nzMaxTagCount:"nzMaxTagCount",nzDropdownRender:"nzDropdownRender",nzCustomTemplate:"nzCustomTemplate",nzSuffixIcon:"nzSuffixIcon",nzClearIcon:"nzClearIcon",nzRemoveIcon:"nzRemoveIcon",nzMenuItemSelectedIcon:"nzMenuItemSelectedIcon",nzTokenSeparators:"nzTokenSeparators",nzMaxTagPlaceholder:"nzMaxTagPlaceholder",nzMaxMultipleCount:"nzMaxMultipleCount",nzMode:"nzMode",nzFilterOption:"nzFilterOption",compareWith:"compareWith",nzAllowClear:"nzAllowClear",nzBorderless:"nzBorderless",nzShowSearch:"nzShowSearch",nzLoading:"nzLoading",nzAutoFocus:"nzAutoFocus",nzAutoClearSearchValue:"nzAutoClearSearchValue",nzServerSearch:"nzServerSearch",nzDisabled:"nzDisabled",nzOpen:"nzOpen",nzBackdrop:"nzBackdrop",nzOptions:"nzOptions",nzShowArrow:"nzShowArrow"},outputs:{nzOnSearch:"nzOnSearch",nzScrollToBottom:"nzScrollToBottom",nzOpenChange:"nzOpenChange",nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzSelect"],features:[Qa([{provide:qC,useExisting:Ce(function(){return e}),multi:!0}]),It],decls:5,vars:24,consts:[["cdkOverlayOrigin","",3,"nzId","open","disabled","mode","nzNoAnimation","maxTagPlaceholder","removeIcon","placeHolder","maxTagCount","customTemplate","tokenSeparators","showSearch","autofocus","listOfTopItem","inputValueChange","tokenize","deleteItem","keydown"],["origin","cdkOverlayOrigin"],[3,"loading","search","suffixIcon",4,"ngIf"],[3,"clearIcon","clear",4,"ngIf"],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayMinWidth","cdkConnectedOverlayWidth","cdkConnectedOverlayOrigin","cdkConnectedOverlayTransformOriginOn","cdkConnectedOverlayPanelClass","cdkConnectedOverlayOpen","overlayKeydown","overlayOutsideClick","detach","positionChange"],[3,"loading","search","suffixIcon"],[3,"clearIcon","clear"],[3,"ngStyle","itemSize","maxItemLength","matchWidth","nzNoAnimation","listOfContainerItem","menuItemSelectedIcon","notFoundContent","activatedValue","listOfSelectedValue","dropdownRender","compareWith","mode","keydown","itemClick","scrollToBottom"]],template:function(e,t){if(1&e&&(Hs(0,"nz-select-top-control",0,1),Qs("inputValueChange",function(e){return t.onInputValueChange(e)})("tokenize",function(e){return t.onTokenSeparate(e)})("deleteItem",function(e){return t.onItemDelete(e)})("keydown",function(e){return t.onKeyDown(e)}),qs(),Us(2,vA,1,3,"nz-select-arrow",2),Us(3,mA,1,1,"nz-select-clear",3),Us(4,yA,1,19,"ng-template",4),Qs("overlayKeydown",function(e){return t.onOverlayKeyDown(e)})("overlayOutsideClick",function(e){return t.onClickOutside(e)})("detach",function(){return t.setOpenState(!1)})("positionChange",function(e){return t.onPositionChange(e)})),2&e){var n=Gs(1);js("nzId",t.nzId)("open",t.nzOpen)("disabled",t.nzDisabled)("mode",t.nzMode)("@.disabled",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("nzNoAnimation",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("maxTagPlaceholder",t.nzMaxTagPlaceholder)("removeIcon",t.nzRemoveIcon)("placeHolder",t.nzPlaceHolder)("maxTagCount",t.nzMaxTagCount)("customTemplate",t.nzCustomTemplate)("tokenSeparators",t.nzTokenSeparators)("showSearch",t.nzShowSearch)("autofocus",t.nzAutoFocus)("listOfTopItem",t.listOfTopItem),ho(2),js("ngIf",t.nzShowArrow),ho(1),js("ngIf",t.nzAllowClear&&!t.nzDisabled&&t.listOfValue.length),ho(1),js("cdkConnectedOverlayHasBackdrop",t.nzBackdrop)("cdkConnectedOverlayMinWidth",t.nzDropdownMatchSelectWidth?null:t.triggerWidth)("cdkConnectedOverlayWidth",t.nzDropdownMatchSelectWidth?t.triggerWidth:null)("cdkConnectedOverlayOrigin",n)("cdkConnectedOverlayTransformOriginOn",".ant-select-dropdown")("cdkConnectedOverlayPanelClass",t.nzDropdownClassName)("cdkConnectedOverlayOpen",t.nzOpen)}},directives:function(){return[AT,HA,iy,BT,th,ry,uO,$A,ZA,VA,uh]},encapsulation:2,data:{animation:[Eb]},changeDetection:0}),Oy([Z_(),Dy("design:type",Object)],e.prototype,"nzSuffixIcon",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzAllowClear",void 0),Oy([Z_(),Sy(),Dy("design:type",Object)],e.prototype,"nzBorderless",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzShowSearch",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzLoading",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzAutoFocus",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzAutoClearSearchValue",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzServerSearch",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzOpen",void 0),Oy([Z_(),Sy(),Dy("design:type",Object)],e.prototype,"nzBackdrop",void 0),e}(),KA=function(){var e=function e(t){b(this,e),this.elementRef=t,this.nzLabel=null,this.elementRef.nativeElement.classList.add("ant-select-item","ant-select-item-group")};return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-option-item-group"]],inputs:{nzLabel:"nzLabel"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(e,t){1&e&&Us(0,_A,2,1,"ng-container",0),2&e&&js("nzStringTemplateOutlet",t.nzLabel)},directives:[Iy],encapsulation:2,changeDetection:0}),e}(),YA=function(){var e=function(){function e(t){b(this,e),this.elementRef=t,this.selected=!1,this.activated=!1,this.grouped=!1,this.customContent=!1,this.template=null,this.disabled=!1,this.showState=!1,this.label=null,this.value=null,this.activatedValue=null,this.listOfSelectedValue=[],this.icon=null,this.itemClick=new cc,this.itemHover=new cc,this.elementRef.nativeElement.classList.add("ant-select-item","ant-select-item-option")}return w(e,[{key:"onHostMouseEnter",value:function(){this.disabled||this.itemHover.next(this.value)}},{key:"onHostClick",value:function(){this.disabled||this.itemClick.next(this.value)}},{key:"ngOnChanges",value:function(e){var t=this,n=e.value,i=e.activatedValue,r=e.listOfSelectedValue;(n||r)&&(this.selected=this.listOfSelectedValue.some(function(e){return t.compareWith(e,t.value)})),(n||i)&&(this.activated=this.compareWith(this.activatedValue,this.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-option-item"]],hostVars:9,hostBindings:function(e,t){1&e&&Qs("mouseenter",function(){return t.onHostMouseEnter()})("click",function(){return t.onHostClick()}),2&e&&(Ns("title",t.label),ba("ant-select-item-option-grouped",t.grouped)("ant-select-item-option-selected",t.selected&&!t.disabled)("ant-select-item-option-disabled",t.disabled)("ant-select-item-option-active",t.activated&&!t.disabled))},inputs:{grouped:"grouped",customContent:"customContent",template:"template",disabled:"disabled",showState:"showState",label:"label",value:"value",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",icon:"icon",compareWith:"compareWith"},outputs:{itemClick:"itemClick",itemHover:"itemHover"},features:[It],decls:4,vars:3,consts:[[1,"ant-select-item-option-content"],[4,"ngIf"],["class","ant-select-item-option-state","style","user-select: none","unselectable","on",4,"ngIf"],[3,"ngTemplateOutlet"],["unselectable","on",1,"ant-select-item-option-state",2,"user-select","none"],["nz-icon","","nzType","check","class","ant-select-selected-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","check",1,"ant-select-selected-icon"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,bA,2,1,"ng-container",1),Us(2,wA,2,1,"ng-container",1),qs(),Us(3,SA,2,2,"div",2)),2&e&&(ho(1),js("ngIf",!t.customContent),ho(1),js("ngIf",t.customContent),ho(1),js("ngIf",t.showState&&t.selected))},directives:[th,ch,ib,AT],encapsulation:2,changeDetection:0}),e}(),$A=function(){var e=function e(t){b(this,e),this.elementRef=t,this.loading=!1,this.search=!1,this.suffixIcon=null,this.elementRef.nativeElement.classList.add("ant-select-arrow")};return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-select-arrow"]],hostVars:2,hostBindings:function(e,t){2&e&&ba("ant-select-arrow-loading",t.loading)},inputs:{loading:"loading",search:"search",suffixIcon:"suffixIcon"},decls:3,vars:2,consts:[["nz-icon","","nzType","loading",4,"ngIf","ngIfElse"],["defaultArrow",""],["nz-icon","","nzType","loading"],[4,"ngIf","ngIfElse"],["suffixTemplate",""],["nz-icon","","nzType","down",4,"ngIf"],["nz-icon","","nzType","search",4,"ngIf"],["nz-icon","","nzType","down"],["nz-icon","","nzType","search"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"]],template:function(e,t){if(1&e&&(Us(0,EA,1,0,"i",0),Us(1,AA,3,2,"ng-template",null,1,Mc)),2&e){var n=Gs(2);js("ngIf",t.loading)("ngIfElse",n)}},directives:[th,ib,AT,Iy],encapsulation:2,changeDetection:0}),e}(),ZA=function(){var e=function(){function e(t){b(this,e),this.elementRef=t,this.clearIcon=null,this.clear=new cc,this.elementRef.nativeElement.classList.add("ant-select-clear")}return w(e,[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.clear.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-select-clear"]],hostBindings:function(e,t){1&e&&Qs("click",function(e){return t.onClick(e)})},inputs:{clearIcon:"clearIcon"},outputs:{clear:"clear"},decls:1,vars:2,consts:[["nz-icon","","nzType","close-circle","nzTheme","fill","class","ant-select-close-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close-circle","nzTheme","fill",1,"ant-select-close-icon"]],template:function(e,t){1&e&&Us(0,xA,1,0,"i",0),2&e&&js("ngIf",!t.clearIcon)("ngIfElse",t.clearIcon)},directives:[th,ib,AT],encapsulation:2,changeDetection:0}),e}(),XA=function(){var e=function(){function e(t){b(this,e),this.elementRef=t,this.disabled=!1,this.label=null,this.deletable=!1,this.removeIcon=null,this.contentTemplateOutletContext=null,this.contentTemplateOutlet=null,this.delete=new cc,this.elementRef.nativeElement.classList.add("ant-select-selection-item")}return w(e,[{key:"onDelete",value:function(e){e.preventDefault(),e.stopPropagation(),this.disabled||this.delete.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-select-item"]],hostVars:3,hostBindings:function(e,t){2&e&&(Ns("title",t.label),ba("ant-select-selection-item-disabled",t.disabled))},inputs:{disabled:"disabled",label:"label",deletable:"deletable",removeIcon:"removeIcon",contentTemplateOutletContext:"contentTemplateOutletContext",contentTemplateOutlet:"contentTemplateOutlet"},outputs:{delete:"delete"},decls:2,vars:5,consts:[[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-select-selection-item-remove",3,"click",4,"ngIf"],["class","ant-select-selection-item-content",4,"ngIf","ngIfElse"],["labelTemplate",""],[1,"ant-select-selection-item-content"],[1,"ant-select-selection-item-remove",3,"click"],["nz-icon","","nzType","close",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close"]],template:function(e,t){1&e&&(Us(0,zA,4,2,"ng-container",0),Us(1,NA,2,2,"span",1)),2&e&&(js("nzStringTemplateOutlet",t.contentTemplateOutlet)("nzStringTemplateOutletContext",ic(3,FA,t.contentTemplateOutletContext)),ho(1),js("ngIf",t.deletable&&!t.disabled))},directives:[Iy,th,ib,AT],encapsulation:2,changeDetection:0}),e}(),JA=function(){var e=function e(t){b(this,e),this.elementRef=t,this.placeholder=null,this.elementRef.nativeElement.classList.add("ant-select-selection-placeholder")};return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-select-placeholder"]],inputs:{placeholder:"placeholder"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(e,t){1&e&&Us(0,UA,2,1,"ng-container",0),2&e&&js("nzStringTemplateOutlet",t.placeholder)},directives:[Iy],encapsulation:2,changeDetection:0}),e}(),QA=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,DT,sE,Jv,sy,rb,My,eA,cO,HT,xT,Cm,cM]]}),e}(),ex=["search"];function tx(e,t){if(1&e&&Ws(0,"nz-option",24),2&e){var n=t.$implicit;js("nzLabel",n.label)("nzValue",n.value)}}function nx(e,t){if(1&e&&Ws(0,"nz-option",24),2&e){var n=t.$implicit;js("nzLabel",n)("nzValue",n)}}var ix=function(){return{minRows:3,maxRows:5}},rx=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.fb=t,this.store=n,this.cd=i,this.modalRef=r,this.timeHelper=o,this.captchaTooltipIcon={type:"info-circle",theme:"twotone"},this.groupTypeOption=[{label:"Work",value:Kw.GRP_WORK},{label:"Public",value:Kw.GRP_PUBLIC},{label:"Meeting",value:Kw.GRP_MEETING},{label:"AVChatRoom",value:Kw.GRP_AVCHATROOM}],this.memberListOfOption=[],this.loading=!1}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.validateForm=this.fb.group({groupID:[null,[]],name:[null,[eS.required]],type:[Kw.GRP_WORK,[eS.required]],avatar:[null,[]],introduction:[],notification:[null,[]],joinOption:[{value:"FreeAccess",disabled:!0},[]],memberList:[[],[]]}),this.validateForm.get("type").valueChanges.subscribe(function(t){switch(t){case Kw.GRP_WORK:e.validateForm.get("joinOption").disable(),e.validateForm.get("memberList").enable();break;case Kw.GRP_PUBLIC:e.validateForm.get("joinOption").enable(),e.validateForm.get("memberList").enable();break;case Kw.GRP_MEETING:e.validateForm.get("joinOption").disable(),e.validateForm.get("memberList").enable();break;case Kw.GRP_AVCHATROOM:e.validateForm.get("joinOption").disable(),e.validateForm.get("memberList").disable()}}),this.nzSelect.nzOnSearch.pipe(KT(600),Ev()).subscribe(function(t){e.handleSearchUser(t)})}},{key:"handleSearchUser",value:function(e){var t=this;""!==e&&(this.loading=!0,this.timeHelper.tim.getUserProfile({userIDList:[e]}).then(function(e){var n=e.data;t.memberListOfOption=n.map(function(e){return e.userID}),t.loading=!1,t.cd.markForCheck()}).catch(function(e){t.store.dispatch(bw({msgType:qw.error,message:e.message}))}))}},{key:"submitForm",value:function(){var e=this;for(var t in this.validateForm.controls)this.validateForm.controls[t].markAsDirty(),this.validateForm.controls[t].updateValueAndValidity();this.timeHelper.tim.createGroup(this.getOptions()).then(function(t){e.store.dispatch(bw({msgType:qw.success,message:"\u7fa4\u7ec4\uff1a\u3010".concat(t.data.group.name,"\u3011\u521b\u5efa\u6210\u529f")})),e.modalRef.destroy()}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"getOptions",value:function(){var e=Object.assign(Object.assign({},this.validateForm.value),{memberList:this.validateForm.value.memberList.map(function(e){return{userID:e}})});return[Kw.GRP_WORK,Kw.GRP_AVCHATROOM].includes(this.validateForm.value.type)&&delete e.joinOption,e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(uE),Vs(xk),Vs(xu),Vs(KM),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["im-create-group"]],viewQuery:function(e,t){var n;(1&e&&wc(ex,7),2&e)&&(kc(n=Sc())&&(t.nzSelect=n.first))},decls:58,vars:44,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nzFor","groupID",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","groupID","id","groupID"],["nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u540d\u79f0!",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["formControlName","type"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","avatar",3,"nzSm","nzXs"],["nz-input","","id","avatar","formControlName","avatar","placeholder","avatar"],["nz-input","","formControlName","introduction","placeholder","\u7fa4\u7b80\u4ecb",3,"maxlength","nzAutosize"],["nz-input","","formControlName","notification","placeholder","\u7fa4\u516c\u544a",3,"maxlength","nzAutosize"],["formControlName","joinOption"],["nz-radio","","nzValue","FreeAccess"],["nz-radio","","nzValue","NeedPermission"],["nz-radio","","nzValue","DisableApply"],["nzMode","multiple","nzPlaceHolder","\u8bf7\u8f93\u5165\u7fa4\u6210\u5458 userID","formControlName","memberList",3,"nzLoading"],["search",""],["nz-row","","nzJustify","center"],["nzPush","8",3,"nzSpan"],["nz-button","","nzType","primary"],[3,"nzSpan"],["nz-button","","nzType","default","type","button",3,"click"],[3,"nzLabel","nzValue"]],template:function(e,t){1&e&&(Hs(0,"form",0),Qs("ngSubmit",function(){return t.submitForm()}),Hs(1,"nz-form-item"),Hs(2,"nz-form-label",1),za(3,"\u7fa4ID"),qs(),Hs(4,"nz-form-control",2),Ws(5,"input",3),qs(),qs(),Hs(6,"nz-form-item"),Hs(7,"nz-form-label",4),Hs(8,"span"),za(9,"\u7fa4\u540d\u79f0"),qs(),qs(),Hs(10,"nz-form-control",5),Ws(11,"input",6),qs(),qs(),Hs(12,"nz-form-item"),Hs(13,"nz-form-label",4),za(14,"\u7fa4\u7c7b\u578b "),qs(),Hs(15,"nz-form-control",2),Hs(16,"nz-select",7),Us(17,tx,1,2,"nz-option",8),qs(),qs(),qs(),Hs(18,"nz-form-item"),Hs(19,"nz-form-label",9),za(20,"\u7fa4\u5934\u50cf\u5730\u5740"),qs(),Hs(21,"nz-form-control",2),Ws(22,"input",10),qs(),qs(),Hs(23,"nz-form-item"),Hs(24,"nz-form-label",2),za(25,"\u7fa4\u7b80\u4ecb"),qs(),Hs(26,"nz-form-control",2),Ws(27,"textarea",11),qs(),qs(),Hs(28,"nz-form-item"),Hs(29,"nz-form-label",2),za(30,"\u7fa4\u516c\u544a "),qs(),Hs(31,"nz-form-control",2),Ws(32,"textarea",12),qs(),qs(),Hs(33,"nz-form-item"),Hs(34,"nz-form-label",2),za(35,"\u52a0\u7fa4\u65b9\u5f0f "),qs(),Hs(36,"nz-form-control",2),Hs(37,"nz-radio-group",13),Hs(38,"label",14),za(39,"\u81ea\u7531\u52a0\u7fa4"),qs(),Hs(40,"label",15),za(41,"\u9700\u8981\u9a8c\u8bc1"),qs(),Hs(42,"label",16),za(43,"\u7981\u6b62\u52a0\u7fa4"),qs(),qs(),qs(),qs(),Hs(44,"nz-form-item"),Hs(45,"nz-form-label",2),za(46,"\u7fa4\u6210\u5458\u5217\u8868 "),qs(),Hs(47,"nz-form-control",2),Hs(48,"nz-select",17,18),Us(50,nx,1,2,"nz-option",8),qs(),qs(),qs(),Hs(51,"nz-form-item",19),Hs(52,"nz-form-control",20),Hs(53,"button",21),za(54,"\u7acb\u5373\u521b\u5efa"),qs(),qs(),Hs(55,"nz-form-control",22),Hs(56,"button",23),Qs("click",function(){return t.modalRef.destroy()}),za(57,"\u53d6\u6d88"),qs(),qs(),qs(),qs()),2&e&&(js("formGroup",t.validateForm),ho(2),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(3),js("nzSm",6)("nzXs",24),ho(3),js("nzSm",14)("nzXs",24),ho(3),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(2),js("ngForOf",t.groupTypeOption),ho(2),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(3),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(1),js("maxlength",240)("nzAutosize",nc(42,ix)),ho(2),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(1),js("maxlength",300)("nzAutosize",nc(43,ix)),ho(2),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(9),js("nzSm",6)("nzXs",24),ho(2),js("nzSm",14)("nzXs",24),ho(1),js("nzLoading",t.loading),ho(2),js("ngForOf",t.memberListOfOption),ho(2),js("nzSpan",12),ho(3),js("nzSpan",12))},directives:[YS,bS,RO,eE,rO,PO,oO,FO,LO,GO,YC,_S,nE,WA,Ql,VO,rE,YO,$O,VT,LT,AT,jA],styles:[""],changeDetection:0}),e}(),ox=function(){var e=function(){function e(t){b(this,e),this.timHelperService=t}return w(e,[{key:"ngOnInit",value:function(){}},{key:"handleGroupClick",value:function(){this.timHelperService.checkoutConversation("GROUP".concat(this.group.groupID))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-group-item"]],inputs:{group:"group"},decls:5,vars:2,consts:[[1,"scroll-container",3,"click"],[1,"group-item"],[3,"src"],[1,"group-name","text-ellipsis"]],template:function(e,t){1&e&&(Hs(0,"div",0),Qs("click",function(){return t.handleGroupClick()}),Hs(1,"div",1),Ws(2,"im-avatar",2),Hs(3,"div",3),za(4),qs(),qs(),qs()),2&e&&(ho(2),js("src",null==t.group?null:t.group.avatar),ho(2),La(null==t.group?null:t.group.name))},directives:[fD],styles:[".scroll-container[_ngcontent-%COMP%]{overflow-y:scroll;flex:1}.scroll-container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{display:flex;padding:10px 20px;cursor:pointer;position:relative;overflow:hidden;transition:.2s}.scroll-container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]:hover{background-color:#404953}.scroll-container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   im-avatar[_ngcontent-%COMP%]  .avatar{width:30px;height:30px;border-radius:50%;margin-right:10px;flex-shrink:0}.scroll-container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{flex:1;color:#f7f7f8;line-height:30px}"]}),e}(),sx=["search"];function ax(e,t){if(1&e&&Ws(0,"nz-option",9),2&e){var n=t.$implicit;js("nzLabel",n.groupID)("nzValue",n)}}function ux(e,t){1&e&&Ws(0,"app-group-item",10),2&e&&js("group",t.$implicit)}var cx=function(){var e=function(){function e(t,n,i,r){b(this,e),this.store=t,this.cd=n,this.modal=i,this.timHelper=r,this.loading=!1,this.groupList=[],this.groupListOfOption=[]}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(Fw).subscribe(function(t){e.groupList=t,e.cd.markForCheck()}),this.selectGroup.nzOnSearch.pipe(KT(600),Ev()).subscribe(function(t){e.searchGroupByID(t)})}},{key:"searchGroupByID",value:function(e){var t=this;e.trim().length>0&&(this.loading=!0,this.timHelper.tim.searchGroupByID(e).then(function(e){var n=e.data.group;t.groupListOfOption=[n],t.cd.markForCheck(),t.loading=!1}).catch(function(){t.store.dispatch(bw({msgType:qw.error,message:"\u6ca1\u6709\u627e\u5230\u8be5\u7fa4"})),t.loading=!1}))}},{key:"applyJoinGroup",value:function(e){var t=this;this.timHelper.tim.joinGroup({groupID:e.groupID}).then(function(e){return Ay(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.status,t.next=t.t0===Yw.TYPES.JOIN_STATUS_WAIT_APPROVAL?3:t.t0===Yw.TYPES.JOIN_STATUS_SUCCESS?5:t.t0===Yw.TYPES.JOIN_STATUS_ALREADY_IN_GROUP?11:12;break;case 3:return this.store.dispatch(bw({msgType:qw.info,message:"\u7533\u8bf7\u6210\u529f\uff0c\u7b49\u5f85\u7fa4\u7ba1\u7406\u5458\u786e\u8ba4\uff01"})),this.group=null,this.groupListOfOption=[],t.abrupt("break",12);case 5:return t.next=7,this.timHelper.checkoutConversation("GROUP".concat(e.data.group.groupID));case 7:return this.store.dispatch(bw({msgType:qw.success,message:"\u52a0\u7fa4\u6210\u529f"})),this.group=null,this.groupListOfOption=[],t.abrupt("break",12);case 11:this.store.dispatch(bw({msgType:qw.warning,message:"\u60a8\u5df2\u7ecf\u662f\u7fa4\u6210\u5458\u4e86\uff0c\u8bf7\u52ff\u91cd\u590d\u52a0\u7fa4\u54e6\uff01"})),this.group=null,this.groupListOfOption=[];case 12:this.cd.markForCheck();case 13:case"end":return t.stop()}},t,this)}))}).catch(function(e){t.store.dispatch(bw({msgType:qw.error,message:e.message}))})}},{key:"createGroup",value:function(){this.modal.create({nzTitle:"\u521b\u5efa\u7fa4\u7ec4",nzContent:rx,nzMaskClosable:!1,nzFooter:null,nzWidth:"40%",nzStyle:{top:"20px"}})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs(xu),Vs(YM),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-group-list"]],viewQuery:function(e,t){var n;(1&e&&wc(sx,7),2&e)&&(kc(n=Sc())&&(t.selectGroup=n.first))},decls:9,vars:4,consts:[[1,"list-container"],[1,"header-bar"],["nzShowSearch","","nzServerSearch","","nzSize","small","nzPlaceHolder","\u8f93\u5165\u7fa4ID\u641c\u7d22",3,"nzLoading","ngModel","ngModelChange"],["search",""],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["title","\u521b\u5efa\u7fa4\u7ec4",3,"click"],[1,"tim-icon-add"],[1,"group-container"],[3,"group",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],[3,"group"]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"div",1),Hs(2,"nz-select",2,3),Qs("ngModelChange",function(e){return t.group=e})("ngModelChange",function(e){return t.applyJoinGroup(e)}),Us(4,ax,1,2,"nz-option",4),qs(),Hs(5,"button",5),Qs("click",function(){return t.createGroup()}),Ws(6,"i",6),qs(),qs(),Hs(7,"div",7),Us(8,ux,1,1,"app-group-item",8),qs(),qs()),2&e&&(ho(2),js("nzLoading",t.loading)("ngModel",t.group),ho(2),js("ngForOf",t.groupListOfOption),ho(4),js("ngForOf",t.groupList))},directives:[WA,_S,KS,Ql,jA,ox],styles:[".list-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}.list-container[_ngcontent-%COMP%]   .group-container[_ngcontent-%COMP%]{overflow-y:scroll}.list-container[_ngcontent-%COMP%]   .header-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:center;align-content:center;flex-shrink:0;height:50px;border-bottom:1px solid #303841;padding:10px 10px 10px 20px}.list-container[_ngcontent-%COMP%]   .header-bar[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.list-container[_ngcontent-%COMP%]   .header-bar[_ngcontent-%COMP%]   .group-seach-bar[_ngcontent-%COMP%]{width:100%;margin-right:10px}.list-container[_ngcontent-%COMP%]   .header-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;display:inline-block;cursor:pointer;background:#303841;border:none;color:#76828c;box-sizing:border-box;transition:.3s;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin:0;padding:0;width:30px;height:30px;line-height:34px;font-size:24px;text-align:center;white-space:nowrap;border-radius:50%;outline:0;flex-shrink:0}.list-container[_ngcontent-%COMP%]   .header-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:rotate(1turn);color:#5cadff}.list-container[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{overflow-y:scroll;flex:1}"],changeDetection:0}),e}();function lx(e,t){1&e&&(Hs(0,"span"),za(1,"99+"),qs())}function hx(e,t){1&e&&za(0),2&e&&Na(" ",ra(2).totalUnreadCount," ")}function fx(e,t){if(1&e&&(Hs(0,"sup",10),Us(1,lx,2,0,"span",11),Us(2,hx,1,1,"ng-template",null,12,Mc),qs()),2&e){var n=Gs(3),i=ra();ho(1),js("ngIf",i.totalUnreadCount>99)("ngIfElse",n)}}function dx(e,t){1&e&&Ws(0,"app-conversation-list")}function px(e,t){1&e&&Ws(0,"app-group-list")}var gx=function(e){return{active:e}},vx=function(){var e=function(){function e(t,n){b(this,e),this.store=t,this.timHelperService=n,this.activeName={CONVERSATION_LIST:"conversation-list",GROUP_LIST:"group-list",FRIEND_LIST:"friend-list",BLACK_LIST:"black-list"},this.totalUnreadCount=0,this.active=this.activeName.CONVERSATION_LIST,this.showConversationList=!1}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.store.select(Ow).subscribe(function(t){e.computeCount(t)})}},{key:"handleClick",value:function(e){switch(e.target.id){case this.activeName.CONVERSATION_LIST:this.checkoutActive(this.activeName.CONVERSATION_LIST);break;case this.activeName.GROUP_LIST:this.checkoutActive(this.activeName.GROUP_LIST);break;case this.activeName.FRIEND_LIST:this.checkoutActive(this.activeName.FRIEND_LIST);break;case this.activeName.BLACK_LIST:this.checkoutActive(this.activeName.BLACK_LIST)}}},{key:"checkoutActive",value:function(e){this.active=e}},{key:"logout",value:function(){this.timHelperService.logout()}},{key:"getGroupList",value:function(){var e=this;this.timHelperService.tim.getGroupList().then(function(t){var n=t.data;e.store.dispatch(zw({groupList:n}))}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"computeCount",value:function(e){var t,n=this,i=e.conversationList.reduce(function(t,i){return n.totalUnreadCount=n.hidden()||e.currentConversation.conversationID!==i.conversationID?t+i.unreadCount:t},0);return(t=i)>0?document.title.search(/\((.*?)\)/)>=0?document.title=document.title.replace(/\((.*?)\)/,"(".concat(t>99?"99+":t,")")):document.title="(".concat(t,")").concat(document.title):document.title=document.title.replace(/\((.*?)\)/,""),this.timHelperService.totalUnRead.next(i),this.totalUnreadCount=i}},{key:"hidden",value:function(){return"function"!=typeof document.hasFocus?document.hidden:!document.hasFocus()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-side-bar"]],decls:12,vars:9,consts:[[1,"side-bar-wrapper"],[1,"bar-left"],[1,"tab-items",3,"click"],["id","conversation-list","title","\u4f1a\u8bdd\u5217\u8868",1,"iconfont","icon-conversation",3,"ngClass"],["class","unread",4,"ngIf"],["id","group-list","title","\u7fa4\u7ec4\u5217\u8868",1,"iconfont","icon-group",3,"ngClass"],[1,"bottom"],["title","\u9000\u51fa",1,"iconfont","icon-tuichu",3,"click"],[1,"bar-right"],[4,"ngIf"],[1,"unread"],[4,"ngIf","ngIfElse"],["count",""]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"div",1),Ws(2,"app-my-profile"),Hs(3,"div",2),Qs("click",function(e){return t.handleClick(e)}),Hs(4,"div",3),Us(5,fx,4,2,"sup",4),qs(),Ws(6,"div",5),qs(),Hs(7,"div",6),Hs(8,"div",7),Qs("click",function(){return t.logout()}),qs(),qs(),qs(),Hs(9,"div",8),Us(10,dx,1,0,"app-conversation-list",9),Us(11,px,1,0,"app-group-list",9),qs(),qs()),2&e&&(ho(4),js("ngClass",ic(5,gx,t.active===t.activeName.CONVERSATION_LIST)),ho(1),js("ngIf",0!==t.totalUnreadCount),ho(1),js("ngClass",ic(7,gx,t.active===t.activeName.GROUP_LIST)),ho(4),js("ngIf",t.active===t.activeName.CONVERSATION_LIST),ho(1),js("ngIf",t.active===t.activeName.GROUP_LIST))},directives:[vD,Xl,th,OD,cx],styles:[".side-bar-wrapper[_ngcontent-%COMP%]{height:100%;color:#000;display:flex;overflow:hidden}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]{width:14rem;min-width:0;height:80vh;position:relative;background-color:#363e47}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]{display:flex;flex-shrink:0;flex-direction:column;align-items:center;width:4rem;height:80vh;background-color:#303841}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .tab-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .tab-items[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{position:relative;margin:0;height:70px;line-height:70px;text-align:center;font-size:30px;cursor:pointer;color:#a5b5c1;-webkit-user-select:none;user-select:none;-moz-user-select:none}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .tab-items[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .tab-items[_ngcontent-%COMP%]   .unread[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:999;display:inline-block;height:18px;padding:0 6px;font-size:12px;color:#fff;line-height:18px;text-align:center;white-space:nowrap;border-radius:10px;background-color:#f35f5f}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{height:70px}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{width:100%;height:70px;line-height:70px;font-size:30px;color:#a5b5c1;text-align:center;cursor:pointer}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{height:70px;line-height:70px;text-align:center;font-size:30px;cursor:pointer;color:#a5b5c1;-webkit-user-select:none;user-select:none;-moz-user-select:none}.side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]:hover, .side-bar-wrapper[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]:hover{color:#fff}"]}),e}(),mx=function(){var e=function(){function e(t,n){b(this,e),this.store=t,this.config=n,this.detailBtnClick=new cc,this.minimizeClick=new cc}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(Dw).subscribe(function(t){e.currentConversation=t})}},{key:"detailIsHidden",get:function(){var e,t="{}"===JSON.stringify(this.currentConversation);return t||!t&&(null===(e=this.currentConversation)||void 0===e?void 0:e.conversationID.includes("SYSTEM"))}},{key:"name",get:function(){var e;switch(null===(e=this.currentConversation)||void 0===e?void 0:e.type){case Ww.client:return this.currentConversation.userProfile.nick||this.currentConversation.userProfile.userID;case Ww.group:return this.currentConversation.groupProfile.name;case Ww.system:return"\u7cfb\u7edf\u901a\u77e5";default:return null}}},{key:"handleClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.detailBtnClick.emit()}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs(Hw))},e.\u0275cmp=at({type:e,selectors:[["lib-title"]],outputs:{detailBtnClick:"detailBtnClick",minimizeClick:"minimizeClick"},decls:9,vars:3,consts:[["nz-row","",1,"title"],["nz-col","","nzSpan","12"],[1,"title-name"],["nz-col","","nzSpan","12",1,"icon-content"],[1,"minimize"],["nz-icon","","nzType","minus","nzTheme","outline",3,"hidden","click"],["nz-icon","","nzType","small-dash","nzTheme","outline","title","\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f",3,"hidden","click"]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"div",1),Hs(2,"span",2),za(3),qs(),qs(),Hs(4,"div",3),Hs(5,"div",4),Hs(6,"i",5),Qs("click",function(){return t.minimizeClick.emit()}),qs(),qs(),Hs(7,"div"),Hs(8,"i",6),Qs("click",function(e){return t.handleClick(e)}),qs(),qs(),qs(),qs()),2&e&&(ho(3),Na(" ",t.name," "),ho(3),js("hidden",!t.config.minimized),ho(2),js("hidden",t.detailIsHidden))},directives:[rO,oO,AT,ib],styles:[".title[_ngcontent-%COMP%]{background-color:#f5f5f5}.title-name[_ngcontent-%COMP%]{padding:0 20px;color:#1c2438;font-size:18px;font-weight:700;line-height:50px;text-shadow:#76828c 0 0 .1em}.icon-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;align-items:flex-end}.icon-content[_ngcontent-%COMP%]   .minimize[_ngcontent-%COMP%]{flex:1}i[_ngcontent-%COMP%]{padding:6px;cursor:pointer}i[_ngcontent-%COMP%]:hover{background-color:#e5e5e5}"]}),e}(),yx=function(){var e=function(){function e(t){b(this,e),this.timHelperService=t}return w(e,[{key:"ngOnInit",value:function(){}},{key:"messageIconClass",get:function(){switch(this.message.status){case"unSend":return"el-icon-loading";case"fail":return"message-send-fail";default:return""}}},{key:"handleIconClick",value:function(){"message-send-fail"===this.messageIconClass&&this.timHelperService.tim.resendMessage(this.message).catch(function(e){console.error(e.message)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-message-status-icon"]],inputs:{message:"message"},decls:2,vars:3,consts:[[2,"width","16px","height","16px",3,"click"]],template:function(e,t){1&e&&(Hs(0,"div",0),Qs("click",function(){return t.handleIconClick()}),za(1),qs()),2&e&&(wa(t.messageIconClass),ho(1),Na(" ","message-send-fail"===t.messageIconClass?"!":"",""))},styles:[".message-send-fail[_ngcontent-%COMP%]{margin-right:8px;background-color:#f35f5f;color:#fff;border-radius:50%;text-align:center;line-height:16px;cursor:pointer}"]}),e}(),_x="https://imgcache.qq.com/open/qcloud/tim/assets/emoji/",bx={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[\u4e0b\u96e8]":"emoji_2@2x.png","[\u4e48\u4e48\u54d2]":"emoji_3@2x.png","[\u4e52\u4e53]":"emoji_4@2x.png","[\u4fbf\u4fbf]":"emoji_5@2x.png","[\u4fe1\u5c01]":"emoji_6@2x.png","[\u5077\u7b11]":"emoji_7@2x.png","[\u50b2\u6162]":"emoji_8@2x.png","[\u518d\u89c1]":"emoji_9@2x.png","[\u51b7\u6c57]":"emoji_10@2x.png","[\u51cb\u8c22]":"emoji_11@2x.png","[\u5200]":"emoji_12@2x.png","[\u5220\u9664]":"emoji_13@2x.png","[\u52fe\u5f15]":"emoji_14@2x.png","[\u53d1\u5446]":"emoji_15@2x.png","[\u53d1\u6296]":"emoji_16@2x.png","[\u53ef\u601c]":"emoji_17@2x.png","[\u53ef\u7231]":"emoji_18@2x.png","[\u53f3\u54fc\u54fc]":"emoji_19@2x.png","[\u53f3\u592a\u6781]":"emoji_20@2x.png","[\u53f3\u8f66\u5934]":"emoji_21@2x.png","[\u5410]":"emoji_22@2x.png","[\u5413]":"emoji_23@2x.png","[\u5492\u9a82]":"emoji_24@2x.png","[\u5496\u5561]":"emoji_25@2x.png","[\u5564\u9152]":"emoji_26@2x.png","[\u5618]":"emoji_27@2x.png","[\u56de\u5934]":"emoji_28@2x.png","[\u56f0]":"emoji_29@2x.png","[\u574f\u7b11]":"emoji_30@2x.png","[\u591a\u4e91]":"emoji_31@2x.png","[\u5927\u5175]":"emoji_32@2x.png","[\u5927\u54ed]":"emoji_33@2x.png","[\u592a\u9633]":"emoji_34@2x.png","[\u594b\u6597]":"emoji_35@2x.png","[\u5976\u74f6]":"emoji_36@2x.png","[\u59d4\u5c48]":"emoji_37@2x.png","[\u5bb3\u7f9e]":"emoji_38@2x.png","[\u5c34\u5c2c]":"emoji_39@2x.png","[\u5de6\u54fc\u54fc]":"emoji_40@2x.png","[\u5de6\u592a\u6781]":"emoji_41@2x.png","[\u5de6\u8f66\u5934]":"emoji_42@2x.png","[\u5dee\u52b2]":"emoji_43@2x.png","[\u5f31]":"emoji_44@2x.png","[\u5f3a]":"emoji_45@2x.png","[\u5f69\u5e26]":"emoji_46@2x.png","[\u5f69\u7403]":"emoji_47@2x.png","[\u5f97\u610f]":"emoji_48@2x.png","[\u5fae\u7b11]":"emoji_49@2x.png","[\u5fc3\u788e\u4e86]":"emoji_50@2x.png","[\u5feb\u54ed\u4e86]":"emoji_51@2x.png","[\u6004\u706b]":"emoji_52@2x.png","[\u6012]":"emoji_53@2x.png","[\u60ca\u6050]":"emoji_54@2x.png","[\u60ca\u8bb6]":"emoji_55@2x.png","[\u61a8\u7b11]":"emoji_56@2x.png","[\u624b\u67aa]":"emoji_57@2x.png","[\u6253\u54c8\u6b20]":"emoji_58@2x.png","[\u6293\u72c2]":"emoji_59@2x.png","[\u6298\u78e8]":"emoji_60@2x.png","[\u62a0\u9f3b]":"emoji_61@2x.png","[\u62b1\u62b1]":"emoji_62@2x.png","[\u62b1\u62f3]":"emoji_63@2x.png","[\u62f3\u5934]":"emoji_64@2x.png","[\u6325\u624b]":"emoji_65@2x.png","[\u63e1\u624b]":"emoji_66@2x.png","[\u6487\u5634]":"emoji_67@2x.png","[\u64e6\u6c57]":"emoji_68@2x.png","[\u6572\u6253]":"emoji_69@2x.png","[\u6655]":"emoji_70@2x.png","[\u6708\u4eae]":"emoji_71@2x.png","[\u68d2\u68d2\u7cd6]":"emoji_72@2x.png","[\u6c7d\u8f66]":"emoji_73@2x.png","[\u6c99\u53d1]":"emoji_74@2x.png","[\u6d41\u6c57]":"emoji_75@2x.png","[\u6d41\u6cea]":"emoji_76@2x.png","[\u6fc0\u52a8]":"emoji_77@2x.png","[\u706f\u6ce1]":"emoji_78@2x.png","[\u70b8\u5f39]":"emoji_79@2x.png","[\u718a\u732b]":"emoji_80@2x.png","[\u7206\u7b4b]":"emoji_81@2x.png","[\u7231\u4f60]":"emoji_82@2x.png","[\u7231\u5fc3]":"emoji_83@2x.png","[\u7231\u60c5]":"emoji_84@2x.png","[\u732a\u5934]":"emoji_85@2x.png","[\u732b\u54aa]":"emoji_86@2x.png","[\u732e\u543b]":"emoji_87@2x.png","[\u73ab\u7470]":"emoji_88@2x.png","[\u74e2\u866b]":"emoji_89@2x.png","[\u7591\u95ee]":"emoji_90@2x.png","[\u767d\u773c]":"emoji_91@2x.png","[\u76ae\u7403]":"emoji_92@2x.png","[\u7761\u89c9]":"emoji_93@2x.png","[\u78d5\u5934]":"emoji_94@2x.png","[\u793a\u7231]":"emoji_95@2x.png","[\u793c\u54c1\u888b]":"emoji_96@2x.png","[\u793c\u7269]":"emoji_97@2x.png","[\u7bee\u7403]":"emoji_98@2x.png","[\u7c73\u996d]":"emoji_99@2x.png","[\u7cd7\u5927\u4e86]":"emoji_100@2x.png","[\u7ea2\u53cc\u559c]":"emoji_101@2x.png","[\u7ea2\u706f\u7b3c]":"emoji_102@2x.png","[\u7eb8\u5dfe]":"emoji_103@2x.png","[\u80dc\u5229]":"emoji_104@2x.png","[\u8272]":"emoji_105@2x.png","[\u836f]":"emoji_106@2x.png","[\u83dc\u5200]":"emoji_107@2x.png","[\u86cb\u7cd5]":"emoji_108@2x.png","[\u8721\u70db]":"emoji_109@2x.png","[\u8857\u821e]":"emoji_110@2x.png","[\u8870]":"emoji_111@2x.png","[\u897f\u74dc]":"emoji_112@2x.png","[\u8c03\u76ae]":"emoji_113@2x.png","[\u8c61\u68cb]":"emoji_114@2x.png","[\u8df3\u7ef3]":"emoji_115@2x.png","[\u8df3\u8df3]":"emoji_116@2x.png","[\u8f66\u53a2]":"emoji_117@2x.png","[\u8f6c\u5708]":"emoji_118@2x.png","[\u9119\u89c6]":"emoji_119@2x.png","[\u9177]":"emoji_120@2x.png","[\u949e\u7968]":"emoji_121@2x.png","[\u94bb\u6212]":"emoji_122@2x.png","[\u95ea\u7535]":"emoji_123@2x.png","[\u95ed\u5634]":"emoji_124@2x.png","[\u95f9\u949f]":"emoji_125@2x.png","[\u9634\u9669]":"emoji_126@2x.png","[\u96be\u8fc7]":"emoji_127@2x.png","[\u96e8\u4f1e]":"emoji_128@2x.png","[\u9752\u86d9]":"emoji_129@2x.png","[\u9762\u6761]":"emoji_130@2x.png","[\u97ad\u70ae]":"emoji_131@2x.png","[\u98ce\u8f66]":"emoji_132@2x.png","[\u98de\u543b]":"emoji_133@2x.png","[\u98de\u673a]":"emoji_134@2x.png","[\u9965\u997f]":"emoji_135@2x.png","[\u9999\u8549]":"emoji_136@2x.png","[\u9ab7\u9ac5]":"emoji_137@2x.png","[\u9ea6\u514b\u98ce]":"emoji_138@2x.png","[\u9ebb\u5c06]":"emoji_139@2x.png","[\u9f13\u638c]":"emoji_140@2x.png","[\u9f87\u7259]":"emoji_141@2x.png"},kx=["[\u9f87\u7259]","[\u8c03\u76ae]","[\u6d41\u6c57]","[\u5077\u7b11]","[\u518d\u89c1]","[\u6572\u6253]","[\u64e6\u6c57]","[\u732a\u5934]","[\u73ab\u7470]","[\u6d41\u6cea]","[\u5927\u54ed]","[\u5618]","[\u9177]","[\u6293\u72c2]","[\u59d4\u5c48]","[\u4fbf\u4fbf]","[\u70b8\u5f39]","[\u83dc\u5200]","[\u53ef\u7231]","[\u8272]","[\u5bb3\u7f9e]","[\u5f97\u610f]","[\u5410]","[\u5fae\u7b11]","[\u6012]","[\u5c34\u5c2c]","[\u60ca\u6050]","[\u51b7\u6c57]","[\u7231\u5fc3]","[\u793a\u7231]","[\u767d\u773c]","[\u50b2\u6162]","[\u96be\u8fc7]","[\u60ca\u8bb6]","[\u7591\u95ee]","[\u56f0]","[\u4e48\u4e48\u54d2]","[\u61a8\u7b11]","[\u7231\u60c5]","[\u8870]","[\u6487\u5634]","[\u9634\u9669]","[\u594b\u6597]","[\u53d1\u5446]","[\u53f3\u54fc\u54fc]","[\u62b1\u62b1]","[\u574f\u7b11]","[\u98de\u543b]","[\u9119\u89c6]","[\u6655]","[\u5927\u5175]","[\u53ef\u601c]","[\u5f3a]","[\u5f31]","[\u63e1\u624b]","[\u80dc\u5229]","[\u62b1\u62f3]","[\u51cb\u8c22]","[\u7c73\u996d]","[\u86cb\u7cd5]","[\u897f\u74dc]","[\u5564\u9152]","[\u74e2\u866b]","[\u52fe\u5f15]","[OK]","[\u7231\u4f60]","[\u5496\u5561]","[\u6708\u4eae]","[\u5200]","[\u53d1\u6296]","[\u5dee\u52b2]","[\u62f3\u5934]","[\u5fc3\u788e\u4e86]","[\u592a\u9633]","[\u793c\u7269]","[\u76ae\u7403]","[\u9ab7\u9ac5]","[\u6325\u624b]","[\u95ea\u7535]","[\u9965\u997f]","[\u5492\u9a82]","[\u6298\u78e8]","[\u62a0\u9f3b]","[\u9f13\u638c]","[\u7cd7\u5927\u4e86]","[\u5de6\u54fc\u54fc]","[\u6253\u54c8\u6b20]","[\u5feb\u54ed\u4e86]","[\u5413]","[\u7bee\u7403]","[\u4e52\u4e53]","[NO]","[\u8df3\u8df3]","[\u6004\u706b]","[\u8f6c\u5708]","[\u78d5\u5934]","[\u56de\u5934]","[\u8df3\u7ef3]","[\u6fc0\u52a8]","[\u8857\u821e]","[\u732e\u543b]","[\u5de6\u592a\u6781]","[\u53f3\u592a\u6781]","[\u95ed\u5634]","[\u732b\u54aa]","[\u7ea2\u53cc\u559c]","[\u97ad\u70ae]","[\u7ea2\u706f\u7b3c]","[\u9ebb\u5c06]","[\u9ea6\u514b\u98ce]","[\u793c\u54c1\u888b]","[\u4fe1\u5c01]","[\u8c61\u68cb]","[\u5f69\u5e26]","[\u8721\u70db]","[\u7206\u7b4b]","[\u68d2\u68d2\u7cd6]","[\u5976\u74f6]","[\u9762\u6761]","[\u9999\u8549]","[\u98de\u673a]","[\u5de6\u8f66\u5934]","[\u8f66\u53a2]","[\u53f3\u8f66\u5934]","[\u591a\u4e91]","[\u4e0b\u96e8]","[\u949e\u7968]","[\u718a\u732b]","[\u706f\u6ce1]","[\u98ce\u8f66]","[\u95f9\u949f]","[\u96e8\u4f1e]","[\u5f69\u7403]","[\u94bb\u6212]","[\u6c99\u53d1]","[\u7eb8\u5dfe]","[\u624b\u67aa]","[\u9752\u86d9]"],wx=["nz-submenu",""];function Cx(e,t){1&e&&aa(0,0,["*ngIf","!nzTitle"])}function Sx(e,t){if(1&e&&Ws(0,"div",6),2&e){var n=ra(),i=Gs(7);js("mode",n.mode)("nzOpen",n.nzOpen)("@.disabled",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("menuClass",n.nzMenuClassName)("templateOutlet",i)}}function Ex(e,t){if(1&e){var n=$s();Hs(0,"div",8),Qs("subMenuMouseState",function(e){return $t(n),ra(2).setMouseEnterState(e)}),qs()}if(2&e){var i=ra(2),r=Gs(7);js("theme",i.theme)("mode",i.mode)("nzOpen",i.nzOpen)("position",i.position)("nzDisabled",i.nzDisabled)("isMenuInsideDropDown",i.isMenuInsideDropDown)("templateOutlet",r)("menuClass",i.nzMenuClassName)("@.disabled",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("nzNoAnimation",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)}}function Ix(e,t){if(1&e){var n=$s();Us(0,Ex,1,10,"ng-template",7),Qs("positionChange",function(e){return $t(n),ra().onPositionChange(e)})}if(2&e){var i=ra(),r=Gs(1);js("cdkConnectedOverlayPositions",i.overlayPositions)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayWidth",i.triggerWidth)("cdkConnectedOverlayOpen",i.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-menu-submenu")}}function Tx(e,t){1&e&&aa(0,1)}var Mx=[[["","title",""]],"*"],Ox=["[title]","*"],Dx=["nz-submenu-title",""];function Ax(e,t){1&e&&Ws(0,"i",4),2&e&&js("nzType",ra().nzIcon)}function xx(e,t){if(1&e&&(Ks(0),Hs(1,"span"),za(2),qs(),Ys()),2&e){var n=ra();ho(2),La(n.nzTitle)}}function Rx(e,t){1&e&&Ws(0,"i",8)}function Px(e,t){1&e&&Ws(0,"i",9)}function zx(e,t){1&e&&(Hs(0,"span",5),Us(1,Rx,1,0,"i",6),Us(2,Px,1,0,"i",7),qs()),2&e&&(js("ngSwitch",ra().dir),ho(1),js("ngSwitchCase","rtl"))}function Lx(e,t){1&e&&Ws(0,"i",10)}var Nx=["*"],Fx=["nz-submenu-inline-child",""];function Ux(e,t){}var Gx=["nz-submenu-none-inline-child",""];function Vx(e,t){}var jx=function(){var e=function(){function e(){b(this,e),this.descendantMenuItemClick$=new V,this.childMenuItemClick$=new V,this.theme$=new Qh("light"),this.mode$=new Qh("vertical"),this.inlineIndent$=new Qh(24),this.isChildSubMenuOpen$=new Qh(!1)}return w(e,[{key:"onDescendantMenuItemClick",value:function(e){this.descendantMenuItemClick$.next(e)}},{key:"onChildMenuItemClick",value:function(e){this.childMenuItemClick$.next(e)}},{key:"setMode",value:function(e){this.mode$.next(e)}},{key:"setTheme",value:function(e){this.theme$.next(e)}},{key:"setInlineIndent",value:function(e){this.inlineIndent$.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Bx=new ai("NzIsInDropDownMenuToken"),Hx=new ai("NzMenuServiceLocalToken"),qx=function(){var e=function(){function e(t,i,r){var o=this;b(this,e),this.nzHostSubmenuService=t,this.nzMenuService=i,this.isMenuInsideDropDown=r,this.mode$=this.nzMenuService.mode$.pipe(J(function(e){return"inline"===e?"inline":"vertical"===e||o.nzHostSubmenuService?"vertical":"horizontal"})),this.level=1,this.isCurrentSubMenuOpen$=new Qh(!1),this.isChildSubMenuOpen$=new Qh(!1),this.isMouseEnterTitleOrOverlay$=new V,this.childMenuItemClick$=new V,this.destroy$=new V,this.nzHostSubmenuService&&(this.level=this.nzHostSubmenuService.level+1);var s=this.childMenuItemClick$.pipe(ie(function(){return o.mode$}),kf(function(e){return"inline"!==e||o.isMenuInsideDropDown}),H_(!1)),a=ue(this.isMouseEnterTitleOrOverlay$,s);tf([this.isChildSubMenuOpen$,a]).pipe(J(function(e){var t=n(e,2),i=t[0],r=t[1];return i||r}),Pv(150),Ev(),ev(this.destroy$)).pipe(Ev()).subscribe(function(e){o.setOpenStateWithoutDebounce(e),o.nzHostSubmenuService?o.nzHostSubmenuService.isChildSubMenuOpen$.next(e):o.nzMenuService.isChildSubMenuOpen$.next(e)})}return w(e,[{key:"onChildMenuItemClick",value:function(e){this.childMenuItemClick$.next(e)}},{key:"setOpenStateWithoutDebounce",value:function(e){this.isCurrentSubMenuOpen$.next(e)}},{key:"setMouseEnterTitleOrOverlayState",value:function(e){this.isMouseEnterTitleOrOverlay$.next(e)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(e,12),Si(jx),Si(Bx))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),Wx=function(){var e=function(){function e(t,n,i,r,o,s,a,u){var c=this;b(this,e),this.nzMenuService=t,this.cdr=n,this.nzSubmenuService=i,this.isMenuInsideDropDown=r,this.directionality=o,this.routerLink=s,this.routerLinkWithHref=a,this.router=u,this.destroy$=new V,this.level=this.nzSubmenuService?this.nzSubmenuService.level+1:1,this.selected$=new V,this.inlinePaddingLeft=null,this.dir="ltr",this.nzDisabled=!1,this.nzSelected=!1,this.nzDanger=!1,this.nzMatchRouterExact=!1,this.nzMatchRouter=!1,u&&this.router.events.pipe(ev(this.destroy$),kf(function(e){return e instanceof Yf})).subscribe(function(){c.updateRouterActive()})}return w(e,[{key:"clickMenuItem",value:function(e){this.nzDisabled?(e.preventDefault(),e.stopPropagation()):(this.nzMenuService.onDescendantMenuItemClick(this),this.nzSubmenuService?this.nzSubmenuService.onChildMenuItemClick(this):this.nzMenuService.onChildMenuItemClick(this))}},{key:"setSelectedState",value:function(e){this.nzSelected=e,this.selected$.next(e)}},{key:"updateRouterActive",value:function(){var e=this;this.listOfRouterLink&&this.listOfRouterLinkWithHref&&this.router&&this.router.navigated&&this.nzMatchRouter&&Promise.resolve().then(function(){var t=e.hasActiveLinks();e.nzSelected!==t&&(e.nzSelected=t,e.setSelectedState(e.nzSelected),e.cdr.markForCheck())})}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.routerLink&&e(this.routerLink)||this.routerLinkWithHref&&e(this.routerLinkWithHref)||this.listOfRouterLink.some(e)||this.listOfRouterLinkWithHref.some(e)}},{key:"isLinkActive",value:function(e){var t=this;return function(n){return e.isActive(n.urlTree,t.nzMatchRouterExact)}}},{key:"ngOnInit",value:function(){var e,t=this;tf([this.nzMenuService.mode$,this.nzMenuService.inlineIndent$]).pipe(ev(this.destroy$)).subscribe(function(e){var i=n(e,2),r=i[0],o=i[1];t.inlinePaddingLeft="inline"===r?t.level*o:null}),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e})}},{key:"ngAfterContentInit",value:function(){var e=this;this.listOfRouterLink.changes.pipe(ev(this.destroy$)).subscribe(function(){return e.updateRouterActive()}),this.listOfRouterLinkWithHref.changes.pipe(ev(this.destroy$)).subscribe(function(){return e.updateRouterActive()}),this.updateRouterActive()}},{key:"ngOnChanges",value:function(e){e.nzSelected&&this.setSelectedState(this.nzSelected)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(jx),Vs(xu),Vs(qx,8),Vs(Bx),Vs(rm,8),Vs(bg,8),Vs(kg,8),Vs(_g,8))},e.\u0275dir=dt({type:e,selectors:[["","nz-menu-item",""]],contentQueries:function(e,t,n){var i;(1&e&&(Cc(n,bg,5),Cc(n,kg,5)),2&e)&&(kc(i=Sc())&&(t.listOfRouterLink=i),kc(i=Sc())&&(t.listOfRouterLinkWithHref=i))},hostVars:20,hostBindings:function(e,t){1&e&&Qs("click",function(e){return t.clickMenuItem(e)}),2&e&&(_a("padding-left","rtl"===t.dir?null:t.nzPaddingLeft||t.inlinePaddingLeft,"px")("padding-right","rtl"===t.dir?t.nzPaddingLeft||t.inlinePaddingLeft:null,"px"),ba("ant-dropdown-menu-item",t.isMenuInsideDropDown)("ant-dropdown-menu-item-selected",t.isMenuInsideDropDown&&t.nzSelected)("ant-dropdown-menu-item-danger",t.isMenuInsideDropDown&&t.nzDanger)("ant-dropdown-menu-item-disabled",t.isMenuInsideDropDown&&t.nzDisabled)("ant-menu-item",!t.isMenuInsideDropDown)("ant-menu-item-selected",!t.isMenuInsideDropDown&&t.nzSelected)("ant-menu-item-danger",!t.isMenuInsideDropDown&&t.nzDanger)("ant-menu-item-disabled",!t.isMenuInsideDropDown&&t.nzDisabled))},inputs:{nzDisabled:"nzDisabled",nzSelected:"nzSelected",nzDanger:"nzDanger",nzMatchRouterExact:"nzMatchRouterExact",nzMatchRouter:"nzMatchRouter",nzPaddingLeft:"nzPaddingLeft"},exportAs:["nzMenuItem"],features:[It]}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzSelected",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDanger",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzMatchRouterExact",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzMatchRouter",void 0),e}(),Kx=[lO.rightTop,lO.right,lO.rightBottom,lO.leftTop,lO.left,lO.leftBottom],Yx=[lO.bottomLeft],$x=function(){var e=function(){function e(t,n,i,r,o,s,a){b(this,e),this.nzMenuService=t,this.cdr=n,this.nzSubmenuService=i,this.platform=r,this.isMenuInsideDropDown=o,this.directionality=s,this.noAnimation=a,this.nzMenuClassName="",this.nzPaddingLeft=null,this.nzTitle=null,this.nzIcon=null,this.nzOpen=!1,this.nzDisabled=!1,this.nzOpenChange=new cc,this.cdkOverlayOrigin=null,this.listOfNzSubMenuComponent=null,this.listOfNzMenuItemDirective=null,this.level=this.nzSubmenuService.level,this.destroy$=new V,this.position="right",this.triggerWidth=null,this.theme="light",this.mode="vertical",this.inlinePaddingLeft=null,this.overlayPositions=Kx,this.isSelected=!1,this.isActive=!1,this.dir="ltr"}return w(e,[{key:"setOpenStateWithoutDebounce",value:function(e){this.nzSubmenuService.setOpenStateWithoutDebounce(e)}},{key:"toggleSubMenu",value:function(){this.setOpenStateWithoutDebounce(!this.nzOpen)}},{key:"setMouseEnterState",value:function(e){this.isActive=e,"inline"!==this.mode&&this.nzSubmenuService.setMouseEnterTitleOrOverlayState(e)}},{key:"setTriggerWidth",value:function(){"horizontal"===this.mode&&this.platform.isBrowser&&this.cdkOverlayOrigin&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}},{key:"onPositionChange",value:function(e){var t=fO(e);"rightTop"===t||"rightBottom"===t||"right"===t?this.position="right":"leftTop"!==t&&"leftBottom"!==t&&"left"!==t||(this.position="left"),this.cdr.markForCheck()}},{key:"ngOnInit",value:function(){var e,t=this;this.nzMenuService.theme$.pipe(ev(this.destroy$)).subscribe(function(e){t.theme=e,t.cdr.markForCheck()}),this.nzSubmenuService.mode$.pipe(ev(this.destroy$)).subscribe(function(e){t.mode=e,"horizontal"===e?t.overlayPositions=Yx:"vertical"===e&&(t.overlayPositions=Kx),t.cdr.markForCheck()}),tf([this.nzSubmenuService.mode$,this.nzMenuService.inlineIndent$]).pipe(ev(this.destroy$)).subscribe(function(e){var i=n(e,2),r=i[0],o=i[1];t.inlinePaddingLeft="inline"===r?t.level*o:null,t.cdr.markForCheck()}),this.nzSubmenuService.isCurrentSubMenuOpen$.pipe(ev(this.destroy$)).subscribe(function(e){t.isActive=e,e!==t.nzOpen&&(t.setTriggerWidth(),t.nzOpen=e,t.nzOpenChange.emit(t.nzOpen),t.cdr.markForCheck())}),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.markForCheck()})}},{key:"ngAfterContentInit",value:function(){var e=this;this.setTriggerWidth();var t=this.listOfNzMenuItemDirective,n=t.changes,i=ue.apply(void 0,[n].concat(o(t.map(function(e){return e.selected$}))));n.pipe(mf(t),lf(function(){return i}),mf(!0),J(function(){return t.some(function(e){return e.nzSelected})}),ev(this.destroy$)).subscribe(function(t){e.isSelected=t,e.cdr.markForCheck()})}},{key:"ngOnChanges",value:function(e){e.nzOpen&&(this.nzSubmenuService.setOpenStateWithoutDebounce(this.nzOpen),this.setTriggerWidth())}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(jx),Vs(xu),Vs(qx),Vs(Xv),Vs(Bx),Vs(rm,8),Vs(BT,9))},e.\u0275cmp=at({type:e,selectors:[["","nz-submenu",""]],contentQueries:function(t,n,i){var r;(1&t&&(Cc(i,e,5),Cc(i,Wx,5)),2&t)&&(kc(r=Sc())&&(n.listOfNzSubMenuComponent=r),kc(r=Sc())&&(n.listOfNzMenuItemDirective=r))},viewQuery:function(e,t){var n;(1&e&&wc(iy,7,su),2&e)&&(kc(n=Sc())&&(t.cdkOverlayOrigin=n.first))},hostVars:34,hostBindings:function(e,t){2&e&&ba("ant-dropdown-menu-submenu",t.isMenuInsideDropDown)("ant-dropdown-menu-submenu-disabled",t.isMenuInsideDropDown&&t.nzDisabled)("ant-dropdown-menu-submenu-open",t.isMenuInsideDropDown&&t.nzOpen)("ant-dropdown-menu-submenu-selected",t.isMenuInsideDropDown&&t.isSelected)("ant-dropdown-menu-submenu-vertical",t.isMenuInsideDropDown&&"vertical"===t.mode)("ant-dropdown-menu-submenu-horizontal",t.isMenuInsideDropDown&&"horizontal"===t.mode)("ant-dropdown-menu-submenu-inline",t.isMenuInsideDropDown&&"inline"===t.mode)("ant-dropdown-menu-submenu-active",t.isMenuInsideDropDown&&t.isActive)("ant-menu-submenu",!t.isMenuInsideDropDown)("ant-menu-submenu-disabled",!t.isMenuInsideDropDown&&t.nzDisabled)("ant-menu-submenu-open",!t.isMenuInsideDropDown&&t.nzOpen)("ant-menu-submenu-selected",!t.isMenuInsideDropDown&&t.isSelected)("ant-menu-submenu-vertical",!t.isMenuInsideDropDown&&"vertical"===t.mode)("ant-menu-submenu-horizontal",!t.isMenuInsideDropDown&&"horizontal"===t.mode)("ant-menu-submenu-inline",!t.isMenuInsideDropDown&&"inline"===t.mode)("ant-menu-submenu-active",!t.isMenuInsideDropDown&&t.isActive)("ant-menu-submenu-rtl","rtl"===t.dir)},inputs:{nzMenuClassName:"nzMenuClassName",nzPaddingLeft:"nzPaddingLeft",nzTitle:"nzTitle",nzIcon:"nzIcon",nzOpen:"nzOpen",nzDisabled:"nzDisabled"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzSubmenu"],features:[Qa([qx]),It],attrs:wx,ngContentSelectors:Ox,decls:8,vars:9,consts:[["nz-submenu-title","","cdkOverlayOrigin","",3,"nzIcon","nzTitle","mode","nzDisabled","isMenuInsideDropDown","paddingLeft","subMenuMouseState","toggleSubMenu"],["origin","cdkOverlayOrigin"],[4,"ngIf"],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet",4,"ngIf","ngIfElse"],["nonInlineTemplate",""],["subMenuTemplate",""],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn","positionChange"],["nz-submenu-none-inline-child","",3,"theme","mode","nzOpen","position","nzDisabled","isMenuInsideDropDown","templateOutlet","menuClass","nzNoAnimation","subMenuMouseState"]],template:function(e,t){if(1&e&&(sa(Mx),Hs(0,"div",0,1),Qs("subMenuMouseState",function(e){return t.setMouseEnterState(e)})("toggleSubMenu",function(){return t.toggleSubMenu()}),Us(2,Cx,1,0,"ng-content",2),qs(),Us(3,Sx,1,6,"div",3),Us(4,Ix,1,5,"ng-template",null,4,Mc),Us(6,Tx,1,0,"ng-template",null,5,Mc)),2&e){var n=Gs(5);js("nzIcon",t.nzIcon)("nzTitle",t.nzTitle)("mode",t.mode)("nzDisabled",t.nzDisabled)("isMenuInsideDropDown",t.isMenuInsideDropDown)("paddingLeft",t.nzPaddingLeft||t.inlinePaddingLeft),ho(2),js("ngIf",!t.nzTitle),ho(1),js("ngIf","inline"===t.mode)("ngIfElse",n)}},directives:function(){return[Qx,iy,th,eR,BT,ry,tR]},encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzOpen",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),e}();function Zx(e,t){return e||t}function Xx(e){return e||!1}var Jx=function(){var e=function(){function e(t,n,i,r){b(this,e),this.nzMenuService=t,this.isMenuInsideDropDown=n,this.cdr=i,this.directionality=r,this.nzInlineIndent=24,this.nzTheme="light",this.nzMode="vertical",this.nzInlineCollapsed=!1,this.nzSelectable=!this.isMenuInsideDropDown,this.nzClick=new cc,this.actualMode="vertical",this.dir="ltr",this.inlineCollapsed$=new Qh(this.nzInlineCollapsed),this.mode$=new Qh(this.nzMode),this.destroy$=new V,this.listOfOpenedNzSubMenuComponent=[]}return w(e,[{key:"setInlineCollapsed",value:function(e){this.nzInlineCollapsed=e,this.inlineCollapsed$.next(e)}},{key:"updateInlineCollapse",value:function(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(function(e){return e.nzOpen}),this.listOfNzSubMenuComponent.forEach(function(e){return e.setOpenStateWithoutDebounce(!1)})):(this.listOfOpenedNzSubMenuComponent.forEach(function(e){return e.setOpenStateWithoutDebounce(!0)}),this.listOfOpenedNzSubMenuComponent=[]))}},{key:"ngOnInit",value:function(){var e,t=this;tf([this.inlineCollapsed$,this.mode$]).pipe(ev(this.destroy$)).subscribe(function(e){var i=n(e,2),r=i[0],o=i[1];t.actualMode=r?"vertical":o,t.nzMenuService.setMode(t.actualMode),t.cdr.markForCheck()}),this.nzMenuService.descendantMenuItemClick$.pipe(ev(this.destroy$)).subscribe(function(e){t.nzClick.emit(e),t.nzSelectable&&!e.nzMatchRouter&&t.listOfNzMenuItemDirective.forEach(function(t){return t.setSelectedState(t===e)})}),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.nzMenuService.setMode(t.actualMode),t.cdr.markForCheck()})}},{key:"ngAfterContentInit",value:function(){var e=this;this.inlineCollapsed$.pipe(ev(this.destroy$)).subscribe(function(){e.updateInlineCollapse(),e.cdr.markForCheck()})}},{key:"ngOnChanges",value:function(e){var t=e.nzInlineCollapsed,n=e.nzInlineIndent,i=e.nzTheme,r=e.nzMode;t&&this.inlineCollapsed$.next(this.nzInlineCollapsed),n&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),i&&this.nzMenuService.setTheme(this.nzTheme),r&&(this.mode$.next(this.nzMode),!e.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(function(e){return e.setOpenStateWithoutDebounce(!1)}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(jx),Vs(Bx),Vs(xu),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["","nz-menu",""]],contentQueries:function(e,t,n){var i;(1&e&&(Cc(n,Wx,5),Cc(n,$x,5)),2&e)&&(kc(i=Sc())&&(t.listOfNzMenuItemDirective=i),kc(i=Sc())&&(t.listOfNzSubMenuComponent=i))},hostVars:34,hostBindings:function(e,t){2&e&&ba("ant-dropdown-menu",t.isMenuInsideDropDown)("ant-dropdown-menu-root",t.isMenuInsideDropDown)("ant-dropdown-menu-light",t.isMenuInsideDropDown&&"light"===t.nzTheme)("ant-dropdown-menu-dark",t.isMenuInsideDropDown&&"dark"===t.nzTheme)("ant-dropdown-menu-vertical",t.isMenuInsideDropDown&&"vertical"===t.actualMode)("ant-dropdown-menu-horizontal",t.isMenuInsideDropDown&&"horizontal"===t.actualMode)("ant-dropdown-menu-inline",t.isMenuInsideDropDown&&"inline"===t.actualMode)("ant-dropdown-menu-inline-collapsed",t.isMenuInsideDropDown&&t.nzInlineCollapsed)("ant-menu",!t.isMenuInsideDropDown)("ant-menu-root",!t.isMenuInsideDropDown)("ant-menu-light",!t.isMenuInsideDropDown&&"light"===t.nzTheme)("ant-menu-dark",!t.isMenuInsideDropDown&&"dark"===t.nzTheme)("ant-menu-vertical",!t.isMenuInsideDropDown&&"vertical"===t.actualMode)("ant-menu-horizontal",!t.isMenuInsideDropDown&&"horizontal"===t.actualMode)("ant-menu-inline",!t.isMenuInsideDropDown&&"inline"===t.actualMode)("ant-menu-inline-collapsed",!t.isMenuInsideDropDown&&t.nzInlineCollapsed)("ant-menu-rtl","rtl"===t.dir)},inputs:{nzInlineIndent:"nzInlineIndent",nzTheme:"nzTheme",nzMode:"nzMode",nzInlineCollapsed:"nzInlineCollapsed",nzSelectable:"nzSelectable"},outputs:{nzClick:"nzClick"},exportAs:["nzMenu"],features:[Qa([{provide:Hx,useClass:jx},{provide:jx,useFactory:Zx,deps:[[new xi,new Ai,jx],Hx]},{provide:Bx,useFactory:Xx,deps:[[new xi,new Ai,Bx]]}]),It]}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzInlineCollapsed",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzSelectable",void 0),e}(),Qx=function(){var e=function(){function e(t,n){b(this,e),this.cdr=t,this.directionality=n,this.nzIcon=null,this.nzTitle=null,this.isMenuInsideDropDown=!1,this.nzDisabled=!1,this.paddingLeft=null,this.mode="vertical",this.toggleSubMenu=new cc,this.subMenuMouseState=new cc,this.dir="ltr",this.destroy$=new V}return w(e,[{key:"ngOnInit",value:function(){var e,t=this;this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setMouseState",value:function(e){this.nzDisabled||this.subMenuMouseState.next(e)}},{key:"clickTitle",value:function(){"inline"!==this.mode||this.nzDisabled||this.toggleSubMenu.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["","nz-submenu-title",""]],hostVars:8,hostBindings:function(e,t){1&e&&Qs("click",function(){return t.clickTitle()})("mouseenter",function(){return t.setMouseState(!0)})("mouseleave",function(){return t.setMouseState(!1)}),2&e&&(_a("padding-left","rtl"===t.dir?null:t.paddingLeft,"px")("padding-right","rtl"===t.dir?t.paddingLeft:null,"px"),ba("ant-dropdown-menu-submenu-title",t.isMenuInsideDropDown)("ant-menu-submenu-title",!t.isMenuInsideDropDown))},inputs:{nzIcon:"nzIcon",nzTitle:"nzTitle",isMenuInsideDropDown:"isMenuInsideDropDown",nzDisabled:"nzDisabled",paddingLeft:"paddingLeft",mode:"mode"},outputs:{toggleSubMenu:"toggleSubMenu",subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuTitle"],attrs:Dx,ngContentSelectors:Nx,decls:6,vars:4,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch",4,"ngIf","ngIfElse"],["notDropdownTpl",""],["nz-icon","",3,"nzType"],[1,"ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch"],["nz-icon","","nzType","left","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchCase"],["nz-icon","","nzType","right","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","left",1,"ant-dropdown-menu-submenu-arrow-icon"],["nz-icon","","nzType","right",1,"ant-dropdown-menu-submenu-arrow-icon"],[1,"ant-menu-submenu-arrow"]],template:function(e,t){if(1&e&&(sa(),Us(0,Ax,1,1,"i",0),Us(1,xx,3,1,"ng-container",1),aa(2),Us(3,zx,3,2,"span",2),Us(4,Lx,1,0,"ng-template",null,3,Mc)),2&e){var n=Gs(5);js("ngIf",t.nzIcon),ho(1),js("nzStringTemplateOutlet",t.nzTitle),ho(2),js("ngIf",t.isMenuInsideDropDown)("ngIfElse",n)}},directives:[th,Iy,ib,oh,sh,ah],encapsulation:2,changeDetection:0}),e}(),eR=function(){var e=function(){function e(t,n,i){b(this,e),this.elementRef=t,this.renderer=n,this.directionality=i,this.templateOutlet=null,this.menuClass="",this.mode="vertical",this.nzOpen=!1,this.listOfCacheClassName=[],this.expandState="collapsed",this.dir="ltr",this.destroy$=new V,this.elementRef.nativeElement.classList.add("ant-menu","ant-menu-inline","ant-menu-sub")}return w(e,[{key:"calcMotionState",value:function(){this.expandState=this.nzOpen?"expanded":"collapsed"}},{key:"ngOnInit",value:function(){var e,t=this;this.calcMotionState(),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e})}},{key:"ngOnChanges",value:function(e){var t=this,n=e.mode,i=e.nzOpen,r=e.menuClass;(n||i)&&this.calcMotionState(),r&&(this.listOfCacheClassName.length&&this.listOfCacheClassName.filter(function(e){return!!e}).forEach(function(e){t.renderer.removeClass(t.elementRef.nativeElement,e)}),this.menuClass&&(this.listOfCacheClassName=this.menuClass.split(" "),this.listOfCacheClassName.filter(function(e){return!!e}).forEach(function(e){t.renderer.addClass(t.elementRef.nativeElement,e)})))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(cu),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["","nz-submenu-inline-child",""]],hostVars:3,hostBindings:function(e,t){2&e&&(Ua("@collapseMotion",t.expandState),ba("ant-menu-rtl","rtl"===t.dir))},inputs:{templateOutlet:"templateOutlet",menuClass:"menuClass",mode:"mode",nzOpen:"nzOpen"},exportAs:["nzSubmenuInlineChild"],features:[It],attrs:Fx,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&Us(0,Ux,0,0,"ng-template",0),2&e&&js("ngTemplateOutlet",t.templateOutlet)},directives:[ch],encapsulation:2,data:{animation:[_b]},changeDetection:0}),e}(),tR=function(){var e=function(){function e(t,n){b(this,e),this.elementRef=t,this.directionality=n,this.menuClass="",this.theme="light",this.templateOutlet=null,this.isMenuInsideDropDown=!1,this.mode="vertical",this.position="right",this.nzDisabled=!1,this.nzOpen=!1,this.subMenuMouseState=new cc,this.expandState="collapsed",this.dir="ltr",this.destroy$=new V,this.elementRef.nativeElement.classList.add("ant-menu-submenu","ant-menu-submenu-popup")}return w(e,[{key:"setMouseState",value:function(e){this.nzDisabled||this.subMenuMouseState.next(e)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"calcMotionState",value:function(){this.nzOpen?"horizontal"===this.mode?this.expandState="bottom":"vertical"===this.mode&&(this.expandState="active"):this.expandState="collapsed"}},{key:"ngOnInit",value:function(){var e,t=this;this.calcMotionState(),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e})}},{key:"ngOnChanges",value:function(e){var t=e.mode,n=e.nzOpen;(t||n)&&this.calcMotionState()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["","nz-submenu-none-inline-child",""]],hostVars:14,hostBindings:function(e,t){1&e&&Qs("mouseenter",function(){return t.setMouseState(!0)})("mouseleave",function(){return t.setMouseState(!1)}),2&e&&(Ua("@slideMotion",t.expandState)("@zoomBigMotion",t.expandState),ba("ant-menu-light","light"===t.theme)("ant-menu-dark","dark"===t.theme)("ant-menu-submenu-placement-bottom","horizontal"===t.mode)("ant-menu-submenu-placement-right","vertical"===t.mode&&"right"===t.position)("ant-menu-submenu-placement-left","vertical"===t.mode&&"left"===t.position)("ant-menu-submenu-rtl","rtl"===t.dir))},inputs:{menuClass:"menuClass",theme:"theme",templateOutlet:"templateOutlet",isMenuInsideDropDown:"isMenuInsideDropDown",mode:"mode",position:"position",nzDisabled:"nzDisabled",nzOpen:"nzOpen"},outputs:{subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuNoneInlineChild"],features:[It],attrs:Gx,decls:2,vars:16,consts:[[3,"ngClass"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,Vx,0,0,"ng-template",1),qs()),2&e&&(ba("ant-dropdown-menu",t.isMenuInsideDropDown)("ant-menu",!t.isMenuInsideDropDown)("ant-dropdown-menu-vertical",t.isMenuInsideDropDown)("ant-menu-vertical",!t.isMenuInsideDropDown)("ant-dropdown-menu-sub",t.isMenuInsideDropDown)("ant-menu-sub",!t.isMenuInsideDropDown)("ant-menu-rtl","rtl"===t.dir),js("ngClass",t.menuClass),ho(1),js("ngTemplateOutlet",t.templateOutlet))},directives:[Xl,ch],encapsulation:2,data:{animation:[Ib,Eb]},changeDetection:0}),e}(),nR=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,Jv,sy,rb,HT,My]]}),e}();function iR(e,t){if(1&e){var n=$s();Hs(0,"div",0),Qs("@slideMotion.done",function(e){return $t(n),ra().onAnimationEvent(e)})("mouseenter",function(){return $t(n),ra().setMouseState(!0)})("mouseleave",function(){return $t(n),ra().setMouseState(!1)}),aa(1),qs()}if(2&e){var i=ra();ba("ant-dropdown-rtl","rtl"===i.dir),js("ngClass",i.nzOverlayClassName)("ngStyle",i.nzOverlayStyle)("@slideMotion",void 0)("@.disabled",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("nzNoAnimation",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)}}var rR=["*"],oR=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({}),e}(),sR=function(){var e=function(){function e(t,n,i,r,o,s,a){b(this,e),this.cdr=t,this.elementRef=n,this.renderer=i,this.viewContainerRef=r,this.nzMenuService=o,this.directionality=s,this.noAnimation=a,this.mouseState$=new Qh(!1),this.isChildSubMenuOpen$=this.nzMenuService.isChildSubMenuOpen$,this.descendantMenuItemClick$=this.nzMenuService.descendantMenuItemClick$,this.animationStateChange$=new cc,this.nzOverlayClassName="",this.nzOverlayStyle={},this.dir="ltr",this.destroy$=new V}return w(e,[{key:"onAnimationEvent",value:function(e){this.animationStateChange$.emit(e)}},{key:"setMouseState",value:function(e){this.mouseState$.next(e)}},{key:"setValue",value:function(e,t){this[e]=t,this.cdr.markForCheck()}},{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"ngAfterContentInit",value:function(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs(su),Vs(cu),Vs(ju),Vs(jx),Vs(rm,8),Vs(BT,9))},e.\u0275cmp=at({type:e,selectors:[["nz-dropdown-menu"]],viewQuery:function(e,t){var n;(1&e&&wc(Lu,7),2&e)&&(kc(n=Sc())&&(t.templateRef=n.first))},exportAs:["nzDropdownMenu"],features:[Qa([jx,{provide:Bx,useValue:!0}])],ngContentSelectors:rR,decls:1,vars:0,consts:[[1,"ant-dropdown",3,"ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave"]],template:function(e,t){1&e&&(sa(),Us(0,iR,2,7,"ng-template"))},directives:[Xl,uh,BT],encapsulation:2,data:{animation:[Eb]},changeDetection:0}),e}(),aR=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sy,sE,jT,nR,rb,HT,Jv,cO,oR,My],nR]}),e}(),uR=[new Lm({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new Lm({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new Lm({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new Lm({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"})],cR=function(){var e=function(){function e(t){b(this,e),this.overlay=t,this.overlayRef=null,this.closeSubscription=T.EMPTY}return w(e,[{key:"create",value:function(e,t){var n=this;this.close(!0);var i=e.x,r=e.y;e instanceof MouseEvent&&e.preventDefault();var o=this.overlay.position().flexibleConnectedTo({x:i,y:r}).withPositions(uR).withTransformOriginOn(".ant-dropdown");this.overlayRef=this.overlay.create({positionStrategy:o,disposeOnNavigation:!0,scrollStrategy:this.overlay.scrollStrategies.close()}),this.closeSubscription=ue(t.descendantMenuItemClick$,cv(document,"click").pipe(kf(function(e){return!!n.overlayRef&&!n.overlayRef.overlayElement.contains(e.target)}),kf(function(e){return 2!==e.button}),pf(1))).subscribe(function(){n.close()}),this.overlayRef.attach(new Yg(t.templateRef,t.viewContainerRef))}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.overlayRef&&(this.overlayRef.detach(),e&&this.overlayRef.dispose(),this.overlayRef=null,this.closeSubscription.unsubscribe())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(ey))},e.\u0275prov=De({factory:function(){return new e(Si(ey))},token:e,providedIn:oR}),e}(),lR=function(){var e=function e(){b(this,e),this.reEditMessage=new cc};return e.\u0275prov=De({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}();function hR(e,t){if(1&e&&(Hs(0,"div",10),Hs(1,"span"),za(2),qs(),qs()),2&e){var n=ra(2);ho(2),La(n.messageReadByPeer)}}function fR(e,t){if(1&e){var n=$s();Hs(0,"li",11),Qs("click",function(){return $t(n),ra(2).revokeMessage()}),za(1,"\u64a4\u56de"),qs()}}function dR(e,t){if(1&e){var n=$s();Hs(0,"div",3),Qs("contextmenu",function(e){$t(n);var t=Gs(6);return ra().contextMenu(e,t)}),Hs(1,"div",4),Us(2,hR,3,1,"div",5),Hs(3,"div",6),aa(4),qs(),qs(),Hs(5,"nz-dropdown-menu",null,7),Hs(7,"ul",8),Us(8,fR,2,0,"li",9),qs(),qs(),qs()}if(2&e){var i=ra();ho(2),js("ngIf",i.isMine),ho(1),wa(i.bubbleStyle),ho(5),js("ngIf",i.isMine&&!i.isTimeout)}}function pR(e,t){if(1&e){var n=$s();Hs(0,"a",14),Qs("click",function(){return $t(n),ra(2).reEdit()}),za(1,"\u91cd\u65b0\u7f16\u8f91"),qs()}}function gR(e,t){if(1&e&&(Hs(0,"div",12),za(1),Us(2,pR,2,0,"a",13),qs()),2&e){var n=ra();ho(1),Na(" ",n.text," "),ho(1),js("ngIf",n.isEdit)}}var vR=["*"],mR=function(){var e=function(){function e(t,n,i,r){b(this,e),this.nzContextMenuService=t,this.timHelper=n,this.store=i,this.reEditMessage=r,this.isTimeout=!1}return w(e,[{key:"ngOnInit",value:function(){this.isTimeoutHandler()}},{key:"bubbleStyle",get:function(){var e="";return e+=this.isMine?"message-send":"message-received",this.isNew&&(e+="new"),e}},{key:"messageReadByPeer",get:function(){return this.message.conversationType===Vw().TYPES.CONV_C2C&&this.message.isPeerRead?"\u5df2\u8bfb":this.message.conversationType!==Vw().TYPES.CONV_C2C||this.message.isPeerRead?"":"\u672a\u8bfb"}},{key:"text",get:function(){return this.message.conversationType!==Vw().TYPES.CONV_C2C||this.isMine?this.message.conversationType!==Vw().TYPES.CONV_GROUP||this.isMine?"\u4f60\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f":"".concat(this.message.from,"\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f"):"\u5bf9\u65b9\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f"}},{key:"isEdit",get:function(){return!!this.isMine&&this.message.type===Vw().TYPES.MSG_TEXT&&!this.isTimeout}},{key:"contextMenu",value:function(e,t){this.nzContextMenuService.create(e,t)}},{key:"revokeMessage",value:function(){var e=this;this.timHelper.tim.revokeMessage(this.message).then(function(){e.isTimeoutHandler()}).catch(function(t){e.store.dispatch(bw({message:t,msgType:qw.warning}))})}},{key:"reEdit",value:function(){this.reEditMessage.reEditMessage.emit(this.message.payload.text)}},{key:"isTimeoutHandler",value:function(){var e=this;this.subscription=xv(0,1e3).subscribe(function(){var t=(new Date).getTime()/1e3+"";parseInt(t)-e.message.time>120?(e.isTimeout=!0,e.subscription.unsubscribe()):e.isTimeoutHandler()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(cR),Vs($w),Vs(xk),Vs(lR))},e.\u0275cmp=at({type:e,selectors:[["app-message-bubble"]],inputs:{message:"message",isMine:"isMine",isNew:"isNew"},ngContentSelectors:vR,decls:3,vars:2,consts:[[1,"chat-bubble"],[3,"contextmenu",4,"ngIf"],["class","group-tip-element-wrapper",4,"ngIf"],[3,"contextmenu"],[2,"display","flex"],["class","message-status",4,"ngIf"],[1,"message-content"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],[1,"message-status"],["nz-menu-item","",3,"click"],[1,"group-tip-element-wrapper"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,t){1&e&&(sa(),Hs(0,"div",0),Us(1,dR,9,4,"div",1),Us(2,gR,3,2,"div",2),qs()),2&e&&(ho(1),js("ngIf",!t.message.isRevoked),ho(1),js("ngIf",t.message.isRevoked))},directives:[th,sR,Jx,AT,Wx],styles:['.chat-bubble[_ngcontent-%COMP%]{position:relative}.chat-bubble[_ngcontent-%COMP%]   .message-status[_ngcontent-%COMP%]{display:flex;min-width:25px;margin-right:10px;justify-content:center;align-items:center;font-size:12px;color:#6e7981}.chat-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{outline:none;font-size:14px;position:relative;max-width:350px;word-wrap:break-word;word-break:break-all;padding:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.1)}.chat-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:pre-wrap;margin:0;text-shadow:#495060 0 0 .05em}.chat-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:bottom}.chat-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:before{position:absolute;top:-6px;width:12px;height:40px;content:"\\e900";font-family:tim!important;font-size:24px}.chat-bubble[_ngcontent-%COMP%]   .message-received[_ngcontent-%COMP%]{background-color:#fff;margin-left:15px;border-radius:0 4px 4px 4px}.chat-bubble[_ngcontent-%COMP%]   .message-received[_ngcontent-%COMP%]:before{left:-10px;transform:scaleX(-1);color:#fff}.chat-bubble[_ngcontent-%COMP%]   .message-received.new[_ngcontent-%COMP%]{transform:scale(0);transform-origin:top left;-webkit-animation:bounce .5s linear both;animation:bounce .5s linear both}.chat-bubble[_ngcontent-%COMP%]   .message-send[_ngcontent-%COMP%]{background-color:#9eea6a;margin-right:15px;border-radius:4px 0 4px 4px;color:#000}.chat-bubble[_ngcontent-%COMP%]   .message-send[_ngcontent-%COMP%]:before{right:-10px;color:#9eea6a}.chat-bubble[_ngcontent-%COMP%]   .message-send.new[_ngcontent-%COMP%]{transform:scale(0);transform-origin:top right;-webkit-animation:bounce .5s linear both;animation:bounce .5s linear both}.chat-bubble[_ngcontent-%COMP%]   .el-dropdown[_ngcontent-%COMP%]{vertical-align:top;display:flex}.chat-bubble[_ngcontent-%COMP%]   .el-dropdown[_ngcontent-%COMP%] + .el-dropdown[_ngcontent-%COMP%]{margin-left:15px}.chat-bubble[_ngcontent-%COMP%]   .el-icon-arrow-down[_ngcontent-%COMP%]{font-size:12px}.group-tip-element-wrapper[_ngcontent-%COMP%]{background:#fff;padding:4px 15px;border-radius:3px;color:#a5b5c1;font-size:12px}.edit-button[_ngcontent-%COMP%]{padding-top:4px;height:20px;font-size:10px}@-webkit-keyframes bounce{0%{transform:matrix(0,0,0,0,0,0)}4.7%{transform:matrix(.45,0,0,.45,0,0)}9.41%{transform:matrix(.883,0,0,.883,0,0)}14.11%{transform:matrix(1.141,0,0,1.141,0,0)}18.72%{transform:matrix(1.212,0,0,1.212,0,0)}24.32%{transform:matrix(1.151,0,0,1.151,0,0)}29.93%{transform:matrix(1.048,0,0,1.048,0,0)}35.54%{transform:matrix(.979,0,0,.979,0,0)}41.04%{transform:matrix(.961,0,0,.961,0,0)}52.15%{transform:matrix(.991,0,0,.991,0,0)}63.26%{transform:matrix(1.007,0,0,1.007,0,0)}85.49%{transform:matrix(.999,0,0,.999,0,0)}to{transform:matrix(1,0,0,1,0,0)}}@keyframes bounce{0%{transform:matrix(0,0,0,0,0,0)}4.7%{transform:matrix(.45,0,0,.45,0,0)}9.41%{transform:matrix(.883,0,0,.883,0,0)}14.11%{transform:matrix(1.141,0,0,1.141,0,0)}18.72%{transform:matrix(1.212,0,0,1.212,0,0)}24.32%{transform:matrix(1.151,0,0,1.151,0,0)}29.93%{transform:matrix(1.048,0,0,1.048,0,0)}35.54%{transform:matrix(.979,0,0,.979,0,0)}41.04%{transform:matrix(.961,0,0,.961,0,0)}52.15%{transform:matrix(.991,0,0,.991,0,0)}63.26%{transform:matrix(1.007,0,0,1.007,0,0)}85.49%{transform:matrix(.999,0,0,.999,0,0)}to{transform:matrix(1,0,0,1,0,0)}}']}),e}();function yR(e,t){if(1&e&&(Hs(0,"span"),za(1),qs()),2&e){var n=ra().$implicit;ho(1),La(n.text)}}function _R(e,t){1&e&&Ws(0,"img",4),2&e&&js("src",ra().$implicit.src,gr)}function bR(e,t){if(1&e&&(Ks(0),Us(1,yR,2,1,"span",2),Us(2,_R,1,1,"img",3),Ys()),2&e){var n=t.$implicit;ho(1),js("ngIf","text"===n.name),ho(1),js("ngIf","img"===n.name)}}var kR=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){this.contentList=function(e){for(var t=[],n=e.text,i=-1,r=-1;""!==n;)switch(i=n.indexOf("["),r=n.indexOf("]"),i){case 0:if(-1===r)t.push({name:"text",text:n}),n="";else{var o=n.slice(0,r+1);bx[o]?(t.push({name:"img",src:_x+bx[o]}),n=n.substring(r+1)):(t.push({name:"text",text:"["}),n=n.slice(1))}break;case-1:t.push({name:"text",text:n}),n="";break;default:t.push({name:"text",text:n.slice(0,i)}),n=n.substring(i)}return t}(this.payload)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-text-element"]],inputs:{message:"message",isMine:"isMine",payload:"payload"},decls:2,vars:3,consts:[[3,"message","isMine"],[4,"ngFor","ngForOf"],[4,"ngIf"],["width","20px","height","20px",3,"src",4,"ngIf"],["width","20px","height","20px",3,"src"]],template:function(e,t){1&e&&(Hs(0,"app-message-bubble",0),Us(1,bR,3,2,"ng-container",1),qs()),2&e&&(js("message",t.message)("isMine",t.isMine),ho(1),js("ngForOf",t.contentList))},directives:[mR,Ql,th],styles:[""]}),e}(),wR=["*"],CR=["imgRef"];function SR(e,t){if(1&e&&(Hs(0,"li",9),Qs("click",function(){return t.$implicit.onClick()}),Ws(1,"span",10),qs()),2&e){var n=t.$implicit;ba("ant-image-preview-operations-operation-disabled",ra().zoomOutDisabled&&"zoomOut"===n.type),ho(1),js("nzType",n.icon)}}function ER(e,t){if(1&e&&Ws(0,"img",12,13),2&e){var n=ra().$implicit,i=ra();_a("width",n.width)("height",n.height)("transform",i.previewImageTransform),Ns("src",n.src,gr)("alt",n.alt)}}function IR(e,t){if(1&e&&(Ks(0),Us(1,ER,2,8,"img",11),Ys()),2&e){var n=t.index,i=ra();ho(1),js("ngIf",i.index===n)}}function TR(e,t){if(1&e){var n=$s();Ks(0),Hs(1,"div",14),Qs("click",function(e){return $t(n),ra().onSwitchLeft(e)}),Ws(2,"span",15),qs(),Hs(3,"div",16),Qs("click",function(e){return $t(n),ra().onSwitchRight(e)}),Ws(4,"span",17),qs(),Ys()}if(2&e){var i=ra();ho(1),ba("ant-image-preview-switch-left-disabled",i.index<=0),ho(2),ba("ant-image-preview-switch-right-disabled",i.index>=i.images.length-1)}}var MR=function(){var e=function(){function e(){b(this,e),this.images=[]}return w(e,[{key:"addImage",value:function(e){this.images.push(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["nz-image-group"]],exportAs:["nzImageGroup"],ngContentSelectors:wR,decls:1,vars:0,template:function(e,t){1&e&&(sa(),aa(0))},encapsulation:2,changeDetection:0}),e}(),OR=function e(){b(this,e),this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0},DR=function(){function e(t,n,i){var r=this;b(this,e),this.previewInstance=t,this.config=n,this.overlayRef=i,i.keydownEvents().pipe(kf(function(e){return r.config.nzKeyboard&&27===e.keyCode&&!Im(e)})).subscribe(function(e){e.preventDefault(),r.close()}),i.detachments().subscribe(function(){r.overlayRef.dispose()}),t.containerClick.pipe(pf(1)).subscribe(function(){r.close()}),t.closeClick.pipe(pf(1)).subscribe(function(){r.close()}),t.animationStateChanged.pipe(kf(function(e){return"done"===e.phaseName&&"leave"===e.toState}),pf(1)).subscribe(function(){r.dispose()})}return w(e,[{key:"switchTo",value:function(e){this.previewInstance.switchTo(e)}},{key:"next",value:function(){this.previewInstance.next()}},{key:"prev",value:function(){this.previewInstance.prev()}},{key:"close",value:function(){this.previewInstance.startLeaveAnimation()}},{key:"dispose",value:function(){this.overlayRef.dispose()}}]),e}();function AR(e,t,n){var i=e+t,r=(t-n)/2,o=null;return t>n?(e>0&&(o=r),e<0&&i<n&&(o=-r)):(e<0||i>n)&&(o=e<0?r:-r),o}var xR={x:0,y:0},RR=function(){var e=function(){function e(t,n,i,r){var o,s,a=this;b(this,e),this.cdr=t,this.nzConfigService=n,this.config=i,this.overlayRef=r,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationState="enter",this.animationStateChanged=new cc,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:function(){a.onClose()},type:"close"},{icon:"zoom-in",onClick:function(){a.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:function(){a.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:function(){a.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:function(){a.onRotateLeft()},type:"rotateLeft"}],this.zoomOutDisabled=!1,this.position=Object.assign({},xR),this.containerClick=new cc,this.closeClick=new cc,this.destroy$=new V,this.zoom=null!==(o=this.config.nzZoom)&&void 0!==o?o:1,this.rotate=null!==(s=this.config.nzRotate)&&void 0!==s?s:0,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}return w(e,[{key:"animationDisabled",get:function(){var e;return null!==(e=this.config.nzNoAnimation)&&void 0!==e&&e}},{key:"maskClosable",get:function(){var e,t,n=this.nzConfigService.getConfigForComponent("image")||{};return null===(t=null!==(e=this.config.nzMaskClosable)&&void 0!==e?e:n.nzMaskClosable)||void 0===t||t}},{key:"setImages",value:function(e){this.images=e,this.cdr.markForCheck()}},{key:"switchTo",value:function(e){this.index=e,this.cdr.markForCheck()}},{key:"next",value:function(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}},{key:"prev",value:function(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}},{key:"markForCheck",value:function(){this.cdr.markForCheck()}},{key:"onClose",value:function(){this.closeClick.emit()}},{key:"onZoomIn",value:function(){this.zoom+=1,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=Object.assign({},xR)}},{key:"onZoomOut",value:function(){this.zoom>1&&(this.zoom-=1,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=Object.assign({},xR))}},{key:"onRotateRight",value:function(){this.rotate+=90,this.updatePreviewImageTransform()}},{key:"onRotateLeft",value:function(){this.rotate-=90,this.updatePreviewImageTransform()}},{key:"onSwitchLeft",value:function(e){e.preventDefault(),e.stopPropagation(),this.prev()}},{key:"onSwitchRight",value:function(e){e.preventDefault(),e.stopPropagation(),this.next()}},{key:"onContainerClick",value:function(e){e.target===e.currentTarget&&this.maskClosable&&this.containerClick.emit()}},{key:"onAnimationStart",value:function(e){"enter"===e.toState?this.setEnterAnimationClass():"leave"===e.toState&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}},{key:"onAnimationDone",value:function(e){"enter"===e.toState?this.setEnterAnimationClass():"leave"===e.toState&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}},{key:"startLeaveAnimation",value:function(){this.animationState="leave",this.cdr.markForCheck()}},{key:"onDragStarted",value:function(){this.isDragging=!0}},{key:"onDragReleased",value:function(){this.isDragging=!1;var e,t,n,i,r,o=this.imageRef.nativeElement.offsetWidth*this.zoom,s=this.imageRef.nativeElement.offsetHeight*this.zoom,a=(n=this.imageRef.nativeElement,i=n.getBoundingClientRect(),r=document.documentElement,{left:i.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||document.body.clientLeft||0),top:i.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||document.body.clientTop||0)}),u=a.left,c=a.top,l={width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight},h=l.width,f=l.height,d=this.rotate%180!=0,p=(t={},(e={width:d?s:o,height:d?o:s,left:u,top:c,clientWidth:h,clientHeight:f}).width<=e.clientWidth&&e.height<=e.clientHeight&&(t={x:0,y:0}),(e.width>e.clientWidth||e.height>e.clientHeight)&&(t={x:AR(e.left,e.width,e.clientWidth),y:AR(e.top,e.height,e.clientHeight)}),t);(ky(p.x)||ky(p.y))&&(this.position=Object.assign(Object.assign({},this.position),p))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"updatePreviewImageTransform",value:function(){this.previewImageTransform="scale3d(".concat(this.zoom,", ").concat(this.zoom,", 1) rotate(").concat(this.rotate,"deg)")}},{key:"updatePreviewImageWrapperTransform",value:function(){this.previewImageWrapperTransform="translate3d(".concat(this.position.x,"px, ").concat(this.position.y,"px, 0)")}},{key:"updateZoomOutDisabled",value:function(){this.zoomOutDisabled=this.zoom<=1}},{key:"setEnterAnimationClass",value:function(){if(!this.animationDisabled){var e=this.overlayRef.backdropElement;e&&(e.classList.add("ant-fade-enter"),e.classList.add("ant-fade-enter-active"))}}},{key:"setLeaveAnimationClass",value:function(){if(!this.animationDisabled){var e=this.overlayRef.backdropElement;e&&(e.classList.add("ant-fade-leave"),e.classList.add("ant-fade-leave-active"))}}},{key:"reset",value:function(){this.zoom=1,this.rotate=0,this.position=Object.assign({},xR)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xu),Vs($_),Vs(OR),Vs(Bm))},e.\u0275cmp=at({type:e,selectors:[["nz-image-preview"]],viewQuery:function(e,t){var n;(1&e&&wc(CR,5),2&e)&&(kc(n=Sc())&&(t.imageRef=n.first))},hostAttrs:["tabindex","-1","role","document"],hostVars:8,hostBindings:function(e,t){1&e&&(ea("@fadeMotion.start",function(e){return t.onAnimationStart(e)})("@fadeMotion.done",function(e){return t.onAnimationDone(e)}),Qs("click",function(e){return t.onContainerClick(e)})),2&e&&(Ua("@.disabled",t.config.nzNoAnimation)("@fadeMotion",t.animationState),_a("z-index",t.config.nzZIndex),ba("ant-image-preview-moving",t.isDragging)("ant-image-preview-wrap",!0))},exportAs:["nzImagePreview"],decls:10,vars:6,consts:[[1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],[1,"ant-image-preview-operations"],["class","ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled","click",4,"ngFor","ngForOf"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragFreeDragPosition","mousedown","cdkDragReleased"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType"],["cdkDragHandle","","class","ant-image-preview-img",3,"width","height","transform",4,"ngIf"],["cdkDragHandle","",1,"ant-image-preview-img"],["imgRef",""],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"]],template:function(e,t){1&e&&(Hs(0,"div",0),Ws(1,"div",1),Hs(2,"div",2),Hs(3,"div",3),Hs(4,"ul",4),Us(5,SR,2,3,"li",5),qs(),Hs(6,"div",6),Qs("mousedown",function(){return t.onDragStarted()})("cdkDragReleased",function(){return t.onDragReleased()}),Us(7,IR,2,1,"ng-container",7),qs(),Us(8,TR,5,4,"ng-container",8),qs(),qs(),Ws(9,"div",1),qs()),2&e&&(ho(5),js("ngForOf",t.operations),ho(1),_a("transform",t.previewImageWrapperTransform),js("cdkDragFreeDragPosition",t.position),ho(1),js("ngForOf",t.images),ho(1),js("ngIf",t.images.length>1))},directives:[Ql,UC,th,ib,LC],encapsulation:2,data:{animation:[bb]},changeDetection:0}),e}(),PR=function(){var e=function(){function e(t,n,i,r){b(this,e),this.overlay=t,this.injector=n,this.nzConfigService=i,this.directionality=r}return w(e,[{key:"preview",value:function(e,t){return this.display(e,t)}},{key:"display",value:function(e,t){var n=Object.assign(Object.assign({},new OR),null!=t?t:{}),i=this.createOverlay(n),r=this.attachPreviewComponent(i,n);r.setImages(e);var o=new DR(r,n,i);return r.previewRef=o,o}},{key:"attachPreviewComponent",value:function(e,t){var n=Cs.create({parent:this.injector,providers:[{provide:Bm,useValue:e},{provide:OR,useValue:t}]}),i=new Kg(RR,null,n);return e.attach(i).instance}},{key:"createOverlay",value:function(e){var t,n,i=this.nzConfigService.getConfigForComponent("image")||{},r=new zm({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:null===(n=null!==(t=e.nzCloseOnNavigation)&&void 0!==t?t:i.nzCloseOnNavigation)||void 0===n||n,backdropClass:"ant-image-preview-mask",direction:e.nzDirection||i.nzDirection||this.directionality.value});return this.overlay.create(r)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Si(ey),Si(Cs),Si($_),Si(rm,8))},e.\u0275prov=De({token:e,factory:e.\u0275fac}),e}(),zR=function(){var e=function(){function e(t,n,i,r,o,s,a){b(this,e),this.document=t,this.nzConfigService=n,this.elementRef=i,this.nzImageService=r,this.cdr=o,this.parentGroup=s,this.directionality=a,this._nzModuleName="image",this.nzSrc="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.status="normal",this.destroy$=new V}return w(e,[{key:"previewable",get:function(){return!this.nzDisablePreview&&"error"!==this.status}},{key:"ngOnInit",value:function(){var e,t=this;this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"onPreview",value:function(){var e=this;if(this.previewable)if(this.parentGroup){var t=this.parentGroup.images.filter(function(e){return e.previewable}),n=t.map(function(e){return{src:e.nzSrc}}),i=t.findIndex(function(t){return e===t});this.nzImageService.preview(n,{nzDirection:this.dir}).switchTo(i)}else this.nzImageService.preview([{src:this.nzSrc}],{nzDirection:this.dir})}},{key:"getElement",value:function(){return this.elementRef}},{key:"ngOnChanges",value:function(e){var t=e.nzSrc;t&&(this.getElement().nativeElement.src=t.currentValue,this.backLoad())}},{key:"backLoad",value:function(){var e=this;this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.status="loading",this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc):(this.getElement().nativeElement.src=this.nzPlaceholder?this.nzPlaceholder:this.nzSrc,this.backLoadImage.onload=function(){e.status="normal",e.getElement().nativeElement.src=e.nzSrc},this.backLoadImage.onerror=function(){e.status="error",e.nzFallback&&(e.getElement().nativeElement.src=e.nzFallback)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(Ol),Vs($_),Vs(su),Vs(PR),Vs(xu),Vs(MR,8),Vs(rm,8))},e.\u0275dir=dt({type:e,selectors:[["img","nz-image",""]],hostBindings:function(e,t){1&e&&Qs("click",function(){return t.onPreview()})},inputs:{nzSrc:"nzSrc",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder"},exportAs:["nzImage"],features:[It]}),Oy([Sy(),Z_(),Dy("design:type",Boolean)],e.prototype,"nzDisablePreview",void 0),Oy([Z_(),Dy("design:type",Object)],e.prototype,"nzFallback",void 0),Oy([Z_(),Dy("design:type",Object)],e.prototype,"nzPlaceholder",void 0),e}(),LR=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[PR],imports:[[om,sy,Qg,VC,ph,rb,WT]]}),e}(),NR=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){var e=this.payload.imageInfoArray[0].imageUrl;"string"!=typeof e&&(this.imageUrl=""),this.imageUrl="//"===e.slice(0,2)?"https:".concat(e):e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-image-element"]],inputs:{message:"message",isMine:"isMine",payload:"payload",percent:"percent"},decls:2,vars:3,consts:[[3,"message","isMine"],["nz-image","",1,"image-element",3,"nzSrc"]],template:function(e,t){1&e&&(Hs(0,"app-message-bubble",0),Ws(1,"img",1),qs()),2&e&&(js("message",t.message)("isMine",t.isMine),ho(1),js("nzSrc",t.imageUrl))},directives:[mR,zR],styles:[".image-element[_ngcontent-%COMP%]{max-width:250px}"]}),e}(),FR=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){this.fileUrl=this.payload.fileUrl,this.fileName=this.payload.fileName,this.getSize()}},{key:"downloadFile",value:function(){var e=this;if(window.fetch)fetch(this.fileUrl).then(function(e){return e.blob()}).then(function(t){var n=document.createElement("a"),i=window.URL.createObjectURL(t);n.href=i,n.download=e.fileName,n.click()});else{var t=document.createElement("a");t.href=this.fileUrl,t.target="_blank",t.download=this.fileName,t.click()}}},{key:"getSize",value:function(){var e=this.payload.fileSize;if(e>1024)return e/1024>1024?void(this.fileSize="".concat(this.toFixed(e/1024/1024)," Mb")):void(this.fileSize="".concat(this.toFixed(e/1024)," Kb"));this.fileSize="".concat(this.toFixed(e),"B")}},{key:"toFixed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-file-element"]],inputs:{message:"message",isMine:"isMine",payload:"payload"},decls:9,vars:4,consts:[[3,"message","isMine"],["title","\u5355\u51fb\u4e0b\u8f7d",1,"file-element-wrapper",3,"click"],[1,"header"],["nz-icon","","nzType","file-text","nzTheme","outline"],[1,"file-element"],[1,"file-name"],[1,"file-size"]],template:function(e,t){1&e&&(Hs(0,"app-message-bubble",0),Hs(1,"div",1),Qs("click",function(){return t.downloadFile()}),Hs(2,"div",2),Ws(3,"i",3),Hs(4,"div",4),Hs(5,"span",5),za(6),qs(),Hs(7,"span",6),za(8),qs(),qs(),qs(),qs(),qs()),2&e&&(js("message",t.message)("isMine",t.isMine),ho(6),La(t.fileName),ho(2),La(t.fileSize))},directives:[mR,AT,ib],styles:[".file-element-wrapper[_ngcontent-%COMP%]{cursor:pointer}.header[_ngcontent-%COMP%]{display:flex}i[_ngcontent-%COMP%]{font-size:40px!important}.file-element[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:12px}.file-size[_ngcontent-%COMP%]{font-size:12px;padding-top:5px}"]}),e}(),UR=function(e){return[e]},GR=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){}},{key:"isMine",get:function(){return"out"===this.message.flow}},{key:"date",get:function(){return _D(new Date(1e3*this.message.time))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-message-footer"]],inputs:{message:"message"},decls:3,vars:5,consts:[[1,"base"],[1,"date"]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"div",1),za(2),qs(),qs()),2&e&&(wa(ic(3,UR,t.isMine?"right":"left")),ho(2),La(t.date))},styles:[".right[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-right:15px}.left[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:15px}.base[_ngcontent-%COMP%]{color:#a5b5c1;font-size:12px}.name[_ngcontent-%COMP%]{padding:0 4px;max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e}(),VR=function(e){return[e]},jR=function(){var e=function(){function e(t){b(this,e),this.store=t}return w(e,[{key:"ngOnInit",value:function(){}},{key:"isMine",get:function(){return"out"===this.message.flow}},{key:"date",get:function(){return _D(new Date(1e3*this.message.time))}},{key:"from",get:function(){var e=this.currentConversation.type===Vw().TYPES.CONV_C2C;return this.isMine?this.currentUserProfile.nick||this.currentUserProfile.userID:e?this.currentConversation.userProfile.nick||this.currentConversation.userProfile.userID:this.currentConversation.type===Vw().TYPES.CONV_SYSTEM?this.message.type===Vw().TYPES.MSG_GRP_SYS_NOTICE?"\u7fa4\u7cfb\u7edf\u901a\u77e5":"\u7cfb\u7edf\u901a\u77e5":this.message.nick||this.message.from}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk))},e.\u0275cmp=at({type:e,selectors:[["app-message-header"]],inputs:{message:"message",currentUserProfile:"currentUserProfile",currentConversation:"currentConversation"},decls:5,vars:6,consts:[[1,"base"],[1,"name","text-ellipsis"],[1,"date"]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"div",1),za(2),qs(),Hs(3,"div",2),za(4),qs(),qs()),2&e&&(wa(ic(4,VR,t.isMine?"right":"left")),ho(2),La(t.from),ho(2),La(t.date))},styles:[".right[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.left[_ngcontent-%COMP%]{display:flex;flex-direction:row}.base[_ngcontent-%COMP%]{color:#a5b5c1;font-size:12px}.name[_ngcontent-%COMP%]{padding:0 4px;max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e}(),BR=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.text=this.getGroupTipContent(this.message)}},{key:"getGroupTipContent",value:function(e){var t=e.nick||e.payload.userIDList.join(",");switch(e.payload.operationType){case Vw().TYPES.GRP_TIP_MBR_JOIN:return"\u7fa4\u6210\u5458\uff1a".concat(t," \u52a0\u5165\u7fa4\u7ec4");case Vw().TYPES.GRP_TIP_MBR_QUIT:return"\u7fa4\u6210\u5458\uff1a".concat(t," \u9000\u51fa\u7fa4\u7ec4");case Vw().TYPES.GRP_TIP_MBR_KICKED_OUT:return"\u7fa4\u6210\u5458\uff1a".concat(t," \u88ab").concat(e.payload.operatorID,"\u8e22\u51fa\u7fa4\u7ec4");case Vw().TYPES.GRP_TIP_MBR_SET_ADMIN:return"\u7fa4\u6210\u5458\uff1a".concat(t," \u6210\u4e3a\u7ba1\u7406\u5458");case Vw().TYPES.GRP_TIP_MBR_CANCELED_ADMIN:return"\u7fa4\u6210\u5458\uff1a".concat(t," \u88ab\u64a4\u9500\u7ba1\u7406\u5458");case Vw().TYPES.GRP_TIP_GRP_PROFILE_UPDATED:return"\u7fa4\u8d44\u6599\u4fee\u6539";case Vw().TYPES.GRP_TIP_MBR_PROFILE_UPDATED:var n,i=a(e.payload.memberList);try{for(i.s();!(n=i.n()).done;){var r=n.value;return r.muteTime>0?"\u7fa4\u6210\u5458\uff1a".concat(r.userID,"\u88ab\u7981\u8a00").concat(r.muteTime,"\u79d2"):"\u7fa4\u6210\u5458\uff1a".concat(r.userID,"\u88ab\u53d6\u6d88\u7981\u8a00")}}catch(o){i.e(o)}finally{i.f()}break;default:return"[\u7fa4\u63d0\u793a\u6d88\u606f]"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-group-tip-element"]],inputs:{message:"message",isMine:"isMine",payload:"payload"},features:[It],decls:2,vars:1,consts:[[1,"group-tip-element-wrapper"]],template:function(e,t){1&e&&(Hs(0,"div",0),za(1),qs()),2&e&&(ho(1),La(t.text))},styles:[".group-tip-element-wrapper[_ngcontent-%COMP%]{background:#fff;padding:4px 15px;border-radius:3px;color:#a5b5c1;font-size:12px}"]}),e}();function HR(e){return e<10?"0".concat(e):e}function qR(e,t){if(1&e&&(Hs(0,"div",4),Hs(1,"div",5),za(2,"\u5bf9IM DEMO\u7684\u8bc4\u5206\u548c\u5efa\u8bae"),qs(),Hs(3,"div",6),za(4),qs(),qs()),2&e){var n=ra();ho(4),La(n.payload.extension)}}function WR(e,t){if(1&e&&(Hs(0,"span",7),za(1),qs()),2&e){var n=ra();ho(1),La(n.text)}}var KR=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.text=this.translateCustomMessage(this.payload)}},{key:"translateCustomMessage",value:function(e){var t={action:0,duration:0};try{t=JSON.parse(e.data)}catch(n){t={action:0,duration:0}}if("group_create"===e.data)return"".concat(e.extension);switch(t.action){case 0:return"[\u8bf7\u6c42\u901a\u8bdd]";case 1:return"[\u53d6\u6d88\u901a\u8bdd]";case 2:return"[\u62d2\u7edd\u901a\u8bdd]";case 3:return"[\u65e0\u5e94\u7b54]";case 4:return"[\u5f00\u59cb\u901a\u8bdd]";case 5:return"[\u7ed3\u675f\u901a\u8bdd\uff0c\u901a\u8bdd\u65f6\u957f\uff1a".concat(function(e){if(e<60)return"00:00:".concat(HR(e));if(e<3600){var t=parseInt((e/60).toString()),n=e-60*t;return"00:".concat(HR(t),":").concat(HR(n))}var i=parseInt((e/3600).toString()),r=e-3600*i,o=parseInt((r/60).toString()),s=r-60*o;return"".concat(HR(i),":").concat(HR(o),":").concat(HR(s))}(t.duration),"]");case 6:return"[\u6b63\u5728\u901a\u8bdd\u4e2d]";case-2:return"[\u8bbe\u5907\u5f02\u5e38]";default:return"[\u81ea\u5b9a\u4e49\u6d88\u606f]"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-custom-element"]],inputs:{message:"message",isMine:"isMine",payload:"payload"},features:[It],decls:5,vars:4,consts:[[3,"message","isMine"],[1,"custom-element-wrapper"],["class","survey",4,"ngIf","ngIfElse"],["other",""],[1,"survey"],[1,"title"],[1,"suggestion"],["title","\u60a8\u53ef\u4ee5\u81ea\u884c\u89e3\u6790\u81ea\u5b9a\u4e49\u6d88\u606f",1,"text"]],template:function(e,t){if(1&e&&(Hs(0,"app-message-bubble",0),Hs(1,"div",1),Us(2,qR,5,1,"div",2),Us(3,WR,2,1,"ng-template",null,3,Mc),qs(),qs()),2&e){var n=Gs(4);js("message",t.message)("isMine",t.isMine),ho(2),js("ngIf","survey"===t.payload.data)("ngIfElse",n)}},directives:[mR,th],styles:[".text[_ngcontent-%COMP%]{font-weight:700}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;padding-bottom:10px}.survey[_ngcontent-%COMP%]{background-color:#fff;color:#000;padding:20px;display:flex;flex-direction:column}.suggestion[_ngcontent-%COMP%]{padding-top:10px;font-size:14px}"]}),e}(),YR=function(){var e=function(){function e(t,n,i){b(this,e),this.modalRef=t,this.store=n,this.timHelperService=i,this.form={handleAction:"Agree",handleMessage:""}}return w(e,[{key:"ngOnInit",value:function(){}},{key:"handleGroupApplication",value:function(){var e=this;this.timHelperService.tim.handleGroupApplication({handleAction:this.form.handleAction,handleMessage:this.form.handleMessage,message:this.message}).then(function(){e.store.dispatch(Iw({message:e.message})),e.modalRef.destroy()}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(KM),Vs(xk),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["im-approval-join-group"]],inputs:{message:"message"},decls:22,vars:8,consts:[["nz-form",""],[3,"nzSpan"],["name","handleAction",3,"ngModel","ngModelChange"],["nz-radio","","nzValue","Agree"],["nz-radio","","nzValue","Reject"],["rows","3","nz-input","","name","handleMessage",3,"ngModel","ngModelChange"],["nz-row","","nzJustify","center"],["nzPush","8",3,"nzSpan"],["nz-button","","nzType","primary","type","button",3,"click"],["nz-button","","nzType","default","type","button",3,"click"]],template:function(e,t){1&e&&(Hs(0,"form",0),Hs(1,"nz-form-item"),Hs(2,"nz-form-label",1),za(3,"\u5904\u7406\u7ed3\u679c"),qs(),Hs(4,"nz-form-control",1),Hs(5,"nz-radio-group",2),Qs("ngModelChange",function(e){return t.form.handleAction=e}),Hs(6,"label",3),za(7,"\u540c\u610f"),qs(),Hs(8,"label",4),za(9,"\u62d2\u7edd"),qs(),qs(),qs(),qs(),Hs(10,"nz-form-item"),Hs(11,"nz-form-label",1),za(12,"\u9644\u8a00"),qs(),Hs(13,"nz-form-control",1),Hs(14,"textarea",5),Qs("ngModelChange",function(e){return t.form.handleMessage=e}),qs(),qs(),qs(),Hs(15,"nz-form-item",6),Hs(16,"nz-form-control",7),Hs(17,"button",8),Qs("click",function(){return t.handleGroupApplication()}),za(18,"\u786e\u5b9a"),qs(),qs(),Hs(19,"nz-form-control",1),Hs(20,"button",9),Qs("click",function(){return t.modalRef.destroy()}),za(21,"\u53d6\u6d88"),qs(),qs(),qs(),qs()),2&e&&(ho(2),js("nzSpan",6),ho(2),js("nzSpan",14),ho(1),js("ngModel",t.form.handleAction),ho(6),js("nzSpan",6),ho(2),js("nzSpan",14),ho(1),js("ngModel",t.form.handleMessage),ho(2),js("nzSpan",12),ho(3),js("nzSpan",12))},directives:[YS,bS,HS,RO,rO,PO,oO,FO,LO,YO,_S,KS,$O,GO,YC,VT,LT,AT],styles:[""],changeDetection:0}),e}();function $R(e,t){if(1&e){var n=$s();Hs(0,"button",3),Qs("click",function(){return $t(n),ra().approval()}),za(1,"\u5904\u7406"),qs()}}var ZR=function(){var e=function(){function e(t){b(this,e),this.modal=t,this.showDialog=!1}return w(e,[{key:"ngOnInit",value:function(){this.text=function(e){var t,n,i=(null===(t=e.payload)||void 0===t?void 0:t.groupProfile.name)||(null===(n=e.payload)||void 0===n?void 0:n.groupProfile.groupID);switch(e.payload.operationType){case 1:return"".concat(e.payload.operatorID," \u7533\u8bf7\u52a0\u5165\u7fa4\u7ec4\uff1a").concat(i);case 2:return"\u6210\u529f\u52a0\u5165\u7fa4\u7ec4\uff1a".concat(i);case 3:return"\u7533\u8bf7\u52a0\u5165\u7fa4\u7ec4\uff1a".concat(i,"\u88ab\u62d2\u7edd");case 4:return"\u4f60\u88ab\u7ba1\u7406\u5458".concat(e.payload.operatorID,"\u8e22\u51fa\u7fa4\u7ec4\uff1a").concat(i);case 5:return"\u7fa4\uff1a".concat(i," \u5df2\u88ab").concat(e.payload.operatorID,"\u89e3\u6563");case 6:return"".concat(e.payload.operatorID,"\u521b\u5efa\u7fa4\uff1a").concat(i);case 7:return"".concat(e.payload.operatorID,"\u9080\u8bf7\u4f60\u52a0\u7fa4\uff1a").concat(i);case 8:return"\u4f60\u9000\u51fa\u7fa4\u7ec4\uff1a".concat(i);case 9:return"\u4f60\u88ab".concat(e.payload.operatorID,"\u8bbe\u7f6e\u4e3a\u7fa4\uff1a").concat(i,"\u7684\u7ba1\u7406\u5458");case 10:return"\u4f60\u88ab".concat(e.payload.operatorID,"\u64a4\u9500\u7fa4\uff1a").concat(i,"\u7684\u7ba1\u7406\u5458\u8eab\u4efd");case 255:return"\u81ea\u5b9a\u4e49\u7fa4\u7cfb\u7edf\u901a\u77e5: "+e.payload.userDefinedField}}(this.message),this.title=this.message.type===Yw.TYPES.MSG_GRP_SYS_NOTICE?"\u7fa4\u7cfb\u7edf\u901a\u77e5":"\u7cfb\u7edf\u901a\u77e5",this.isJoinGroupRequest=1===this.payload.operationType}},{key:"approval",value:function(){this.modal.create({nzTitle:"\u5904\u7406\u52a0\u7fa4\u7533\u8bf7",nzContent:YR,nzMaskClosable:!1,nzFooter:null,nzWidth:"40%",nzStyle:{top:"20px"},nzComponentParams:{message:this.message}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(YM))},e.\u0275cmp=at({type:e,selectors:[["app-group-system-notice-element"]],inputs:{message:"message",payload:"payload"},decls:4,vars:4,consts:[[3,"message","isMine"],[1,"group-system-element-wrapper"],["nz-button","","type","text",3,"click",4,"ngIf"],["nz-button","","type","text",3,"click"]],template:function(e,t){1&e&&(Hs(0,"app-message-bubble",0),Hs(1,"div",1),za(2),Us(3,$R,2,0,"button",2),qs(),qs()),2&e&&(js("message",t.message)("isMine",!1),ho(2),Na(" ",t.text," "),ho(1),js("ngIf",t.isJoinGroupRequest))},directives:[mR,th,VT,LT,AT],styles:[".card[_ngcontent-%COMP%]{background:#fff;padding:12px;border-radius:5px;width:300px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:18px}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{font-size:14px}"]}),e}();function XR(e,t){if(1&e&&(Hs(0,"div",11),Ws(1,"im-avatar",12),qs()),2&e){var n=ra(2);ho(1),js("src",n.avatar)}}function JR(e,t){1&e&&Ws(0,"app-message-status-icon",13),2&e&&js("message",ra(2).message)}function QR(e,t){if(1&e&&Ws(0,"app-text-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function eP(e,t){if(1&e&&Ws(0,"app-image-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function tP(e,t){if(1&e&&Ws(0,"app-file-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function nP(e,t){1&e&&Ws(0,"app-message-footer",13),2&e&&js("message",ra(2).message)}function iP(e,t){if(1&e&&(Hs(0,"div",4),Us(1,XR,2,1,"div",5),Hs(2,"div",6),Hs(3,"div",7),Us(4,JR,1,1,"app-message-status-icon",8),Us(5,QR,1,3,"app-text-element",9),Us(6,eP,1,3,"app-image-element",9),Us(7,tP,1,3,"app-file-element",9),qs(),Us(8,nP,1,1,"app-message-footer",8),qs(),Ws(9,"div",10),qs()),2&e){var n=ra();wa(n.messagePosition),ho(1),js("ngIf",n.showAvatar),ho(3),js("ngIf",n.isMine),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_TEXT),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_IMAGE),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_FILE),ho(1),js("ngIf",n.showMessageHeader)}}function rP(e,t){if(1&e&&(Hs(0,"div",11),Ws(1,"im-avatar",17),qs()),2&e){var n=ra(2);ho(1),js("src",n.avatar)}}function oP(e,t){if(1&e&&Ws(0,"app-message-header",18),2&e){var n=ra(2);js("message",n.message)("currentConversation",n.currentConversation)("currentUserProfile",n.currentUserProfile)}}function sP(e,t){1&e&&Ws(0,"app-message-status-icon",13),2&e&&js("message",ra(2).message)}function aP(e,t){if(1&e&&Ws(0,"app-text-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function uP(e,t){if(1&e&&Ws(0,"app-image-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function cP(e,t){if(1&e&&Ws(0,"app-file-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function lP(e,t){if(1&e&&Ws(0,"app-group-tip-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function hP(e,t){if(1&e&&Ws(0,"app-custom-element",14),2&e){var n=ra(2);js("isMine",n.isMine)("message",n.message)("payload",n.message.payload)}}function fP(e,t){if(1&e&&(Hs(0,"div",15),Us(1,rP,2,1,"div",5),Hs(2,"div",6),Us(3,oP,1,3,"app-message-header",16),Hs(4,"div",7),Us(5,sP,1,1,"app-message-status-icon",8),Us(6,aP,1,3,"app-text-element",9),Us(7,uP,1,3,"app-image-element",9),Us(8,cP,1,3,"app-file-element",9),Us(9,lP,1,3,"app-group-tip-element",9),Us(10,hP,1,3,"app-custom-element",9),qs(),qs(),Ws(11,"div",10),qs()),2&e){var n=ra();wa(n.messagePosition),ho(1),js("ngIf",n.showAvatar),ho(2),js("ngIf",n.showMessageHeader),ho(2),js("ngIf",n.isMine),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_TEXT),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_IMAGE),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_FILE),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_GRP_TIP),ho(1),js("ngIf",n.message.type===n.TIM.TYPES.MSG_CUSTOM)}}function dP(e,t){if(1&e&&Ws(0,"app-message-header",18),2&e){var n=ra(2);js("message",n.message)("currentConversation",n.currentConversation)("currentUserProfile",n.currentUserProfile)}}function pP(e,t){if(1&e&&(Hs(0,"div",19),Hs(1,"div",11),Ws(2,"im-avatar",20),qs(),Hs(3,"div",6),Us(4,dP,1,3,"app-message-header",16),Ws(5,"app-group-system-notice-element",21),qs(),qs()),2&e){var n=ra();ho(2),js("src",n.avatar)("type",n.currentConversationType),ho(2),js("ngIf",n.showMessageHeader),ho(1),js("message",n.message)("payload",n.message.payload)}}var gP=function(){var e=function(){function e(t){b(this,e),this.store=t,this.TIM=Vw()}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(Pw).subscribe(function(t){e.currentUserProfile=t})}},{key:"showAvatar",get:function(){return"C2C"===this.currentConversation.type&&!this.message.isRevoked||"GROUP"===this.currentConversation.type&&!this.message.isRevoked&&this.message.type!==this.TIM.TYPES.MSG_GRP_TIP}},{key:"currentConversationType",get:function(){if(this.currentConversation)return this.currentConversation.type}},{key:"avatar",get:function(){return"C2C"===this.currentConversation.type?this.isMine?this.currentUserProfile.avatar:this.currentConversation.userProfile.avatar:"GROUP"===this.currentConversation.type?this.isMine?this.currentUserProfile.avatar:this.message.avatar:""}},{key:"isMine",get:function(){return"out"===this.message.flow}},{key:"messagePosition",get:function(){return["TIMGroupTipElem","TIMGroupSystemNoticeElem"].includes(this.message.type)||this.message.isRevoked?"position-center":this.isMine?"position-right":"position-left"}},{key:"showMessageHeader",get:function(){return!["TIMGroupTipElem","TIMGroupSystemNoticeElem"].includes(this.message.type)&&!this.message.isRevoked}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk))},e.\u0275cmp=at({type:e,selectors:[["app-message-item"]],inputs:{currentConversation:"currentConversation",message:"message"},decls:4,vars:5,consts:[[1,"message-wrapper"],["class","c2c-layout",3,"class",4,"ngIf"],["class","group-layout",3,"class",4,"ngIf"],["class","system-layout",4,"ngIf"],[1,"c2c-layout"],["class","col-1",4,"ngIf"],[1,"col-2"],[1,"content-wrapper"],[3,"message",4,"ngIf"],[3,"isMine","message","payload",4,"ngIf"],[1,"col-3"],[1,"col-1"],[3,"src"],[3,"message"],[3,"isMine","message","payload"],[1,"group-layout"],[3,"message","currentConversation","currentUserProfile",4,"ngIf"],[1,"group-member-avatar",3,"src"],[3,"message","currentConversation","currentUserProfile"],[1,"system-layout"],[3,"src","type"],[3,"message","payload"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,iP,10,8,"div",1),Us(2,fP,12,10,"div",2),Us(3,pP,6,5,"div",3),qs()),2&e&&(wa(t.messagePosition),ho(1),js("ngIf",t.currentConversationType===t.TIM.TYPES.CONV_C2C),ho(1),js("ngIf",t.currentConversationType===t.TIM.TYPES.CONV_GROUP),ho(1),js("ngIf",t.currentConversationType===t.TIM.TYPES.CONV_SYSTEM))},directives:[th,fD,yx,kR,NR,FR,GR,jR,BR,KR,ZR],styles:[".message-wrapper[_ngcontent-%COMP%]{margin:20px 0}.message-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.c2c-layout[_ngcontent-%COMP%], .group-layout[_ngcontent-%COMP%], .system-layout[_ngcontent-%COMP%]{display:flex}.c2c-layout[_ngcontent-%COMP%]   .group-member-avatar[_ngcontent-%COMP%], .group-layout[_ngcontent-%COMP%]   .group-member-avatar[_ngcontent-%COMP%], .system-layout[_ngcontent-%COMP%]   .group-member-avatar[_ngcontent-%COMP%]{cursor:pointer}.c2c-layout[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%], .group-layout[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%], .system-layout[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{display:flex;flex-direction:column}.c2c-layout[_ngcontent-%COMP%]   .col-3[_ngcontent-%COMP%], .group-layout[_ngcontent-%COMP%]   .col-3[_ngcontent-%COMP%], .system-layout[_ngcontent-%COMP%]   .col-3[_ngcontent-%COMP%]{width:30px}.c2c-layout.position-left[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%], .group-layout.position-left[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%], .system-layout.position-left[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{align-items:flex-start}.c2c-layout.position-right[_ngcontent-%COMP%], .group-layout.position-right[_ngcontent-%COMP%], .system-layout.position-right[_ngcontent-%COMP%]{flex-direction:row-reverse}.c2c-layout.position-right[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%], .group-layout.position-right[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%], .system-layout.position-right[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{align-items:flex-end}.c2c-layout.position-center[_ngcontent-%COMP%], .group-layout.position-center[_ngcontent-%COMP%], .system-layout.position-center[_ngcontent-%COMP%]{justify-content:center}.c2c-layout[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]{margin-top:3px}.group-layout[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{margin-top:5px}[_nghost-%COMP%]     .avatar{width:56px;height:56px;border-radius:50%;box-shadow:0 5px 10px 0 rgba(0,0,0,.1)}"]}),e}(),vP=["imagePicker"],mP=["filePicker"],yP=["textInput"];function _P(e,t){if(1&e){var n=$s();Hs(0,"div",17),Qs("click",function(){var e=$t(n).$implicit;return ra(2).chooseEmoji(e)}),Ws(1,"img",18),qs()}if(2&e){var i=t.$implicit,r=ra(2);ho(1),js("src",r.emojiUrl+r.emojiMap[i],gr)}}var bP=function(){return{width:"400px"}};function kP(e,t){if(1&e&&(Hs(0,"div",15),Us(1,_P,2,1,"div",16),qs()),2&e){var n=ra();js("ngStyle",nc(2,bP)),ho(1),js("ngForOf",n.emojiName)}}var wP=function(e){return{"white-background":e}},CP=function(){var e=function(){function e(t,n,i,r){b(this,e),this.store=t,this.cd=n,this.timHelperService=i,this.reEditMessage=r,this.visible=!1,this.emojiName=kx,this.emojiUrl=_x,this.emojiMap=bx,this.focus=!1,this.messageContent=""}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.store.select(Dw).subscribe(function(t){if(t&&t.conversationID)switch(t.type){case"C2C":e.toAccount=t.conversationID.replace("C2C","");break;case"GROUP":e.toAccount=t.conversationID.replace("GROUP","");break;default:e.toAccount=t.conversationID}else e.toAccount="";e.currentConversationType=t&&t.type?t.type:""}),this.textInput.nativeElement.addEventListener("paste",this.handlePaste.bind(this)),this.reEditMessage.reEditMessage.subscribe(function(t){e.messageContent=t,e.cd.markForCheck()})}},{key:"onfocus",value:function(e){console.log("cccccD",e)}},{key:"handleEnter",value:function(e){this.sendTextMessage()}},{key:"handleLine",value:function(e){e.preventDefault(),e.ctrlKey&&"Enter"===e.key&&(this.messageContent+="\n")}},{key:"handleUp",value:function(e){console.log("handleUp::",e)}},{key:"handleDown",value:function(e){console.log("handleDown::",e)}},{key:"keyDown",value:function(e){e.ctrlKey||"Enter"!==e.key||(e.preventDefault(),this.handleEnter(e)),"ArrowUp"===e.key&&(e.stopPropagation(),this.handleUp(e)),"ArrowDown"===e.key&&(e.stopPropagation(),this.handleDown(e))}},{key:"handlePaste",value:function(e){var t,n=this,i=e.clipboardData;if(i&&i.files&&i.files.length>0&&(t=i.files[0]),void 0!==t){var r=this.timHelperService.tim.createImageMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:t},onProgress:function(e){r.progress=e}});this.timHelperService.tim.sendMessage(r).then(function(e){n.store.dispatch(Ew({message:r}))}).catch(function(e){console.error("[sendMessage error]::",e)})}}},{key:"sendImage",value:function(e){var t=this;console.log("sendImage");var n=this.timHelperService.tim.createImageMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:this.imagePicker.nativeElement},onProgress:function(e){n.progress=e,console.log("percent:",e)}});this.timHelperService.tim.sendMessage(n).then(function(e){var n=e.data;console.log("\u53d1\u9001\u6210\u529f",n),t.store.dispatch(Ew({message:Object.assign({},n.message)})),t.imagePicker.nativeElement.value=null}).catch(function(e){console.error("imError::",e)})}},{key:"sendFile",value:function(e){var t=this,n=this.timHelperService.tim.createFileMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("filePicker")},onProgress:function(e){n.progress=e,console.log("\u4e0a\u4f20\u8fdb\u5ea6",e)}});this.timHelperService.tim.sendMessage(n).then(function(e){var n=e.data;t.store.dispatch(Ew({message:Object.assign({},n.message)})),t.filePicker.nativeElement.value=null}).catch(function(e){console.error("imError::",e)})}},{key:"chooseEmoji",value:function(e){console.log(e),this.messageContent+=e}},{key:"sendTextMessage",value:function(){if(""===this.messageContent||0===this.messageContent.trim().length)return this.messageContent="",void this.store.dispatch(bw({msgType:qw.warning,message:"\u4e0d\u80fd\u53d1\u9001\u7a7a\u6d88\u606f\u54e6\uff01"}));var e=this.timHelperService.tim.createTextMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{text:this.messageContent}});this.store.dispatch(Ew({message:e})),this.timHelperService.eventBus$.next("scroll-bottom"),this.timHelperService.tim.sendMessage(e).catch(function(e){console.error("[sendMessage error]::",e)}),this.messageContent=""}},{key:"handleSendImageClick",value:function(e,t){t.stopPropagation(),e.click()}},{key:"handleSendFileClick",value:function(e){e.click()}},{key:"ngOnDestroy",value:function(){this.textInput.nativeElement.addEventListener("paste",this.handlePaste.bind(this))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs(xu),Vs($w),Vs(lR))},e.\u0275cmp=at({type:e,selectors:[["app-message-send-box"]],viewQuery:function(e,t){var n;(1&e&&(wc(vP,5),wc(mP,5),wc(yP,7)),2&e)&&(kc(n=Sc())&&(t.imagePicker=n.first),kc(n=Sc())&&(t.filePicker=n.first),kc(n=Sc())&&(t.textInput=n.first))},decls:18,vars:7,consts:[[1,"message-send-box-wrapper",3,"ngClass","focus"],[1,"send-header-bar"],["type","file","accept",".jpg, .jpeg, .png, .gif",2,"display","none",3,"change","click"],["imagePicker",""],["type","file",2,"display","none",3,"change","click"],["filePicker",""],["nz-icon","","nzType","meh","nzTheme","outline","title","\u53d1\u8868\u60c5","nz-popover","","nzPopoverTitle","Title","nzPopoverTrigger","click",3,"nzPopoverVisible","nzPopoverContent","nzPopoverTitle","nzPopoverVisibleChange"],["nz-icon","","nzType","picture","nzTheme","outline","title","\u53d1\u56fe\u7247",3,"click"],["nz-icon","","nzType","folder","nzTheme","outline","title","\u53d1\u6587\u4ef6",3,"click"],[1,"bottom"],["rows","4","resize","false",1,"text-input",3,"ngModel","ngModelChange","focus","blur","keydown","keyup"],["textInput",""],[1,"btn-send",3,"click"],["nzTooltipTitle","\u6309Enter\u53d1\u9001\u6d88\u606f\uff0cCtrl+Enter\u6362\u884c","nzTooltipPlacement","left","nz-button","","nz-tooltip","",1,"tim-icon-send"],["contentTemplate",""],[1,"emojis",3,"ngStyle"],["class","emoji",3,"click",4,"ngFor","ngForOf"],[1,"emoji",3,"click"],[2,"width","30px","height","30px",3,"src"]],template:function(e,t){if(1&e){var n=$s();Hs(0,"div",0),Qs("focus",function(e){return t.onfocus(e)}),Hs(1,"div",1),Hs(2,"input",2,3),Qs("change",function(e){return t.sendImage(e)})("click",function(e){return e.stopPropagation()}),qs(),Hs(4,"input",4,5),Qs("change",function(e){return t.sendFile(e)})("click",function(e){return e.stopPropagation()}),qs(),Hs(6,"i",6),Qs("nzPopoverVisibleChange",function(e){return t.visible=e}),qs(),Hs(7,"i",7),Qs("click",function(e){$t(n);var i=Gs(3);return t.handleSendImageClick(i,e)}),qs(),Hs(8,"i",8),Qs("click",function(){$t(n);var e=Gs(5);return t.handleSendFileClick(e)}),qs(),qs(),Hs(9,"div",9),Hs(10,"textarea",10,11),Qs("ngModelChange",function(e){return t.messageContent=e})("focus",function(){return t.focus=!0})("blur",function(){return t.focus=!1})("keydown",function(e){return t.keyDown(e)})("keyup",function(e){return t.handleLine(e)}),za(12,"    "),qs(),Hs(13,"div",12),Qs("click",function(){return t.sendTextMessage()}),Hs(14,"button",13),za(15,"\u53d1\u9001"),qs(),qs(),qs(),qs(),Us(16,kP,2,3,"ng-template",null,14,Mc)}if(2&e){var i=Gs(17);js("ngClass",ic(5,wP,t.focus)),ho(6),js("nzPopoverVisible",t.visible)("nzPopoverContent",i)("nzPopoverTitle","\u8868\u60c5"),ho(4),js("ngModel",t.messageContent)}},directives:[Xl,AT,ib,iD,YC,_S,KS,VT,LT,_O,uh,Ql],styles:[".message-send-box-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;padding:3px 20px 20px}.emojis[_ngcontent-%COMP%]{height:160px;display:flex;flex-direction:row;flex-wrap:wrap;overflow-y:scroll}.emoji[_ngcontent-%COMP%], .emojis[_ngcontent-%COMP%]{box-sizing:border-box}.emoji[_ngcontent-%COMP%]{height:40px;width:40px}.send-header-bar[_ngcontent-%COMP%]{box-sizing:border-box;padding:3px 0 0}.send-header-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:grey;margin:0 12px 0 0}.send-header-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#000}textarea[_ngcontent-%COMP%]{resize:none}.text-input[_ngcontent-%COMP%]{font-size:16px;width:100%;box-sizing:box-sizing;border:none;outline:none;background-color:transparent}.block[_ngcontent-%COMP%]{padding:10px 0;display:flex;align-items:center}.bottom[_ngcontent-%COMP%]{padding-top:10px;position:relative}.bottom[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{cursor:pointer;position:absolute;color:#2d8cf0;font-size:30px;right:0;bottom:-5px;padding:6px 6px 4px 4px;border-radius:50%}.white-background[_ngcontent-%COMP%]{background-color:#fff}"],changeDetection:0}),e}(),SP=["messageList"];function EP(e,t){if(1&e){var n=$s();Hs(0,"div",11),Hs(1,"a",12),Qs("click",function(){return $t(n),ra(2).getMore()}),za(2,"\u67e5\u770b\u66f4\u591a"),qs(),qs()}}function IP(e,t){1&e&&(Hs(0,"div",13),za(1,"\u6ca1\u6709\u66f4\u591a\u4e86"),qs())}function TP(e,t){if(1&e&&Ws(0,"app-message-item",14),2&e){var n=t.$implicit,i=ra(2);js("message",n)("currentConversation",i.currentConversation)}}function MP(e,t){if(1&e){var n=$s();Hs(0,"div",15),Qs("click",function(){return $t(n),ra(2).scrollMessageListToBottom()}),za(1,"\u56de\u5230\u6700\u65b0\u4f4d\u7f6e"),qs()}}function OP(e,t){1&e&&(Hs(0,"div",16),Ws(1,"app-message-send-box"),qs())}function DP(e,t){if(1&e){var n=$s();Hs(0,"div",2),Qs("scroll",function(e){return $t(n),ra().onscroll(e)}),Hs(1,"div",3),Hs(2,"div",4,5),Qs("scroll",function(e){return $t(n),ra().onscroll(e)}),Us(4,EP,3,0,"div",6),Us(5,IP,2,0,"div",7),Us(6,TP,1,2,"app-message-item",8),qs(),Us(7,MP,2,0,"div",9),qs(),Us(8,OP,2,0,"div",10),qs()}if(2&e){var i=ra();ho(4),js("ngIf",!i.isCompleted),ho(1),js("ngIf",i.isCompleted),ho(1),js("ngForOf",i.currentMessageList),ho(1),js("ngIf",i.isShowScrollBottomTips),ho(1),js("ngIf",i.showMessageSendBox)}}var AP=function(){var e=function(){function e(t,n,i){b(this,e),this.store=t,this.cd=n,this.timHelperService=i,this.currentMessageList=[],this.isShowScrollBottomTips=!1,this.isCompleted=!1,this.preScrollHeight=0}return w(e,[{key:"showCurrentConversation",get:function(){var e;return!!(null===(e=this.currentConversation)||void 0===e?void 0:e.conversationID)}},{key:"showMessageSendBox",get:function(){return this.currentConversation.type!==Yw.TYPES.CONV_SYSTEM}},{key:"ngOnInit",value:function(){var e=this;this.currentConversationSubscription=this.store.select(Dw).subscribe(function(t){e.currentConversation=t,e.preScrollHeight=0,e.cd.markForCheck()}),this.conversationSubscription=this.store.select(Ow).subscribe(function(t){e.currentMessageList=t.currentMessageList,e.isCompleted=t.isCompleted,t.currentMessageList&&t.currentMessageList.length>0&&e.currentConversation.conversationID&&(e.keepMessageListOnBottom(),e.timHelperService.tim.setMessageRead({conversationID:e.currentConversation.conversationID})),e.cd.markForCheck()},function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))}),this.eventBusSubscription=this.timHelperService.eventBus$.subscribe(function(t){"scroll-bottom"===t&&(e.scrollMessageListToBottom(),e.cd.markForCheck())})}},{key:"ngAfterViewInit",value:function(){this.keepMessageListOnBottom()}},{key:"getMore",value:function(){this.timHelperService.getMessageList(this.currentConversation.conversationID)}},{key:"onscroll",value:function(e){var t,n=e.target.scrollTop,i=null===(t=this.messageListRef)||void 0===t?void 0:t.nativeElement;i&&this.preScrollHeight-i.clientHeight-n<20&&(this.isShowScrollBottomTips=!1)}},{key:"scrollMessageListToBottom",value:function(){var e,t=this,n=null===(e=this.messageListRef)||void 0===e?void 0:e.nativeElement;n&&setTimeout(function(){n.scrollTop=n.scrollHeight,t.preScrollHeight=n.scrollHeight,t.isShowScrollBottomTips=!1},0)}},{key:"keepMessageListOnBottom",value:function(){var e,t=this,n=null===(e=this.messageListRef)||void 0===e?void 0:e.nativeElement;n&&setTimeout(function(){t.preScrollHeight-n.clientHeight-n.scrollTop<20?(n.scrollTop=n.scrollHeight,t.isShowScrollBottomTips=!1):t.isShowScrollBottomTips=!0,t.preScrollHeight=n.scrollHeight},0)}},{key:"ngOnDestroy",value:function(){[this.eventBusSubscription,this.conversationSubscription,this.currentConversationSubscription].forEach(function(e){e&&e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs(xu),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-current-conversation"]],viewQuery:function(e,t){var n;(1&e&&wc(SP,5),2&e)&&(kc(n=Sc())&&(t.messageListRef=n.first))},decls:2,vars:1,consts:[[1,"current-conversation-wrapper"],["class","current-conversation",3,"scroll",4,"ngIf"],[1,"current-conversation",3,"scroll"],[1,"content"],[1,"message-list",3,"scroll"],["messageList",""],["class","more",4,"ngIf"],["class","no-more",4,"ngIf"],[3,"message","currentConversation",4,"ngFor","ngForOf"],["class","newMessageTips",3,"click",4,"ngIf"],["class","footer",4,"ngIf"],[1,"more"],[3,"click"],[1,"no-more"],[3,"message","currentConversation"],[1,"newMessageTips",3,"click"],[1,"footer"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,DP,9,5,"div",1),qs()),2&e&&(ho(1),js("ngIf",t.showCurrentConversation))},directives:[th,Ql,gP,CP],styles:[".current-conversation-wrapper[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#1c2438;display:flex;height:75vh}.current-conversation-wrapper[_ngcontent-%COMP%]   .current-conversation[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.current-conversation-wrapper[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%], .current-conversation-wrapper[_ngcontent-%COMP%]   .no-more[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:12px}.current-conversation-wrapper[_ngcontent-%COMP%]   .no-more[_ngcontent-%COMP%]{color:#a5b5c1;padding:10px}.content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;overflow:hidden;position:relative}.content[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;overflow-y:scroll;padding:0 20px}.content[_ngcontent-%COMP%]   .newMessageTips[_ngcontent-%COMP%]{position:absolute;cursor:pointer;padding:5px;width:120px;margin:auto;left:0;right:0;bottom:5px;font-size:12px;text-align:center;border-radius:10px;border:1px solid #e9eaec;background-color:#fff;color:#2d8cf0}.footer[_ngcontent-%COMP%]{border-top:1px solid #e7e7e7}"],changeDetection:0}),e}();function xP(e,t){if(1&e&&(Hs(0,"span",6),za(1),qs()),2&e){var n=ra();js("title",n.userProfile.nick),ho(1),Na(" ",n.userProfile.nick," ")}}function RP(e,t){1&e&&(Hs(0,"span",7),za(1," [Anonymous] "),qs())}function PP(e,t){if(1&e&&(Hs(0,"div",8),Ws(1,"span",9),qs()),2&e){var n=ra();ho(1),wa(n.genderClass),js("title",n.gender)}}var zP=function(){var e=function(){function e(){b(this,e)}return w(e,[{key:"ngOnInit",value:function(){}},{key:"gender",get:function(){switch(this.userProfile.gender){case Vw().TYPES.GENDER_MALE:return"\u7537";case Vw().TYPES.GENDER_FEMALE:return"\u5973";default:return"\u672a\u8bbe\u7f6e"}}},{key:"genderClass",get:function(){switch(this.userProfile.gender){case Vw().TYPES.GENDER_MALE:return"icon-male";case Vw().TYPES.GENDER_FEMALE:return"icon-female";default:return""}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-user-profile"]],inputs:{userProfile:"userProfile"},decls:7,vars:6,consts:[[1,"profile-user"],[3,"title","src","size"],[1,"nick-name","text-ellipsis"],[3,"title",4,"ngIf","ngIfElse"],["elseBlock",""],["class","gender",4,"ngIf"],[3,"title"],["title","\u8be5\u7528\u6237\u672a\u8bbe\u7f6e\u6635\u79f0",1,"anonymous"],[1,"gender"],[1,"iconfont",3,"title"]],template:function(e,t){if(1&e&&(Hs(0,"div",0),Ws(1,"im-avatar",1),Hs(2,"div",2),Us(3,xP,2,2,"span",3),Us(4,RP,2,0,"ng-template",null,4,Mc),qs(),Us(6,PP,2,3,"div",5),qs()),2&e){var n=Gs(5);ho(1),js("title",t.userProfile.userID)("src",t.userProfile.avatar)("size",100),ho(2),js("ngIf",t.userProfile.nick)("ngIfElse",n),ho(3),js("ngIf",t.genderClass)}},directives:[fD,th],styles:[".profile-user[_ngcontent-%COMP%]{width:100%;text-align:center;padding:20px}.profile-user[_ngcontent-%COMP%]   .nick-name[_ngcontent-%COMP%]{width:100%;color:#1c2438;font-size:20px;font-weight:700;text-shadow:#76828c 0 0 .1em}.profile-user[_ngcontent-%COMP%]   .nick-name[_ngcontent-%COMP%]   .anonymous[_ngcontent-%COMP%]{color:#99a8b4;text-shadow:none}.profile-user[_ngcontent-%COMP%]   .gender[_ngcontent-%COMP%]{padding:5px 0 10px;border-bottom:1px solid #e7e7e7}.profile-user[_ngcontent-%COMP%]   .btn-add-blacklist[_ngcontent-%COMP%]{color:#f35f5f}.icon-male[_ngcontent-%COMP%]{color:#2d8cf0}.icon-female[_ngcontent-%COMP%]{color:#ff8096}"]}),e}(),LP=["inputElement"],NP=function(){var e=function(){function e(t,n,i,r){b(this,e),this.elementRef=t,this.cdr=n,this.focusMonitor=i,this.directionality=r,this.destroy$=new V,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.dir="ltr",this.onChange=function(){},this.onTouched=function(){},this.nzBlur=new cc,this.nzFocus=new cc,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=function(e){return e.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,"")},this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzInputMode="decimal",this.nzId=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=function(e){return e},this.elementRef.nativeElement.classList.add("ant-input-number")}return w(e,[{key:"onModelChange",value:function(e){this.parsedValue=this.nzParser(e),this.inputElement.nativeElement.value="".concat(this.parsedValue);var t=this.getCurrentValidValue(this.parsedValue);this.setValue(t)}},{key:"getCurrentValidValue",value:function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(t)?this.value:"".concat(this.getValidValue(t)),this.toNumber(t)}},{key:"isNotCompleteNumber",value:function(e){return isNaN(e)||""===e||null===e||!(!e||e.toString().indexOf(".")!==e.toString().length-1)}},{key:"getValidValue",value:function(e){var t=parseFloat(e);return isNaN(t)?e:(t<this.nzMin&&(t=this.nzMin),t>this.nzMax&&(t=this.nzMax),t)}},{key:"toNumber",value:function(e){if(this.isNotCompleteNumber(e))return e;var t=String(e);if(t.indexOf(".")>=0&&ky(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(e,this.nzPrecision);if("cut"===this.nzPrecisionMode){var n=t.split(".");return n[1]=n[1].slice(0,this.nzPrecision),Number(n.join("."))}return Number(Number(e).toFixed(this.nzPrecision))}return Number(e)}},{key:"getRatio",value:function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t}},{key:"down",value:function(e,t){this.isFocused||this.focus(),this.step("down",e,t)}},{key:"up",value:function(e,t){this.isFocused||this.focus(),this.step("up",e,t)}},{key:"getPrecision",value:function(e){var t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);var n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}},{key:"getMaxPrecision",value:function(e,t){if(ky(this.nzPrecision))return this.nzPrecision;var n=this.getPrecision(t),i=this.getPrecision(this.nzStep),r=this.getPrecision(e);return e?Math.max(r,n+i):n+i}},{key:"getPrecisionFactor",value:function(e,t){var n=this.getMaxPrecision(e,t);return Math.pow(10,n)}},{key:"upStep",value:function(e,t){var n,i=this.getPrecisionFactor(e,t),r=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((i*e+i*this.nzStep*t)/i).toFixed(r):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(n)}},{key:"downStep",value:function(e,t){var n,i=this.getPrecisionFactor(e,t),r=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((i*e-i*this.nzStep*t)/i).toFixed(r):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(n)}},{key:"step",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.stop(),t.preventDefault(),!this.nzDisabled){var r=this.getCurrentValidValue(this.parsedValue)||0,o=0;"up"===e?o=this.upStep(r,i):"down"===e&&(o=this.downStep(r,i));var s=o>this.nzMax||o<this.nzMin;o>this.nzMax?o=this.nzMax:o<this.nzMin&&(o=this.nzMin),this.setValue(o),this.updateDisplayValue(o),this.isFocused=!0,s||(this.autoStepTimer=setTimeout(function(){n[e](t,i)},300))}}},{key:"stop",value:function(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}},{key:"setValue",value:function(e){if("".concat(this.value)!="".concat(e)&&this.onChange(e),this.value=e,this.parsedValue=e,this.disabledUp=this.disabledDown=!1,e||0===e){var t=Number(e);t>=this.nzMax&&(this.disabledUp=!0),t<=this.nzMin&&(this.disabledDown=!0)}}},{key:"updateDisplayValue",value:function(e){var t=ky(this.nzFormatter(e))?this.nzFormatter(e):"";this.displayValue=t,this.inputElement.nativeElement.value="".concat(t)}},{key:"onKeyDown",value:function(e){if(38===e.keyCode){var t=this.getRatio(e);this.up(e,t),this.stop()}else if(40===e.keyCode){var n=this.getRatio(e);this.down(e,n),this.stop()}else 13===e.keyCode&&this.updateDisplayValue(this.value)}},{key:"writeValue",value:function(e){this.value=e,this.setValue(e),this.updateDisplayValue(e),this.cdr.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,this.cdr.markForCheck()}},{key:"focus",value:function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}},{key:"blur",value:function(){this.inputElement.nativeElement.blur()}},{key:"ngOnInit",value:function(){var e,t=this;this.focusMonitor.monitor(this.elementRef,!0).subscribe(function(e){e?(t.isFocused=!0,t.nzFocus.emit()):(t.isFocused=!1,t.updateDisplayValue(t.value),t.nzBlur.emit(),Promise.resolve().then(function(){return t.onTouched()}))}),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e})}},{key:"ngOnChanges",value:function(e){if(e.nzFormatter&&!e.nzFormatter.isFirstChange()){var t=this.getCurrentValidValue(this.parsedValue);this.setValue(t),this.updateDisplayValue(t)}}},{key:"ngAfterViewInit",value:function(){this.nzAutoFocus&&this.focus()}},{key:"ngOnDestroy",value:function(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su),Vs(xu),Vs(sM),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["nz-input-number"]],viewQuery:function(e,t){var n;(1&e&&wc(LP,7),2&e)&&(kc(n=Sc())&&(t.inputElement=n.first))},hostVars:10,hostBindings:function(e,t){2&e&&ba("ant-input-number-focused",t.isFocused)("ant-input-number-lg","large"===t.nzSize)("ant-input-number-sm","small"===t.nzSize)("ant-input-number-disabled",t.nzDisabled)("ant-input-number-rtl","rtl"===t.dir)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzInputMode:"nzInputMode",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter",nzPrecision:"nzPrecision"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[Qa([{provide:qC,useExisting:Ce(function(){return e}),multi:!0}]),It],decls:8,vars:13,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(e,t){1&e&&(Hs(0,"div",0),Hs(1,"span",1),Qs("mousedown",function(e){return t.up(e)})("mouseup",function(){return t.stop()})("mouseleave",function(){return t.stop()}),Ws(2,"i",2),qs(),Hs(3,"span",3),Qs("mousedown",function(e){return t.down(e)})("mouseup",function(){return t.stop()})("mouseleave",function(){return t.stop()}),Ws(4,"i",4),qs(),qs(),Hs(5,"div",5),Hs(6,"input",6,7),Qs("keydown",function(e){return t.onKeyDown(e)})("keyup",function(){return t.stop()})("ngModelChange",function(e){return t.onModelChange(e)}),qs(),qs()),2&e&&(ho(1),ba("ant-input-number-handler-up-disabled",t.disabledUp),ho(2),ba("ant-input-number-handler-down-disabled",t.disabledDown),ho(3),js("disabled",t.nzDisabled)("placeholder",t.nzPlaceHolder)("ngModel",t.displayValue),Ns("id",t.nzId)("autofocus",t.nzAutoFocus?"autofocus":null)("min",t.nzMin)("max",t.nzMax)("step",t.nzStep)("inputmode",t.nzInputMode))},directives:[ib,YC,_S,KS],encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzAutoFocus",void 0),e}(),FP=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,sE,rb]]}),e}();function UP(e,t){if(1&e){var n=$s();Hs(0,"a",9),Qs("click",function(){return $t(n),ra().cancelMute()}),za(1,"\u53d6\u6d88\u7981\u8a00"),qs()}}var GP=function(){return{width:"100%"}};function VP(e,t){if(1&e){var n=$s();Hs(0,"nz-input-number",10),Qs("ngModelChange",function(e){return $t(n),ra().muteTime=e})("keydown.enter",function(){return $t(n),ra().setGroupMemberMuteTime()}),qs()}if(2&e){var i=ra();js("ngStyle",nc(4,GP))("ngModel",i.muteTime)("nzMin",1)("nzStep",1)}}function jP(e,t){if(1&e){var n=$s();Hs(0,"input",11),Qs("ngModelChange",function(e){return $t(n),ra().nameCard=e})("keydown.enter",function(){return $t(n),ra().setGroupMemberNameCard()}),qs()}2&e&&js("ngModel",ra().nameCard)}function BP(e,t){if(1&e&&(Hs(0,"div"),Hs(1,"span",0),za(2,"\u7981\u8a00\u81f3:"),qs(),Hs(3,"span",12),za(4),qs(),qs()),2&e){var n=ra();ho(4),La(n.muteUntil)}}function HP(e,t){if(1&e){var n=$s();Hs(0,"a",9),Qs("click",function(){return $t(n),ra().changeMemberRole()}),za(1),qs()}if(2&e){var i=ra();ho(1),Na(" ","Admin"===i.member.role?"\u53d6\u6d88\u7ba1\u7406\u5458":"\u8bbe\u4e3a\u7ba1\u7406\u5458"," ")}}var qP=function(){return{color:"red"}};function WP(e,t){if(1&e){var n=$s();Hs(0,"a",13),Qs("click",function(){return $t(n),ra().kickoutGroupMember()}),za(1,"\u8e22\u51fa\u7fa4\u7ec4 "),qs()}2&e&&js("ngStyle",nc(1,qP))}var KP=function(){return{cursor:"pointer"}},YP=function(){var e=function(){function e(t,n){b(this,e),this.timHelper=t,this.store=n,this.enterEnd=new cc,this.current=Date.now()}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.isOwner="Owner"===this.currentConversation.groupProfile.selfInfo.role,this.isAdmin="Admin"===this.currentConversation.groupProfile.selfInfo.role,this.store.select(Pw).subscribe(function(t){t&&(e.currentUserProfile=t,e.isMine=e.currentUserProfile.userID===e.member.userID)})}},{key:"showCancelBan",get:function(){return!(!this.showMuteUntil||this.currentConversation.type!==Yw.TYPES.CONV_GROUP||this.isMine)&&(this.isOwner||this.isAdmin)}},{key:"changeRoleTitle",get:function(){return this.canChangeRole?this.isOwner&&"Admin"===this.member.role?"\u8bbe\u4e3a\uff1aMember":"\u8bbe\u4e3a\uff1aAdmin":""}},{key:"canChangeRole",get:function(){return this.isOwner&&["ChatRoom","Public"].includes(this.currentConversation.subType)}},{key:"showKickout",get:function(){return(this.isOwner||this.isAdmin)&&!this.isMine}},{key:"muteUntil",get:function(){return _D(new Date(1e3*this.member.muteUntil))}},{key:"showMuteUntil",get:function(){return 1e3*this.member.muteUntil>this.current}},{key:"setGroupMemberMuteTime",value:function(){var e=this;this.muteTime&&this.timHelper.tim.setGroupMemberMuteTime({groupID:this.currentConversation.groupProfile.groupID,userID:this.member.userID,muteTime:Number(this.muteTime)}).then(function(){e.muteTime="",e.muteTimeVisible=!1,e.enterEnd.emit()}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"cancelMute",value:function(){var e=this;this.timHelper.tim.setGroupMemberMuteTime({groupID:this.currentConversation.groupProfile.groupID,userID:this.member.userID,muteTime:0}).then(function(){e.muteTime="",e.enterEnd.emit()}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"setGroupMemberNameCard",value:function(){var e=this;0!==this.nameCard.trim().length?this.timHelper.tim.setGroupMemberNameCard({groupID:this.currentConversation.groupProfile.groupID,userID:this.member.userID,nameCard:this.nameCard}).then(function(){e.nameCard=null,e.enterEnd.emit(),e.store.dispatch(bw({msgType:qw.success,message:"\u4fee\u6539\u6210\u529f"}))}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))}):this.store.dispatch(bw({msgType:qw.warning,message:"\u4e0d\u80fd\u8bbe\u7f6e\u7a7a\u7684\u7fa4\u540d\u7247"}))}},{key:"changeMemberRole",value:function(){this.canChangeRole&&this.timHelper.tim.setGroupMemberRole({groupID:this.currentConversation.groupProfile.groupID,userID:this.member.userID,role:"Admin"===this.member.role?"Member":"Admin"}).catch(function(e){})}},{key:"kickoutGroupMember",value:function(){this.timHelper.tim.deleteGroupMember({groupID:this.currentConversation.groupProfile.groupID,reason:"\u6211\u8981\u8e22\u4f60\u51fa\u7fa4",userIDList:[this.member.userID]}).then(function(){}).catch(function(e){})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($w),Vs(xk))},e.\u0275cmp=at({type:e,selectors:[["app-group-member-info"]],inputs:{member:"member",currentConversation:"currentConversation"},outputs:{enterEnd:"enterEnd"},decls:29,vars:19,consts:[[1,"label"],["type","text",3,"click",4,"ngIf"],["nz-popover","","nzPopoverPlacement","topRight","nzPopoverTrigger","click",3,"ngStyle","nzPopoverContent","nzPopoverVisible","nzPopoverTitle"],["contentTemplate",""],["nz-icon","","nzType","edit","nzTheme","outline","nz-popover","","nzPopoverPlacement","topRight","nzPopoverTrigger","click",3,"ngStyle","nzPopoverContent","nzPopoverVisible","nzPopoverTitle"],["nameCardTemplate",""],[1,"content","role",3,"title"],[4,"ngIf"],["type","text",3,"ngStyle","click",4,"ngIf"],["type","text",3,"click"],["nzPlaceholder","\u56de\u8f66\u786e\u8ba4",3,"ngStyle","ngModel","nzMin","nzStep","ngModelChange","keydown.enter"],["nz-input","","placeholder","\u56de\u8f66\u786e\u8ba4",3,"ngModel","ngModelChange","keydown.enter"],[1,"content"],["type","text",3,"ngStyle","click"]],template:function(e,t){if(1&e&&(Hs(0,"div"),Hs(1,"div"),Hs(2,"span",0),za(3,"userID:"),qs(),za(4),Us(5,UP,2,0,"a",1),Hs(6,"a",2),za(7,"\u7981\u8a00"),qs(),Us(8,VP,1,5,"ng-template",null,3,Mc),qs(),Hs(10,"div"),Hs(11,"span",0),za(12,"nick:"),qs(),za(13),qs(),Hs(14,"div"),Hs(15,"span",0),za(16,"nameCard:"),qs(),za(17),Ws(18,"i",4),Us(19,jP,1,1,"ng-template",null,5,Mc),qs(),Hs(21,"div"),Hs(22,"span",0),za(23,"role:"),qs(),Hs(24,"span",6),za(25),qs(),qs(),Us(26,BP,5,1,"div",7),Us(27,HP,2,1,"a",1),Us(28,WP,2,2,"a",8),qs()),2&e){var n=Gs(9),i=Gs(20);ho(4),Na(" ",t.member.userID," "),ho(1),js("ngIf",t.showCancelBan),ho(1),js("ngStyle",nc(17,qP))("nzPopoverContent",n)("nzPopoverVisible",t.muteTimeVisible)("nzPopoverTitle","\u7981\u8a00(\u56de\u8f66\u786e\u8ba4)"),ho(7),Na(" ",t.member.nick||"\u6682\u65e0"," "),ho(4),Na(" ",t.member.nameCard||"\u6682\u65e0"," "),ho(1),js("ngStyle",nc(18,KP))("nzPopoverContent",i)("nzPopoverVisible",t.muteTimeVisible)("nzPopoverTitle","\u4fee\u6539\u7fa4\u540d\u7247"),ho(6),js("title",t.changeRoleTitle),ho(1),La(t.member.role),ho(1),js("ngIf",t.showMuteUntil),ho(1),js("ngIf",t.canChangeRole),ho(1),js("ngIf",t.showKickout)}},directives:[th,iD,uh,AT,ib,NP,_S,KS,GO,YC],styles:[".label[_ngcontent-%COMP%]{color:#ccc8c8}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),e}();function $P(e,t){if(1&e){var n=$s();Hs(0,"input",10),Qs("ngModelChange",function(e){return $t(n),ra().userID=e})("keydown.enter",function(){return $t(n),ra().addGroupMember()}),qs()}2&e&&js("ngModel",ra().userID)}function ZP(e,t){if(1&e){var n=$s();Hs(0,"app-group-member-info",17),Qs("enterEnd",function(){return $t(n),ra(2).popoverVisible=!1}),qs()}if(2&e){var i=ra().$implicit,r=ra();js("member",i)("currentConversation",r.currentConversation)}}function XP(e,t){if(1&e&&(Hs(0,"span",18),za(1),qs()),2&e){var n=ra().$implicit;js("title",n.nameCard),ho(1),La(n.nameCard)}}function JP(e,t){if(1&e&&(Hs(0,"span",18),za(1),qs()),2&e){var n=ra().$implicit;js("title",n.nick),ho(1),La(n.nick)}}function QP(e,t){if(1&e&&(Hs(0,"span",18),za(1),qs()),2&e){var n=ra().$implicit;js("title",n.userID),ho(1),La(n.userID)}}function ez(e,t){if(1&e){var n=$s();Hs(0,"div",11),Us(1,ZP,1,2,"ng-template",null,12,Mc),Hs(3,"div",13),Qs("click",function(){var e=$t(n).$implicit;return ra().currentMemberID=e.userID}),Ws(4,"im-avatar",14),Hs(5,"div",15),Us(6,XP,2,2,"span",16),Us(7,JP,2,2,"span",16),Us(8,QP,2,2,"span",16),qs(),qs(),qs()}if(2&e){var i=t.$implicit,r=Gs(2),o=ra();js("nzPopoverContent",r)("nzPopoverVisible",o.popoverVisible),ho(4),js("title",o.getGroupMemberAvatarText(i.role))("src",i.avatar),ho(2),js("ngIf",i.nameCard),ho(1),js("ngIf",i.nick),ho(1),js("ngIf",!i.nameCard&&!i.nick)}}function tz(e,t){if(1&e){var n=$s();Hs(0,"a",19),Qs("click",function(){return $t(n),ra().loadMore()}),za(1,"\u67e5\u770b\u66f4\u591a"),qs()}}var nz=function(){return{"font-size":"1.5em",cursor:"pointer"}},iz=function(){var e=function(){function e(t,n){b(this,e),this.store=t,this.timHelperService=n,this.currentMemberList=[],this.currentMemberID="",this.count=30}return w(e,[{key:"members",get:function(){return this.currentMemberList.slice(0,this.count)}},{key:"showLoadMore",get:function(){return this.members.length<this.currentConversation.groupProfile.memberNum}},{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(Uw).subscribe(function(t){e.currentMemberList=t})}},{key:"addGroupMember",value:function(){var e=this,t=this.currentConversation.conversationID.replace("GROUP","");this.timHelperService.tim.addGroupMember({groupID:t,userIDList:[this.userID]}).then(function(n){var i=n.data,r=i.successUserIDList,o=i.failureUserIDList,s=i.existedUserIDList;r.length>0&&(e.store.dispatch(bw({msgType:qw.success,message:"\u7fa4\u6210\u5458\uff1a".concat(r.join(","),"\uff0c\u52a0\u7fa4\u6210\u529f")})),e.timHelperService.tim.getGroupMemberProfile({groupID:t,userIDList:r}).then(function(t){var n=t.data.memberList;e.store.dispatch(Lw({currentMemberList:n})),e.popoverVisible=!1})),o.length>0&&e.store.dispatch(bw({msgType:qw.error,message:"\u7fa4\u6210\u5458\uff1a".concat(o.join(","),"\uff0c\u6dfb\u52a0\u5931\u8d25\uff01")})),s.length>0&&e.store.dispatch(bw({msgType:qw.warning,message:"\u7fa4\u6210\u5458\uff1a".concat(s.join(","),"\uff0c\u5df2\u5728\u7fa4\u4e2d")}))}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"getGroupMemberAvatarText",value:function(e){switch(e){case"Owner":return"\u7fa4\u4e3b";case"Admin":return"\u7ba1\u7406\u5458";default:return"\u7fa4\u6210\u5458"}}},{key:"loadMore",value:function(){this.timHelperService.getGroupMemberList(this.currentConversation.groupProfile.groupID),this.count+=30}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-group-member-list"]],inputs:{currentConversation:"currentConversation"},decls:12,vars:7,consts:[[1,"group-member-list-wrapper"],[1,"header"],[1,"member-count","text-ellipsis"],["nz-icon","","nzType","user-add","nzTheme","outline","nz-popover","","nzPopoverPlacement","topRight","nzPopoverTrigger","click",3,"ngStyle","nzPopoverContent","nzPopoverVisible"],["addGroupTemplate",""],[1,"scroll-content"],[1,"group-member-list"],["nz-popover","","nzPopoverPlacement","topRight","nzPopoverTrigger","click",3,"nzPopoverContent","nzPopoverVisible",4,"ngFor","ngForOf"],[1,"more"],[3,"click",4,"ngIf"],["nz-input","","placeholder","\u56de\u8f66\u786e\u8ba4",3,"ngModel","ngModelChange","keydown.enter"],["nz-popover","","nzPopoverPlacement","topRight","nzPopoverTrigger","click",3,"nzPopoverContent","nzPopoverVisible"],["contentTemplate",""],[1,"group-member",3,"click"],[3,"title","src"],[1,"member-name","text-ellipsis"],[3,"title",4,"ngIf"],[3,"member","currentConversation","enterEnd"],[3,"title"],[3,"click"]],template:function(e,t){if(1&e&&(Hs(0,"div",0),Hs(1,"div",1),Hs(2,"span",2),za(3),qs(),Ws(4,"i",3),Us(5,$P,1,1,"ng-template",null,4,Mc),qs(),Hs(7,"div",5),Hs(8,"div",6),Us(9,ez,9,7,"div",7),qs(),qs(),Hs(10,"div",8),Us(11,tz,2,0,"a",9),qs(),qs()),2&e){var n=Gs(6);ho(3),Na("\u7fa4\u6210\u5458\uff1a",null==t.currentConversation?null:t.currentConversation.groupProfile.memberCount,""),ho(1),js("ngStyle",nc(6,nz))("nzPopoverContent",n)("nzPopoverVisible",t.popoverVisible),ho(5),js("ngForOf",t.members),ho(2),js("ngIf",t.showLoadMore)}},directives:[AT,ib,iD,uh,Ql,th,GO,YC,_S,KS,fD,YP],styles:[".group-member-list-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;height:50px;padding:10px 16px 10px 20px;border-bottom:1px solid #e7e7e7}.group-member-list-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .member-count[_ngcontent-%COMP%]{display:inline-block;max-width:130px;line-height:30px;font-size:14px;vertical-align:bottom}.group-member-list-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-member[_ngcontent-%COMP%]{width:30px;height:30px;font-size:28px;text-align:center;line-height:32px;cursor:pointer;float:right}.group-member-list-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-member[_ngcontent-%COMP%]:hover{color:#5cadff}.group-member-list-wrapper[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{max-height:250px;overflow-y:scroll;padding:10px 15px;width:100%}.group-member-list-wrapper[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   .group-member-list[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap;width:100%}.group-member-list-wrapper[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   .group-member[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;align-content:center;flex-direction:column;align-items:center;text-align:center;color:#000;cursor:pointer}.group-member-list-wrapper[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   .group-member[_ngcontent-%COMP%]   im-avatar[_ngcontent-%COMP%]  .avatar{width:40px;height:40px;border-radius:50%}.group-member-list-wrapper[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   .group-member[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:12px;width:40px;text-align:center}.group-member-list-wrapper[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{padding:0 20px;border-bottom:1px solid #e7e7e7}"]}),e}(),rz=["switchElement"];function oz(e,t){1&e&&Ws(0,"i",8)}function sz(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.nzCheckedChildren)}}function az(e,t){if(1&e&&(Ks(0),Us(1,sz,2,1,"ng-container",9),Ys()),2&e){var n=ra();ho(1),js("nzStringTemplateOutlet",n.nzCheckedChildren)}}function uz(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.nzUnCheckedChildren)}}function cz(e,t){1&e&&Us(0,uz,2,1,"ng-container",9),2&e&&js("nzStringTemplateOutlet",ra().nzUnCheckedChildren)}var lz=function(){var e=function(){function e(t,n,i,r){b(this,e),this.nzConfigService=t,this.cdr=n,this.focusMonitor=i,this.directionality=r,this._nzModuleName="switch",this.isChecked=!1,this.onChange=function(){},this.onTouched=function(){},this.nzLoading=!1,this.nzDisabled=!1,this.nzControl=!1,this.nzCheckedChildren=null,this.nzUnCheckedChildren=null,this.nzSize="default",this.dir="ltr",this.destroy$=new V}return w(e,[{key:"onHostClick",value:function(e){e.preventDefault(),this.nzDisabled||this.nzLoading||this.nzControl||this.updateValue(!this.isChecked)}},{key:"updateValue",value:function(e){this.isChecked!==e&&(this.isChecked=e,this.onChange(this.isChecked))}},{key:"onKeyDown",value:function(e){this.nzControl||this.nzDisabled||this.nzLoading||(37===e.keyCode?(this.updateValue(!1),e.preventDefault()):39===e.keyCode?(this.updateValue(!0),e.preventDefault()):32!==e.keyCode&&13!==e.keyCode||(this.updateValue(!this.isChecked),e.preventDefault()))}},{key:"focus",value:function(){var e;this.focusMonitor.focusVia(null===(e=this.switchElement)||void 0===e?void 0:e.nativeElement,"keyboard")}},{key:"blur",value:function(){var e;null===(e=this.switchElement)||void 0===e||e.nativeElement.blur()}},{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"ngAfterViewInit",value:function(){var e=this;this.focusMonitor.monitor(this.switchElement.nativeElement,!0).subscribe(function(t){t||Promise.resolve().then(function(){return e.onTouched()})})}},{key:"ngOnDestroy",value:function(){this.focusMonitor.stopMonitoring(this.switchElement.nativeElement),this.destroy$.next(),this.destroy$.complete()}},{key:"writeValue",value:function(e){this.isChecked=e,this.cdr.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,this.cdr.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($_),Vs(xu),Vs(sM),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["nz-switch"]],viewQuery:function(e,t){var n;(1&e&&wc(rz,7),2&e)&&(kc(n=Sc())&&(t.switchElement=n.first))},hostBindings:function(e,t){1&e&&Qs("click",function(e){return t.onHostClick(e)})},inputs:{nzLoading:"nzLoading",nzDisabled:"nzDisabled",nzControl:"nzControl",nzCheckedChildren:"nzCheckedChildren",nzUnCheckedChildren:"nzUnCheckedChildren",nzSize:"nzSize"},exportAs:["nzSwitch"],features:[Qa([{provide:qC,useExisting:Ce(function(){return e}),multi:!0}])],decls:9,vars:15,consts:[["nz-wave","","type","button",1,"ant-switch",3,"disabled","nzWaveExtraNode","keydown"],["switchElement",""],[1,"ant-switch-handle"],["nz-icon","","nzType","loading","class","ant-switch-loading-icon",4,"ngIf"],[1,"ant-switch-inner"],[4,"ngIf","ngIfElse"],["uncheckTemplate",""],[1,"ant-click-animating-node"],["nz-icon","","nzType","loading",1,"ant-switch-loading-icon"],[4,"nzStringTemplateOutlet"]],template:function(e,t){if(1&e&&(Hs(0,"button",0,1),Qs("keydown",function(e){return t.onKeyDown(e)}),Hs(2,"span",2),Us(3,oz,1,0,"i",3),qs(),Hs(4,"span",4),Us(5,az,2,1,"ng-container",5),Us(6,cz,1,1,"ng-template",null,6,Mc),qs(),Ws(8,"div",7),qs()),2&e){var n=Gs(7);ba("ant-switch-checked",t.isChecked)("ant-switch-loading",t.nzLoading)("ant-switch-disabled",t.nzDisabled)("ant-switch-small","small"===t.nzSize)("ant-switch-rtl","rtl"===t.dir),js("disabled",t.nzDisabled)("nzWaveExtraNode",!0),ho(3),js("ngIf",t.nzLoading),ho(2),js("ngIf",t.isChecked)("ngIfElse",n)}},directives:[LT,th,ib,Iy],encapsulation:2,changeDetection:0}),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzLoading",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDisabled",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzControl",void 0),Oy([Z_(),Dy("design:type",String)],e.prototype,"nzSize",void 0),e}(),hz=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,NT,rb,My]]}),e}();function fz(e,t){if(1&e){var n=$s();Hs(0,"i",28),Qs("click",function(e){$t(n);var t=ra(),i=Gs(14);return t.showEditFaceUrl=!0,t.inputFocus(i),e.stopPropagation()}),qs()}}function dz(e,t){if(1&e&&(Hs(0,"div",4),Ws(1,"im-avatar",29),qs()),2&e){var n=ra();ho(1),js("src",n.groupProfile.avatar)}}function pz(e,t){if(1&e){var n=$s();Hs(0,"i",28),Qs("click",function(){$t(n);var e=ra(),t=Gs(26);return e.showEditName=!0,e.inputFocus(t)}),qs()}}function gz(e,t){if(1&e&&(Hs(0,"div",30),za(1),qs()),2&e){var n=ra();js("title",n.groupProfile.name),ho(1),Na(" ",n.groupProfile.name||"\u6682\u65e0"," ")}}function vz(e,t){if(1&e){var n=$s();Hs(0,"i",28),Qs("click",function(){$t(n);var e=ra(),t=Gs(33);return e.showEditIntroduction=!0,e.inputFocus(t)}),qs()}}function mz(e,t){if(1&e&&(Hs(0,"div",31),za(1),qs()),2&e){var n=ra();js("title",n.groupProfile.introduction),ho(1),Na(" ",n.groupProfile.introduction||"\u6682\u65e0"," ")}}function yz(e,t){if(1&e){var n=$s();Hs(0,"i",28),Qs("click",function(){$t(n);var e=ra(),t=Gs(40);return e.showEditNotification=!0,e.inputFocus(t)}),qs()}}function _z(e,t){if(1&e&&(Hs(0,"div",31),za(1),qs()),2&e){var n=ra();js("title",n.groupProfile.notification),ho(1),Na(" ",n.groupProfile.notification||"\u6682\u65e0"," ")}}function bz(e,t){if(1&e){var n=$s();Hs(0,"i",21),Qs("click",function(){return $t(n),ra(2).showEditJoinOption=!0}),qs()}}function kz(e,t){if(1&e&&(Hs(0,"div",4),za(1),qs()),2&e){var n=ra(2);ho(1),Na("",n.joinOptionMap[n.groupProfile.joinOption]," ")}}var wz=function(){return{width:"100%"}};function Cz(e,t){if(1&e){var n=$s();Hs(0,"div",2),Hs(1,"div",3),za(2," \u7533\u8bf7\u52a0\u7fa4\u65b9\u5f0f "),Us(3,bz,1,0,"i",16),qs(),Us(4,kz,2,1,"div",6),Hs(5,"nz-select",17),Qs("ngModelChange",function(e){return $t(n),ra().joinOption=e})("ngModelChange",function(){return $t(n),ra().editJoinOption()})("blur",function(){return $t(n),ra().showEditJoinOption=!1}),Ws(6,"nz-option",32),Ws(7,"nz-option",33),Ws(8,"nz-option",34),qs(),qs()}if(2&e){var i=ra();ho(3),js("ngIf",i.editable),ho(1),js("ngIf",!i.showEditJoinOption),ho(1),js("ngStyle",nc(5,wz))("ngModel",i.joinOption)("hidden",!i.showEditJoinOption)}}function Sz(e,t){if(1&e){var n=$s();Hs(0,"i",21),Qs("click",function(){return $t(n),ra().showEditMessageRemindType=!0}),qs()}}function Ez(e,t){if(1&e&&(Hs(0,"div",4),za(1),qs()),2&e){var n=ra();ho(1),Na(" ",n.messageRemindTypeMap[n.groupProfile.selfInfo.messageRemindType]," ")}}function Iz(e,t){if(1&e&&(Hs(0,"div",35),za(1),qs()),2&e){var n=ra();ho(1),Na(" ",n.groupProfile.selfInfo.nameCard||"\u6682\u65e0"," ")}}function Tz(e,t){if(1&e){var n=$s();Hs(0,"div"),Hs(1,"a",36),Qs("click",function(){return $t(n),ra().showChangeGroupOwner=!0}),za(2,"\u8f6c\u8ba9\u7fa4\u7ec4"),qs(),Hs(3,"input",37),Qs("ngModelChange",function(e){return $t(n),ra().newOwnerUserID=e})("keydown.enter",function(){return $t(n),ra().changeOwner()})("blur",function(){return $t(n),ra().showChangeGroupOwner=!1}),qs(),qs()}if(2&e){var i=ra();ho(3),js("hidden",!i.showChangeGroupOwner)("ngModel",i.newOwnerUserID)}}var Mz=function(){return{color:"red"}};function Oz(e,t){if(1&e){var n=$s();Hs(0,"div"),Hs(1,"a",38),Qs("click",function(){return $t(n),ra().dismissGroup()}),za(2,"\u89e3\u6563\u7fa4\u7ec4"),qs(),qs()}2&e&&(ho(1),js("ngStyle",nc(1,Mz)))}var Dz=function(e){return{active:e}},Az=function(){var e=function(){function e(t,n){b(this,e),this.timHelper=t,this.store=n,this.showEditFaceUrl=!1,this.showEditName=!1,this.showEditIntroduction=!1,this.showEditNotification=!1,this.showEditJoinOption=!1,this.showEditMessageRemindType=!1,this.showEditNameCard=!1,this.showChangeGroupOwner=!1,this.newOwnerUserID="",this.messageRemindTypeMap={AcceptAndNotify:"\u63a5\u6536\u6d88\u606f\u5e76\u63d0\u793a",AcceptNotNotify:"\u63a5\u6536\u6d88\u606f\u4f46\u4e0d\u63d0\u793a",Discard:"\u5c4f\u853d\u6d88\u606f"},this.joinOptionMap={FreeAccess:"\u81ea\u7531\u52a0\u5165",NeedPermission:"\u9700\u8981\u9a8c\u8bc1",DisableApply:"\u7981\u6b62\u52a0\u7fa4"},this.active=!1}return w(e,[{key:"ngOnInit",value:function(){switch(this.groupProfile=this.currentConversation.groupProfile,this.groupProfile.type){case Yw.TYPES.GRP_WORK:this.groupType="\u597d\u53cb\u5de5\u4f5c\u7fa4\uff08Work\uff09";break;case Yw.TYPES.GRP_PUBLIC:this.groupType="\u964c\u751f\u4eba\u793e\u4ea4\u7fa4\uff08Public\uff09";break;case Yw.TYPES.GRP_CHATROOM:this.groupType="\u4e34\u65f6\u4f1a\u8bae\u7fa4\uff08Meeting\uff09";break;case Yw.TYPES.GRP_AVCHATROOM:this.groupType="\u76f4\u64ad\u7fa4\uff08AVChatRoom\uff09";break;default:this.groupType=""}this.muteAllMembers=this.groupProfile.muteAllMembers,this.joinOption=this.groupProfile.joinOption,this.messageRemindType=this.groupProfile.selfInfo.messageRemindType}},{key:"editable",get:function(){return this.groupProfile.type===Yw.TYPES.GRP_WORK||[Yw.TYPES.GRP_MBR_ROLE_OWNER,Yw.TYPES.GRP_MBR_ROLE_ADMIN].includes(this.groupProfile.selfInfo.role)}},{key:"isOwner",get:function(){return this.groupProfile.selfInfo.role===Yw.TYPES.GRP_MBR_ROLE_OWNER}},{key:"isAdmin",get:function(){return this.groupProfile.selfInfo.role===Yw.TYPES.GRP_MBR_ROLE_ADMIN}},{key:"showDissmissGroup",get:function(){return this.isOwner&&this.groupProfile.type!==Yw.TYPES.GRP_WORK}},{key:"inputFocus",value:function(e){setTimeout(function(){e.focus()},0)}},{key:"editFaceUrl",value:function(){var e=this;this.timHelper.tim.updateGroupProfile({groupID:this.groupProfile.groupID,avatar:this.avatar.trim()}).then(function(){e.showEditFaceUrl=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"editName",value:function(){var e=this;this.timHelper.tim.updateGroupProfile({groupID:this.groupProfile.groupID,name:this.name.trim()}).then(function(){e.showEditName=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"editIntroduction",value:function(){var e=this;this.timHelper.tim.updateGroupProfile({groupID:this.groupProfile.groupID,introduction:this.introduction.trim()}).then(function(){e.showEditIntroduction=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"editNotification",value:function(){var e=this;this.timHelper.tim.updateGroupProfile({groupID:this.groupProfile.groupID,notification:this.notification.trim()}).then(function(){e.showEditNotification=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"editJoinOption",value:function(){var e=this;this.timHelper.tim.updateGroupProfile({groupID:this.groupProfile.groupID,joinOption:this.joinOption}).then(function(){e.showEditJoinOption=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"editMessageRemindType",value:function(){var e=this;this.timHelper.tim.setMessageRemindType({groupID:this.groupProfile.groupID,messageRemindType:this.messageRemindType}).then(function(){e.showEditMessageRemindType=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))})}},{key:"editNameCard",value:function(){var e=this;0!==this.nameCard.trim().length?this.timHelper.tim.setGroupMemberNameCard({groupID:this.groupProfile.groupID,nameCard:this.nameCard.trim()}).then(function(){e.showEditNameCard=!1}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))}):this.store.dispatch(bw({msgType:qw.warning,message:"\u4e0d\u80fd\u8bbe\u7f6e\u7a7a\u7684\u7fa4\u540d\u7247"}))}},{key:"changeOwner",value:function(){var e=this;this.timHelper.tim.changeGroupOwner({groupID:this.groupProfile.groupID,newOwnerID:this.newOwnerUserID}).then(function(){e.showChangeGroupOwner=!1,e.store.dispatch(bw({msgType:qw.success,message:"\u8f6c\u8ba9\u7fa4\u4e3b\u6210\u529f\uff0c\u65b0\u7fa4\u4e3bID\uff1a".concat(e.newOwnerUserID)})),e.newOwnerUserID=""}).catch(function(e){bw({msgType:qw.error,message:e.message})})}},{key:"quitGroup",value:function(){var e=this;this.timHelper.tim.quitGroup(this.groupProfile.groupID).then(function(t){var n=t.data.groupID;e.store.dispatch(bw({msgType:qw.success,message:"\u9000\u7fa4\u6210\u529f"})),n===e.groupProfile.groupID&&e.store.dispatch(Sw())}).catch(function(e){bw({msgType:qw.error,message:e.message})})}},{key:"dismissGroup",value:function(){var e=this;this.timHelper.tim.dismissGroup(this.groupProfile.groupID).then(function(t){var n=t.data.groupID;e.store.dispatch(bw({msgType:qw.success,message:"\u7fa4\uff1a".concat(e.groupProfile.name||e.groupProfile.groupID,"\u89e3\u6563\u6210\u529f\uff01")})),n===e.groupProfile.groupID&&e.store.dispatch(Sw())}).catch(function(e){bw({msgType:qw.error,message:e.message})})}},{key:"changeMuteStatus",value:function(){var e=this;this.isOwner||this.isAdmin?this.timHelper.tim.updateGroupProfile({muteAllMembers:this.muteAllMembers,groupID:this.groupProfile.groupID}).then(function(t){e.muteAllMembers=t.data.group.muteAllMembers,e.muteAllMembers?(e.active=!0,e.store.dispatch(bw({msgType:qw.success,message:"\u5168\u4f53\u7981\u8a00"}))):(e.active=!1,e.store.dispatch(bw({msgType:qw.success,message:"\u53d6\u6d88\u5168\u4f53\u7981\u8a00"})))}).catch(function(t){e.store.dispatch(bw({msgType:qw.error,message:t.message}))}):(setTimeout(function(){e.muteAllMembers=e.groupProfile.muteAllMembers},0),this.store.dispatch(bw({msgType:qw.error,message:"\u666e\u901a\u7fa4\u6210\u5458\u4e0d\u80fd\u5bf9\u5168\u4f53\u7981\u8a00"})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($w),Vs(xk))},e.\u0275cmp=at({type:e,selectors:[["app-group-profile"]],inputs:{currentConversation:"currentConversation"},decls:67,vars:37,consts:[[3,"currentConversation"],[1,"group-info-content"],[1,"info-item"],[1,"label"],[1,"content"],["nz-icon","","nzType","edit","nzTheme","outline","class","edit",3,"click",4,"ngIf"],["class","content",4,"ngIf"],["nz-input","","placeholder","\u56de\u8f66\u786e\u8ba4",3,"hidden","ngModel","ngModelChange","keydown.enter","blur"],["groupAvatar",""],["class","content text-ellipsis",3,"title",4,"ngIf"],["autofocus","","nz-input","","placeholder","\u56de\u8f66\u786e\u8ba4",3,"hidden","ngModel","ngModelChange","keydown.enter","blur"],["groupName",""],["class","long-content",3,"title",4,"ngIf"],["groupIntroduction",""],["groupNotification",""],["class","info-item",4,"ngIf"],["nz-icon","","nzType","edit","class","edit",3,"click",4,"ngIf"],[3,"ngStyle","ngModel","hidden","ngModelChange","blur"],["nzValue","AcceptAndNotify","nzLabel","\u63a5\u6536\u6d88\u606f\u5e76\u63d0\u793a"],["nzValue","AcceptNotNotify","nzLabel","\u63a5\u6536\u6d88\u606f\u4f46\u4e0d\u63d0\u793a"],["nzValue","Discard","nzLabel","\u5c4f\u853d\u6d88\u606f"],["nz-icon","","nzType","edit",1,"edit",3,"click"],["class","content cursor-pointer",4,"ngIf"],["groupNameCard",""],[1,"label",3,"ngClass"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"ngStyle","click"],["nz-icon","","nzType","edit","nzTheme","outline",1,"edit",3,"click"],[3,"src"],[1,"content","text-ellipsis",3,"title"],[1,"long-content",3,"title"],["nzValue","FreeAccess","nzLabel","\u81ea\u7531\u52a0\u5165"],["nzValue","NeedPermission","nzLabel","\u9700\u8981\u9a8c\u8bc1"],["nzValue","DisableApply","nzLabel","\u7981\u6b62\u52a0\u7fa4"],[1,"content","cursor-pointer"],["type","text",3,"click"],["autofocus","","nz-input","","placeholder","\u65b0\u7fa4\u4e3b\u7684userID",3,"hidden","ngModel","ngModelChange","keydown.enter","blur"],["type","text",3,"ngStyle","click"]],template:function(e,t){if(1&e){var n=$s();Hs(0,"div"),Ws(1,"app-group-member-list",0),Hs(2,"div",1),Hs(3,"div",2),Hs(4,"div",3),za(5,"\u7fa4ID"),qs(),Hs(6,"div",4),za(7),qs(),qs(),Hs(8,"div",2),Hs(9,"div",3),za(10," \u7fa4\u5934\u50cf "),Us(11,fz,1,0,"i",5),qs(),Us(12,dz,2,1,"div",6),Hs(13,"input",7,8),Qs("ngModelChange",function(e){return t.avatar=e})("keydown.enter",function(){return t.editFaceUrl()})("blur",function(){return t.showEditFaceUrl=!1}),qs(),qs(),Hs(15,"div",2),Hs(16,"div",3),za(17,"\u7fa4\u7c7b\u578b"),qs(),Hs(18,"div",4),za(19),qs(),qs(),Hs(20,"div",2),Hs(21,"div",3),za(22," \u7fa4\u540d\u79f0 "),Us(23,pz,1,0,"i",5),qs(),Us(24,gz,2,2,"div",9),Hs(25,"input",10,11),Qs("ngModelChange",function(e){return t.name=e})("keydown.enter",function(){return t.editName()})("blur",function(){return t.showEditName=!1}),qs(),qs(),Hs(27,"div",2),Hs(28,"div",3),za(29," \u7fa4\u4ecb\u7ecd "),Us(30,vz,1,0,"i",5),qs(),Us(31,mz,2,2,"div",12),Hs(32,"input",10,13),Qs("ngModelChange",function(e){return t.introduction=e})("keydown.enter",function(){return t.editIntroduction()})("blur",function(){return t.showEditIntroduction=!1}),qs(),qs(),Hs(34,"div",2),Hs(35,"div",3),za(36," \u7fa4\u516c\u544a "),Us(37,yz,1,0,"i",5),qs(),Us(38,_z,2,2,"div",12),Hs(39,"input",10,14),Qs("ngModelChange",function(e){return t.notification=e})("keydown.enter",function(){return t.editNotification()})("blur",function(){return t.showEditNotification=!1}),qs(),qs(),Us(41,Cz,9,6,"div",15),Hs(42,"div",2),Hs(43,"div",3),za(44," \u7fa4\u6d88\u606f\u63d0\u793a\u7c7b\u578b "),Us(45,Sz,1,0,"i",16),qs(),Us(46,Ez,2,1,"div",6),Hs(47,"nz-select",17),Qs("ngModelChange",function(e){return t.messageRemindType=e})("ngModelChange",function(){return t.editMessageRemindType()})("blur",function(){return t.showEditMessageRemindType=!1}),Ws(48,"nz-option",18),Ws(49,"nz-option",19),Ws(50,"nz-option",20),qs(),qs(),Hs(51,"div",2),Hs(52,"div",3),za(53," \u6211\u7684\u7fa4\u540d\u7247 "),Hs(54,"i",21),Qs("click",function(){$t(n);var e=Gs(57);return t.showEditNameCard=!0,t.inputFocus(e)}),qs(),qs(),Us(55,Iz,2,1,"div",22),Hs(56,"input",10,23),Qs("ngModelChange",function(e){return t.nameCard=e})("keydown.enter",function(){return t.editNameCard()})("blur",function(){return t.showEditNameCard=!1}),qs(),qs(),Hs(58,"div",2),Hs(59,"div",24),za(60,"\u5168\u4f53\u7981\u8a00"),qs(),Hs(61,"nz-switch",25),Qs("ngModelChange",function(e){return t.muteAllMembers=e})("ngModelChange",function(){return t.changeMuteStatus()}),qs(),qs(),Us(62,Tz,4,2,"div",26),Hs(63,"div"),Hs(64,"a",27),Qs("click",function(){return t.quitGroup()}),za(65,"\u9000\u51fa\u7fa4\u7ec4"),qs(),qs(),Us(66,Oz,3,2,"div",26),qs(),qs()}2&e&&(ho(1),js("currentConversation",t.currentConversation),ho(6),La(t.groupProfile.groupID),ho(4),js("ngIf",t.editable),ho(1),js("ngIf",!t.showEditFaceUrl),ho(1),js("hidden",!t.showEditFaceUrl)("ngModel",t.avatar),ho(6),La(t.groupType),ho(4),js("ngIf",t.editable),ho(1),js("ngIf",!t.showEditName),ho(1),js("hidden",!t.showEditName)("ngModel",t.name),ho(5),js("ngIf",t.editable),ho(1),js("ngIf",!t.showEditIntroduction),ho(1),js("hidden",!t.showEditIntroduction)("ngModel",t.introduction),ho(5),js("ngIf",t.editable),ho(1),js("ngIf",!t.showEditNotification),ho(1),js("hidden",!t.showEditNotification)("ngModel",t.notification),ho(2),js("ngIf","Private"!==t.groupProfile.type),ho(4),js("ngIf",t.editable),ho(1),js("ngIf",!t.showEditMessageRemindType),ho(1),js("ngStyle",nc(33,wz))("ngModel",t.messageRemindType)("hidden",!t.showEditMessageRemindType),ho(8),js("ngIf",!t.showEditNameCard),ho(1),js("hidden",!t.showEditNameCard)("ngModel",t.nameCard),ho(3),js("ngClass",ic(34,Dz,t.active)),ho(2),js("ngModel",t.muteAllMembers),ho(1),js("ngIf",t.isOwner),ho(2),js("ngStyle",nc(36,Mz)),ho(2),js("ngIf",t.showDissmissGroup))},directives:[iz,th,GO,YC,_S,KS,WA,uh,jA,AT,ib,Xl,lz,fD],styles:[".group-info-content[_ngcontent-%COMP%]{padding:10px}.group-info-content[_ngcontent-%COMP%]   im-avatar[_ngcontent-%COMP%]     .avatar{width:40px;height:40px;border-radius:50%}.edit[_ngcontent-%COMP%]{cursor:pointer;font-size:16px}.info-item[_ngcontent-%COMP%]{margin-bottom:12px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#a5b5c1}.info-item[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#000}.info-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{color:#404953;word-wrap:break-word;word-break:break-all}.info-item[_ngcontent-%COMP%]   .long-content[_ngcontent-%COMP%]{word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}"]}),e}();function xz(e,t){1&e&&Ws(0,"app-user-profile",3),2&e&&js("userProfile",ra().currentConversation.userProfile)}function Rz(e,t){1&e&&Ws(0,"app-group-profile",4),2&e&&js("currentConversation",ra().currentConversation)}var Pz=function(){var e=function(){function e(t){b(this,e),this.store=t,this.TIM=Vw()}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(Dw).subscribe(function(t){e.currentConversation=t})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk))},e.\u0275cmp=at({type:e,selectors:[["app-conversation-profile"]],decls:3,vars:2,consts:[[1,"conversation-profile-wrapper"],[3,"userProfile",4,"ngIf"],[3,"currentConversation",4,"ngIf"],[3,"userProfile"],[3,"currentConversation"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,xz,1,1,"app-user-profile",1),Us(2,Rz,1,1,"app-group-profile",2),qs()),2&e&&(ho(1),js("ngIf",t.currentConversation.type===t.TIM.TYPES.CONV_C2C),ho(1),js("ngIf",t.currentConversation.type===t.TIM.TYPES.CONV_GROUP))},directives:[th,zP,Az],styles:[".conversation-profile-wrapper[_ngcontent-%COMP%]{background-color:#fff;height:100%;overflow-y:scroll}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}"]}),e}();function zz(e,t){1&e&&(Hs(0,"div",7),Qs("click",function(e){return e.stopPropagation()}),Ws(1,"app-conversation-profile"),qs())}var Lz=function(){var e=function(){function e(t){b(this,e),this.store=t,this.hiddenWindow=!1,this.message=new cc,this.hiddenWindowChange=new cc,this.showDetail=!1}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store.select(xw).subscribe(function(t){e.message.emit(t)})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(xk))},e.\u0275cmp=at({type:e,selectors:[["ngx-tencent-tim"]],inputs:{hiddenWindow:"hiddenWindow"},outputs:{message:"message",hiddenWindowChange:"hiddenWindowChange"},decls:9,vars:2,consts:[["cdkDrag","",1,"chat-wrapper",3,"hidden","click"],["cdkDragHandle","",1,"chat-side"],[1,"chat-content"],["cdkDragHandle","",1,"chat-title"],[3,"detailBtnClick","minimizeClick"],[1,"chat-window"],["class","chat-profile",3,"click",4,"ngIf"],[1,"chat-profile",3,"click"]],template:function(e,t){1&e&&(Hs(0,"div",0),Qs("click",function(){return t.showDetail=!1}),Hs(1,"div",1),Ws(2,"app-side-bar"),qs(),Hs(3,"div",2),Hs(4,"div",3),Hs(5,"lib-title",4),Qs("detailBtnClick",function(){return t.showDetail=!t.showDetail})("minimizeClick",function(){return t.hiddenWindow=!0,t.hiddenWindowChange.emit(!0)}),qs(),qs(),Hs(6,"div",5),Ws(7,"app-current-conversation"),qs(),qs(),Us(8,zz,2,0,"div",6),qs()),2&e&&(js("hidden",t.hiddenWindow),ho(8),js("ngIf",t.showDetail))},directives:[UC,LC,vx,mx,AP,th,Pz],styles:[".chat-wrapper[_ngcontent-%COMP%]{height:80vh;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-end}.chat-content[_ngcontent-%COMP%], .chat-side[_ngcontent-%COMP%]{box-shadow:0 11px 20px 0 rgba(0,0,0,.3)}.chat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chat-content[_ngcontent-%COMP%]   .chat-window[_ngcontent-%COMP%]{width:50rem;height:75vh;overflow:hidden;border-top:1px solid #e7e7e7}.chat-profile[_ngcontent-%COMP%]{height:80vh;overflow-y:scroll;border:1px solid #e7e7e7;flex-shrink:0;box-shadow:0 11px 20px 0 rgba(0,0,0,.3)}"],changeDetection:0}),e}(),Nz=dw({currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]},fw(ww,function(e,t){var n=t.conversation;return Object.assign(Object.assign({},e),{currentConversation:n,currentMessageList:[],nextReqMessageID:"",isCompleted:!1})}),fw(kw,function(e,t){var n=t.nextReqMessageID,i=t.isCompleted,r=t.currentMessageList;return Object.assign(Object.assign({},e),{currentMessageList:r,nextReqMessageID:n,isCompleted:i})}),fw(Cw,function(e,t){var n=t.conversationList;return Object.assign(Object.assign({},e),{conversationList:n})}),fw(Sw,function(e){return Object.assign(Object.assign({},e),{currentConversation:{}})}),fw(Ew,function(e,t){var n=t.message;if(!e.currentConversation.conversationID)return Object.assign({},e);if(Array.isArray(n)){var i=n.filter(function(t){return t.conversationID===e.currentConversation.conversationID}),r=[].concat(o(e.currentMessageList),o(i));return Object.assign(Object.assign({},e),{currentMessageList:r})}if(n.conversationID===e.currentConversation.conversationID){var s=[].concat(o(e.currentMessageList),[n]);return Object.assign(Object.assign({},e),{currentMessageList:s})}return Object.assign({},e)}),fw(Iw,function(e,t){var n=t.message,i=e.currentMessageList.findIndex(function(e){return e.ID===n.ID});if(i>=0){var r=e.currentMessageList;return r.splice(i,1),Object.assign(Object.assign({},e),{currentMessageList:r})}return Object.assign({},e)}),fw(Tw,function(e){return Object.assign(e,{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]})})),Fz=dw({conversationID:""},fw(Mw,function(e,t){return{conversationID:t.conversationID}})),Uz=dw({groupList:[],currentMemberList:[],createGroupModelVisible:!1},fw(zw,function(e,t){var n=t.groupList;return Object.assign(Object.assign({},e),{groupList:n})}),fw(Lw,function(e,t){var n=t.currentMemberList;return Object.assign(Object.assign({},e),{currentMemberList:n})}),fw(Nw,function(e){return Object.assign(Object.assign({},e),{currentMemberList:[]})})),Gz=dw({isLogin:!1},fw(gw,function(e,t){var n=t.isLogin;return Object.assign(Object.assign({},e),{isLogin:n})})),Vz=dw({type:"error",message:""},fw(bw,function(e,t){return{type:t.msgType,message:t.message}})),jz={currentUserProfile:{},isLogin:!1,isSDKReady:!1,userID:0,userSig:"",sdkAppID:0},Bz=dw(jz,fw(mw,function(e,t){var n=t.SDKReadyState;return Object.assign(Object.assign({},e),{isSDKReady:n})}),fw(yw,function(e,t){var n=t.profile;return Object.assign(Object.assign({},e),{currentUserProfile:n})}),fw(_w,function(e){return Object.assign(Object.assign({},e),jz)})),Hz={login:function(e,t){return Gz(e,t)},user:function(e,t){return Bz(e,t)},message:function(e,t){return Vz(e,t)},currentConversationID:function(e,t){return Fz(e,t)},conversation:function(e,t){return Nz(e,t)},group:function(e,t){return Uz(e,t)}};function qz(e,t){if(1&e&&(Ks(0),za(1),Ys()),2&e){var n=ra(2);ho(1),La(n.nzText)}}function Wz(e,t){if(1&e&&(Ks(0),Ws(1,"span",2),Hs(2,"span",3),Us(3,qz,2,1,"ng-container",1),qs(),Ys()),2&e){var n=ra();ho(1),i=n.nzStatus||n.presetColor,Ea(gi,Ca,Fs(Kt(),"ant-badge-status-dot ant-badge-status-",i,""),!0),_a("background",!n.presetColor&&n.nzColor),js("ngStyle",n.nzStyle),ho(2),js("nzStringTemplateOutlet",n.nzText)}var i}function Kz(e,t){if(1&e&&Ws(0,"nz-badge-sup",5),2&e){var n=ra(2);js("nzOffset",n.nzOffset)("nzTitle",n.nzTitle)("nzStyle",n.nzStyle)("nzDot",n.nzDot)("nzOverflowCount",n.nzOverflowCount)("disableAnimation",!!(n.nzStandalone||n.nzStatus||n.nzColor))("nzCount",n.nzCount)}}function Yz(e,t){if(1&e&&(Ks(0),Us(1,Kz,1,7,"nz-badge-sup",4),Ys()),2&e){var n=ra();ho(1),js("ngIf",n.showSup)}}var $z=["*"];function Zz(e,t){if(1&e&&(Hs(0,"p",6),za(1),qs()),2&e){var n=t.$implicit,i=ra(2).index;ba("current",n===ra(2).countArray[i]),ho(1),Na(" ",n," ")}}function Xz(e,t){if(1&e&&(Ks(0),Us(1,Zz,2,3,"p",5),Ys()),2&e){var n=ra(3);ho(1),js("ngForOf",n.countSingleArray)}}function Jz(e,t){if(1&e&&(Hs(0,"span",3),Us(1,Xz,2,1,"ng-container",4),qs()),2&e){var n=t.index,i=ra(2);_a("transform","translateY("+100*-i.countArray[n]+"%)"),ho(1),js("ngIf",!i.nzDot&&void 0!==i.countArray[n])}}function Qz(e,t){if(1&e&&(Ks(0),Us(1,Jz,2,3,"span",2),Ys()),2&e){var n=ra();ho(1),js("ngForOf",n.maxNumberArray)}}function eL(e,t){1&e&&za(0),2&e&&Na("",ra().nzOverflowCount,"+")}var tL=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"],nL=function(){var e=function(){function e(t,n,i,r,o){b(this,e),this.nzConfigService=t,this.renderer=n,this.cdr=i,this.elementRef=r,this.directionality=o,this._nzModuleName="badge",this.showSup=!1,this.presetColor=null,this.dir="ltr",this.destroy$=new V,this.nzShowZero=!1,this.nzShowDot=!0,this.nzStandalone=!1,this.nzDot=!1,this.nzOverflowCount=99,this.nzColor=void 0,this.nzStyle=null,this.nzText=null,this.elementRef.nativeElement.classList.add("ant-badge")}return w(e,[{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.directionality.change)||void 0===e||e.pipe(ev(this.destroy$)).subscribe(function(e){t.dir=e,t.prepareBadgeForRtl(),t.cdr.detectChanges()}),this.dir=this.directionality.value,this.prepareBadgeForRtl()}},{key:"ngOnChanges",value:function(e){var t=e.nzColor,n=e.nzShowDot,i=e.nzDot,r=e.nzCount,o=e.nzShowZero;t&&(this.presetColor=this.nzColor&&-1!==tL.indexOf(this.nzColor)?this.nzColor:null),(n||i||r||o)&&(this.showSup=this.nzShowDot&&this.nzDot||this.nzCount>0||this.nzCount<=0&&this.nzShowZero)}},{key:"prepareBadgeForRtl",value:function(){this.isRtlLayout?this.renderer.addClass(this.elementRef.nativeElement,"ant-badge-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-badge-rtl")}},{key:"isRtlLayout",get:function(){return"rtl"===this.dir}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs($_),Vs(cu),Vs(xu),Vs(su),Vs(rm,8))},e.\u0275cmp=at({type:e,selectors:[["nz-badge"]],hostVars:4,hostBindings:function(e,t){2&e&&ba("ant-badge-status",t.nzStatus)("ant-badge-not-a-wrapper",!!(t.nzStandalone||t.nzStatus||t.nzColor))},inputs:{nzShowZero:"nzShowZero",nzShowDot:"nzShowDot",nzStandalone:"nzStandalone",nzDot:"nzDot",nzOverflowCount:"nzOverflowCount",nzColor:"nzColor",nzStyle:"nzStyle",nzText:"nzText",nzTitle:"nzTitle",nzStatus:"nzStatus",nzCount:"nzCount",nzOffset:"nzOffset"},exportAs:["nzBadge"],features:[It],ngContentSelectors:$z,decls:3,vars:2,consts:[[4,"ngIf"],[4,"nzStringTemplateOutlet"],[3,"ngStyle"],[1,"ant-badge-status-text"],[3,"nzOffset","nzTitle","nzStyle","nzDot","nzOverflowCount","disableAnimation","nzCount",4,"ngIf"],[3,"nzOffset","nzTitle","nzStyle","nzDot","nzOverflowCount","disableAnimation","nzCount"]],template:function(e,t){1&e&&(sa(),Us(0,Wz,4,7,"ng-container",0),aa(1),Us(2,Yz,2,1,"ng-container",1)),2&e&&(js("ngIf",t.nzStatus||t.nzColor),ho(2),js("nzStringTemplateOutlet",t.nzCount))},directives:function(){return[th,Iy,uh,iL]},encapsulation:2,data:{animation:[Tb]},changeDetection:0}),Oy([Sy(),Dy("design:type",Boolean)],e.prototype,"nzShowZero",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzShowDot",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzStandalone",void 0),Oy([Sy(),Dy("design:type",Object)],e.prototype,"nzDot",void 0),Oy([Z_(),Dy("design:type",Number)],e.prototype,"nzOverflowCount",void 0),Oy([Z_(),Dy("design:type",String)],e.prototype,"nzColor",void 0),e}(),iL=function(){var e=function(){function e(t){b(this,e),this.elementRef=t,this.nzStyle=null,this.nzDot=!1,this.nzOverflowCount=99,this.disableAnimation=!1,this.maxNumberArray=[],this.countArray=[],this.count=0,this.countSingleArray=[0,1,2,3,4,5,6,7,8,9],this.elementRef.nativeElement.classList.add("ant-scroll-number")}return w(e,[{key:"generateMaxNumberArray",value:function(){this.maxNumberArray=this.nzOverflowCount.toString().split("")}},{key:"ngOnInit",value:function(){this.generateMaxNumberArray()}},{key:"ngOnChanges",value:function(e){var t=e.nzOverflowCount,n=e.nzCount;n&&"number"==typeof n.currentValue&&(this.count=Math.max(0,n.currentValue),this.countArray=this.count.toString().split("").map(function(e){return+e})),t&&this.generateMaxNumberArray()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(su))},e.\u0275cmp=at({type:e,selectors:[["nz-badge-sup"]],hostVars:15,hostBindings:function(e,t){2&e&&(Ns("title",null===t.nzTitle?"":t.nzTitle||t.nzCount),Ua("@.disabled",t.disableAnimation)("@zoomBadgeMotion",void 0),Ea(Da,ka,t.nzStyle,!1),_a("right",t.nzOffset&&t.nzOffset[0]?-t.nzOffset[0]:null,"px")("margin-top",t.nzOffset&&t.nzOffset[1]?t.nzOffset[1]:null,"px"),ba("ant-badge-count",!t.nzDot)("ant-badge-dot",t.nzDot)("ant-badge-multiple-words",t.countArray.length>=2))},inputs:{nzStyle:"nzStyle",nzDot:"nzDot",nzOverflowCount:"nzOverflowCount",disableAnimation:"disableAnimation",nzOffset:"nzOffset",nzTitle:"nzTitle",nzCount:"nzCount"},exportAs:["nzBadgeSup"],features:[It],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["overflowTemplate",""],["class","ant-scroll-number-only",3,"transform",4,"ngFor","ngForOf"],[1,"ant-scroll-number-only"],[4,"ngIf"],["class","ant-scroll-number-only-unit",3,"current",4,"ngFor","ngForOf"],[1,"ant-scroll-number-only-unit"]],template:function(e,t){if(1&e&&(Us(0,Qz,2,1,"ng-container",0),Us(1,eL,1,1,"ng-template",null,1,Mc)),2&e){var n=Gs(2);js("ngIf",t.count<=t.nzOverflowCount)("ngIfElse",n)}},directives:[th,Ql],encapsulation:2,data:{animation:[Tb]},changeDetection:0}),e}(),rL=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,JT,My]]}),e}(),oL=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,rb,My,HT]]}),e}(),sL=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({imports:[[om,ph,jT,sy,DT,rb,My,cO,HT,kO]]}),e}(),aL=function(){var e=function(){function e(){b(this,e)}return w(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:Hw,useValue:t}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e}),e.\u0275inj=Ae({providers:[lR],imports:[[ph,sE,aE,VC,oD,kO,iO,LR,UO,jO,sL,FP,jT,rb,Bb,QA,rL,oL,ZO,hD,aR,hz,ow.forRoot(Hz,{runtimeChecks:{strictStateImmutability:!1,strictActionImmutability:!1,strictStateSerializability:!1,strictActionSerializability:!1}})]]}),e}();function uL(e,t){if(1&e&&Ws(0,"nz-option",5),2&e){var n=t.$implicit;js("nzLabel",n.label)("nzValue",n.value)}}var cL=function(){var e=function(){function e(t,n){b(this,e),this.fb=t,this.timHelperService=n,this.listOfUser=[];for(var i=[],r=0;r<10;r++)i.push({label:"user"+r,value:"user"+r});this.listOfUser=i}return w(e,[{key:"ngOnInit",value:function(){this.validateForm=this.fb.group({userName:[null,[eS.required]]})}},{key:"submitForm",value:function(){for(var e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity();this.timHelperService.login(this.validateForm.value.userName,qg(this.validateForm.value.userName).userSig)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(uE),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-login"]],decls:7,vars:3,consts:[["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["formControlName","userName"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],[3,"nzLabel","nzValue"]],template:function(e,t){1&e&&(Hs(0,"form",0),Qs("ngSubmit",function(){return t.submitForm()}),Hs(1,"nz-form-item"),Hs(2,"nz-form-control",1),Hs(3,"nz-select",2),Us(4,uL,1,2,"nz-option",3),qs(),qs(),qs(),Hs(5,"button",4),za(6,"\u767b\u5f55"),qs(),qs()),2&e&&(js("formGroup",t.validateForm),ho(4),js("ngForOf",t.listOfUser),ho(1),js("nzType","primary"))},directives:[YS,bS,RO,eE,rO,PO,oO,LO,WA,_S,nE,Ql,VT,LT,AT,jA],styles:[""]}),e}();function lL(e,t){1&e&&(Hs(0,"div",5),Ws(1,"app-login"),qs())}function hL(e,t){if(1&e){var n=$s();Hs(0,"div",6),Hs(1,"ngx-tencent-tim",7),Qs("hiddenWindowChange",function(e){return $t(n),ra().hidden=e})("message",function(e){return $t(n),ra().messageTip(e)}),qs(),qs()}if(2&e){var i=ra();ho(1),js("hiddenWindow",i.hidden)}}var fL,dL,pL,gL=function(){var e=function(){function e(t,n){b(this,e),this.message=t,this.timHelperService=n,this.isLogin=!1,this.hidden=!1}return w(e,[{key:"ngOnInit",value:function(){var e=this;this.timHelperService.login("user0",qg("user0").userSig),this.timHelperService.eventBus$.subscribe(function(t){"login"===t&&(e.isLogin=!0),"logout"===t&&(e.isLogin=!1)}),this.unread=this.timHelperService.totalUnRead}},{key:"messageTip",value:function(e){switch(e.type){case"success":this.message.success(e.message);break;case"error":this.message.error(e.message);break;case"warning":this.message.warning(e.message);break;case"info":this.message.info(e.message)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Vs(Vb),Vs($w))},e.\u0275cmp=at({type:e,selectors:[["app-im-test"]],decls:6,vars:6,consts:[[1,"container"],["class","login",4,"ngIf"],["class","tencent-im",4,"ngIf"],[1,"notice",3,"nzCount","click"],["nzIcon","user",3,"nzShape"],[1,"login"],[1,"tencent-im"],[3,"hiddenWindow","hiddenWindowChange","message"]],template:function(e,t){1&e&&(Hs(0,"div",0),Us(1,lL,2,0,"div",1),Us(2,hL,2,1,"div",2),qs(),Hs(3,"nz-badge",3),Qs("click",function(){return t.hidden=!t.hidden}),sc(4,"async"),Ws(5,"nz-avatar",4),qs()),2&e&&(ho(1),js("ngIf",!t.isLogin),ho(1),js("ngIf",t.isLogin),ho(1),js("nzCount",ac(4,4,t.unread)),ho(2),js("nzShape","square"))},directives:[th,nL,lD,cL,Lz],pipes:[dh],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh;flex-direction:row;flex-wrap:nowrap;align-content:center}.container[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.login[_ngcontent-%COMP%]{flex-direction:column;padding-top:100px}.login[_ngcontent-%COMP%]   app-login[_ngcontent-%COMP%]{width:300px}.notice[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px;cursor:pointer}"]}),e}(),vL=function(){var e=function e(){b(this,e),this.isLogin=!1};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=at({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&Ws(0,"app-im-test")},directives:[gL],styles:[""]}),e}(),mL=s(3644),yL=[];fL=s.n(mL)(),pL=void 0,"string"!=typeof(dL=void 0)&&(pL=dL,dL=fL[Ha.LocaleId]),dL=dL.toLowerCase().replace(/_/g,"-"),ja[dL]=fL,pL&&(ja[dL][Ha.ExtraData]=pL);var _L=function(){var e=function e(){b(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ht({type:e,bootstrap:[vL]}),e.\u0275inj=Ae({imports:[[Xh,z_,ST,sE,aE,UO,QA,jT,Bb,jT,hD,rL,aL.forRoot({level:4,sdkAppId:1400440675,minimized:!0}),yL,Bg]]}),e}();(function(){if(ul)throw new Error("Cannot enable prod mode after platform setup.");al=!1})(),$h().bootstrapModule(_L).catch(function(e){return console.error(e)})}},function(e){"use strict";e(e.s=8765)}])}();